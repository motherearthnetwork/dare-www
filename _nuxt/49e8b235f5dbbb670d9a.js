(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{613:function(t,e,n){var content=n(622);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(102).default)("75aa5965",content,!0,{sourceMap:!1})},614:function(t,e,n){var content=n(624);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(102).default)("64d420c4",content,!0,{sourceMap:!1})},615:function(t,e,n){var content=n(626);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(102).default)("bf1e68b8",content,!0,{sourceMap:!1})},616:function(t,e,n){var content=n(628);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(102).default)("f11982f6",content,!0,{sourceMap:!1})},621:function(t,e,n){"use strict";var o=n(613);n.n(o).a},622:function(t,e,n){(t.exports=n(101)(!1)).push([t.i,".ol-control button{background-color:#009}.map-holder{position:relative;padding:0}.map-holder #map{background-color:#f1f1f1;width:100%;height:100%}.map-holder #map.mobile{border-radius:25px;height:400px}.map-holder #map.tablet{height:500px}.map-holder #map .ol-touch .ol-control button{background-color:#009;border-radius:20px;float:left;margin-left:10px}.map-holder .map-holder__preview{padding:10px 20px}.map-holder .map-holder__preview .map-holder__preview-nav{width:100%}.map-holder .map-holder__preview .map-holder__preview-nav>a{width:33.33333%;text-align:center}.map-holder .map-holder__preview .map-holder__preview-nav>a.nuxt-link-active{color:#009}.map-holder .map-holder__preview .map-holder__preview-body>div{display:none;background-color:#f1f1f1;border-radius:25px;width:100%;padding:10px 15px;margin-top:10px}.map-holder .map-holder__preview .map-holder__preview-body>div.active{display:block}",""])},623:function(t,e,n){"use strict";var o=n(614);n.n(o).a},624:function(t,e,n){(t.exports=n(101)(!1)).push([t.i,".uk-box-shadow-medium{box-shadow:0 5px 15px rgba(0,0,0,.18)}.uk-icon-image{background-size:50px 50px;height:50px;width:50px}.uk-badge{padding:0}",""])},625:function(t,e,n){"use strict";var o=n(615);n.n(o).a},626:function(t,e,n){(t.exports=n(101)(!1)).push([t.i,".cardTodo label p{font-size:12px;margin:0 0 10px}.uk-list{margin:0}.uk-list>li,.uk-list>li>ul{margin-top:none}.uk-accordion-title:before{display:none}.uk-accordion-title{display:block;font-size:16px;line-height:1.4;color:#333;overflow:hidden}",""])},627:function(t,e,n){"use strict";var o=n(616);n.n(o).a},628:function(t,e,n){(t.exports=n(101)(!1)).push([t.i,"nav{background-color:#fbfbfb}nav .uk-icon-button{color:#fff}.uk-button-default,nav .uk-icon-button{background-color:none;border:2px solid #fd6400}.uk-button-default{color:#fd6400}.uk-modal-footer .rounded-bottom-20{border-radius:0 0 20px 20px}.information-modal,.uk-modal-dialog{border-radius:20px}.raboLogo{z-index:100}.uk-card-body.uk-navbar{padding-bottom:13px}.uk-navbar-item,.uk-navbar-nav>li>a,.uk-navbar-toggle{min-height:50px}",""])},641:function(t,e,n){"use strict";n.r(e);n(65);var o=n(16),r=n(46),c=n(228),l={props:{grid:!1,show:{type:Array,default:function(){return["header","body","footer","media"]}},mediaClasses:{type:Array,default:function(){return["uk-card-media"]}},headerClasses:{type:Array,default:function(){return[]}},bodyClasses:{type:Array,default:function(){return[]}},footerClasses:{type:Array,default:function(){return[]}}}},d=n(44),m=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$use.rambda.contains("header",t.show)?n("div",{class:t.headerClasses},[t._t("header")],2):t._e(),t.$use.rambda.contains("media",t.show)?n("div",{class:t.mediaClasses},[t._t("media")],2):t._e(),t.$use.rambda.contains("body",t.show)?n("div",{class:t.bodyClasses},[t._t("body")],2):t._e(),t.$use.rambda.contains("footer",t.show)?n("div",{class:t.footerClasses},[t._t("footer")],2):t._e()])},[],!1,null,null,null).exports,header=n(145),h=(n(42),n(640),n(250)),f={layout:"app",middleware:["auth","coin"],props:{coinActions:{type:Array,default:[]},startAction:{type:Object,default:null},lastAction:{type:Object,default:null}},computed:Object(r.a)({},Object(c.c)("coinActions",["latest"]),Object(c.d)("coins",{currentCoin:function(t){return t.currentCoin}}),Object(c.d)("map",{currentCenter:function(t){return t.currentCenter}})),data:function(){return{mapId:"map",map2d:null,features:null}},mounted:function(){this.map2d||this.initialize()},updated:function(){this.map2d&&(this.map2d.render(),this.map2d.updateSize())},methods:Object(r.a)({},Object(c.b)("coinActions",["loadCoinActions"]),{initialize:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("Started initializing ol-map..."),this.map2d=Object(h.e)({id:this.mapId,lat:52.1716415,lon:4.4154527,zoom:10}),this.map2d.on("moveend",function(){e.currentPage=1,e.startLoadingActions()}),t.next=5,this.$use.location.getGeolocation();case 5:t.sent,this.startLoadingActions();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),startLoadingActions:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(h.c)(this.map2d),this.loadCoinActions({map:this.map2d,page:this.currentPage,coin_id:this.currentCoin,latitude:52.1716415,longitude:4.4154527});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleMapClick:function(t){this.$emit("feature",t)}}),watch:{coinActions:function(t,e){t.length&&(console.info("Adding ".concat(t.length," markers to map: "),t),Object(h.a)(this.map2d,Object(h.f)(t))),this.$forceUpdate()},currentCenter:function(t){t&&Object(h.g)(this.map2d,{lat:parseFloat(t.lat),lon:parseFloat(t.lon)})}}},v=(n(621),Object(d.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("keep-alive",[n("div",{class:t.$mq,attrs:{id:t.mapId},nativeOn:{click:function(e){return t.handleMapClick(e)}}})])},[],!1,null,null,null).exports),k={props:{name:{type:String,default:"Task"},payoff:{type:String,default:"Payoff"},completed:{type:Boolean,default:!1}}},y=Object(d.a)(k,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("dt",[e("em",[this._v(this._s(this.name))])]),e("dd",[e("p",[this._v(this._s(this.payoff))])])])},[],!1,null,null,null).exports,x={props:{icon:{type:String,default:"/images/svg/icon-describe.svg"},enabled:{type:Boolean,default:!1},completed:{type:Boolean,default:!1}},data:function(){return{checked:!1}},methods:{handleInput:function(){this.$emit("checked",!this.completed)}},computed:{checkStyles:function(){return this.completed?null:"cursor: pointer;"}}},C=(n(623),{components:{cardTodo:m,raboTask:y,raboCheck:Object(d.a)(x,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"raboCheck uk-flex uk-flex-column uk-flex-middle",class:{enabled:"item-enabled",completed:"item-completed"},style:this.checkStyles},[e("span",{staticClass:"uk-icon uk-icon-image uk-inline",style:"background-image: url("+this.icon+");",on:{input:this.handleInput}},[e("span",{directives:[{name:"show",rawName:"v-show",value:this.completed,expression:"completed"}],staticClass:"uk-icon uk-badge uk-position-bottom-right",attrs:{"uk-icon":"icon: check; ratio: 0.75"}})])])},[],!1,null,null,null).exports},data:function(){return{coin:"",checklist:this.checklistItems,actCategory:"",description:"",deviceLocation:null}},mounted:function(){var t=this;this.$nextTick(function(){t.fetchOptions("actCategories")})},computed:Object(r.a)({},Object(c.d)("checklistTodos",{checklistItems:function(t){return t.items}}),Object(c.d)("selectOptions",{actCategories:function(t){return t.actCategories}}),Object(c.d)("coinActions",{coinActions:function(t){return t.actions}}),Object(c.d)("coins",{currentCoin:function(t){return t.currentCoin}})),methods:Object(r.a)({},Object(c.b)("coins",["claimCoin","unClaimCoin"]),Object(c.b)("coinActions",["registerAction","loadCoinActions"]),Object(c.b)("selectOptions",["fetchOptions"]),Object(c.b)("map",["setCenter"]),{getLocation:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$use.location.getGeolocation();case 2:e=t.sent,this.deviceLocation={lon:e.coords.longitude,lat:e.coords.latitude,acc:e.coords.accuracy};case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onSubmit:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this.getLocation();case 3:return t.next=5,this.registerAction({coin_id:this.currentCoin,latitude:this.deviceLocation.lat,longitude:this.deviceLocation.lon,description:this.description,action_category_id:this.actCategory});case 5:this.setCenter({lat:this.deviceLocation.lat,lon:this.deviceLocation.lon});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onUnclaim:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.unClaimCoin(this.currentCoin),this.$router.push("/");case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})}),body=(n(625),Object(d.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("card-todo",{staticClass:"cardTodo",attrs:{show:["body"],bodyClasses:["uk-card-body"],footerClasses:["uk-position-bottom"]},scopedSlots:t._u([{key:"body",fn:function(){return[n("ul",{staticClass:"uk-list rounded-20",attrs:{"uk-accordion":""}},t._l(t.checklistItems,function(e,o){return n("li",{key:e.id},[n("a",{staticClass:"uk-accordion-title",attrs:{href:"#"}},[n("div",{staticClass:"uk-flex uk-flex-around uk-margin-small-top uk-grid-small",attrs:{"uk-grid":""}},[n("rabo-task",{staticClass:"uk-width-expand",attrs:{name:e.title,payoff:e.description}}),n("rabo-check",{staticClass:"uk-width-auto",attrs:{completed:e.completed||!1,enabled:e.enabled||!1,icon:e.icon}})],1)]),n("div",{staticClass:"uk-accordion-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.completed&&"describe"===e.action,expression:"!item.completed && item.action === 'describe'"}]},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"uk-margin-small"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.actCategory,expression:"actCategory"}],staticClass:"uk-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.actCategory=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Select category")]),t._l(t.actCategories,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.label))])})],2)]),n("div",{staticClass:"uk-margin-small"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"uk-textarea",attrs:{rows:"5",placeholder:"Can you describe the pay it forward activity?",maxlength:"140"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}},[t._v('<p class="uk-text-small uk-text-muted uk-margin-small-top uk-text-center">Maximum of 140 characters</p>')]),n("button",{staticClass:"uk-margin-small-top uk-button uk-button-primary uk-width-1-1",on:{click:t.onSubmit}},[t._v("ADD DESCRIPTION")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"unclaim"===e.action,expression:"item.action === 'unclaim'"}]},[n("button",{staticClass:"uk-margin-small-top uk-button uk-button-primary uk-width-1-1",on:{click:t.onUnclaim}},[t._v(t._s(e.action))])])])])}),0)]},proxy:!0}])})},[],!1,null,null,null).exports),footer=n(312),w={layout:"app",middleware:["auth","coin"],components:{dareAppliance:m,dareHeader:header.a,dareMedia:v,dareBody:body,dareFooter:footer.a},data:function(){return{currentPage:1,selection:"map",lastHash:"",location:"",featureContent:{},featureId:"",mapId:"dareMap",map:null}},computed:Object(r.a)({},Object(c.d)("coinActions",{coinActions:function(t){return t.actions}}),Object(c.d)("coins",{currentCoin:function(t){return t.currentCoin}}),Object(c.d)("selectOptions",{actCategories:function(t){return t.actCategories}}),{mapClass:function(){return"uk-card uk-card-hover uk-width-1-1 uk-box-shadow-medium"},dareAction:function(){return this.$use.rambda.take(1,this.coinActions)}}),methods:{getLocation:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$use.location.getGeolocation();case 2:e=t.sent,this.location=e;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleFeature:function(t){console.log("SENT FEATURE",t)},handleStep:function(t){console.log("NEW STEP",t)},handleMapClick:function(i){var map=this.map,t="";map.on("click",function(e){var n=map.forEachFeatureAtPixel(e.pixel,function(e){return this.$emit("HOLDING FEATURE",t),e});this.feature=n,t=this.feature,console.log("HOLDING FEATURE",t)}),this.feature=t,console.log("CHECKING FEATURE",t),this.$emit("feature",this.feature)}},mounted:function(){this.getLocation()}},_=(n(627),Object(d.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dare-appliance",{staticClass:"uk-card uk-card-small",scopedSlots:t._u([{key:"header",fn:function(){},proxy:!0},{key:"media",fn:function(){return[n("dare-media",{staticClass:"rounded-15 uk-padding-small uk-padding-remove-top",attrs:{coinActions:t.coinActions}})]},proxy:!0},{key:"body",fn:function(){return[n("dare-body",{attrs:{"uk-height-viewport":"expand: true",lastHash:t.lastHash}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}])})},[],!1,null,null,null));e.default=_.exports}}]);