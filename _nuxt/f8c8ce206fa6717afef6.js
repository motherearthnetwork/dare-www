/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],[function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return m}),n.d(e,"g",function(){return y}),n.d(e,"h",function(){return v}),n.d(e,"i",function(){return _}),n.d(e,"j",function(){return x}),n.d(e,"k",function(){return w}),n.d(e,"l",function(){return E}),n.d(e,"m",function(){return C}),n.d(e,"n",function(){return O}),n.d(e,"o",function(){return S}),n.d(e,"p",function(){return I}),n.d(e,"q",function(){return T}),n.d(e,"r",function(){return P}),n.d(e,"s",function(){return L}),n.d(e,"t",function(){return N}),n.d(e,"u",function(){return j}),n.d(e,"v",function(){return D}),n.d(e,"w",function(){return A}),n.d(e,"x",function(){return F}),n.d(e,"y",function(){return k}),n.d(e,"z",function(){return G}),n.d(e,"A",function(){return B}),n.d(e,"B",function(){return z}),n.d(e,"C",function(){return U}),n.d(e,"D",function(){return V}),n.d(e,"E",function(){return Y}),n.d(e,"F",function(){return X}),n.d(e,"H",function(){return W}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return $}),n.d(e,"G",function(){return K}),n.d(e,"a",function(){return Z});var r=n(12),o=n(129),c=n(49);function l(t){for(var e=x(),i=0,n=t.length;i<n;++i)P(e,t[i]);return e}function h(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function f(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function d(t,e,n){var r,o;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(o=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*o}function m(t,e){return v(t,e[0],e[1])}function y(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function v(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function _(t,e){var n=t[0],r=t[1],o=t[2],l=t[3],h=e[0],f=e[1],d=c.a.UNKNOWN;return h<n?d|=c.a.LEFT:h>o&&(d|=c.a.RIGHT),f<r?d|=c.a.BELOW:f>l&&(d|=c.a.ABOVE),d===c.a.UNKNOWN&&(d=c.a.INTERSECTING),d}function x(){return[1/0,1/0,-1/0,-1/0]}function w(t,e,n,r,o){return o?(o[0]=t,o[1]=e,o[2]=n,o[3]=r,o):[t,e,n,r]}function E(t){return w(1/0,1/0,-1/0,-1/0,t)}function C(t,e){var n=t[0],r=t[1];return w(n,r,n,r,e)}function O(t,e){return R(E(e),t)}function S(t,e,n,r,o){return L(E(o),t,e,n,r)}function I(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function T(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function P(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function R(t,e){for(var i=0,n=e.length;i<n;++i)P(t,e[i]);return t}function L(t,e,n,r,o){for(;n<r;n+=o)M(t,e[n],e[n+1]);return t}function M(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function N(t,e,n){var r;return(r=e.call(n,D(t)))?r:(r=e.call(n,A(t)))?r:(r=e.call(n,V(t)))?r:(r=e.call(n,U(t)))||!1}function j(t){var area=0;return W(t)||(area=Y(t)*B(t)),area}function D(t){return[t[0],t[1]]}function A(t){return[t[2],t[1]]}function F(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function k(t,e){var n;return e===o.a.BOTTOM_LEFT?n=D(t):e===o.a.BOTTOM_RIGHT?n=A(t):e===o.a.TOP_LEFT?n=U(t):e===o.a.TOP_RIGHT?n=V(t):Object(r.a)(!1,13),n}function G(t,e,n,r,o){var c=e*r[0]/2,l=e*r[1]/2,h=Math.cos(n),f=Math.sin(n),d=c*h,m=c*f,y=l*h,v=l*f,_=t[0],x=t[1],E=_-d+v,C=_-d-v,O=_+d-v,S=_+d+v,I=x-m-y,T=x-m+y,P=x+m+y,R=x+m-y;return w(Math.min(E,C,O,S),Math.min(I,T,P,R),Math.max(E,C,O,S),Math.max(I,T,P,R),o)}function B(t){return t[3]-t[1]}function z(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return X(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):E(r),r}function U(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function Y(t){return t[2]-t[0]}function X(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function W(t){return t[2]<t[0]||t[3]<t[1]}function H(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function $(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function K(t,e,n){var r=!1,o=_(t,e),l=_(t,n);if(o===c.a.INTERSECTING||l===c.a.INTERSECTING)r=!0;else{var h,f,d=t[0],m=t[1],y=t[2],v=t[3],x=e[0],w=e[1],E=n[0],C=n[1],O=(C-w)/(E-x);l&c.a.ABOVE&&!(o&c.a.ABOVE)&&(r=(h=E-(C-v)/O)>=d&&h<=y),r||!(l&c.a.RIGHT)||o&c.a.RIGHT||(r=(f=C-(E-y)*O)>=m&&f<=v),r||!(l&c.a.BELOW)||o&c.a.BELOW||(r=(h=E-(C-m)/O)>=d&&h<=y),r||!(l&c.a.LEFT)||o&c.a.LEFT||(r=(f=C-(E-d)*O)>=m&&f<=v)}return r}function Z(t,e,n){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,n){return w(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return m}),n.d(e,"e",function(){return y}),n.d(e,"d",function(){return v});var r=n(8);function o(t,e,n,r){for(var o,i=0,c=t.length;i<c;++i)if((o=t[i]).listener===e&&o.bindTo===n)return r&&(o.deleteIndex=i),o}function c(t,e){var n=l(t);return n?n[e]:void 0}function l(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function h(t,e){var n=c(t,e);if(n){for(var i=0,o=n.length;i<o;++i)t.removeEventListener(e,n[i].boundListener),Object(r.b)(n[i]);n.length=0;var h=l(t);h&&(delete h[e],0===Object.keys(h).length&&function(t){delete t.ol_lm}(t))}}function f(t,e,n,r,c){var h=l(t,!0),f=h[e];f||(f=h[e]=[]);var d=o(f,n,r,!1);return d?c||(d.callOnce=!1):(d={bindTo:r,callOnce:!!c,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,r=t.bindTo||t.target;return t.callOnce&&y(t),n.call(r,e)};return t.boundListener=e,e}(d)),f.push(d)),d}function d(t,e,n,r){return f(t,e,n,r,!0)}function m(t,e,n,r){var l=c(t,e);if(l){var h=o(l,n,r,!0);h&&y(h)}}function y(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=c(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&h(t.target,t.type)}Object(r.b)(t)}}function v(t){var e=l(t);if(e)for(var n in e)h(t,n)}},function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return l});var o=0;function c(t){return t.ol_uid||(t.ol_uid=String(++o))}var l="5.3.2"},function(t,e,n){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,n){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,n){"use strict";n.r(e);var r=n(168),o=n(0),c=n(9),l=n(35),h=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};h.prototype.canWrapX=function(){return this.canWrapX_},h.prototype.getCode=function(){return this.code_},h.prototype.getExtent=function(){return this.extent_},h.prototype.getUnits=function(){return this.units_},h.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||l.a[this.units_]},h.prototype.getWorldExtent=function(){return this.worldExtent_},h.prototype.getAxisOrientation=function(){return this.axisOrientation_},h.prototype.isGlobal=function(){return this.global_},h.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},h.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},h.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},h.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},h.prototype.setWorldExtent=function(t){this.worldExtent_=t},h.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},h.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var f=h,d=6378137,m=Math.PI*d,y=[-m,-m,m,m],v=[-180,-85,180,85],_=function(t){function e(code){t.call(this,{code:code,units:l.b.METERS,extent:y,global:!0,worldExtent:v,getPointResolution:function(t,e){return t/Object(c.b)(e[1]/d)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f),x=[new _("EPSG:3857"),new _("EPSG:102100"),new _("EPSG:102113"),new _("EPSG:900913"),new _("urn:ogc:def:crs:EPSG:6.18:3:3857"),new _("urn:ogc:def:crs:EPSG::3857"),new _("http://www.opengis.net/gml/srs/epsg.xml#3857")];function w(input,t,e){var n=input.length,r=e>1?e:2,output=t;void 0===output&&(output=r>2?input.slice():new Array(n));for(var o=m,i=0;i<n;i+=r){output[i]=o*input[i]/180;var c=d*Math.log(Math.tan(Math.PI*(input[i+1]+90)/360));c>o?c=o:c<-o&&(c=-o),output[i+1]=c}return output}function E(input,t,e){var n=input.length,r=e>1?e:2,output=t;void 0===output&&(output=r>2?input.slice():new Array(n));for(var i=0;i<n;i+=r)output[i]=180*input[i]/m,output[i+1]=360*Math.atan(Math.exp(input[i+1]/d))/Math.PI-90;return output}var C=[-180,-90,180,90],O=6378137*Math.PI/180,S=function(t){function e(code,e){t.call(this,{code:code,units:l.b.DEGREES,extent:C,axisOrientation:e,global:!0,metersPerUnit:O,worldExtent:C})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f),I=[new S("CRS:84"),new S("EPSG:4326","neu"),new S("urn:ogc:def:crs:EPSG::4326","neu"),new S("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new S("urn:ogc:def:crs:OGC:1.3:CRS84"),new S("urn:ogc:def:crs:OGC:2:84"),new S("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new S("urn:x-ogc:def:crs:EPSG:4326","neu")],T={};n(8);var P={};function R(source,t,e){var n=source.getCode(),r=t.getCode();n in P||(P[n]={}),P[n][r]=e}function L(input,t,e){var output;if(void 0!==t){for(var i=0,n=input.length;i<n;++i)t[i]=input[i];output=t}else output=input.slice();return output}function M(input,t,e){if(void 0!==t&&input!==t){for(var i=0,n=input.length;i<n;++i)t[i]=input[i];input=t}return input}function N(t){!function(code,t){T[code]=t}(t.getCode(),t),R(t,t,L)}function j(t){t.forEach(N)}function D(t){return"string"==typeof t?T[t]||null:t||null}function A(t,e,n,o){var c,h=(t=D(t)).getPointResolutionFunc();if(h)c=h(e,n);else if(t.getUnits()==l.b.DEGREES&&!o||o==l.b.DEGREES)c=e;else{var f=W(t,D("EPSG:4326")),d=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];d=f(d,d,2),c=(Object(r.a)(d.slice(0,2),d.slice(2,4))+Object(r.a)(d.slice(4,6),d.slice(6,8)))/2;var m=o?l.a[o]:t.getMetersPerUnit();void 0!==m&&(c/=m)}return c}function F(t){j(t),t.forEach(function(source){t.forEach(function(t){source!==t&&R(source,t,L)})})}function k(t,e,n,r){t.forEach(function(t){e.forEach(function(e){R(t,e,n),R(e,t,r)})})}function G(){T={},P={}}function B(t,e){return t?"string"==typeof t?D(t):t:D(e)}function z(t){return function(input,e,n){for(var r=input.length,o=void 0!==n?n:2,output=void 0!==e?e:new Array(r),i=0;i<r;i+=o){var c=t([input[i],input[i+1]]);output[i]=c[0],output[i+1]=c[1];for(var l=o-1;l>=2;--l)output[i+l]=input[i+l]}return output}}function U(source,t,e,n){var r=D(source),o=D(t);R(r,o,z(e)),R(o,r,z(n))}function V(t,e){return $(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Y(t,e){var n=$(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=Object(c.d)(r+180,360)-180),n}function X(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:W(t,e)===L&&n}function W(t,e){var n=function(t,e){var n;return t in P&&e in P[t]&&(n=P[t][e]),n}(t.getCode(),e.getCode());return n||(n=M),n}function H(source,t){return W(D(source),D(t))}function $(t,source,e){return H(source,e)(t,void 0,t.length)}function K(t,source,e){var n=H(source,e);return Object(o.a)(t,n)}function Z(t,e,n){return W(e,n)(t)}function J(){F(x),F(I),k(I,x,w,E)}n.d(e,"cloneTransform",function(){return L}),n.d(e,"identityTransform",function(){return M}),n.d(e,"addProjection",function(){return N}),n.d(e,"addProjections",function(){return j}),n.d(e,"get",function(){return D}),n.d(e,"getPointResolution",function(){return A}),n.d(e,"addEquivalentProjections",function(){return F}),n.d(e,"addEquivalentTransforms",function(){return k}),n.d(e,"clearAllProjections",function(){return G}),n.d(e,"createProjection",function(){return B}),n.d(e,"createTransformFromCoordinateTransform",function(){return z}),n.d(e,"addCoordinateTransforms",function(){return U}),n.d(e,"fromLonLat",function(){return V}),n.d(e,"toLonLat",function(){return Y}),n.d(e,"equivalent",function(){return X}),n.d(e,"getTransformFromProjections",function(){return W}),n.d(e,"getTransform",function(){return H}),n.d(e,"transform",function(){return $}),n.d(e,"transformExtent",function(){return K}),n.d(e,"transformWithProjections",function(){return Z}),n.d(e,"addCommon",function(){return J}),n.d(e,"METERS_PER_UNIT",function(){return l.a}),n.d(e,"Projection",function(){return f}),J()},function(t,e,n){"use strict";n.d(e,"c",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return v}),n.d(e,"g",function(){return _}),n.d(e,"i",function(){return x}),n.d(e,"k",function(){return w}),n.d(e,"l",function(){return E}),n.d(e,"m",function(){return C}),n.d(e,"j",function(){return O}),n.d(e,"h",function(){return S}),n.d(e,"o",function(){return I}),n.d(e,"a",function(){return L}),n.d(e,"p",function(){return j}),n.d(e,"q",function(){return D}),n.d(e,"s",function(){return A}),n.d(e,"r",function(){return F}),n.d(e,"n",function(){return k});var r=n(25),o=n(13),c=n(8),l=n(213),h=n(14),f="10px sans-serif",d=[0,0,0,1],m="round",y=[],v=0,_="round",x=10,w=[0,0,0,1],E="center",C="middle",O=[0,0,0,0],S=1,I=new l.a,T={},P=null,R={},L=function(){var t,e,n=60,o=T,l="32px ",h=["monospace","serif"],f=h.length,text="wmytzilWMYTZIL@#/&?$%10";function d(t){for(var n=M(),r=100;r<=700;r+=300){for(var o=r+" ",c=!0,i=0;i<f;++i){var d=h[i];if(n.font=o+l+d,e=n.measureText(text).width,t!=d){n.font=o+l+t+","+d;var m=n.measureText(text).width;c=c&&m!=e}}if(c)return!0}return!1}function m(){var e=!0;for(var r in o)o[r]<n&&(d(r)?(o[r]=n,Object(c.b)(R),P=null,I.clear()):(++o[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var c=Object(r.g)(e);if(c)for(var i=0,l=c.length;i<l;++i){var h=c[i];h in o||(o[h]=n,d(h)||(o[h]=0,void 0===t&&(t=setInterval(m,32))))}}}();function M(){return P||(P=Object(o.a)(1,1)),P}var span,N,j=(N=R,function(t){var e=N[t];return null==e&&(span||((span=document.createElement("span")).textContent="M",span.style.margin=span.style.padding="0 !important",span.style.position="absolute !important",span.style.left="-99999px !important"),span.style.font=t,document.body.appendChild(span),e=N[t]=span.offsetHeight,document.body.removeChild(span)),e});function D(t,text){var e=M();return t!=e.font&&(e.font=t),e.measureText(text).width}function A(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))}var F=Object(h.c)();function k(t,e,n,image,r,o,c,l,h,f,d){var m;1!=n&&(m=t.globalAlpha,t.globalAlpha=m*n),e&&t.setTransform.apply(t,e),t.drawImage(image,r,o,c,l,h,f,c*d,l*d),m&&(t.globalAlpha=m),e&&t.setTransform.apply(t,F)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l});var r="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(t),i=1,r=arguments.length;i<r;++i){var source=n[i];if(null!=source)for(var o in source)source.hasOwnProperty(o)&&(output[o]=source[o])}return output};function o(object){for(var t in object)delete object[t]}function c(object){var t=[];for(var e in object)t.push(object[e]);return t}function l(object){var t;for(t in object)return!1;return!t}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"c",function(){return y});n(12);function r(t,e,n){return Math.min(Math.max(t,e),n)}var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function c(t,e,n,r,o,c){var h=o-n,f=c-r;if(0!==h||0!==f){var d=((t-n)*h+(e-r)*f)/(h*h+f*f);d>1?(n=o,r=c):d>0&&(n+=h*d,r+=f*d)}return l(t,e,n,r)}function l(t,e,n,r){var o=n-t,c=r-e;return o*o+c*c}function h(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var c=Math.abs(t[o][i]);c>r&&(r=c,n=o)}if(0===r)return null;var l=t[n];t[n]=t[i],t[i]=l;for(var h=i+1;h<e;h++)for(var f=-t[h][i]/t[i][i],d=i;d<e+1;d++)i==d?t[h][d]=0:t[h][d]+=f*t[i][d]}for(var m=new Array(e),y=e-1;y>=0;y--){m[y]=t[y][e]/t[y][y];for(var v=y-1;v>=0;v--)t[v][e]-=t[v][y]*m[y]}return m}function f(t){return 180*t/Math.PI}function d(t){return t*Math.PI/180}function m(a,b){var t=a%b;return t*b<0?t+b:t}function y(a,b,t){return a+t*(b-a)}},,function(t,e,n){"use strict";function r(t,e,n){for(var r,c,l=n||o,h=0,f=t.length,d=!1;h<f;)(c=+l(t[r=h+(f-h>>1)],e))<0?h=r+1:(f=r,d=!c);return d?h:~h}function o(a,b){return a>b?1:a<b?-1:0}function c(t,e){return t.indexOf(e)>=0}function l(t,e,n){var i,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function h(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function f(t,data){for(var e=Array.isArray(data)?data:[data],n=e.length,i=0;i<n;i++)t[t.length]=e[i]}function d(t,e){var i=t.indexOf(e),n=i>-1;return n&&t.splice(i,1),n}function m(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null}function y(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function v(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(a,b){return e(a.value,b.value)||a.index-b.index}),i=0;i<t.length;i++)t[i]=r[i].value}function _(t,e){var n;return!t.every(function(r,o){return n=o,!e(r,o,t)})?n:-1}function x(t,e,n){var r=e||o;return t.every(function(e,o){if(0===o)return!0;var c=r(t[o-1],e);return!(c>0||n&&0===c)})}n.d(e,"a",function(){return r}),n.d(e,"i",function(){return o}),n.d(e,"f",function(){return c}),n.d(e,"h",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"j",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"b",function(){return y}),n.d(e,"l",function(){return v}),n.d(e,"e",function(){return _}),n.d(e,"g",function(){return x})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(207);function o(t,e){if(!t)throw new r.a(e)}},function(t,e,n){"use strict";function r(t,e){var canvas=document.createElement("canvas");return t&&(canvas.width=t),e&&(canvas.height=e),canvas.getContext("2d")}function o(element){var t=element.offsetWidth,style=getComputedStyle(element);return t+=parseInt(style.marginLeft,10)+parseInt(style.marginRight,10)}function c(element){var t=element.offsetHeight,style=getComputedStyle(element);return t+=parseInt(style.marginTop,10)+parseInt(style.marginBottom,10)}function l(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function h(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function f(t){for(;t.lastChild;)t.removeChild(t.lastChild)}n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return f})},function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"g",function(){return d}),n.d(e,"a",function(){return m}),n.d(e,"f",function(){return y}),n.d(e,"h",function(){return v}),n.d(e,"b",function(){return _}),n.d(e,"d",function(){return x});var r=n(12),o=new Array(6);function c(){return[1,0,0,1,0,0]}function l(t){return f(t,1,0,0,1,0,0)}function h(t,e){var n=t[0],r=t[1],o=t[2],c=t[3],l=t[4],h=t[5],f=e[0],d=e[1],m=e[2],y=e[3],v=e[4],_=e[5];return t[0]=n*f+o*d,t[1]=r*f+c*d,t[2]=n*m+o*y,t[3]=r*m+c*y,t[4]=n*v+o*_+l,t[5]=r*v+c*_+h,t}function f(t,a,b,e,n,r,o){return t[0]=a,t[1]=b,t[2]=e,t[3]=n,t[4]=r,t[5]=o,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function m(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function y(t,e,n){return h(t,f(o,e,0,0,n,0,0))}function v(t,e,n){return h(t,f(o,1,0,0,1,e,n))}function _(t,e,n,r,o,c,l,h){var f=Math.sin(c),d=Math.cos(c);return t[0]=r*d,t[1]=o*f,t[2]=-r*f,t[3]=o*d,t[4]=l*r*d-h*r*f+e,t[5]=l*o*f+h*o*d+n,t}function x(t){var e,n=(e=t)[0]*e[3]-e[1]*e[2];Object(r.a)(0!==n,32);var a=t[0],b=t[1],o=t[2],c=t[3],l=t[4],h=t[5];return t[0]=c/n,t[1]=-b/n,t[2]=-o/n,t[3]=a/n,t[4]=(o*h-c*l)/n,t[5]=-(a*h-b*l)/n,t}},,,function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return h}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"i",function(){return y});n(9),n(123);function r(t,e){return t[0]+=e[0],t[1]+=e[1],t}function o(t,circle){var e=circle.getRadius(),n=circle.getCenter(),r=n[0],o=n[1],c=t[0]-r,l=t[1]-o;0===c&&0===l&&(c=1);var h=Math.sqrt(c*c+l*l);return[r+e*c/h,o+e*l/h]}function c(t,e){var n,r,o=t[0],c=t[1],l=e[0],h=e[1],f=l[0],d=l[1],m=h[0],y=h[1],v=m-f,_=y-d,x=0===v&&0===_?0:(v*(o-f)+_*(c-d))/(v*v+_*_||0);return x<=0?(n=f,r=d):x>=1?(n=m,r=y):(n=f+x*v,r=d+x*_),[n,r]}function l(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function h(t,e){var n=Math.cos(e),r=Math.sin(e),o=t[0]*n-t[1]*r,c=t[1]*n+t[0]*r;return t[0]=o,t[1]=c,t}function f(t,e){return t[0]*=e,t[1]*=e,t}function d(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function m(t,e){return Math.sqrt(d(t,e))}function y(t,e){return d(t,c(t,e))}},function(t,e,n){"use strict";function r(){return!0}function o(){return!1}function c(){}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return c})},function(t,e,n){"use strict";n.d(e,"b",function(){return y});var r=n(2),o=n(82),c=n(132),l=n(26),h=n(8),f=function(t){function e(e,n,r){t.call(this,e),this.key=n,this.oldValue=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a),d=function(t){function e(e){t.call(this),Object(r.c)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(h.a)({},this.values_)},e.prototype.notify=function(t,e){var n;n=y(t),this.dispatchEvent(new f(n,t,e)),n=o.a.PROPERTYCHANGE,this.dispatchEvent(new f(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(c.a),m={};function y(t){return m.hasOwnProperty(t)?m[t]:m[t]="change:"+t}e.a=d},function(t,e,n){"use strict";var r=n(4);e.a={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},,function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"c",function(){return m}),n.d(e,"e",function(){return y}),n.d(e,"g",function(){return v}),n.d(e,"i",function(){return _}),n.d(e,"l",function(){return x}),n.d(e,"h",function(){return w}),n.d(e,"k",function(){return E}),n.d(e,"m",function(){return C}),n.d(e,"f",function(){return O}),n.d(e,"j",function(){return S});var r=n(21),o=n(12),c=n(19),l=n(33),h=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},f=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},d=function(t){return t.target.getTargetElement()===document.activeElement},m=c.b,y=function(t){var e=t.originalEvent;return 0==e.button&&!(l.i&&l.d&&e.ctrlKey)},v=c.a,_=function(t){return"pointermove"==t.type},x=function(t){return t.type==r.a.SINGLECLICK},w=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},E=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},C=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},O=function(t){var e=t.pointerEvent;return Object(o.a)(void 0!==e,56),"mouse"==e.pointerType},S=function(t){var e=t.pointerEvent;return Object(o.a)(void 0!==e,56),e.isPrimary&&0===e.button}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"g",function(){return m});var style,r,o="ol-hidden",c="ol-selectable",l="ol-unselectable",h="ol-unsupported",f="ol-control",d="ol-collapsed",m=(r={},function(t){if(style||(style=document.createElement("div").style),!(t in r)){style.font=t;var e=style.fontFamily;if(style.font="",!e)return null;r[t]=e.split(/,\s?/)}return r[t]})},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=function(t){this.propagationStopped,this.type=t,this.target=null};function o(t){t.stopPropagation()}r.prototype.preventDefault=function(){this.propagationStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=r},,function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return v}),n.d(e,"g",function(){return _});var r=n(20),o=n(36),c=n(126),l=n(9),h=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(c.a.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(c.a.ACTIVE,t)},e.prototype.setMap=function(map){this.map_=map},e}(r.a);function f(view,t,e){var n=view.getCenter();if(n){var r=view.constrainCenter([n[0]+t[0],n[1]+t[1]]);e?view.animate({duration:e,easing:o.d,center:r}):view.setCenter(r)}}function d(view,t,e,n){t=view.constrainRotation(t,0),m(view,t,e,n)}function m(view,t,e,n){if(void 0!==t){var r=view.getRotation(),c=view.getCenter();void 0!==r&&c&&n>0?view.animate({rotation:t,anchor:e,duration:n,easing:o.b}):view.rotate(t,e)}}function y(view,t,e,n,r){t=view.constrainResolution(t,0,r),_(view,t,e,n)}function v(view,t,e,n){var r=view.getResolution(),o=view.constrainResolution(r,t,0);if(void 0!==o){var c=view.getResolutions();o=Object(l.a)(o,view.getMinResolution()||c[c.length-1],view.getMaxResolution()||c[0])}if(e&&void 0!==o&&o!==r){var h=view.getCenter(),f=view.calculateCenterZoom(o,e);f=view.constrainCenter(f),e=[(o*h[0]-r*f[0])/(o-r),(o*h[1]-r*f[1])/(o-r)]}_(view,o,e,n)}function _(view,t,e,n){if(t){var r=view.getResolution(),c=view.getCenter();if(void 0!==r&&c&&t!==r&&n)view.animate({resolution:t,anchor:e,duration:n,easing:o.b});else{if(e){var l=view.calculateCenterZoom(t,e);view.setCenter(l)}view.setResolution(t)}}}e.a=h},function(t,e,n){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,n){"use strict";function r(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function o(t,e,n){return t+"/"+e+"/"+n}function c(t){return o(t[0],t[1],t[2])}function l(t){return t.split("/").map(Number)}function h(t){return(t[1]<<t[0])+t[2]}function f(t){var i,e,n=t[0],r=new Array(n),mask=1<<n-1;for(i=0;i<n;++i)e=48,t[1]&mask&&(e+=1),t[2]&mask&&(e+=2),r[i]=String.fromCharCode(e),mask>>=1;return r.join("")}function d(t,e){var n=t[0],r=t[1],o=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var c,l=e.getExtent();return!(c=l?e.getTileRangeForExtentAndZ(l,n):e.getFullTileRange(n))||c.containsXY(r,o)}n.d(e,"a",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return f}),n.d(e,"g",function(){return d})},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n}function o(t){return t[0]>0&&t[1]>0}function c(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function l(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l})},function(t,e,n){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"i",function(){return l}),n.d(e,"d",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"h",function(){return m}),n.d(e,"f",function(){return y}),n.d(e,"e",function(){return v});var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==r.indexOf("firefox"),c=-1!==r.indexOf("safari")&&-1==r.indexOf("chrom"),l=-1!==r.indexOf("webkit")&&-1==r.indexOf("edge"),h=-1!==r.indexOf("macintosh"),f=window.devicePixelRatio||1,d=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),m=(navigator,"ontouchstart"in window),y="PointerEvent"in window,v=!!navigator.msPointerEnabled},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},o={};o[r.DEGREES]=2*Math.PI*6370997/360,o[r.FEET]=.3048,o[r.METERS]=1,o[r.USFEET]=1200/3937,e.b=r},function(t,e,n){"use strict";function r(t){return Math.pow(t,3)}function o(t){return 1-r(1-t)}function c(t){return 3*t*t-2*t*t*t}function l(t){return t}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l})},function(t,e,n){"use strict";var r=n(207),o=n(34),c=n(20),l=n(26),h="length",f=function(t){function e(e,n){t.call(this,e),this.element=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a),d=function(t){function e(e,n){t.call(this);var r=n||{};if(this.unique_=!!r.unique,this.array_=e||[],this.unique_)for(var i=0,o=this.array_.length;i<o;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var i=0,e=t.length;i<e;++i)this.push(t[i]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(h)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new f(o.a.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new f(o.a.REMOVE,e)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new f(o.a.REMOVE,r)),this.dispatchEvent(new f(o.a.ADD,e))}else{for(var c=n;c<t;++c)this.insertAt(c,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(h,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new r.a(58)},e}(c.a);e.a=d},function(t,e,n){"use strict";var r=n(11),o=n(0),c=n(32),l=n(3),h=n(51),f=n(149),d=n(69),m=n(59),y=n(61),v=n(79),_=function(t){function e(e,n){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.getArea=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(y.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(v.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,c.a.XY)},e.prototype.getType=function(){return l.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(m.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a),x=n(47),w=n(168),E=n(84),C=n(210),O=n(109),S=n(116),I=n(9);n.d(e,"a",function(){return P}),n.d(e,"d",function(){return R}),n.d(e,"c",function(){return L}),n.d(e,"e",function(){return M});var T=function(t){function e(e,n,r){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==n&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(E.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(f.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(S.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(y.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(o.x)(this.getExtent());this.flatInteriorPoint_=Object(C.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new x.a(this.getFlatInteriorPoint(),c.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new _(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],o=0,i=0,c=n.length;i<c;++i){var l=n[i],h=new _(e.slice(o,l),t);r.push(h),o=l}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(S.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(S.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(v.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,c.a.XY,r)},e.prototype.getType=function(){return l.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(O.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(m.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(h.a);e.b=T;function P(t,e,n,o){for(var l=n||32,h=[],i=0;i<l;++i)Object(r.c)(h,Object(w.b)(t,e,2*Math.PI*i/l,o));return h.push(h[0],h[1]),new T(h,c.a.XY,[h.length])}function R(t){var e=t[0],n=t[1],r=t[2],o=t[3],l=[e,n,e,o,r,o,r,n,e,n];return new T(l,c.a.XY,[l.length])}function L(circle,t,e){for(var n=t||32,r=circle.getStride(),o=circle.getLayout(),c=circle.getCenter(),l=r*(n+1),h=new Array(l),i=0;i<l;i+=r){h[i]=0,h[i+1]=0;for(var f=2;f<r;f++)h[i+f]=c[f]}var d=[h.length],polygon=new T(h,o,d);return M(polygon,c,circle.getRadius(),e),polygon}function M(polygon,t,e,n){for(var r=polygon.getFlatCoordinates(),o=polygon.getStride(),c=r.length/o-1,l=n||0,i=0;i<=c;++i){var h=i*o,f=l+2*Object(I.d)(i,c)*Math.PI/c;r[h]=t[0]+e*Math.cos(f),r[h+1]=t[1]+e*Math.sin(f)}polygon.changed()}},function(t,e,n){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,n){"use strict";n.d(e,"d",function(){return m}),n.d(e,"e",function(){return y}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return x}),n.d(e,"c",function(){return w});var r=n(100),o=n(31),c=n(0),l=n(129),h=n(6),f=n(35),d=n(122);function m(t){var e=t.getDefaultTileGrid();return e||(e=x(t),t.setDefaultTileGrid(e)),e}function y(t,e,n){var r=e[0],o=t.getTileCoordCenter(e),l=w(n);if(Object(c.f)(l,o))return e;var h=Object(c.E)(l),f=Math.ceil((l[0]-o[0])/h);return o[0]+=h*f,t.getTileCoordForCoordAndZ(o,r)}function v(t){var e=t||{},n=e.extent||Object(h.get)("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:_(n,e.maxZoom,e.tileSize)};return new d.a(r)}function _(t,e,n){for(var l=void 0!==e?e:r.a,h=Object(c.A)(t),f=Object(c.E)(t),d=Object(o.d)(void 0!==n?n:r.b),m=Math.max(f/d[0],h/d[1]),y=l+1,v=new Array(y),_=0;_<y;++_)v[_]=m/Math.pow(2,_);return v}function x(t,e,n,r){return function(t,e,n,r){var o=void 0!==r?r:l.a.TOP_LEFT,h=_(t,e,n);return new d.a({extent:t,origin:Object(c.y)(t,o),resolutions:h,tileSize:n})}(w(t),e,n,r)}function w(t){var e=(t=Object(h.get)(t)).getExtent();if(!e){var n=180*h.METERS_PER_UNIT[f.b.DEGREES]/t.getMetersPerUnit();e=Object(c.k)(-n,-n,n,n)}return e}},,function(t,e,n){"use strict";e.a={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},,,,function(t,e,n){"use strict";var r=n(0),o=n(3),c=n(51),l=n(59),h=n(9),f=function(t){function e(e,n){t.call(this),this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){var o=this.flatCoordinates,c=Object(h.f)(t,e,o[0],o[1]);if(c<r){for(var l=this.stride,i=0;i<l;++i)n[i]=o[i];return n.length=l,c}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(r.m)(this.flatCoordinates,t)},e.prototype.getType=function(){return o.a.POINT},e.prototype.intersectsExtent=function(t){return Object(r.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(c.a);e.a=f},function(t,e,n){"use strict";var r=n(19),o=n(94),c=n(20),l=n(13),h=n(1),f=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:r.c,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(l.e)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(map){this.map_&&Object(l.e)(this.element);for(var i=0,t=this.listenerKeys.length;i<t;++i)Object(h.e)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=map,this.map_)&&((this.target_?this.target_:map.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.c&&this.listenerKeys.push(Object(h.a)(map,o.a.POSTRENDER,this.render,this)),map.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(c.a);e.a=f},function(t,e,n){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"c",function(){return m});var r=n(12),o=n(9),c=n(30);function l(template,t){var e=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,c=/\{-y\}/g;return function(l,h,f){return l?template.replace(e,l[0].toString()).replace(n,l[1].toString()).replace(o,function(){return(-l[2]-1).toString()}).replace(c,function(){var e=l[0],n=t.getFullTileRange(e);return Object(r.a)(n,55),(n.getHeight()+l[2]).toString()}):void 0}}function h(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=l(t[i],e);return f(r)}function f(t){return 1===t.length?t[0]:function(e,n,r){if(e){var l=Object(c.e)(e),h=Object(o.d)(l,t.length);return t[h](e,n,r)}}}function d(t,e,n){}function m(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r,o=n[1].charCodeAt(0),c=n[2].charCodeAt(0);for(r=o;r<=c;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){for(var l=parseInt(n[2],10),i=parseInt(n[1],10);i<=l;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}},function(t,e,n){"use strict";n.d(e,"b",function(){return y});var r=n(2),o=n(0),c=n(141),l=n(32),h=n(68),f=n(8),d=function(t){function e(){t.call(this),this.layout=l.a.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(o.o)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(r.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(f.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=m(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(r.b)()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=m(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=l.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=l.a.XY:3==t?e=l.a.XYZ:4==t&&(e=l.a.XYZM);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(h.a)(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var c=n;c||(c=Object(o.x)(this.getExtent()));var l=this.getFlatCoordinates();if(l){var f=this.getStride();Object(h.b)(l,0,l.length,f,t,r,c,l),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(h.d)(n,0,n.length,r,t,e,n),this.changed()}},e}(c.a);function m(t){var e;return t==l.a.XY?e=2:t==l.a.XYZ||t==l.a.XYM?e=3:t==l.a.XYZM&&(e=4),e}function y(t,e,n){var r=t.getFlatCoordinates();if(r){var o=t.getStride();return Object(h.c)(r,0,r.length,o,e,n)}return null}e.a=d},function(t,e,n){"use strict";var r=n(2),o=n(53),c=n(17),l=n(11),h=n(26),f=n(0),d=n(6),m=n(151),y=n(1),v=n(4),_=n(93),x=n(214),w=function(t){function e(e,n,r,l,h,d){var m=e.getExtent(),y=n.getExtent(),v=y?Object(f.B)(r,y):r,w=Object(f.x)(v),E=Object(_.a)(e,n,w,l),C=o.b,O=new x.a(e,n,v,m,E*C),S=d(O.calculateSourceExtent(),E,h),I=c.a.LOADED;S&&(I=c.a.IDLE);var T=S?S.getPixelRatio():1;t.call(this,r,l,T,I),this.targetProj_=n,this.maxSourceExtent_=m,this.triangulation_=O,this.targetResolution_=l,this.targetExtent_=r,this.sourceImage_=S,this.sourcePixelRatio_=T,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==c.a.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==c.a.LOADED){var e=Object(f.E)(this.targetExtent_)/this.targetResolution_,n=Object(f.A)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(_.b)(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==c.a.IDLE){this.state=c.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==c.a.LOADED||t==c.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(y.a)(this.sourceImage_,v.a.CHANGE,function(t){var e=this.sourceImage_.getState();e!=c.a.LOADED&&e!=c.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Object(y.e)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(m.a),E=n(107);n.d(e,"b",function(){return P});var C="imageloadstart",O="imageloadend",S="imageloaderror",I=function(t){function e(e,image){t.call(this,e),this.image=image}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.a),T=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(l.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,n,r){var c=this.getProjection();if(o.a&&c&&r&&!Object(d.equivalent)(c,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(d.equivalent)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Object(f.p)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new w(c,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,c)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return c&&(r=c),this.getImageInternal(t,e,n,r)},e.prototype.getImageInternal=function(t,e,n,o){return Object(r.b)()},e.prototype.handleImageChange=function(t){var image=t.target;switch(image.getState()){case c.a.LOADING:this.loading=!0,this.dispatchEvent(new I(C,image));break;case c.a.LOADED:this.loading=!1,this.dispatchEvent(new I(O,image));break;case c.a.ERROR:this.loading=!1,this.dispatchEvent(new I(S,image))}},e}(E.a);function P(image,t){image.getImage().src=t}e.a=T},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var r=.5,o=!0},function(t,e,n){"use strict";e.a={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";e.a={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},,function(t,e,n){"use strict";var r=n(53),o=n(2),c=n(211),l=n(212),h=n(5),f=n(1),d=n(4),m=n(6),y=n(80),v=n(0),_=n(9),x=n(93),w=n(214),E=function(t){function e(e,n,o,c,l,f,d,m,y,E,C){t.call(this,l,h.a.IDLE),this.renderEdges_=void 0!==C&&C,this.pixelRatio_=d,this.gutter_=m,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=c,this.wrappedTileCoord_=f||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var O=c.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent(),I=this.sourceTileGrid_.getExtent(),T=S?Object(v.B)(O,S):O;if(0!==Object(v.u)(T)){var P=e.getExtent();P&&(I=I?Object(v.B)(I,P):P);var R=c.getResolution(this.wrappedTileCoord_[0]),L=Object(v.x)(T),M=Object(x.a)(e,o,L,R);if(!isFinite(M)||M<=0)this.state=h.a.EMPTY;else{var N=void 0!==E?E:r.b;if(this.triangulation_=new w.a(e,o,T,I,M*N),0!==this.triangulation_.getTriangles().length){this.sourceZ_=n.getZForResolution(M);var j=this.triangulation_.calculateSourceExtent();if(I&&(e.canWrapX()?(j[1]=Object(_.a)(j[1],I[1],I[3]),j[3]=Object(_.a)(j[3],I[1],I[3])):j=Object(v.B)(j,I)),Object(v.u)(j)){for(var D=n.getTileRangeForExtentAndZ(j,this.sourceZ_),A=D.minX;A<=D.maxX;A++)for(var F=D.minY;F<=D.maxY;F++){var k=y(this.sourceZ_,A,F,d);k&&this.sourceTiles_.push(k)}0===this.sourceTiles_.length&&(this.state=h.a.EMPTY)}else this.state=h.a.EMPTY}else this.state=h.a.EMPTY}}else this.state=h.a.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==h.a.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==h.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=h.a.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],c=this.targetTileGrid_.getResolution(e),l=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(x.b)(r,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),c,f,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=h.a.LOADED}this.changed()},e.prototype.load=function(){if(this.state==h.a.IDLE){this.state=h.a.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var r=e.getState();if(r==h.a.IDLE||r==h.a.LOADING){t++;var o=Object(f.a)(e,d.a.CHANGE,function(n){var r=e.getState();r!=h.a.LOADED&&r!=h.a.ERROR&&r!=h.a.EMPTY||(Object(f.e)(o),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,i,e){t.getState()==h.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(f.e),this.sourcesListenerKeys_=null},e}(y.a),C=n(147),O=n(30),S=n(41),I=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:T,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:c.a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(!r.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,n){if(r.a){var o=this.getTileCacheForProjection(e);for(var c in this.tileCache.expireCache(this.tileCache==o?n:{}),this.tileCacheForProjection){var l=this.tileCacheForProjection[c];l.expireCache(l==o?n:{})}}else t.prototype.expireCache.call(this,e,n)},e.prototype.getGutterForProjection=function(t){return r.a&&this.getProjection()&&t&&!Object(m.equivalent)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(r.a&&this.getProjection()&&e&&!Object(m.equivalent)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!r.a)return t.prototype.getTileGridForProjection.call(this,e);var n=this.getProjection();if(!this.tileGrid||n&&!Object(m.equivalent)(n,e)){var c=Object(o.c)(e);return c in this.tileGridForProjection||(this.tileGridForProjection[c]=Object(S.d)(e)),this.tileGridForProjection[c]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!r.a)return t.prototype.getTileCacheForProjection.call(this,e);var n=this.getProjection();if(!n||Object(m.equivalent)(n,e))return this.tileCache;var c=Object(o.c)(e);return c in this.tileCacheForProjection||(this.tileCacheForProjection[c]=new l.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[c]},e.prototype.createTile_=function(t,e,n,r,o,c){var l=[t,e,n],m=this.getTileCoordForTileUrlFunction(l,o),y=m?this.tileUrlFunction(m,r,o):void 0,v=new this.tileClass(l,void 0!==y?h.a.IDLE:h.a.EMPTY,void 0!==y?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return v.key=c,Object(f.a)(v,d.a.CHANGE,this.handleTileChange,this),v},e.prototype.getTile=function(t,e,n,o,c){var l=this.getProjection();if(r.a&&l&&c&&!Object(m.equivalent)(l,c)){var h,f=this.getTileCacheForProjection(c),d=[t,e,n],y=Object(O.c)(d);f.containsKey(y)&&(h=f.get(y));var v=this.getKey();if(h&&h.key==v)return h;var _=this.getTileGridForProjection(l),x=this.getTileGridForProjection(c),w=this.getTileCoordForTileUrlFunction(d,c),C=new E(l,_,c,x,d,w,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return C.key=v,h?(C.interimTile=h,C.refreshInterimChain(),f.replace(y,C)):f.set(y,C),C}return this.getTileInternal(t,e,n,o,l||c)},e.prototype.getTileInternal=function(t,e,n,r,o){var c=null,l=Object(O.d)(t,e,n),f=this.getKey();if(this.tileCache.containsKey(l)){if((c=this.tileCache.get(l)).key!=f){var d=c;c=this.createTile_(t,e,n,r,o,f),d.getState()==h.a.IDLE?c.interimTile=d.interimTile:c.interimTile=d,c.refreshInterimChain(),this.tileCache.replace(l,c)}}else c=this.createTile_(t,e,n,r,o,f),this.tileCache.set(l,c);return c},e.prototype.setRenderReprojectionEdges=function(t){if(r.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(r.a){var n=Object(m.get)(t);if(n){var c=Object(o.c)(n);c in this.tileGridForProjection||(this.tileGridForProjection[c]=e)}}},e}(C.a);function T(t,e){t.getImage().src=e}e.a=I},function(t,e,n){"use strict";var r=n(39),o=n(67),c=n(222),l=n(8),h=n(60),f="renderOrder",d=function(t){function e(e){var n=e||{},o=Object(l.a)({},n);delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,t.call(this,o),this.declutter_=void 0!==n.declutter&&n.declutter,this.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(n.style),this.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,this.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,this.renderMode_=n.renderMode||c.a.VECTOR,this.type=r.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(f)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(f,t)},e.prototype.setStyle=function(style){this.style_=void 0!==style?style:h.a,this.styleFunction_=null===style?void 0:Object(h.d)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(o.a);d.prototype.getSource,e.a=d},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function o(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var c=n[i],l=0;l<r;++l)t[e++]=c[l];return e}function c(t,e,n,r,c){for(var l=c||[],i=0,h=0,f=n.length;h<f;++h){var d=o(t,e,n[h],r);l[i++]=d,e=d}return l.length=i,l}function l(t,e,n,r,o){for(var l=o||[],i=0,h=0,f=n.length;h<f;++h){var d=c(t,e,n[h],r,l[i]);l[i++]=d,e=d[d.length-1]}return l.length=i,l}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return l})},function(t,e,n){"use strict";n.d(e,"d",function(){return d}),n.d(e,"a",function(){return y}),n.d(e,"b",function(){return v});var r=n(12),o=n(3),c=n(163),l=n(111),h=n(127),f=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=_,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function d(t){var e;if("function"==typeof t)e=t;else{var n;if(Array.isArray(t))n=t;else Object(r.a)("function"==typeof t.getZIndex,41),n=[t];e=function(){return n}}return e}f.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new f({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},f.prototype.getRenderer=function(){return this.renderer_},f.prototype.setRenderer=function(t){this.renderer_=t},f.prototype.getGeometry=function(){return this.geometry_},f.prototype.getGeometryFunction=function(){return this.geometryFunction_},f.prototype.getFill=function(){return this.fill_},f.prototype.setFill=function(t){this.fill_=t},f.prototype.getImage=function(){return this.image_},f.prototype.setImage=function(image){this.image_=image},f.prototype.getStroke=function(){return this.stroke_},f.prototype.setStroke=function(t){this.stroke_=t},f.prototype.getText=function(){return this.text_},f.prototype.setText=function(text){this.text_=text},f.prototype.getZIndex=function(){return this.zIndex_},f.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_,this.geometry_=t},f.prototype.setZIndex=function(t){this.zIndex_=t};var m=null;function y(t,e){if(!m){var n=new l.a({color:"rgba(255,255,255,0.4)"}),r=new h.a({color:"#3399CC",width:1.25});m=[new f({image:new c.a({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return m}function v(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[o.a.POLYGON]=[new f({fill:new l.a({color:[255,255,255,.5]})})],t[o.a.MULTI_POLYGON]=t[o.a.POLYGON],t[o.a.LINE_STRING]=[new f({stroke:new h.a({color:e,width:5})}),new f({stroke:new h.a({color:n,width:3})})],t[o.a.MULTI_LINE_STRING]=t[o.a.LINE_STRING],t[o.a.CIRCLE]=t[o.a.POLYGON].concat(t[o.a.LINE_STRING]),t[o.a.POINT]=[new f({image:new c.a({radius:6,fill:new l.a({color:n}),stroke:new h.a({color:e,width:1.5})}),zIndex:1/0})],t[o.a.MULTI_POINT]=t[o.a.POINT],t[o.a.GEOMETRY_COLLECTION]=t[o.a.POLYGON].concat(t[o.a.LINE_STRING],t[o.a.POINT]),t}function _(t){return t.getGeometry()}e.c=f},function(t,e,n){"use strict";function r(t,e,n,r,o){for(var c=void 0!==o?o:[],i=0,l=e;l<n;l+=r)c[i++]=t.slice(l,l+r);return c.length=i,c}function o(t,e,n,o,c){for(var l=void 0!==c?c:[],i=0,h=0,f=n.length;h<f;++h){var d=n[h];l[i++]=r(t,e,d,o,l[i]),e=d}return l.length=i,l}function c(t,e,n,r,c){for(var l=void 0!==c?c:[],i=0,h=0,f=n.length;h<f;++h){var d=n[h];l[i++]=o(t,e,d,r,l[i]),e=d[d.length-1]}return l.length=i,l}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c})},function(t,e,n){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";var r=n(12),o=n(1),c=n(4),l=n(20),h=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(o.a)(this,Object(l.b)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;this.setGeometry(n)}else{var r=e;this.setProperties(r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var style=this.getStyle();return style&&t.setStyle(style),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,c.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(style){this.style_=style,this.styleFunction_=style?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{Object(r.a)("function"==typeof t.getZIndex,41);var style=t;e=[style]}return function(){return e}}(style):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(o.c)(this,Object(l.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(o.a)(this,Object(l.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(l.a);e.a=h},function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},,,function(t,e,n){"use strict";n.d(e,"b",function(){return _});var r=n(1),o=n(4),c=n(2),l=n(20),h=n(221),f=n(40),d=n(8),m=n(62),y=n(29),v=function(t){function e(e){var n=Object(d.a)({},e);delete n.source,t.call(this,n),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(r.a)(this,Object(l.b)(f.a.SOURCE),this.handleSourcePropertyChange_,this);var source=e.source?e.source:null;this.setSource(source)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(f.a.SOURCE)||null},e.prototype.getSourceState=function(){var source=this.getSource();return source?source.getState():y.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(r.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var source=this.getSource();source&&(this.sourceChangeKey_=Object(r.a)(source,o.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(map){this.mapPrecomposeKey_&&(Object(r.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),map||this.changed(),this.mapRenderKey_&&(Object(r.e)(this.mapRenderKey_),this.mapRenderKey_=null),map&&(this.mapPrecomposeKey_=Object(r.a)(map,m.a.PRECOMPOSE,function(t){var e=t,n=this.getLayerState();n.managed=!1,void 0===this.getZIndex()&&(n.zIndex=1/0),e.frameState.layerStatesArray.push(n),e.frameState.layerStates[Object(c.c)(this)]=n},this),this.mapRenderKey_=Object(r.a)(this,o.a.CHANGE,map.render,map),this.changed())},e.prototype.setSource=function(source){this.set(f.a.SOURCE,source)},e}(h.a);function _(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.a=v},function(t,e,n){"use strict";function r(t,e,n,r,o,c){for(var l=c||[],i=0,h=e;h<n;h+=r){var f=t[h],d=t[h+1];l[i++]=o[0]*f+o[2]*d+o[4],l[i++]=o[1]*f+o[3]*d+o[5]}return c&&l.length!=i&&(l.length=i),l}function o(t,e,n,r,o,c,l){for(var h=l||[],f=Math.cos(o),d=Math.sin(o),m=c[0],y=c[1],i=0,v=e;v<n;v+=r){var _=t[v]-m,x=t[v+1]-y;h[i++]=m+_*f-x*d,h[i++]=y+_*d+x*f;for(var w=v+2;w<v+r;++w)h[i++]=t[w]}return l&&h.length!=i&&(h.length=i),h}function c(t,e,n,r,o,c,l,h){for(var f=h||[],d=l[0],m=l[1],i=0,y=e;y<n;y+=r){var v=t[y]-d,_=t[y+1]-m;f[i++]=d+o*v,f[i++]=m+c*_;for(var x=y+2;x<y+r;++x)f[i++]=t[x]}return h&&f.length!=i&&(f.length=i),f}function l(t,e,n,r,o,c,l){for(var h=l||[],i=0,f=e;f<n;f+=r){h[i++]=t[f]+o,h[i++]=t[f+1]+c;for(var d=f+2;d<f+r;++d)h[i++]=t[d]}return l&&h.length!=i&&(h.length=i),h}n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return l})},function(t,e,n){"use strict";n.d(e,"e",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"f",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return m});var r=n(9);function o(t,e,n,o,c,l,h){var f,d=t[e],m=t[e+1],y=t[n]-d,v=t[n+1]-m;if(0===y&&0===v)f=e;else{var _=((c-d)*y+(l-m)*v)/(y*y+v*v);if(_>1)f=n;else{if(_>0){for(var i=0;i<o;++i)h[i]=Object(r.c)(t[e+i],t[n+i],_);return void(h.length=o)}f=e}}for(var x=0;x<o;++x)h[x]=t[f+x];h.length=o}function c(t,e,n,o,c){var l=t[e],h=t[e+1];for(e+=o;e<n;e+=o){var f=t[e],d=t[e+1],m=Object(r.f)(l,h,f,d);m>c&&(c=m),l=f,h=d}return c}function l(t,e,n,r,o){for(var i=0,l=n.length;i<l;++i){var h=n[i];o=c(t,e,h,r,o),e=h}return o}function h(t,e,n,r,o){for(var i=0,c=n.length;i<c;++i){var h=n[i];o=l(t,e,h,r,o),e=h[h.length-1]}return o}function f(t,e,n,c,l,h,f,d,m,y,v){if(e==n)return y;var i,_;if(0===l){if((_=Object(r.f)(f,d,t[e],t[e+1]))<y){for(i=0;i<c;++i)m[i]=t[e+i];return m.length=c,_}return y}for(var x=v||[NaN,NaN],w=e+c;w<n;)if(o(t,w-c,w,c,f,d,x),(_=Object(r.f)(f,d,x[0],x[1]))<y){for(y=_,i=0;i<c;++i)m[i]=x[i];m.length=c,w+=c}else w+=c*Math.max((Math.sqrt(_)-Math.sqrt(y))/l|0,1);if(h&&(o(t,n-c,e,c,f,d,x),(_=Object(r.f)(f,d,x[0],x[1]))<y)){for(y=_,i=0;i<c;++i)m[i]=x[i];m.length=c}return y}function d(t,e,n,r,o,c,l,h,d,m,y){for(var v=y||[NaN,NaN],i=0,_=n.length;i<_;++i){var x=n[i];m=f(t,e,x,r,o,c,l,h,d,m,v),e=x}return m}function m(t,e,n,r,o,c,l,h,f,m,y){for(var v=y||[NaN,NaN],i=0,_=n.length;i<_;++i){var x=n[i];m=d(t,e,x,r,o,c,l,h,f,m,v),e=x[x.length-1]}return m}},function(t,e,n){"use strict";var r=n(148),o=n(1),c=n(19),l=n(26),h=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new l.a(t):t,n=e.type;e.target=this;var r,o=this.listeners_[n];if(o){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var i=0,h=o.length;i<h;++i)if(!1===o[i].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var f=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];f--;)this.removeEventListener(n,c.c);delete this.dispatching_[n]}return r}},e.prototype.disposeInternal=function(){Object(o.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);t in this.pendingRemovals_?(n[r]=c.c,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t])}},e}(r.a);e.a=h},,function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"a",function(){return y}),n.d(e,"c",function(){return _});var r=n(12),o=n(9),c=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,l=/^([a-z]*)$/i;function h(t){return"string"==typeof t?t:_(t)}var f,d,m=(f={},d=0,function(s){var t;if(f.hasOwnProperty(s))t=f[s];else{if(d>=1024){var i=0;for(var e in f)0==(3&i++)&&(delete f[e],--d)}t=function(s){var t,g,b,a,e;if(l.exec(s)&&(s=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(s)),c.exec(s)){var n,o=s.length-1;n=o<=4?1:2;var h=4===o||8===o;t=parseInt(s.substr(1+0*n,n),16),g=parseInt(s.substr(1+1*n,n),16),b=parseInt(s.substr(1+2*n,n),16),a=h?parseInt(s.substr(1+3*n,n),16):255,1==n&&(t=(t<<4)+t,g=(g<<4)+g,b=(b<<4)+b,h&&(a=(a<<4)+a)),e=[t,g,b,a/255]}else 0==s.indexOf("rgba(")?v(e=s.slice(5,-1).split(",").map(Number)):0==s.indexOf("rgb(")?((e=s.slice(4,-1).split(",").map(Number)).push(1),v(e)):Object(r.a)(!1,14);return e}(s),f[s]=t,++d}return t});function y(t){return Array.isArray(t)?t:m(t)}function v(t){return t[0]=Object(o.a)(t[0]+.5|0,0,255),t[1]=Object(o.a)(t[1]+.5|0,0,255),t[2]=Object(o.a)(t[2]+.5|0,0,255),t[3]=Object(o.a)(t[3],0,1),t}function _(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var g=t[1];g!=(0|g)&&(g=g+.5|0);var b=t[2];return b!=(0|b)&&(b=b+.5|0),"rgba("+e+","+g+","+b+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(72);function o(t){return Array.isArray(t)?Object(r.c)(t):t}},function(t,e,n){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,n){"use strict";var r=n(2),o=n(37),c=n(34),l=n(82),h=n(11),f=n(12),d=n(1),m=n(26),y=n(4),v=n(0),_=n(215),x=n(19);function w(t,e){return[[-1/0,-1/0,1/0,1/0]]}var E=n(8),C=n(107),O=n(29),S=n(74),I=n(124),T=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(m.a),P=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:void 0,state:O.a.READY,wrapX:void 0===n.wrapX||n.wrapX}),this.loader_=x.c,this.format_=n.format,this.overlaps_=null==n.overlaps||n.overlaps,this.url_=n.url,void 0!==n.loader?this.loader_=n.loader:void 0!==this.url_&&(Object(f.a)(this.format_,7),this.loader_=Object(_.b)(this.url_,this.format_)),this.strategy_=void 0!==n.strategy?n.strategy:w;var r,c,l=void 0===n.useSpatialIndex||n.useSpatialIndex;this.featuresRtree_=l?new I.a:null,this.loadedExtentsRtree_=new I.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(n.features)?c=n.features:n.features&&(c=(r=n.features).getArray()),l||void 0!==r||(r=new o.a(c)),void 0!==c&&this.addFeaturesInternal(c),void 0!==r&&this.bindFeaturesCollection_(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(r.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new T(S.a.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(d.a)(e,y.a.CHANGE,this.handleFeatureChange_,this),Object(d.a)(e,l.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e:(Object(f.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],o=[],i=0,c=t.length;i<c;i++){var l=t[i],h=Object(r.c)(l);this.addToIndex_(h,l)&&n.push(l)}for(var f=0,d=n.length;f<d;f++){var m=n[f],y=Object(r.c)(m);this.setupChangeEvents_(y,m);var v=m.getGeometry();if(v){var _=v.getExtent();e.push(_),o.push(m)}else this.nullGeometryFeatures_[y]=m}this.featuresRtree_&&this.featuresRtree_.load(e,o);for(var x=0,w=n.length;x<w;x++)this.dispatchEvent(new T(S.a.ADDFEATURE,n[x]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(d.a)(this,S.a.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),Object(d.a)(this,S.a.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),Object(d.a)(t,c.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(d.a)(t,c.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(d.e)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new T(S.a.CLEAR);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(E.d)(this.nullGeometryFeatures_)||Object(h.c)(t,Object(E.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],r=t[1],o=null,c=[NaN,NaN],l=1/0,h=[-1/0,-1/0,1/0,1/0],filter=e||x.b;return this.featuresRtree_.forEachInExtent(h,function(t){if(filter(t)){var e=t.getGeometry(),f=l;if((l=e.closestPointXY(n,r,c,l))<f){o=t;var d=Math.sqrt(l);h[0]=n-d,h[1]=r-d,h[2]=n+d,h[3]=r+d}}}),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(r.c)(e),o=e.getGeometry();if(o){var c=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(c,e)):this.featuresRtree_&&this.featuresRtree_.update(c,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var l=e.getId();if(void 0!==l){var h=l.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[h]=e):this.idIndex_[h]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[h]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new T(S.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(r.c)(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(E.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var r=this,o=this.loadedExtentsRtree_,c=this.strategy_(t,e);this.loading=!1;for(var l=function(i,t){var l=c[i];o.forEachInExtent(l,function(object){return Object(v.g)(object.extent,l)})||(r.loader_.call(r,l,e,n),o.insert(l,{extent:l.slice()}),r.loading=r.loader_!==x.c)},i=0,h=c.length;i<h;++i)l(i)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,function(object){if(Object(v.p)(object.extent,t))return e=object,!0}),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Object(r.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(r.c)(t);this.featureChangeKeys_[e].forEach(d.e),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new T(S.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(C.a);e.a=P},function(t,e,n){"use strict";function r(t,e){var n=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))});var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}n.d(e,"a",function(){return r})},,,function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var r=n(9);function o(t,e,n,o,c,l,h){var f=(n-e)/o;if(f<3){for(;e<n;e+=o)l[h++]=t[e],l[h++]=t[e+1];return h}var d=new Array(f);d[0]=1,d[f-1]=1;for(var m=[e,n-o],y=0;m.length>0;){for(var v=m.pop(),_=m.pop(),x=0,w=t[_],E=t[_+1],C=t[v],O=t[v+1],i=_+o;i<v;i+=o){var S=t[i],I=t[i+1],T=Object(r.g)(S,I,w,E,C,O);T>x&&(y=i,x=T)}x>c&&(d[(y-e)/o]=1,_+o<y&&m.push(_,y),y+o<v&&m.push(y,v))}for(var P=0;P<f;++P)d[P]&&(l[h++]=t[e+P*o],l[h++]=t[e+P*o+1]);return h}function c(t,e,n,r,c,l,h,f){for(var i=0,d=n.length;i<d;++i){var m=n[i];h=o(t,e,m,r,c,l,h),f.push(h),e=m}return h}function l(t,e){return e*Math.round(t/e)}function h(t,e,n,r,o,c,h){if(e==n)return h;var f,d,m=l(t[e],o),y=l(t[e+1],o);e+=r,c[h++]=m,c[h++]=y;do{if(f=l(t[e],o),d=l(t[e+1],o),(e+=r)==n)return c[h++]=f,c[h++]=d,h}while(f==m&&d==y);for(;e<n;){var v=l(t[e],o),_=l(t[e+1],o);if(e+=r,v!=f||_!=d){var x=f-m,w=d-y,E=v-m,C=_-y;x*C==w*E&&(x<0&&E<x||x==E||x>0&&E>x)&&(w<0&&C<w||w==C||w>0&&C>w)?(f=v,d=_):(c[h++]=f,c[h++]=d,m=f,y=d,f=v,d=_)}}return c[h++]=f,c[h++]=d,h}function f(t,e,n,r,o,c,l,f){for(var i=0,d=n.length;i<d;++i){var m=n[i];l=h(t,e,m,r,o,c,l),f.push(l),e=m}return l}function d(t,e,n,r,o,c,l,h){for(var i=0,d=n.length;i<d;++i){var m=n[i],y=[];l=f(t,e,m,r,o,c,l,y),h.push(y),e=m[m.length-1]}return l}},function(t,e,n){"use strict";var r=n(5),o=n(36),c=n(70),l=n(4),h=function(t){function e(e,n,r){t.call(this);var o=r||{};this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(l.a.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.a.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.a.LOADED){t.interimTile=null;break}t.getState()==r.a.LOADING?e=t:t.getState()==r.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,time){if(!this.transition_)return 1;var e=this.transitionStarts_[t];if(e){if(-1===e)return 1}else e=time,this.transitionStarts_[t]=e;var n=time-e+1e3/60;return n>=this.transition_?1:Object(o.a)(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(c.a);e.a=h},,function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},,function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return h});var r=n(0);function o(t,e,n,o,l){return!Object(r.t)(l,function(r){return!c(t,e,n,o,r[0],r[1])})}function c(t,e,n,r,o,c){for(var l=0,h=t[n-r],f=t[n-r+1];e<n;e+=r){var d=t[e],m=t[e+1];f<=c?m>c&&(d-h)*(c-f)-(o-h)*(m-f)>0&&l++:m<=c&&(d-h)*(c-f)-(o-h)*(m-f)<0&&l--,h=d,f=m}return 0!==l}function l(t,e,n,r,o,l){if(0===n.length)return!1;if(!c(t,e,n[0],r,o,l))return!1;for(var i=1,h=n.length;i<h;++i)if(c(t,n[i-1],n[i],r,o,l))return!1;return!0}function h(t,e,n,r,o,c){if(0===n.length)return!1;for(var i=0,h=n.length;i<h;++i){var f=n[i];if(l(t,e,f,r,o,c))return!0;e=f[f.length-1]}return!1}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return h});var r=n(9);function o(t,e){return void 0!==t?0:void 0}function c(t,e){return void 0!==t?t+e:void 0}function l(t){var e=2*Math.PI/t;return function(t,n){return void 0!==t?t=Math.floor((t+n)/e+.5)*e:void 0}}function h(t){var e=t||Object(r.i)(5);return function(t,n){return void 0!==t?Math.abs(t+n)<=e?0:t+n:void 0}}},,,function(t,e,n){"use strict";var r=n(11),o=n(0),c=n(32),l=n(3),h=n(51),f=n(69),d=n(59),m=n(61),y=n(153),v=n(109),_=n(209),x=n(208),w=n(79),E=function(t){function e(e,n){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(f.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(f.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Object(x.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=c.a.XYM&&this.layout!=c.a.XYZM)return null;var n=void 0!==e&&e;return Object(y.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Object(m.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(y.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(_.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(w.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,c.a.XY)},e.prototype.getType=function(){return l.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(v.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(d.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=E},function(t,e,n){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},,,,function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var r=n(13),o=n(0),c=n(9),l=n(6);function h(t,e,n,r){var c=Object(l.transform)(n,e,t),h=Object(l.getPointResolution)(e,r,n),f=e.getMetersPerUnit();void 0!==f&&(h*=f);var d=t.getMetersPerUnit();void 0!==d&&(h/=d);var m=t.getExtent();if(!m||Object(o.f)(m,c)){var y=Object(l.getPointResolution)(t,h,c)/h;isFinite(y)&&y>0&&(h/=y)}return h}function f(t,e,n,r){var o=n-t,c=r-e,l=Math.sqrt(o*o+c*c);return[Math.round(n+o/l),Math.round(r+c/l)]}function d(t,e,n,l,h,d,m,y,v,_,x){var w=Object(r.a)(Math.round(n*t),Math.round(n*e));if(0===v.length)return w.canvas;w.scale(n,n);var E=Object(o.j)();v.forEach(function(t,i,e){Object(o.q)(E,t.extent)});var C=Object(o.E)(E),O=Object(o.A)(E),S=Object(r.a)(Math.round(n*C/l),Math.round(n*O/l)),I=n/l;v.forEach(function(t,i,e){var n=t.extent[0]-E[0],r=-(t.extent[3]-E[3]),c=Object(o.E)(t.extent),l=Object(o.A)(t.extent);S.drawImage(t.image,_,_,t.image.width-2*_,t.image.height-2*_,n*I,r*I,c*I,l*I)});var T=Object(o.C)(m);return y.getTriangles().forEach(function(t,i,e){var source=t.source,r=t.target,o=source[0][0],h=source[0][1],m=source[1][0],y=source[1][1],v=source[2][0],_=source[2][1],x=(r[0][0]-T[0])/d,C=-(r[0][1]-T[1])/d,O=(r[1][0]-T[0])/d,I=-(r[1][1]-T[1])/d,P=(r[2][0]-T[0])/d,R=-(r[2][1]-T[1])/d,L=o,M=h;o=0,h=0;var N=[[m-=L,y-=M,0,0,O-x],[v-=L,_-=M,0,0,P-x],[0,0,m,y,I-C],[0,0,v,_,R-C]],j=Object(c.e)(N);if(j){w.save(),w.beginPath();var D=(x+O+P)/3,A=(C+I+R)/3,F=f(D,A,x,C),k=f(D,A,O,I),G=f(D,A,P,R);w.moveTo(k[0],k[1]),w.lineTo(F[0],F[1]),w.lineTo(G[0],G[1]),w.clip(),w.transform(j[0],j[2],j[1],j[3],x,C),w.translate(E[0]-L,E[3]-M),w.scale(l/n,-l/n),w.drawImage(S.canvas,0,0),w.restore()}}),x&&(w.save(),w.strokeStyle="black",w.lineWidth=1,y.getTriangles().forEach(function(t,i,e){var n=t.target,r=(n[0][0]-T[0])/d,o=-(n[0][1]-T[1])/d,c=(n[1][0]-T[0])/d,l=-(n[1][1]-T[1])/d,h=(n[2][0]-T[0])/d,f=-(n[2][1]-T[1])/d;w.beginPath(),w.moveTo(c,l),w.lineTo(r,o),w.lineTo(h,f),w.closePath(),w.stroke()}),w.restore()),w.canvas}},function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,n){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(t,e,n){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,n){"use strict";var r=function(t){function e(e,map,n,r,o){t.call(this,e,map,n.originalEvent,r,o),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(223).a);e.a=r},,function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(2),o=n(212),c=n(5),l=n(26),h=n(6),f=n(31),d=n(107),m=n(30),y=n(41),v=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new o.a(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var l,h,f,d=!0,y=n.minX;y<=n.maxX;++y)for(var v=n.minY;v<=n.maxY;++v)h=Object(m.d)(e,y,v),f=!1,o.containsKey(h)&&(f=(l=o.get(h)).getState()===c.a.LOADED)&&(f=!1!==r(l)),f||(d=!1);return d},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,c){return Object(r.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(y.d)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(h.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),o=this.getTilePixelRatio(e),c=Object(f.d)(r.getTileSize(t),this.tmpSize);return 1==o?c:Object(f.c)(c,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Object(y.e)(r,t,n)),Object(m.g)(t,r)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,n,r){},e}(d.a),_=function(t){function e(e,n){t.call(this,e),this.tile=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a);e.b=v},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=42,o=256},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+" */"),o=n.sources.map(function(source){return"/*# sourceURL="+n.sourceRoot+source+" */"});return[content].concat(o).concat([r]).join("\n")}var c;return[content].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+content+"}":content}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<t.length;i++){var c=t[i];null!=c[0]&&r[c[0]]||(n&&!c[2]?c[2]=n:n&&(c[2]="("+c[2]+") and ("+n+")"),e.push(c))}},e}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],l={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(e),n.d(e,"default",function(){return _});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,f=!1,d=function(){},m=null,y="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(t,e,n,o){f=n,m=o||{};var l=r(t,e);return x(l),function(e){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}e?x(l=r(t,e)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var f=0;f<h.parts.length;f++)h.parts[f]();delete c[h.id]}}}}function x(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(E(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(E(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function w(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function E(t){var e,n,r=document.querySelector("style["+y+'~="'+t.id+'"]');if(r){if(f)return d;r.parentNode.removeChild(r)}if(v){var o=h++;r=l||(l=w()),e=S.bind(null,r,o,!1),n=S.bind(null,r,o,!0)}else r=w(),e=function(t,e){var n=e.css,r=e.media,o=e.sourceMap;r&&t.setAttribute("media",r);m.ssrId&&t.setAttribute(y,e.id);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var C,O=(C=[],function(t,e){return C[t]=e,C.filter(Boolean).join("\n")});function S(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=O(e,o);else{var c=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(c,l[e]):t.appendChild(c)}}},,,function(t,e){t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],i=0;i<e.length;++i)if(t.hasOwnProperty(e[i]))throw new Error("Subject cannot be eventified, since it already has property '"+e[i]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var c=e[n];return c||(c=e[n]=[]),c.push({callback:r,ctx:o}),t},off:function(n,r){var o=void 0===n;if(o)return e=Object.create(null),t;if(e[n]){var c="function"!=typeof r;if(c)delete e[n];else for(var l=e[n],i=0;i<l.length;++i)l[i].callback===r&&l.splice(i,1)}return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var c=o[i];c.callback.apply(c.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e,n){"use strict";var r=n(11),o=n(0),c=n(3),l=n(47),h=n(51),f=n(59),d=n(61),m=n(9),y=function(t){function e(e,n){t.call(this),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){if(r<Object(o.e)(this.getExtent(),t,e))return r;for(var c=this.flatCoordinates,l=this.stride,i=0,h=c.length;i<h;i+=l){var f=Object(m.f)(t,e,c[i],c[i+1]);if(f<r){r=f;for(var d=0;d<l;++d)n[d]=c[i+d];n.length=l}}return r},e.prototype.getCoordinates=function(){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new l.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var c=new l.a(t.slice(i,i+n),e);r.push(c)}return r},e.prototype.getType=function(){return c.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,i=0,r=e.length;i<r;i+=n){var c=e[i],l=e[i+1];if(Object(o.h)(t,c,l))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(f.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(h.a);e.a=y},function(t,e,n){"use strict";var r=n(2),o=n(20),c=n(6),l=n(29),h=function(t){function e(e){t.call(this),this.projection_=Object(c.get)(e.projection),this.attributions_=f(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:l.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(r.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=f(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(o.a);function f(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.a=h},function(t,e,n){"use strict";var r=n(57),o=n(41),c=function(t){function e(e){var n=e||{},r=void 0!==n.projection?n.projection:"EPSG:3857",c=void 0!==n.tileGrid?n.tileGrid:Object(o.b)({extent:Object(o.c)(r),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:r,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.a);e.a=c},function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var r=n(0),o=n(84),c=n(208);function l(t,e,n,o,l){var h=Object(r.s)(Object(r.j)(),t,e,n,o);return!!Object(r.F)(l,h)&&(!!Object(r.g)(l,h)||(h[0]>=l[0]&&h[2]<=l[2]||(h[1]>=l[1]&&h[3]<=l[3]||Object(c.a)(t,e,n,o,function(t,e){return Object(r.G)(l,t,e)}))))}function h(t,e,n,r,o){for(var i=0,c=n.length;i<c;++i){if(l(t,e,n[i],r,o))return!0;e=n[i]}return!1}function f(t,e,n,r,c){if(!function(t,e,n,r,c){return!!(l(t,e,n,r,c)||Object(o.b)(t,e,n,r,c[0],c[1])||Object(o.b)(t,e,n,r,c[0],c[3])||Object(o.b)(t,e,n,r,c[2],c[1])||Object(o.b)(t,e,n,r,c[2],c[3]))}(t,e,n[0],r,c))return!1;if(1===n.length)return!0;for(var i=1,h=n.length;i<h;++i)if(Object(o.a)(t,n[i-1],n[i],r,c)&&!l(t,n[i-1],n[i],r,c))return!1;return!0}function d(t,e,n,r,o){for(var i=0,c=n.length;i<c;++i){var l=n[i];if(f(t,e,l,r,o))return!0;e=l[l.length-1]}return!1}},function(t,e,n){"use strict";var r=n(151),o=n(17),c=n(1),l=n(4),h=n(0),f=function(t){function e(e,n,r,c,l,h){t.call(this,e,n,r,o.a.IDLE),this.src_=c,this.image_=new Image,null!==l&&(this.image_.crossOrigin=l),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=h}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(h.A)(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(c.b)(this.image_,l.a.ERROR,this.handleImageError_,this),Object(c.b)(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(image){this.image_=image},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(c.e),this.imageListenerKeys_=null},e}(r.a);e.a=f},function(t,e,n){"use strict";var r=n(2),o=n(72),c=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};c.prototype.clone=function(){var t=this.getColor();return new c({color:Array.isArray(t)?t.slice():t||void 0})},c.prototype.getColor=function(){return this.color_},c.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},c.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Object(o.b)(t):this.checksum_=Object(r.c)(this.color_):this.checksum_="f-"}return this.checksum_},e.a=c},function(t,e,n){"use strict";var r=function(t,e){this.dispatcher=t,this.mapping_=e};r.prototype.getEvents=function(){return Object.keys(this.mapping_)},r.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return v});var r=n(112),o=1,c="mouse";function l(t){if(!this.isEventSimulatedFromTouch_(t)){o.toString()in this.pointerMap&&this.cancel(t);var e=v(t,this.dispatcher);this.pointerMap[o.toString()]=t,this.dispatcher.down(e,t)}}function h(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.move(e,t)}}function f(t){if(!this.isEventSimulatedFromTouch_(t)){var p=this.pointerMap[o.toString()];if(p&&p.button===t.button){var e=v(t,this.dispatcher);this.dispatcher.up(e,t),this.cleanupMouse()}}}function d(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function m(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var y=function(t){function e(e){var n={mousedown:l,mousemove:h,mouseup:f,mouseover:d,mouseout:m};t.call(this,e,n),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,r=t.clientY,i=0,o=e.length,c=void 0;i<o&&(c=e[i]);i++){var l=Math.abs(n-c[0]),h=Math.abs(r-c[1]);if(l<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=v(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]},e}(r.a);function v(t,e){var n=e.cloneEvent(t,t),r=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),r()},n.pointerId=o,n.isPrimary=!0,n.pointerType=c,n}e.c=y},function(t,e,n){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="1.3.0"},function(t,e,n){"use strict";function r(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function o(t,e,n,r){for(var o=0,c=t[n-r],l=t[n-r+1];e<n;e+=r){var h=t[e],f=t[e+1];o+=(h-c)*(f+l),c=h,l=f}return o>0}function c(t,e,n,r,c){for(var l=void 0!==c&&c,i=0,h=n.length;i<h;++i){var f=n[i],d=o(t,e,f,r);if(0===i){if(l&&d||!l&&!d)return!1}else if(l&&!d||!l&&d)return!1;e=f}return!0}function l(t,e,n,r,o){for(var i=0,l=n.length;i<l;++i)if(!c(t,e,n[i],r,o))return!1;return!0}function h(t,e,n,c,l){for(var h=void 0!==l&&l,i=0,f=n.length;i<f;++i){var d=n[i],m=o(t,e,d,c);(0===i?h&&m||!h&&!m:h&&!m||!h&&m)&&r(t,e,d,c),e=d}return e}function f(t,e,n,r,o){for(var i=0,c=n.length;i<c;++i)e=h(t,e,n[i],r,o);return e}n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f})},,,,,,function(t,e,n){"use strict";var r=n(100),o=n(12),c=n(130),l=n(11),h=n(0),f=n(9),d=n(31),m=n(30),y=[0,0,0],v=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(o.a)(Object(l.g)(this.resolutions_,function(a,b){return b-a},!0),17),!t.origins)for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(o.a)(this.origins_.length==this.resolutions_.length,20));var f=t.extent;void 0===f||this.origin_||this.origins_||(this.origin_=Object(h.C)(f)),Object(o.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(o.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.b,Object(o.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==f?f:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new c.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):f&&this.calculateTileRanges_(f)};v.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var c=r.minY,l=r.maxY;c<=l;++c)n([e,i,c])},v.prototype.forEachTileCoordParentTileRange=function(t,e,n,r,o){var l,h,f,d=null,m=t[0]-1;for(2===this.zoomFactor_?(h=t[1],f=t[2]):d=this.getTileCoordExtent(t,o);m>=this.minZoom;){if(2===this.zoomFactor_?(h=Math.floor(h/2),f=Math.floor(f/2),l=Object(c.a)(h,h,f,f,r)):l=this.getTileRangeForExtentAndZ(d,m,r),e.call(n,m,l))return!0;--m}return!1},v.prototype.getExtent=function(){return this.extent_},v.prototype.getMaxZoom=function(){return this.maxZoom},v.prototype.getMinZoom=function(){return this.minZoom},v.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},v.prototype.getResolution=function(t){return this.resolutions_[t]},v.prototype.getResolutions=function(){return this.resolutions_},v.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],o=2*t[2];return Object(c.a)(r,r+1,o,o+1,e)}var l=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(l,t[0]+1,e)}return null},v.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),o=this.getResolution(t),c=Object(d.d)(this.getTileSize(t),this.tmpSize_),l=r[0]+e.minX*c[0]*o,f=r[0]+(e.maxX+1)*c[0]*o,m=r[1]+e.minY*c[1]*o,y=r[1]+(e.maxY+1)*c[1]*o;return Object(h.k)(l,m,f,y,n)},v.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=y;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var o=r[1],l=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),Object(c.a)(o,r[1],l,r[2],n)},v.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Object(d.d)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]+(t[2]+.5)*r[1]*n]},v.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),o=Object(d.d)(this.getTileSize(t[0]),this.tmpSize_),c=n[0]+t[1]*o[0]*r,l=n[1]+t[2]*o[1]*r,f=c+o[0]*r,m=l+o[1]*r;return Object(h.k)(c,l,f,m,e)},v.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},v.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,o){var c=this.getZForResolution(n),l=n/this.getResolution(c),h=this.getOrigin(c),f=Object(d.d)(this.getTileSize(c),this.tmpSize_),y=r?.5:0,v=r?0:.5,_=Math.floor((t-h[0])/n+y),x=Math.floor((e-h[1])/n+v),w=l*_/f[0],E=l*x/f[1];return r?(w=Math.ceil(w)-1,E=Math.ceil(E)-1):(w=Math.floor(w),E=Math.floor(E)),Object(m.a)(c,w,E,o)},v.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,o){var c=this.getOrigin(n),l=this.getResolution(n),h=Object(d.d)(this.getTileSize(n),this.tmpSize_),f=r?.5:0,y=r?0:.5,v=Math.floor((t-c[0])/l+f),_=Math.floor((e-c[1])/l+y),x=v/h[0],w=_/h[1];return r?(x=Math.ceil(x)-1,w=Math.ceil(w)-1):(x=Math.floor(x),w=Math.floor(w)),Object(m.a)(n,x,w,o)},v.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},v.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},v.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},v.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},v.prototype.getZForResolution=function(t,e){var n=Object(l.h)(this.resolutions_,t,e||0);return Object(f.a)(n,this.minZoom,this.maxZoom)},v.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},e.a=v},function(t,e,n){"use strict";function r(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,o=r.indexOf(".");return(o=-1===o?r.length:o)>e?r:new Array(1+e-o).join("0")+r}function o(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),c=parseInt(r[i]||"0",10);if(o>c)return 1;if(c>o)return-1}return 0}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o})},function(t,e,n){"use strict";var r=n(2),o=n(150),c=n.n(o),l=n(0),h=n(8),f=function(t){this.rbush_=c()(t,void 0),this.items_={}};f.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(r.c)(e)]=n},f.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,o=e.length;i<o;i++){var c=t[i],l=e[i],h={minX:c[0],minY:c[1],maxX:c[2],maxY:c[3],value:l};n[i]=h,this.items_[Object(r.c)(l)]=h}this.rbush_.load(n)},f.prototype.remove=function(t){var e=Object(r.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},f.prototype.update=function(t,e){var n=this.items_[Object(r.c)(e)],o=[n.minX,n.minY,n.maxX,n.maxY];Object(l.p)(o,t)||(this.remove(e),this.insert(t,e))},f.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},f.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},f.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},f.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},f.prototype.forEach_=function(t,e,n){for(var r,i=0,o=t.length;i<o;i++)if(r=e.call(n,t[i]))return r;return r},f.prototype.isEmpty=function(){return Object(h.d)(this.items_)},f.prototype.clear=function(){this.rbush_.clear(),this.items_={}},f.prototype.getExtent=function(t){var data=this.rbush_.toJSON();return Object(l.k)(data.minX,data.minY,data.maxX,data.maxY,t)},f.prototype.concat=function(t){for(var i in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[i]=t.items_[i]},e.a=f},function(t,e,n){"use strict";var r=n(2),o=n(39),c=n(130),l=n(5),h=n(22),f=n(13),d=n(0),m=n(217),y=n(14),v=function(t){function e(e,n){t.call(this,e),this.context=n?null:Object(f.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(d.j)(),this.tmpTileRange_=new c.b(0,0,0,0),this.imageTransform_=Object(y.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==l.a.LOADED||n==l.a.EMPTY||n==l.a.ERROR&&!r},e.prototype.getTile=function(t,e,n,r,o){var c=this.getLayer(),h=c.getSource().getTile(t,e,n,r,o);return h.getState()==l.a.ERROR&&(c.getUseInterimTilesOnError()?c.getPreload()>0&&(this.newTiles_=!0):h.setState(l.a.LOADED)),this.isDrawableTile_(h)||(h=h.getInterimTile()),h},e.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,o=t.size,c=t.viewState,f=c.projection,m=c.resolution,v=c.center,_=this.getLayer(),x=_.getSource(),w=x.getRevision(),E=x.getTileGridForProjection(f),C=E.getZForResolution(m,this.zDirection),O=E.getResolution(C),S=Math.round(m/O)||1,I=t.extent;if(void 0!==e.extent&&(I=Object(d.B)(I,e.extent)),Object(d.H)(I))return!1;var T=E.getTileRangeForExtentAndZ(I,C),P=E.getTileRangeExtent(C,T),R=x.getTilePixelRatio(n),L={};L[C]={};var M,N,j,D=this.createLoadedTileFinder(x,f,L),A=t.viewHints,F=A[h.a.ANIMATING]||A[h.a.INTERACTING],k=this.tmpExtent,G=this.tmpTileRange_;for(this.newTiles_=!1,N=T.minX;N<=T.maxX;++N)for(j=T.minY;j<=T.maxY;++j)if(!(Date.now()-t.time>16&&F)){if(M=this.getTile(C,N,j,n,f),this.isDrawableTile_(M)){var B=Object(r.c)(this);if(M.getState()==l.a.LOADED){L[C][M.tileCoord.toString()]=M;var z=M.inTransition(B);this.newTiles_||!z&&-1!==this.renderedTiles.indexOf(M)||(this.newTiles_=!0)}if(1===M.getAlpha(B,t.time))continue}var U=E.getTileCoordChildTileRange(M.tileCoord,G,k),V=!1;U&&(V=D(C+1,U)),V||E.forEachTileCoordParentTileRange(M.tileCoord,D,null,G,k)}var Y=O*n/R*S;if(!(this.renderedResolution&&Date.now()-t.time>16&&F)&&(this.newTiles_||!this.renderedExtent_||!Object(d.g)(this.renderedExtent_,I)||this.renderedRevision!=w||S!=this.oversampling_||!F&&Y!=this.renderedResolution)){var X=this.context;if(X){var W=x.getTilePixelSize(C,n,f),H=Math.round(T.getWidth()*W[0]/S),$=Math.round(T.getHeight()*W[1]/S),canvas=X.canvas;canvas.width!=H||canvas.height!=$?(this.oversampling_=S,canvas.width=H,canvas.height=$):((this.renderedExtent_&&!Object(d.p)(P,this.renderedExtent_)||this.renderedRevision!=w)&&X.clearRect(0,0,H,$),S=this.oversampling_)}this.renderedTiles.length=0;var K,Z,J,i,Q,tt,et,nt,it,ot,st=Object.keys(L).map(Number);for(st.sort(function(a,b){return a===C?1:b===C?-1:a>b?1:a<b?-1:0}),i=0,Q=st.length;i<Q;++i)for(var at in J=st[i],Z=x.getTilePixelSize(J,n,f),K=E.getResolution(J)/O,et=R*x.getGutterForProjection(f),nt=L[J])M=nt[at],N=((tt=E.getTileCoordExtent(M.getTileCoord(),k))[0]-P[0])/O*R/S,j=(P[3]-tt[3])/O*R/S,it=Z[0]*K/S,ot=Z[1]*K/S,this.drawTileImage(M,t,e,N,j,it,ot,et,C===J),this.renderedTiles.push(M);this.renderedRevision=w,this.renderedResolution=O*n/R*S,this.renderedExtent_=P}var ut=this.renderedResolution/m,ct=Object(y.b)(this.imageTransform_,n*o[0]/2,n*o[1]/2,ut,ut,0,(this.renderedExtent_[0]-v[0])/this.renderedResolution*n,(v[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Object(y.b)(this.coordinateToCanvasPixelTransform,n*o[0]/2-ct[4],n*o[1]/2-ct[5],n/m,-n/m,0,-v[0],-v[1]),this.updateUsedTiles(t.usedTiles,x,C,T),this.manageTilePyramid(t,x,E,n,f,I,C,_.getPreload()),this.scheduleExpireCache(t,x),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,n,o,c,l,h,f,d){var image=this.getTileImage(t);if(image){var m=Object(r.c)(this),y=d?t.getAlpha(m,e.time):1,v=this.getLayer().getSource();1!==y||v.getOpaque(e.viewState.projection)||this.context.clearRect(o,c,l,h);var _=y!==this.context.globalAlpha;_&&(this.context.save(),this.context.globalAlpha=y),this.context.drawImage(image,f,f,image.width-2*f,image.height-2*f,o,c,l,h),_&&this.context.restore(),1!==y?e.animate=!0:d&&t.endTransition(m)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(m.a);v.handles=function(t){return t.getType()===o.a.TILE},v.create=function(t,e){return new v(e)},v.prototype.getLayer,e.a=v},function(t,e,n){"use strict";e.a={ACTIVE:"active"}},function(t,e,n){"use strict";var r=n(2),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},o.prototype.getColor=function(){return this.color_},o.prototype.getLineCap=function(){return this.lineCap_},o.prototype.getLineDash=function(){return this.lineDash_},o.prototype.getLineDashOffset=function(){return this.lineDashOffset_},o.prototype.getLineJoin=function(){return this.lineJoin_},o.prototype.getMiterLimit=function(){return this.miterLimit_},o.prototype.getWidth=function(){return this.width_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},o.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},o.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},o.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},o.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},o.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(r.c)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.a=o},function(t,e,n){"use strict";n.r(e);var r=n(37),o=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};o.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},o.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},o.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var o=this.points_[e]-this.points_[n],c=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(c,o),this.initialVelocity_=Math.sqrt(o*o+c*c)/r,this.initialVelocity_>this.minVelocity_},o.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},o.prototype.getAngle=function(){return this.angle_};var c=o,l=n(21),h=n(28);function f(t){var e=!1;if(t.type==l.a.DBLCLICK){var n=t.originalEvent,map=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,view=map.getView();Object(h.f)(view,o,r,this.duration_),t.preventDefault(),e=!0}return!e}var d=function(t){function e(e){t.call(this,{handleEvent:f});var n=e||{};this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.a),m=n(22),y=n(18),v=n(36),_=n(24),x=n(19),w=n(8);function E(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var C=function(t){function e(e){var n=e||{};t.call(this,n),n.handleDownEvent&&(this.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(this.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(this.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(this.handleUpEvent=n.handleUpEvent),n.stopDown&&(this.stopDown=n.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==l.a.POINTERDRAG)this.handleDragEvent(t);else if(t.type==l.a.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==l.a.POINTERDOWN){var r=this.handleDownEvent(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==l.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===l.a.POINTERDOWN||e===l.a.POINTERDRAG||e===l.a.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==l.a.POINTERUP?delete this.trackedPointers_[n]:t.type==l.a.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=Object(w.c)(this.trackedPointers_)}},e}(h.a),O=function(t){function e(e){t.call(this,{stopDown:x.a});var n=e||{};this.kinetic_=n.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=n.condition?n.condition:_.h,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(m.a.INTERACTING,1));var e=this.targetPointers,n=E(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var r=this.lastCentroid[0]-n[0],o=n[1]-this.lastCentroid[1],view=t.map.getView(),c=[r,o];Object(y.g)(c,view.getResolution()),Object(y.f)(c,view.getRotation()),Object(y.a)(c,view.getCenter()),c=view.constrainCenter(c),view.setCenter(c)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var map=t.map,view=map.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var e=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=view.getCenter(),o=map.getPixelFromCoordinate(r),c=map.getCoordinateFromPixel([o[0]-e*Math.cos(n),o[1]-e*Math.sin(n)]);view.animate({center:view.constrainCenter(c),duration:500,easing:v.b})}return this.panning_&&(this.panning_=!1,view.setHint(m.a.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var view=t.map.getView();return this.lastCentroid=null,view.getAnimating()&&view.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(C),S=n(85),I=function(t){function e(e){var n=e||{};t.call(this,{stopDown:x.a}),this.condition_=n.condition?n.condition:_.b,this.lastAngle_=void 0,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(_.f)(t)){var map=t.map,view=map.getView();if(view.getConstraints().rotation!==S.c){var e=map.getSize(),n=t.pixel,r=Math.atan2(e[1]/2-n[1],n[0]-e[0]/2);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_,c=view.getRotation();Object(h.d)(view,c-o)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){if(!Object(_.f)(t))return!0;var view=t.map.getView();view.setHint(m.a.INTERACTING,-1);var e=view.getRotation();return Object(h.c)(view,e,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!Object(_.f)(t)&&(!(!Object(_.e)(t)||!this.condition_(t))&&(t.map.getView().setHint(m.a.INTERACTING,1),this.lastAngle_=void 0,!0))},e}(C),T=n(0),P=n(26),R=n(148),L=n(38),M=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,style=this.element_.style;style.left=Math.min(t[0],e[0])+"px",style.top=Math.min(t[1],e[1])+"px",style.width=Math.abs(e[0]-t[0])+"px",style.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(map){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var style=this.element_.style;style.left=style.top=style.width=style.height="inherit"}this.map_=map,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new L.b([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(R.a),N="boxstart",j="boxdrag",D="boxend",A=function(t){function e(e,n,r){t.call(this,e),this.coordinate=n,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a),F=function(t){function e(e){t.call(this);var n=e||{};this.box_=new M(n.className||"ol-dragbox"),this.minArea_=void 0!==n.minArea?n.minArea:64,this.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:x.c,this.startPixel_=null,this.condition_=n.condition?n.condition:_.c,this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],o=n[1]-e[1];return r*r+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Object(_.f)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new A(j,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Object(_.f)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new A(D,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!Object(_.f)(t)&&(!(!Object(_.e)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new A(N,t.coordinate,t)),!0))},e}(C);function k(){var map=this.getMap(),view=map.getView(),t=map.getSize(),e=this.getGeometry().getExtent();if(this.out_){var n=view.calculateExtent(t),r=Object(T.n)([map.getPixelFromCoordinate(Object(T.v)(e)),map.getPixelFromCoordinate(Object(T.D)(e))]),o=view.getResolutionForExtent(r,t);Object(T.J)(n,1/o),e=n}var c=view.constrainResolution(view.getResolutionForExtent(e,t)),l=Object(T.x)(e);l=view.constrainCenter(l),view.animate({resolution:c,center:l,duration:this.duration_,easing:v.b})}var G=function(t){function e(e){var n=e||{},r=n.condition?n.condition:_.k;t.call(this,{condition:r,className:n.className||"ol-dragzoom",onBoxEnd:k}),this.duration_=void 0!==n.duration?n.duration:200,this.out_=void 0!==n.out&&n.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(F),B=n(4),z={LEFT:37,UP:38,RIGHT:39,DOWN:40};function U(t){var e=!1;if(t.type==B.a.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==z.DOWN||n==z.LEFT||n==z.RIGHT||n==z.UP)){var view=t.map.getView(),r=view.getResolution()*this.pixelDelta_,o=0,c=0;n==z.DOWN?c=-r:n==z.LEFT?o=-r:n==z.RIGHT?o=r:c=r;var l=[o,c];Object(y.f)(l,view.getRotation()),Object(h.b)(view,l,this.duration_),t.preventDefault(),e=!0}}return!e}var V=function(t){function e(e){t.call(this,{handleEvent:U});var n=e||{};this.defaultCondition_=function(t){return Object(_.h)(t)&&Object(_.m)(t)},this.condition_=void 0!==n.condition?n.condition:this.defaultCondition_,this.duration_=void 0!==n.duration?n.duration:100,this.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.a);function Y(t){var e=!1;if(t.type==B.a.KEYDOWN||t.type==B.a.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var map=t.map,r=n=="+".charCodeAt(0)?this.delta_:-this.delta_,view=map.getView();Object(h.f)(view,r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var X=function(t){function e(e){t.call(this,{handleEvent:Y});var n=e||{};this.condition_=n.condition?n.condition:_.m,this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.a),W=n(164),H=function(t){function e(e){var n=e||{},r=n;r.stopDown||(r.stopDown=x.a),t.call(this,r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=o;var map=t.map,view=map.getView();if(view.getConstraints().rotation!==S.c){var l=map.getViewport().getBoundingClientRect(),f=E(this.targetPointers);if(f[0]-=l.left,f[1]-=l.top,this.anchor_=map.getCoordinateFromPixel(f),this.rotating_){var d=view.getRotation();map.render(),Object(h.d)(view,d+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var view=t.map.getView();if(view.setHint(m.a.INTERACTING,-1),this.rotating_){var e=view.getRotation();Object(h.c)(view,e,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var map=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||map.getView().setHint(m.a.INTERACTING,1),!0}return!1},e}(C),$=function(t){function e(e){var n=e||{},r=n;r.stopDown||(r.stopDown=x.a),t.call(this,r),this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],o=n.clientX-r.clientX,c=n.clientY-r.clientY,l=Math.sqrt(o*o+c*c);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var map=t.map,view=map.getView(),f=view.getResolution(),d=view.getMaxResolution(),m=view.getMinResolution(),y=f*e;y>d?(e=d/f,y=d):y<m&&(e=m/f,y=m),1!=e&&(this.lastScaleDelta_=e);var v=map.getViewport().getBoundingClientRect(),_=E(this.targetPointers);_[0]-=v.left,_[1]-=v.top,this.anchor_=map.getCoordinateFromPixel(_),map.render(),Object(h.g)(view,y,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var view=t.map.getView();view.setHint(m.a.INTERACTING,-1);var e=view.getResolution();if(this.constrainResolution_||e<view.getMinResolution()||e>view.getMaxResolution()){var n=this.lastScaleDelta_-1;Object(h.e)(view,e,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var map=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||map.getView().setHint(m.a.INTERACTING,1),!0}return!1},e}(C),K=n(1),Z=n(6),J="addfeatures",Q=function(t){function e(e,n,r,o){t.call(this,e),this.features=r,this.file=n,this.projection=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a);function tt(t){for(var e=t.dataTransfer.files,i=0,n=e.length;i<n;++i){var r=e.item(i),o=new FileReader;o.addEventListener(B.a.LOAD,this.handleResult_.bind(this,r)),o.readAsText(r)}}function et(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var nt=function(t){function e(e){var n=e||{};t.call(this,{handleEvent:x.b}),this.formatConstructors_=n.formatConstructors?n.formatConstructors:[],this.projection_=n.projection?Object(Z.get)(n.projection):null,this.dropListenKeys_=null,this.source_=n.source||null,this.target=n.target?n.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var n=e.target.result,map=this.getMap(),r=this.projection_;r||(r=map.getView().getProjection());for(var o=this.formatConstructors_,c=[],i=0,l=o.length;i<l;++i){var h=new o[i];if((c=this.tryReadFeatures_(h,n,{featureProjection:r}))&&c.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(c)),this.dispatchEvent(new Q(J,t,c,r))},e.prototype.registerListeners_=function(){var map=this.getMap();if(map){var t=this.target?this.target:map.getViewport();this.dropListenKeys_=[Object(K.a)(t,B.a.DROP,tt,this),Object(K.a)(t,B.a.DRAGENTER,et,this),Object(K.a)(t,B.a.DRAGOVER,et,this),Object(K.a)(t,B.a.DROP,et,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(map){this.unregisterListeners_(),t.prototype.setMap.call(this,map),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,text,e){try{return t.readFeatures(text,e)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(K.e),this.dropListenKeys_=null)},e}(h.a),it=function(t){function e(e){var n=e||{};t.call(this,n),this.condition_=n.condition?n.condition:_.k,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==n.duration?n.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(_.f)(t)){var map=t.map,e=map.getSize(),n=t.pixel,r=n[0]-e[0]/2,o=e[1]/2-n[1],c=Math.atan2(o,r),l=Math.sqrt(r*r+o*o),view=map.getView();if(view.getConstraints().rotation!==S.c&&void 0!==this.lastAngle_){var f=c-this.lastAngle_;Object(h.d)(view,view.getRotation()-f)}if(this.lastAngle_=c,void 0!==this.lastMagnitude_){var d=this.lastMagnitude_*(view.getResolution()/l);Object(h.g)(view,d)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},e.prototype.handleUpEvent=function(t){if(!Object(_.f)(t))return!0;var view=t.map.getView();view.setHint(m.a.INTERACTING,-1);var e=this.lastScaleDelta_-1;return Object(h.c)(view,view.getRotation()),Object(h.e)(view,view.getResolution(),void 0,this.duration_,e),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Object(_.f)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(m.a.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(C),ot=n(63),st=n(97),at=n(20),ut=n(162),ct=n(3),lt=n(88),ht=n(142),pt=n(106),ft=n(146),gt=n(113),mt=n(47),yt=n(126),vt=n(58),_t=n(75),bt=n(60),xt={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},wt="drawstart",Et="drawend",Ct=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a);var Ot=function(t){function e(e){var n=e;n.stopDown||(n.stopDown=x.a),t.call(this,n),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;t===ct.a.POINT||t===ct.a.MULTI_POINT?e=xt.POINT:t===ct.a.LINE_STRING||t===ct.a.MULTI_LINE_STRING?e=xt.LINE_STRING:t===ct.a.POLYGON||t===ct.a.MULTI_POLYGON?e=xt.POLYGON:t===ct.a.CIRCLE&&(e=xt.CIRCLE);return e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===xt.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:x.b;var r,o=e.geometryFunction;if(!o)if(this.type_===ct.a.CIRCLE)o=function(t,e){var circle=e||new ut.a([NaN,NaN]),n=Object(y.h)(t[0],t[1]);return circle.setCenterAndRadius(t[0],Math.sqrt(n)),circle};else{var c,l=this.mode_;l===xt.POINT?c=mt.a:l===xt.LINE_STRING?c=lt.a:l===xt.POLYGON&&(c=L.b),o=function(t,e){var n=e;return n?l===xt.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new c(t),n}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new vt.a({source:new _t.a({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=Object(bt.b)(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:_.h,this.freehandCondition_,e.freehand?this.freehandCondition_=_.c:this.freehandCondition_=e.freehandCondition?e.freehandCondition:_.k,Object(K.a)(this,Object(at.b)(yt.a.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(map){t.prototype.setMap.call(this,map),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===B.a.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==xt.POINT&&this.freehandCondition_(e);var n=e.type===l.a.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&e.type===l.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===l.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),r=!1):this.freehand_&&e.type===l.a.POINTERDOWN?r=!1:n?(r=e.type===l.a.POINTERMOVE)&&this.freehand_?r=this.handlePointerMove_(e):(e.pointerEvent.pointerType==gt.b||e.type===l.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===l.a.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,e)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new st.a(l.a.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.mode_===xt.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||n?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===xt.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,r=e[0]-n[0],o=e[1]-n[1],c=r*r+o*o;if(this.shouldHandle_=this.freehand_?c>this.squaredClickTolerance_:c<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,r=[this.finishCoordinate_];if(this.mode_===xt.LINE_STRING)n=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===xt.POLYGON){var o=this.sketchCoords_;n=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(n)for(var map=t.map,i=0,c=r.length;i<c;i++){var l=r[i],h=map.getPixelFromCoordinate(l),f=t.pixel,d=f[0]-h[0],m=f[1]-h[1],y=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(d*d+m*m)<=y){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new ot.a(new mt.a(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===xt.POINT?this.sketchCoords_=e.slice():this.mode_===xt.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ot.a(new lt.a(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new ot.a,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Ct(wt,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,r,o=t.coordinate,c=this.sketchFeature_.getGeometry();(this.mode_===xt.POINT?n=this.sketchCoords_:this.mode_===xt.POLYGON?(n=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):n=(e=this.sketchCoords_)[e.length-1],n[0]=o[0],n[1]=o[1],this.geometryFunction_(this.sketchCoords_,c),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(c.getType()==ct.a.POLYGON&&this.mode_!==xt.POLYGON){this.sketchLine_||(this.sketchLine_=new ot.a);var l=c.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates()),r.changed()):(r=new lt.a(l.getFlatCoordinates(),l.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,r=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===xt.LINE_STRING?(this.finishCoordinate_=r.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(r.slice()),this.geometryFunction_(n,o)):this.mode_===xt.POLYGON&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(r.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===xt.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===xt.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry();this.mode_===xt.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===xt.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===ct.a.MULTI_POINT?t.setGeometry(new pt.a([e])):this.type_===ct.a.MULTI_LINE_STRING?t.setGeometry(new ht.a([e])):this.type_===ct.a.MULTI_POLYGON&&t.setGeometry(new ft.a([e])),this.dispatchEvent(new Ct(Et,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Ct(wt,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var map=this.getMap(),t=this.getActive();map&&t||this.abortDrawing_(),this.overlay_.setMap(t?map:null)},e}(C),St={EXTENTCHANGED:"extentchanged"},It=function(t){function e(e){t.call(this,St.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a);function Tt(){var style=Object(bt.b)();return function(t,e){return style[ct.a.POINT]}}function Pt(t){return function(e){return Object(T.b)([t,e])}}function Rt(t,e){return t[0]==e[0]?function(n){return Object(T.b)([t,[n[0],e[1]]])}:t[1]==e[1]?function(n){return Object(T.b)([t,[e[0],n[1]]])}:null}var Lt=function(t){function e(e){var style,n=e||{};t.call(this,n),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new vt.a({source:new _t.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(style=Object(bt.b)(),function(t,e){return style[ct.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new vt.a({source:new _t.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:Tt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,map){var e=map.getCoordinateFromPixel(t),n=this.getExtent();if(n){var r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);r.sort(function(a,b){return Object(y.i)(e,a)-Object(y.i)(e,b)});var o=r[0],c=Object(y.c)(e,o),l=map.getPixelFromCoordinate(c);if(Object(y.d)(t,l)<=this.pixelTolerance_){var h=map.getPixelFromCoordinate(o[0]),f=map.getPixelFromCoordinate(o[1]),d=Object(y.h)(l,h),m=Object(y.h)(l,f),v=Math.sqrt(Math.min(d,m));return this.snappedToVertex_=v<=this.pixelTolerance_,this.snappedToVertex_&&(c=d>m?o[1]:o[0]),c}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,map=t.map,n=this.snapToVertex_(e,map);n||(n=map.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(L.d)(t)):e.setGeometry(void 0):(e=t?new ot.a(Object(L.d)(t)):new ot.a({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new ot.a(new mt.a(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=l.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,map=t.map,n=this.getExtent(),r=this.snapToVertex_(e,map),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(r&&n){var c=r[0]==n[0]||r[0]==n[2]?r[0]:null,l=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==c&&null!==l?this.pointerHandler_=Pt(o(r)):null!==c?this.pointerHandler_=Rt(o([c,n[1]]),o([c,n[3]])):null!==l&&(this.pointerHandler_=Rt(o([n[0],l]),o([n[2],l])))}else r=map.getCoordinateFromPixel(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=Pt(r);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(T.u)(e)||this.setExtent(null),!1},e.prototype.setMap=function(map){this.extentOverlay_.setMap(map),this.vertexOverlay_.setMap(map),t.prototype.setMap.call(this,map)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new It(this.extent_))},e}(C),Mt=n(2),Nt=n(34),jt=n(11),Dt=n(74),At=n(124),Ft=1,kt="modifystart",Gt="modifyend",Bt=function(t){function e(e,n,r){t.call(this,e),this.features=n,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a);function zt(a,b){return a.index-b.index}function Ut(t,e){var n=e.geometry;if(n.getType()===ct.a.CIRCLE){var r=n;if(e.index===Ft){var o=Object(y.h)(r.getCenter(),t),c=Math.sqrt(o)-r.getRadius();return c*c}}return Object(y.i)(t,e.segment)}function qt(t,e){var n=e.geometry;return n.getType()===ct.a.CIRCLE&&e.index===Ft?n.getClosestPoint(t):Object(y.c)(t,e.segment)}var Vt=function(t){function e(e){var style,n;if(t.call(this,e),this.condition_=e.condition?e.condition:_.j,this.defaultDeleteCondition_=function(t){return Object(_.a)(t)&&Object(_.l)(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_.c,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new At.a,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new vt.a({source:new _t.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(style=Object(bt.b)(),function(t,e){return style[ct.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,n=new r.a(this.source_.getFeatures()),Object(K.a)(this.source_,Dt.a.ADDFEATURE,this.handleSourceAdd_,this),Object(K.a)(this.source_,Dt.a.REMOVEFEATURE,this.handleSourceRemove_,this)):n=e.features,!n)throw new Error("The modify interaction requires features or a source");this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),Object(K.a)(this.features_,Nt.a.ADD,this.handleFeatureAdd_,this),Object(K.a)(this.features_,Nt.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var map=this.getMap();map&&map.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,map),Object(K.a)(t,B.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Bt(kt,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(K.c)(t,B.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(var i=n.length-1;i>=0;--i)e.remove(n[i])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(map){this.overlay_.setMap(map),t.prototype.setMap.call(this,map)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),r={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],c={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),c)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),c={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Object(T.b)(o),c)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],i=0,l=c.length-1;i<l;++i){var h=c.slice(i,i+2),f={feature:t,geometry:e,depth:[r],index:i,segment:h};this.rBush_.insert(Object(T.b)(h),f)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],i=0,l=c.length-1;i<l;++i){var h=c.slice(i,i+2),f={feature:t,geometry:e,depth:[r],index:i,segment:h};this.rBush_.insert(Object(T.b)(h),f)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],l=0,h=c.length;l<h;++l)for(var f=c[l],i=0,d=f.length-1;i<d;++i){var m=f.slice(i,i+2),y={feature:t,geometry:e,depth:[l,r],index:i,segment:m};this.rBush_.insert(Object(T.b)(m),y)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[n,n]},o={feature:t,geometry:e,index:Ft,segment:[n,n]},c=[r,o];r.featureSegments=o.featureSegments=c,this.rBush_.insert(Object(T.m)(n),r),this.rBush_.insert(e.getExtent(),o)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new ot.a(new mt.a(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=l.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=l.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==l.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],c=o.depth,l=o.geometry,h=void 0,f=o.segment,d=r[1];e.length<l.getStride();)e.push(f[d][e.length]);switch(l.getType()){case ct.a.POINT:h=e,f[0]=f[1]=e;break;case ct.a.MULTI_POINT:(h=l.getCoordinates())[o.index]=e,f[0]=f[1]=e;break;case ct.a.LINE_STRING:(h=l.getCoordinates())[o.index+d]=e,f[d]=e;break;case ct.a.MULTI_LINE_STRING:case ct.a.POLYGON:(h=l.getCoordinates())[c[0]][o.index+d]=e,f[d]=e;break;case ct.a.MULTI_POLYGON:(h=l.getCoordinates())[c[1]][c[0]][o.index+d]=e,f[d]=e;break;case ct.a.CIRCLE:f[0]=f[1]=e,0===o.index?(this.changingFeature_=!0,l.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,l.setRadius(Object(y.d)(l.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(l,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var r=[],o=n.getGeometry().getCoordinates(),c=Object(T.b)([o]),l=this.rBush_.getInExtent(c),h={};l.sort(zt);for(var i=0,f=l.length;i<f;++i){var d=l[i],m=d.segment,v=Object(Mt.c)(d.feature),_=d.depth;if(_&&(v+="-"+_.join("-")),h[v]||(h[v]=new Array(2)),d.geometry.getType()===ct.a.CIRCLE&&d.index===Ft){var x=qt(e,d);Object(y.e)(x,o)&&!h[v][0]&&(this.dragSegments_.push([d,0]),h[v][0]=d)}else if(Object(y.e)(m[0],o)&&!h[v][0])this.dragSegments_.push([d,0]),h[v][0]=d;else if(Object(y.e)(m[1],o)&&!h[v][1]){if((d.geometry.getType()===ct.a.LINE_STRING||d.geometry.getType()===ct.a.MULTI_LINE_STRING)&&h[v][0]&&0===h[v][0].index)continue;this.dragSegments_.push([d,1]),h[v][1]=d}else this.insertVertexCondition_(t)&&Object(Mt.c)(m)in this.vertexSegments_&&!h[v][0]&&!h[v][1]&&r.push([d,o])}r.length&&this.willModifyFeatures_(t);for(var w=r.length-1;w>=0;--w)this.insertVertex_.apply(this,r[w])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var i=this.dragSegments_.length-1;i>=0;--i){var e=this.dragSegments_[i][0],n=e.geometry;if(n.getType()===ct.a.CIRCLE){var r=n.getCenter(),o=e.featureSegments[0],c=e.featureSegments[1];o.segment[0]=o.segment[1]=r,c.segment[0]=c.segment[1]=r,this.rBush_.update(Object(T.m)(r),o),this.rBush_.update(n.getExtent(),c)}else this.rBush_.update(Object(T.b)(e.segment),e)}return this.modified_&&(this.dispatchEvent(new Bt(Gt,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,map){var e=map.getCoordinateFromPixel(t),n=Object(T.c)(Object(T.m)(e),map.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(n);if(r.length>0){r.sort(function(a,b){return Ut(e,a)-Ut(e,b)});var o=r[0],c=o.segment,l=qt(e,o),h=map.getPixelFromCoordinate(l),f=Object(y.d)(t,h);if(f<=this.pixelTolerance_){var d={};if(o.geometry.getType()===ct.a.CIRCLE&&o.index===Ft)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var m=map.getPixelFromCoordinate(c[0]),v=map.getPixelFromCoordinate(c[1]),_=Object(y.h)(h,m),x=Object(y.h)(h,v);f=Math.sqrt(Math.min(_,x)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(l=_>x?c[1]:c[0]),this.createOrUpdateVertexFeature_(l);for(var i=1,w=r.length;i<w;++i){var E=r[i].segment;if(!(Object(y.e)(c[0],E[0])&&Object(y.e)(c[1],E[1])||Object(y.e)(c[0],E[1])&&Object(y.e)(c[1],E[0])))break;d[Object(Mt.c)(E)]=!0}}return d[Object(Mt.c)(c)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var n,r=t.segment,o=t.feature,c=t.geometry,l=t.depth,h=t.index;e.length<c.getStride();)e.push(0);switch(c.getType()){case ct.a.MULTI_LINE_STRING:case ct.a.POLYGON:(n=c.getCoordinates())[l[0]].splice(h+1,0,e);break;case ct.a.MULTI_POLYGON:(n=c.getCoordinates())[l[1]][l[0]].splice(h+1,0,e);break;case ct.a.LINE_STRING:(n=c.getCoordinates()).splice(h+1,0,e);break;default:return}this.setGeometryCoordinates_(c,n);var f=this.rBush_;f.remove(t),this.updateSegmentIndices_(c,h,l,1);var d={segment:[r[0],e],feature:o,geometry:c,depth:l,index:h};f.insert(Object(T.b)(d.segment),d),this.dragSegments_.push([d,1]);var m={segment:[e,r[1]],feature:o,geometry:c,depth:l,index:h+1};f.insert(Object(T.b)(m.segment),m),this.dragSegments_.push([m,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=l.a.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new Bt(Gt,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var component,t,e,n,i,r,o,c,l,h,f,d=this.dragSegments_,m={},y=!1;for(i=d.length-1;i>=0;--i)h=(e=d[i])[0],f=Object(Mt.c)(h.feature),h.depth&&(f+="-"+h.depth.join("-")),f in m||(m[f]={}),0===e[1]?(m[f].right=h,m[f].index=h.index):1==e[1]&&(m[f].left=h,m[f].index=h.index+1);for(f in m){switch(l=m[f].right,o=m[f].left,(c=(r=m[f].index)-1)<0&&(c=0),component=t=(n=(h=void 0!==o?o:l).geometry).getCoordinates(),y=!1,n.getType()){case ct.a.MULTI_LINE_STRING:t[h.depth[0]].length>2&&(t[h.depth[0]].splice(r,1),y=!0);break;case ct.a.LINE_STRING:t.length>2&&(t.splice(r,1),y=!0);break;case ct.a.MULTI_POLYGON:component=component[h.depth[1]];case ct.a.POLYGON:(component=component[h.depth[0]]).length>4&&(r==component.length-1&&(r=0),component.splice(r,1),y=!0,0===r&&(component.pop(),component.push(component[0]),c=component.length-1))}if(y){this.setGeometryCoordinates_(n,t);var v=[];if(void 0!==o&&(this.rBush_.remove(o),v.push(o.segment[0])),void 0!==l&&(this.rBush_.remove(l),v.push(l.segment[1])),void 0!==o&&void 0!==l){var _={depth:h.depth,feature:h.feature,geometry:h.geometry,index:c,segment:v};this.rBush_.insert(Object(T.b)(_.segment),_)}this.updateSegmentIndices_(n,r,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return y},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,r){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(void 0===n||void 0===o.depth||Object(jt.b)(o.depth,n))&&o.index>e&&(o.index+=r)})},e}(C),Yt={SELECT:"select"},Xt=function(t){function e(e,n,r,o){t.call(this,e),this.selected=n,this.deselected=r,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a);function Wt(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),n=this.removeCondition_(t),r=this.toggleCondition_(t),o=!e&&!n&&!r,map=t.map,c=this.getFeatures(),l=[],h=[];if(o){Object(w.b)(this.featureLayerAssociation_),map.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var i=c.getLength()-1;i>=0;--i){var f=c.item(i),d=h.indexOf(f);d>-1?h.splice(d,1):(c.remove(f),l.push(f))}0!==h.length&&c.extend(h)}else{map.forEachFeatureAtPixel(t.pixel,function(t,o){if(this.filter_(t,o))return!e&&!r||Object(jt.f)(c.getArray(),t)?(n||r)&&Object(jt.f)(c.getArray(),t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var m=l.length-1;m>=0;--m)c.remove(l[m]);c.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new Xt(Yt.SELECT,h,l,t)),Object(_.i)(t)}function Ht(){var t=Object(bt.b)();return Object(jt.c)(t[ct.a.POLYGON],t[ct.a.LINE_STRING]),Object(jt.c)(t[ct.a.GEOMETRY_COLLECTION],t[ct.a.LINE_STRING]),function(e,n){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var $t=function(t){function e(e){t.call(this,{handleEvent:Wt});var n=e||{};this.condition_=n.condition?n.condition:_.l,this.addCondition_=n.addCondition?n.addCondition:_.g,this.removeCondition_=n.removeCondition?n.removeCondition:_.g,this.toggleCondition_=n.toggleCondition?n.toggleCondition:_.k,this.multi_=!!n.multi&&n.multi,this.filter_=n.filter?n.filter:x.b,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0;var r,o=new vt.a({source:new _t.a({useSpatialIndex:!1,features:n.features,wrapX:n.wrapX}),style:n.style?n.style:Ht(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=o,n.layers)if("function"==typeof n.layers)r=n.layers;else{var c=n.layers;r=function(t){return Object(jt.f)(c,t)}}else r=x.b;this.layerFilter_=r,this.featureLayerAssociation_={};var l=this.getFeatures();Object(K.a)(l,Nt.a.ADD,this.addFeature_,this),Object(K.a)(l,Nt.a.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(Mt.c)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(Mt.c)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(map){var e=this.getMap(),n=this.getFeatures();e&&n.forEach(e.unskipFeature.bind(e)),t.prototype.setMap.call(this,map),this.featureOverlay_.setMap(map),map&&n.forEach(map.skipFeature.bind(map))},e.prototype.addFeature_=function(t){var map=this.getMap();map&&map.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var map=this.getMap();map&&map.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(Mt.c)(t)]},e}(h.a);function Kt(t){return t.feature?t.feature:t.element?t.element:void 0}var Zt=function(t){function e(e){var n=e||{},r=n;r.handleDownEvent||(r.handleDownEvent=x.b),r.stopDown||(r.stopDown=x.a),t.call(this,r),this.source_=n.source?n.source:null,this.vertex_=void 0===n.vertex||n.vertex,this.edge_=void 0===n.edge||n.edge,this.features_=n.features?n.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.sortByDistance_=function(a,b){var t=Object(y.i)(this.pixelCoordinate_,a.segment),e=Object(y.i)(this.pixelCoordinate_,b.segment);return t-e}.bind(this),this.rBush_=new At.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var n=void 0===e||e,r=Object(Mt.c)(t),o=t.getGeometry();if(o){var c=this.SEGMENT_WRITERS_[o.getType()];c&&(this.indexedFeaturesExtents_[r]=o.getExtent(Object(T.j)()),c.call(this,t,o))}n&&(this.featureChangeListenerKeys_[r]=Object(K.a)(t,B.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var n=this.snapTo(e.pixel,e.coordinate,e.map);return n.snapped&&(e.coordinate=n.vertex.slice(0,2),e.pixel=n.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=Kt(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=Kt(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var n=Object(Mt.c)(e);n in this.pendingFeatures_||(this.pendingFeatures_[n]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(w.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var n=void 0===e||e,r=Object(Mt.c)(t),o=this.indexedFeaturesExtents_[r];if(o){var c=this.rBush_,l=[];c.forEachInExtent(o,function(e){t===e.feature&&l.push(e)});for(var i=l.length-1;i>=0;--i)c.remove(l[i])}n&&(Object(K.e)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},e.prototype.setMap=function(map){var e=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();e&&(n.forEach(K.e),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,map),map&&(this.features_?n.push(Object(K.a)(this.features_,Nt.a.ADD,this.handleFeatureAdd_,this),Object(K.a)(this.features_,Nt.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(K.a)(this.source_,Dt.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(K.a)(this.source_,Dt.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,map){var n=map.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=map.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(T.b)([n,r]),c=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(c=c.filter(function(t){return t.feature.getGeometry().getType()!==ct.a.CIRCLE}));var l,h,f,d,m=!1,v=null,_=null;if(c.length>0){this.pixelCoordinate_=e,c.sort(this.sortByDistance_);var x=c[0].segment,w=c[0].feature.getGeometry().getType()===ct.a.CIRCLE;this.vertex_&&!this.edge_?(l=map.getPixelFromCoordinate(x[0]),h=map.getPixelFromCoordinate(x[1]),f=Object(y.h)(t,l),d=Object(y.h)(t,h),Math.sqrt(Math.min(f,d))<=this.pixelTolerance_&&(m=!0,v=f>d?x[1]:x[0],_=map.getPixelFromCoordinate(v))):this.edge_&&(v=w?Object(y.b)(e,c[0].feature.getGeometry()):Object(y.c)(e,x),_=map.getPixelFromCoordinate(v),Object(y.d)(t,_)<=this.pixelTolerance_&&(m=!0,this.vertex_&&!w&&(l=map.getPixelFromCoordinate(x[0]),h=map.getPixelFromCoordinate(x[1]),f=Object(y.h)(_,l),d=Object(y.h)(_,h),Math.sqrt(Math.min(f,d))<=this.pixelTolerance_&&(v=f>d?x[1]:x[0],_=map.getPixelFromCoordinate(v))))),m&&(_=[Math.round(_[0]),Math.round(_[1])])}return{snapped:m,vertex:v,vertexPixel:_}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var n=Object(L.c)(e).getCoordinates()[0],i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),c={feature:t,segment:o};this.rBush_.insert(Object(T.b)(o),c)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i){var r=this.SEGMENT_WRITERS_[n[i].getType()];r&&r.call(this,t,n[i])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length-1;i<r;++i){var o=n.slice(i,i+2),c={feature:t,segment:o};this.rBush_.insert(Object(T.b)(o),c)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],i=0,l=c.length-1;i<l;++i){var h=c.slice(i,i+2),f={feature:t,segment:h};this.rBush_.insert(Object(T.b)(h),f)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,r=n.length;i<r;++i){var o=n[i],c={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],l=0,h=c.length;l<h;++l)for(var f=c[l],i=0,d=f.length-1;i<d;++i){var m=f.slice(i,i+2),y={feature:t,segment:m};this.rBush_.insert(Object(T.b)(m),y)}},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),r={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),r=0,o=n.length;r<o;++r)for(var c=n[r],i=0,l=c.length-1;i<l;++i){var h=c.slice(i,i+2),f={feature:t,segment:h};this.rBush_.insert(Object(T.b)(h),f)}},e}(C),Jt="translatestart",Qt="translating",te="translateend",ee=function(t){function e(e,n,r){t.call(this,e),this.features=n,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(P.a),ne=function(t){function e(e){var n,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)n=r.layers;else{var o=r.layers;n=function(t){return Object(jt.f)(o,t)}}else n=x.b;this.layerFilter_=n,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,Object(K.a)(this,Object(at.b)(yt.a.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new r.a([this.lastFeature_]);return this.dispatchEvent(new ee(Jt,e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new r.a([this.lastFeature_]);return this.dispatchEvent(new ee(te,e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,n=e[0]-this.lastCoordinate_[0],o=e[1]-this.lastCoordinate_[1],c=this.features_||new r.a([this.lastFeature_]);c.forEach(function(t){var e=t.getGeometry();e.translate(n,o),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new ee(Qt,c,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,map){return map.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(jt.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(map){var e=this.getMap();t.prototype.setMap.call(this,map),this.updateState_(e)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var map=this.getMap(),e=this.getActive();map&&e||(map=map||t)&&map.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(C);function ie(t){var e=t||{},n=new r.a,o=new c(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new I),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new d({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new O({condition:e.onFocusOnly?_.d:void 0,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new H),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new $({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new V),n.push(new X({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new W.a({condition:e.onFocusOnly?_.d:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new G({duration:e.zoomDuration})),n}n.d(e,"defaults",function(){return ie}),n.d(e,"DoubleClickZoom",function(){return d}),n.d(e,"DragAndDrop",function(){return nt}),n.d(e,"DragBox",function(){return F}),n.d(e,"DragPan",function(){return O}),n.d(e,"DragRotate",function(){return I}),n.d(e,"DragRotateAndZoom",function(){return it}),n.d(e,"DragZoom",function(){return G}),n.d(e,"Draw",function(){return Ot}),n.d(e,"Extent",function(){return Lt}),n.d(e,"Interaction",function(){return h.a}),n.d(e,"KeyboardPan",function(){return V}),n.d(e,"KeyboardZoom",function(){return X}),n.d(e,"Modify",function(){return Vt}),n.d(e,"MouseWheelZoom",function(){return W.a}),n.d(e,"PinchRotate",function(){return H}),n.d(e,"PinchZoom",function(){return $}),n.d(e,"Pointer",function(){return C}),n.d(e,"Select",function(){return $t}),n.d(e,"Snap",function(){return Zt}),n.d(e,"Translate",function(){return ne})},function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=function(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r};function o(t,e,n,o,c){return void 0!==c?(c.minX=t,c.maxX=e,c.minY=n,c.maxY=o,c):new r(t,e,n,o)}r.prototype.contains=function(t){return this.containsXY(t[1],t[2])},r.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},r.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},r.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},r.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=r},,function(t,e,n){"use strict";n.d(e,"b",function(){return h});var r=n(1),o=n(70),c=n(4),l=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(c.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Object(r.a)(this,t[i],e);return o}return Object(r.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Object(r.b)(this,t[i],e);return o}return Object(r.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)Object(r.c)(this,t[i],e);else Object(r.c)(this,t,e)},e}(o.a);function h(t){if(Array.isArray(t))for(var i=0,e=t.length;i<e;++i)Object(r.e)(t[i]);else Object(r.e)(t)}e.a=l},,,,,,,function(t,e){function n(t){var e="number"==typeof t?t:+new Date,n=function(){return(268435455&(e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}t.exports={random:n,randomIterator:function(t,e){var r=e||n();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var i,n,o;for(i=t.length-1;i>0;--i)n=r.next(i+1),o=t[n],t[n]=t[i],t[i]=o,e(o);t.length&&e(t[0])},shuffle:function(){var i,e,n;for(i=t.length-1;i>0;--i)e=r.next(i+1),n=t[e],t[e]=t[i],t[i]=n;return t}}}}},function(t,e){t.exports=function t(e,n){var r;e||(e={});if(n)for(r in n)if(n.hasOwnProperty(r)){var o=e.hasOwnProperty(r),c=typeof n[r],l=!o||typeof e[r]!==c;l?e[r]=n[r]:"object"===c&&(e[r]=t(e[r],n[r]))}return e}},function(t,e,n){"use strict";var r=n(2),o=n(20),c=n(0),l=n(68),h=n(6),f=n(35),d=n(14),m=Object(d.c)(),y=function(t){function e(){t.call(this),this.extent_=Object(c.j)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return Object(r.b)()},e.prototype.closestPointXY=function(t,e,n,o){return Object(r.b)()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(r.b)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(c.I)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(r.b)()},e.prototype.scale=function(t,e,n){Object(r.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(r.b)()},e.prototype.getType=function(){return Object(r.b)()},e.prototype.applyTransform=function(t){Object(r.b)()},e.prototype.intersectsExtent=function(t){return Object(r.b)()},e.prototype.translate=function(t,e){Object(r.b)()},e.prototype.transform=function(source,t){var e=Object(h.get)(source),n=e.getUnits()==f.b.TILE_PIXELS?function(n,r,o){var f=e.getExtent(),y=e.getWorldExtent(),v=Object(c.A)(y)/Object(c.A)(f);return Object(d.b)(m,y[0],y[3],v,-v,0,0,0),Object(l.c)(n,0,n.length,o,m,r),Object(h.getTransform)(e,t)(n,r,o)}:Object(h.getTransform)(e,t);return this.applyTransform(n),this},e}(o.a);e.a=y},function(t,e,n){"use strict";var r=n(11),o=n(0),c=n(32),l=n(3),h=n(88),f=n(51),d=n(69),m=n(59),y=n(61),v=n(153),_=n(109),x=n(79),w=function(t){function e(e,n,o){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(void 0!==n&&o)this.setFlatCoordinates(n,e),this.ends_=o;else{for(var c=this.getLayout(),l=e,h=[],f=[],i=0,d=l.length;i<d;++i){var m=l[i];0===i&&(c=m.getLayout()),Object(r.c)(h,m.getFlatCoordinates()),f.push(h.length)}this.setFlatCoordinates(c,h),this.ends_=f}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=c.a.XYM&&this.layout!=c.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,o=void 0!==n&&n;return Object(v.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,o)},e.prototype.getCoordinates=function(){return Object(y.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new h.a(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],o=0,i=0,c=e.length;i<c;++i){var l=e[i],f=new h.a(t.slice(o,l),n);r.push(f),o=l}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,o=this.ends_,c=this.stride,i=0,l=o.length;i<l;++i){var h=o[i],f=Object(v.a)(e,n,h,c,.5);Object(r.c)(t,f),n=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(x.b)(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,c.a.XY,r)},e.prototype.getType=function(){return l.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(_.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(m.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(f.a);e.a=w},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(108),o='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',c=function(t){function e(e){var n,r=e||{};n=void 0!==r.attributions?r.attributions:[o];var c=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",l=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:n,cacheSize:r.cacheSize,crossOrigin:c,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:l,wrapX:r.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.a);e.b=c},function(t,e,n){"use strict";var r=n(2),o=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};o.prototype.clone=function(){return new o({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},o.prototype.getOpacity=function(){return this.opacity_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getSnapToPixel=function(){return!1},o.prototype.getAnchor=function(){return Object(r.b)()},o.prototype.getImage=function(t){return Object(r.b)()},o.prototype.getHitDetectionImage=function(t){return Object(r.b)()},o.prototype.getImageState=function(){return Object(r.b)()},o.prototype.getImageSize=function(){return Object(r.b)()},o.prototype.getHitDetectionImageSize=function(){return Object(r.b)()},o.prototype.getOrigin=function(){return Object(r.b)()},o.prototype.getSize=function(){return Object(r.b)()},o.prototype.setOpacity=function(t){this.opacity_=t},o.prototype.setRotateWithView=function(t){this.rotateWithView_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setSnapToPixel=function(t){},o.prototype.listenImageChange=function(t,e){return Object(r.b)()},o.prototype.load=function(){Object(r.b)()},o.prototype.unlistenImageChange=function(t,e){Object(r.b)()},e.a=o},,function(t,e,n){"use strict";var r=n(11),o=n(0),c=n(32),l=n(3),h=n(106),f=n(38),d=n(51),m=n(149);var y=n(69),v=n(84),_=n(59),x=n(61),w=n(210),E=n(109),C=n(116),O=n(79),S=function(t){function e(e,n,o){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!o&&!Array.isArray(e[0])){for(var c=this.getLayout(),l=e,h=[],f=[],i=0,d=l.length;i<d;++i){var polygon=l[i];0===i&&(c=polygon.getLayout());for(var m=h.length,y=polygon.getEnds(),v=0,_=y.length;v<_;++v)y[v]+=m;Object(r.c)(h,polygon.getFlatCoordinates()),f.push(y)}n=c,e=h,o=f}void 0!==n&&o?(this.setFlatCoordinates(n,e),this.endss_=o):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(polygon){var t;if(this.flatCoordinates){var e=this.flatCoordinates.length;Object(r.c)(this.flatCoordinates,polygon.getFlatCoordinates());for(var i=0,n=(t=polygon.getEnds().slice()).length;i<n;++i)t[i]+=e}else this.flatCoordinates=polygon.getFlatCoordinates().slice(),t=polygon.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();return new e(this.flatCoordinates.slice(),this.layout,n)},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(o.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(y.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(y.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(v.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(m.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(C.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(x.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,r){for(var c=[],l=Object(o.j)(),i=0,h=n.length;i<h;++i){var f=n[i];l=Object(o.o)(t,e,f[0],r),c.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=f[f.length-1]}return c}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(w.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new h.a(this.getFlatInteriorPoints().slice(),c.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(C.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(C.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(O.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,c.a.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),o=r[r.length-1];if(0!==e)for(var i=0,c=r.length;i<c;++i)r[i]-=e;return new f.b(this.flatCoordinates.slice(e,o),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],o=0,i=0,c=n.length;i<c;++i){var l=n[i].slice(),h=l[l.length-1];if(0!==o)for(var d=0,m=l.length;d<m;++d)l[d]-=o;var polygon=new f.b(e.slice(o,h),t,l);r.push(polygon),o=h}return r},e.prototype.getType=function(){return l.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(E.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(_.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(d.a);e.a=S},function(t,e,n){"use strict";var r=n(2),o=n(5),c=n(50),l=n(99),h="tileloadstart",f="tileloadend",d="tileloaderror",m=n(30),y=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):c.d,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,c=Object(r.c)(n),m=n.getState();m==o.a.LOADING?(this.tileLoadingKeys_[c]=!0,e=h):c in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[c],e=m==o.a.ERROR?d:m==o.a.LOADED||m==o.a.ABORT?f:void 0),null!=e&&this.dispatchEvent(new l.a(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=Object(c.c)(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(c.a)(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,n){var r=Object(m.d)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(l.b);e.a=y},function(t,e,n){"use strict";var r=function(){this.disposed_=!1};r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},e.a=r},function(t,e,n){"use strict";function r(t,e,n,r){for(var o=0,c=t[n-r],l=t[n-r+1];e<n;e+=r){var h=t[e],f=t[e+1];o+=l*h-c*f,c=h,l=f}return o/2}function o(t,e,n,o){for(var area=0,i=0,c=n.length;i<c;++i){var l=n[i];area+=r(t,e,l,o),e=l}return area}function c(t,e,n,r){for(var area=0,i=0,c=n.length;i<c;++i){var l=n[i];area+=o(t,e,l,r),e=l[l.length-1]}return area}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return c})},function(t,e,n){"use strict";t.exports=o,t.exports.default=o;var r=n(548);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function c(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function l(t,e){h(t,0,t.children.length,e,t)}function h(t,e,p,n,r){r||(r=w(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,i=e;i<p;i++)o=t.children[i],f(r,t.leaf?n(o):o);return r}function f(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function d(a,b){return a.minX-b.minX}function m(a,b){return a.minY-b.minY}function y(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function v(a){return a.maxX-a.minX+(a.maxY-a.minY)}function _(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function x(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function w(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(t,e,n,o,c){for(var l,h=[e,n];h.length;)(n=h.pop())-(e=h.pop())<=o||(l=e+Math.ceil((n-e)/o/2)*o,r(t,l,e,n,c),h.push(e,l,l,n))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!x(t,e))return n;for(var i,o,c,l,h=[];e;){for(i=0,o=e.children.length;i<o;i++)c=e.children[i],x(t,l=e.leaf?r(c):c)&&(e.leaf?n.push(c):_(t,l)?this._all(c,n):h.push(c));e=h.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!x(t,e))return!1;for(var i,r,o,c,l=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],x(t,c=e.leaf?n(o):o)){if(e.leaf||_(t,c))return!0;l.push(o)}e=l.pop()}return!1},load:function(data){if(!data||!data.length)return this;if(data.length<this._minEntries){for(var i=0,t=data.length;i<t;i++)this.insert(data[i]);return this}var e=this._build(data.slice(),0,data.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=w([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,l=this.data,h=this.toBBox(t),path=[],f=[];l||path.length;){if(l||(l=path.pop(),n=path[path.length-1],i=f.pop(),o=!0),l.leaf&&-1!==(r=c(t,l.children,e)))return l.children.splice(r,1),path.push(l),this._condense(path),this;o||l.leaf||!_(l,h)?n?(i++,l=n.children[i],o=!1):l=null:(path.push(l),f.push(i),i=0,n=l,l=l.children[0])}return this},toBBox:function(t){return t},compareMinX:d,compareMinY:m,toJSON:function(){return this.data},fromJSON:function(data){return this.data=data,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var o,c=n-e+1,h=this._maxEntries;if(c<=h)return l(o=w(t.slice(e,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(c)/Math.log(h)),h=Math.ceil(c/Math.pow(h,r-1))),(o=w([])).leaf=!1,o.height=r;var i,f,d,m,y=Math.ceil(c/h),v=y*Math.ceil(Math.sqrt(h));for(E(t,e,n,v,this.compareMinX),i=e;i<=n;i+=v)for(E(t,i,d=Math.min(i+v-1,n),y,this.compareMinY),f=i;f<=d;f+=y)m=Math.min(f+y-1,d),o.children.push(this._build(t,f,m,r-1));return l(o,this.toBBox),o},_chooseSubtree:function(t,e,n,path){for(var i,r,o,c,area,l,h,f,a,b;path.push(e),!e.leaf&&path.length-1!==n;){for(h=f=1/0,i=0,r=e.children.length;i<r;i++)area=y(o=e.children[i]),a=t,b=o,(l=(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))-area)<f?(f=l,h=area<h?area:h,c=o):l===f&&area<h&&(h=area,c=o);e=c||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,o=n?t:r(t),c=[],l=this._chooseSubtree(o,this.data,e,c);for(l.children.push(t),f(l,o);e>=0&&c[e].children.length>this._maxEntries;)this._split(c,e),e--;this._adjustParentBBoxes(o,c,e)},_split:function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var c=this._chooseSplitIndex(n,o,r),h=w(n.children.splice(c,n.children.length-c));h.height=n.height,h.leaf=n.leaf,l(n,this.toBBox),l(h,this.toBBox),e?t[e-1].children.push(h):this._splitRoot(n,h)},_splitRoot:function(t,e){this.data=w([t,e]),this.data.height=t.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,c,area,l,f,d,a,b,m,v,_,x;for(l=f=1/0,i=e;i<=n-e;i++)r=h(t,0,i,this.toBBox),o=h(t,i,n,this.toBBox),a=r,b=o,m=void 0,v=void 0,_=void 0,x=void 0,m=Math.max(a.minX,b.minX),v=Math.max(a.minY,b.minY),_=Math.min(a.maxX,b.maxX),x=Math.min(a.maxY,b.maxY),c=Math.max(0,_-m)*Math.max(0,x-v),area=y(r)+y(o),c<l?(l=c,d=i,f=area<f?area:f):c===l&&area<f&&(f=area,d=i);return d},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:d,o=t.leaf?this.compareMinY:m;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,c=this.toBBox,l=h(t,0,e,c),d=h(t,n-e,n,c),m=v(l)+v(d);for(i=e;i<n-e;i++)o=t.children[i],f(l,t.leaf?c(o):o),m+=v(l);for(i=n-e-1;i>=e;i--)o=t.children[i],f(d,t.leaf?c(o):o),m+=v(d);return m},_adjustParentBBoxes:function(t,path,e){for(var i=e;i>=0;i--)f(path[i],t)},_condense:function(path){for(var t,i=path.length-1;i>=0;i--)0===path[i].children.length?i>0?(t=path[i-1].children).splice(t.indexOf(path[i]),1):this.clear():l(path[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){"use strict";var r=n(2),o=n(70),c=n(4),l=function(t){function e(e,n,r,o){t.call(this),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(c.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(r.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(r.b)()},e}(o.a);e.a=l},function(t,e,n){"use strict";var r=n(151),o=n(17),c=function(t){function e(e,n,r,canvas,c){var l=void 0!==c?o.a.IDLE:o.a.LOADED;t.call(this,e,n,r,l),this.loader_=void 0!==c?c:null,this.canvas_=canvas,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=o.a.ERROR):this.state=o.a.LOADED,this.changed()},e.prototype.load=function(){this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(r.a);e.a=c},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return h});var r=n(11),o=n(9);function c(t,e,n,c,l,h){var f=NaN,d=NaN,m=(n-e)/c;if(1===m)f=t[e],d=t[e+1];else if(2==m)f=(1-l)*t[e]+l*t[e+c],d=(1-l)*t[e+1]+l*t[e+c+1];else if(0!==m){for(var y=t[e],v=t[e+1],_=0,x=[0],i=e+c;i<n;i+=c){var w=t[i],E=t[i+1];_+=Math.sqrt((w-y)*(w-y)+(E-v)*(E-v)),x.push(_),y=w,v=E}var C=l*_,O=Object(r.a)(x,C);if(O<0){var S=(C-x[-O-2])/(x[-O-1]-x[-O-2]),I=e+(-O-2)*c;f=Object(o.c)(t[I],t[I+c],S),d=Object(o.c)(t[I+1],t[I+c+1],S)}else f=t[e+O*c],d=t[e+O*c+1]}return h?(h[0]=f,h[1]=d,h):[f,d]}function l(t,e,n,r,c,l){if(n==e)return null;var h;if(c<t[e+r-1])return l?((h=t.slice(e,e+r))[r-1]=c,h):null;if(t[n-1]<c)return l?((h=t.slice(n-r,n))[r-1]=c,h):null;if(c==t[e+r-1])return t.slice(e,e+r);for(var f=e/r,d=n/r;f<d;){var m=f+d>>1;c<t[(m+1)*r-1]?d=m:f=m+1}var y=t[f*r-1];if(c==y)return t.slice((f-1)*r,(f-1)*r+r);var v=(c-y)/(t[(f+1)*r-1]-y);h=[];for(var i=0;i<r-1;++i)h.push(Object(o.c)(t[(f-1)*r+i],t[f*r+i],v));return h.push(c),h}function h(t,e,n,r,o,c,h){if(h)return l(t,e,n[n.length-1],r,o,c);var f;if(o<t[r-1])return c?((f=t.slice(0,r))[r-1]=o,f):null;if(t[t.length-1]<o)return c?((f=t.slice(t.length-r))[r-1]=o,f):null;for(var i=0,d=n.length;i<d;++i){var m=n[i];if(e!=m){if(o<t[e+r-1])return null;if(o<=t[m-1])return l(t,e,m,r,o,!1);e=m}}return null}},function(t,e,n){"use strict";var r=function(t){function e(e,map,n){t.call(this,e),this.map=map,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(26).a);e.a=r},,,,,,function(t,e,n){var r;!function(){"use strict";function o(t,e){var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!o.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=0,c=r.length;i<c;i++)this[r[i]]=h(this[r[i]],this);l&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,r):o.call(t,e,n,r)},t.addEventListener=function(e,n,r){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):o.call(t,e,n,r)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(t){n(t)},!1),t.onclick=null)}function h(t,e){return function(){return t.apply(e,arguments)}}}var c=navigator.userAgent.indexOf("Windows Phone")>=0,l=navigator.userAgent.indexOf("Android")>0&&!c,h=/iP(ad|hone|od)/.test(navigator.userAgent)&&!c,f=h&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d=h&&/OS [6-7]_\d/.test(navigator.userAgent),m=navigator.userAgent.indexOf("BB10")>0;o.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(h&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},o.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!l;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},o.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},o.prototype.determineEventType=function(t){return l&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},o.prototype.focus=function(t){var e;h&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},o.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},o.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},o.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],h){if((r=window.getSelection()).rangeCount&&!r.isCollapsed)return!0;if(!f){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},o.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},o.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},o.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},o.prototype.onTouchEnd=function(t){var e,n,r,o,c,m=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,d&&(c=t.changedTouches[0],(m=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||m).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(r=m.tagName.toLowerCase())){if(e=this.findControl(m)){if(this.focus(m),l)return!1;m=e}}else if(this.needsFocus(m))return t.timeStamp-n>100||h&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(m),this.sendClick(m,t),h&&"select"===r||(this.targetElement=null,t.preventDefault()),!1);return!(!h||f||!(o=m.fastClickScrollParent)||o.fastClickLastScrollTop===o.scrollTop)||(this.needsClick(m)||(t.preventDefault(),this.sendClick(m,t)),!1)},o.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},o.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},o.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},o.prototype.destroy=function(){var t=this.layer;l&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},o.notNeeded=function(t){var e,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!l)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(m&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&r[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},o.attach=function(t,e){return new o(t,e)},void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(39),o=n(67),c=n(96),l=n(8),h=function(t){function e(e){var n=e||{},o=Object(l.a)({},n);delete o.preload,delete o.useInterimTilesOnError,t.call(this,o),this.setPreload(void 0!==n.preload?n.preload:0),this.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),this.type=r.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(c.a.PRELOAD)},e.prototype.setPreload=function(t){this.set(c.a.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(c.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(c.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(o.a);h.prototype.getSource,e.a=h},function(t,e,n){"use strict";var r=n(0),o=n(3),c=n(51),l=n(59),h=function(t){function e(e,n,r){if(t.call(this),void 0!==r&&void 0===n)this.setFlatCoordinates(r,e);else{var o=n||0;this.setCenterAndRadius(e,o,r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,n,r){var o=this.flatCoordinates,c=t-o[0],l=e-o[1],h=c*c+l*l;if(h<r){if(0===h)for(var i=0;i<this.stride;++i)n[i]=o[i];else{var f=this.getRadius()/Math.sqrt(h);n[0]=o[0]+f*c,n[1]=o[1]+f*l;for(var d=2;d<this.stride;++d)n[d]=o[d]}return n.length=this.stride,h}return r},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],o=e-n[1];return r*r+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Object(r.k)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(r.F)(t,e)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Object(r.t)(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,o=Object(l.a)(r,0,t,this.stride);r[o++]=r[0]+e;for(var i=1,c=this.stride;i<c;++i)r[o++]=r[i];r.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(c.a);h.prototype.transform,e.a=h},function(t,e,n){"use strict";var r=function(t){function e(e){var n=e||{};t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,atlasManager:n.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var style=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return style.setOpacity(this.getOpacity()),style.setScale(this.getScale()),style},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(n(199).a);e.a=r},function(t,e,n){"use strict";var r=n(22),o=n(24),c=n(36),l=n(4),h=n(33),f=n(28),d=n(9),m="trackpad",y="wheel",v=function(t){function e(e){var n=e||{};t.call(this,n),this.delta_=0,this.duration_=void 0!==n.duration?n.duration:250,this.timeout_=void 0!==n.timeout?n.timeout:80,this.useAnchor_=void 0===n.useAnchor||n.useAnchor,this.constrainResolution_=n.constrainResolution||!1,this.condition_=n.condition?n.condition:o.c,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(r.a.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==l.a.WHEEL&&e!==l.a.MOUSEWHEEL)return!0;t.preventDefault();var n,map=t.map,o=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==l.a.WHEEL?(n=o.deltaY,h.c&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=h.b),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):t.type==l.a.MOUSEWHEEL&&(n=-o.wheelDeltaY,h.g&&(n/=3)),0===n)return!1;var f=Date.now();if(void 0===this.startTime_&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?m:y),this.mode_===m){var view=map.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):view.setHint(r.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var d=view.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),v=view.getMinResolution(),_=view.getMaxResolution(),x=0;if(d<v?(d=Math.max(d,v/this.trackpadZoomBuffer_),x=1):d>_&&(d=Math.min(d,_*this.trackpadZoomBuffer_),x=-1),this.lastAnchor_){var w=view.calculateCenterZoom(d,this.lastAnchor_);view.setCenter(view.constrainCenter(w))}return view.setResolution(d),0===x&&this.constrainResolution_&&view.animate({resolution:view.constrainResolution(d,n>0?-1:1),easing:c.b,anchor:this.lastAnchor_,duration:this.duration_}),x>0?view.animate({resolution:v,easing:c.b,anchor:this.lastAnchor_,duration:500}):x<0&&view.animate({resolution:_,easing:c.b,anchor:this.lastAnchor_,duration:500}),this.startTime_=f,!1}this.delta_+=n;var E=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,map),E),!1},e.prototype.handleWheelZoom_=function(map){var view=map.getView();view.getAnimating()&&view.cancelAnimations();var t=Object(d.a)(this.delta_,-1,1);Object(f.f)(view,-t,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(f.a);e.a=v},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=["experimental-webgl","webgl","webkit-3d","moz-webgl"];var o;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var c=function(canvas,t){for(var e=r.length,i=0;i<e;++i)try{var n=canvas.getContext(r[i],t);if(n)return n}catch(t){}return null}(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});c&&(!0,o=c.getParameter(c.MAX_TEXTURE_SIZE),c.getSupportedExtensions())}catch(t){}},,,function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var r=n(9),o=(n(3),6371008.8);function c(t,e,n){var c=n||o,l=Object(r.i)(t[1]),h=Object(r.i)(e[1]),f=(h-l)/2,d=Object(r.i)(e[0]-t[0])/2,a=Math.sin(f)*Math.sin(f)+Math.sin(d)*Math.sin(d)*Math.cos(l)*Math.cos(h);return 2*c*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function l(t,e,n,c){var l=c||o,h=Object(r.i)(t[1]),f=Object(r.i)(t[0]),d=e/l,m=Math.asin(Math.sin(h)*Math.cos(d)+Math.cos(h)*Math.sin(d)*Math.cos(n)),y=f+Math.atan2(Math.sin(n)*Math.sin(d)*Math.cos(h),Math.cos(d)-Math.sin(h)*Math.sin(m));return[Object(r.h)(y),Object(r.h)(m)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(12),o=n(8),c=1/0,l=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};l.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(o.b)(this.queuedElements_)},l.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,element=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(element);return delete this.queuedElements_[n],element},l.prototype.enqueue=function(element){Object(r.a)(!(this.keyFunction_(element)in this.queuedElements_),31);var t=this.priorityFunction_(element);return t!=c&&(this.elements_.push(element),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(element)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},l.prototype.getCount=function(){return this.elements_.length},l.prototype.getLeftChildIndex_=function(t){return 2*t+1},l.prototype.getRightChildIndex_=function(t){return 2*t+2},l.prototype.getParentIndex_=function(t){return t-1>>1},l.prototype.heapify_=function(){var i;for(i=(this.elements_.length>>1)-1;i>=0;i--)this.siftUp_(i)},l.prototype.isEmpty=function(){return 0===this.elements_.length},l.prototype.isKeyQueued=function(t){return t in this.queuedElements_},l.prototype.isQueued=function(element){return this.isKeyQueued(this.keyFunction_(element))},l.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,element=e[t],o=n[t],c=t;t<r>>1;){var l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),f=h<r&&n[h]<n[l]?h:l;e[t]=e[f],n[t]=n[f],t=f}e[t]=element,n[t]=o,this.siftDown_(c,t)},l.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,element=n[e],o=r[e];e>t;){var c=this.getParentIndex_(e);if(!(r[c]>o))break;n[e]=n[c],r[e]=r[c],e=c}n[e]=element,r[e]=o},l.prototype.reprioritize=function(){var element,i,t,e=this.priorityFunction_,n=this.elements_,r=this.priorities_,o=0,l=n.length;for(i=0;i<l;++i)(t=e(element=n[i]))==c?delete this.queuedElements_[this.keyFunction_(element)]:(r[o]=t,n[o++]=element);n.length=o,r.length=o,this.heapify_()},e.b=l},function(t,e,n){"use strict";var r=n(53),o=n(152),c=n(39),l=n(22),h=n(11),f=n(0),d=n(222),m=n(8),y=n(173),v=n(217),_=n(14),x=function(t){function e(n){if(t.call(this,n),this.image_=null,this.imageTransform_=Object(_.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,n.getType()===c.a.VECTOR)for(var i=0,r=y.b.length;i<r;++i){var o=y.b[i];if(o!==e&&o.handles(n)){this.vectorRenderer_=new o(n);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var image,n=t.pixelRatio,c=t.size,d=t.viewState,y=d.center,v=d.resolution,x=this.getLayer().getSource(),w=t.viewHints,E=this.vectorRenderer_,C=t.extent;if(E||void 0===e.extent||(C=Object(f.B)(C,e.extent)),!w[l.a.ANIMATING]&&!w[l.a.INTERACTING]&&!Object(f.H)(C)){var O=d.projection;if(!r.a){var S=x.getProjection();S&&(O=S)}var I=this.skippedFeatures_;if(E){var T=E.context,P=Object(m.a)({},t,{size:[Object(f.E)(C)/v,Object(f.A)(C)/v],viewState:Object(m.a)({},t.viewState,{rotation:0})}),R=Object.keys(P.skippedFeatureUids).sort();image=new o.a(C,v,n,T.canvas,function(t){!E.prepareFrame(P,e)||!E.replayGroupChanged&&Object(h.b)(I,R)||(T.canvas.width=P.size[0]*n,T.canvas.height=P.size[1]*n,E.compose(T,P,e),I=R,t())})}else image=x.getImage(C,v,n,O);image&&this.loadImage(image)&&(this.image_=image,this.skippedFeatures_=I)}if(this.image_){var L=(image=this.image_).getExtent(),M=image.getResolution(),N=image.getPixelRatio(),j=n*M/(v*N),D=Object(_.b)(this.imageTransform_,n*c[0]/2,n*c[1]/2,j,j,0,N*(L[0]-y[0])/M,N*(y[1]-L[3])/M);Object(_.b)(this.coordinateToCanvasPixelTransform,n*c[0]/2-D[4],n*c[1]/2-D[5],n/v,-n/v,0,-y[0],-y[1]),this.renderedResolution=M*n/N}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,n,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,r,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,r,o)},e}(v.a);x.handles=function(t){return t.getType()===c.a.IMAGE||t.getType()===c.a.VECTOR&&t.getRenderMode()===d.a.IMAGE},x.create=function(t,e){return new x(e)},e.a=x},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(72),o=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function c(t,e,n){return e+":"+t+":"+(n?Object(r.b)(n):"null")}o.prototype.clear=function(){this.cache_={},this.cacheSize_=0},o.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var i=0;for(var t in this.cache_){var e=this.cache_[t];0!=(3&i++)||e.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},o.prototype.get=function(t,e,n){var r=c(t,e,n);return r in this.cache_?this.cache_[r]:null},o.prototype.set=function(t,e,n,r){var o=c(t,e,n);this.cache_[o]=r,++this.cacheSize_},o.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var l=new o},function(t,e,n){"use strict";var r=n(1),o=n(70),c=n(33),l=n(54),h=n(113),f=n(112),d=["","unavailable","touch","pen","mouse"];function m(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function y(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function v(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function _(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function x(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function w(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function E(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function C(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var O=function(t){function e(e){var n={MSPointerDown:m,MSPointerMove:y,MSPointerUp:v,MSPointerOut:_,MSPointerOver:x,MSPointerCancel:w,MSGotPointerCapture:C,MSLostPointerCapture:E};t.call(this,e,n),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=d[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(f.a);function S(t){this.dispatcher.fireNativeEvent(t)}function I(t){this.dispatcher.fireNativeEvent(t)}function T(t){this.dispatcher.fireNativeEvent(t)}function P(t){this.dispatcher.fireNativeEvent(t)}function R(t){this.dispatcher.fireNativeEvent(t)}function L(t){this.dispatcher.fireNativeEvent(t)}function M(t){this.dispatcher.fireNativeEvent(t)}function N(t){this.dispatcher.fireNativeEvent(t)}var j=function(t){function e(e){var n={pointerdown:S,pointermove:I,pointerup:T,pointerout:P,pointerover:R,pointercancel:L,gotpointercapture:N,lostpointercapture:M};t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f.a),D=n(26),A=!1,F=function(t){function e(e,n,r){t.call(this,e),this.originalEvent=n;var o=r||{};this.buttons=function(t){var e;if(t.buttons||A)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(o),this.pressure=function(t,e){var n=0;n=t.pressure?t.pressure:e?.5:0;return n}(o,this.buttons),this.bubbles="bubbles"in o&&o.bubbles,this.cancelable="cancelable"in o&&o.cancelable,this.view="view"in o?o.view:null,this.detail="detail"in o?o.detail:null,this.screenX="screenX"in o?o.screenX:0,this.screenY="screenY"in o?o.screenY:0,this.clientX="clientX"in o?o.clientX:0,this.clientY="clientY"in o?o.clientY:0,this.ctrlKey="ctrlKey"in o&&o.ctrlKey,this.altKey="altKey"in o&&o.altKey,this.shiftKey="shiftKey"in o&&o.shiftKey,this.metaKey="metaKey"in o&&o.metaKey,this.button="button"in o?o.button:0,this.relatedTarget="relatedTarget"in o?o.relatedTarget:null,this.pointerId="pointerId"in o?o.pointerId:0,this.width="width"in o?o.width:0,this.height="height"in o?o.height:0,this.tiltX="tiltX"in o?o.tiltX:0,this.tiltY="tiltY"in o?o.tiltY:0,this.pointerType="pointerType"in o?o.pointerType:"",this.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,this.isPrimary="isPrimary"in o&&o.isPrimary,n.preventDefault&&(this.preventDefault=function(){n.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(D.a);!function(){try{var t=new MouseEvent("click",{buttons:1});A=1===t.buttons}catch(t){}}();var k=F,G=n(11);function B(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function z(t){this.processTouches_(t,this.moveOverOut_)}function U(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function V(t){this.processTouches_(t,this.cancelOut_)}var Y=function(t){function e(e,n){var r={touchstart:B,touchmove:z,touchend:U,touchcancel:V};t.call(this,e,r),this.pointerMap=e.pointerMap,this.mouseSource=n,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&h.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.radiusX||0,n.height=e.radiusY||0,n.pressure=e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},e.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),r=n.length;function o(){t.preventDefault()}for(var i=0;i<r;++i){var c=this.touchToPointer_(t,n[i]);c.preventDefault=o,e.call(this,t,c)}},e.prototype.findTouch_=function(t,e){for(var n=t.length,i=0;i<n;i++){if(t[i].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),r=n.length;if(r>=e.length){for(var o=[],i=0;i<r;++i){var c=Number(n[i]),l=this.pointerMap[c];c==h.a||this.findTouch_(e,c-2)||o.push(l.out)}for(var f=0;f<o.length;++f)this.cancelOut_(t,o[f])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var n=e,r=this.pointerMap[n.pointerId];if(r){var o=r.out,c=r.outTarget;this.dispatcher.move(n,t),o&&c!==n.target&&(o.relatedTarget=n.target,n.relatedTarget=c,o.target=c,n.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(n,t)):(n.target=c,n.relatedTarget=null,this.cancelOut_(t,n))),r.out=n,r.outTarget=n.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var r=[n.clientX,n.clientY];e.push(r),setTimeout(function(){Object(G.j)(e,r)},this.dedupTimeout_)}},e}(f.a),X=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],W=function(t){function e(element){t.call(this),this.element_=element,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(c.f)this.registerSource("native",new j(this));else if(c.e)this.registerSource("ms",new O(this));else{var t=new h.c(this);this.registerSource("mouse",t),c.h&&this.registerSource("touch",new Y(this,t))}this.register_()},e.prototype.registerSource=function(t,source){var s=source,e=s.getEvents();e&&(e.forEach(function(t){var e=s.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(s))}.bind(this)),this.eventSourceList_.push(s))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,i=0;i<t;i++){var e=this.eventSourceList_[i];this.addEvents_(e.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,i=0;i<t;i++){var e=this.eventSourceList_[i];this.removeEvents_(e.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(r.a)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(r.c)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var n={},i=0,r=X.length;i<r;i++){var p=X[i][0];n[p]=t[p]||e[p]||X[i][1]}return n},e.prototype.down=function(data,t){this.fireEvent(l.a.POINTERDOWN,data,t)},e.prototype.move=function(data,t){this.fireEvent(l.a.POINTERMOVE,data,t)},e.prototype.up=function(data,t){this.fireEvent(l.a.POINTERUP,data,t)},e.prototype.enter=function(data,t){data.bubbles=!1,this.fireEvent(l.a.POINTERENTER,data,t)},e.prototype.leave=function(data,t){data.bubbles=!1,this.fireEvent(l.a.POINTERLEAVE,data,t)},e.prototype.over=function(data,t){data.bubbles=!0,this.fireEvent(l.a.POINTEROVER,data,t)},e.prototype.out=function(data,t){data.bubbles=!0,this.fireEvent(l.a.POINTEROUT,data,t)},e.prototype.cancel=function(data,t){this.fireEvent(l.a.POINTERCANCEL,data,t)},e.prototype.leaveOut=function(data,t){this.out(data,t),this.contains_(data.target,data.relatedTarget)||this.leave(data,t)},e.prototype.enterOver=function(data,t){this.over(data,t),this.contains_(data.target,data.relatedTarget)||this.enter(data,t)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,data,e){return new k(t,e,data)},e.prototype.fireEvent=function(t,data,e){var n=this.makeEvent(t,data,e);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Object(h.d)(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(o.a);e.a=W},function(t,e,n){"use strict";var r=n(14),o=n(11),c=n(25),l=n(13),h=n(67),f=n(220),d=n(62),canvas=n(7),m=n(218),y=n(2),v=n(148),_=n(1),x=n(4),w=n(0),E=n(19),C=n(171);function O(map,t){C.a.expire()}function S(t,e){return t.zIndex-e.zIndex}var I=function(t){function e(map){t.call(this),this.map_=map,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){Object(y.b)()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Object(r.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(r.d)(Object(r.g)(o,n))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o,c,l){var f,d=e.viewState,m=d.resolution;function v(t,n){var c=e.layerStates[Object(y.c)(n)].managed;if(!(Object(y.c)(t)in e.skippedFeatureUids)||c)return r.call(o,t,c?n:null)}var _=d.projection,x=t;if(_.canWrapX()){var E=_.getExtent(),C=Object(w.E)(E),O=t[0];if(O<E[0]||O>E[2])x=[O+C*Math.ceil((E[0]-O)/C),t[1]]}var i,S=e.layerStatesArray;for(i=S.length-1;i>=0;--i){var I=S[i],T=I.layer;if(Object(h.b)(I,m)&&c.call(l,T)){var P=this.getLayerRenderer(T),source=T.getSource();if(source&&(f=P.forEachFeatureAtCoordinate(source.getWrapX()?x:t,e,n,v)),f)return f}}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,o,c,l){return Object(y.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,E.b,this,r,o)},e.prototype.getLayerRenderer=function(t){var e=Object(y.c)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,i=0,r=this.layerRendererConstructors_.length;i<r;++i){var o=this.layerRendererConstructors_[i];if(o.handles(t)){n=o.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Object(_.a)(n,x.a.CHANGE,this.handleLayerRendererChange_,this),n},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(_.e)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(map,t){for(var e in this.layerRenderers_)t&&e in t.layerStates||this.removeLayerRendererByKey_(e).dispose()},e.prototype.renderFrame=function(t){Object(y.b)()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(O)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(v.a),T=n(29);n.d(e,"b",function(){return P});var P=[],R=function(t){function e(map){t.call(this,map);var e=map.getViewport();this.context_=Object(l.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=c.e,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(r.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var map=this.getMap(),n=this.context_;if(map.hasListener(t)){var r=e.extent,o=e.pixelRatio,c=e.viewState.rotation,l=this.getTransform(e),h=new m.a(n,o,r,l,c),d=new f.a(t,h,e,n,null);map.dispatchEvent(d)}},e.prototype.getTransform=function(t){var e=t.viewState,n=this.canvas_.width/2,o=this.canvas_.height/2,c=t.pixelRatio/e.resolution,l=-c,h=-e.rotation,f=-e.center[0],d=-e.center[1];return Object(r.b)(this.transform_,n,o,c,l,h,f,d)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,r=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);this.canvas_.width!=r||this.canvas_.height!=c?(this.canvas_.width=r,this.canvas_.height=c):e.clearRect(0,0,r,c);var l=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(d.a.PRECOMPOSE,t);var f=t.layerStatesArray;Object(o.l)(f,S),l&&(e.save(),Object(canvas.s)(e,l,r/2,c/2));var i,m,y=t.viewState.resolution;for(i=0,m=f.length;i<m;++i){var v=f[i],_=v.layer,x=this.getLayerRenderer(_);Object(h.b)(v,y)&&v.sourceState==T.a.READY&&(x.prepareFrame(t,v)&&x.composeFrame(t,v,e))}l&&e.restore(),this.dispatchRenderEvent(d.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,c,l,f){var d,i,m=e.viewState.resolution,y=e.layerStatesArray,v=y.length,_=Object(r.a)(e.pixelToCoordinateTransform,t.slice());for(i=v-1;i>=0;--i){var x=y[i],w=x.layer;if(Object(h.b)(x,m)&&l.call(f,w))if(d=this.getLayerRenderer(w).forEachLayerAtCoordinate(_,e,n,o,c))return d}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,n=e.length;i<n;++i){var r=e[i];Object(o.f)(P,r)||P.push(r)}},e}(I);e.a=R},function(t,e,n){"use strict";var r=n(39),o=function(t){function e(e){var n=e||{};t.call(this,n),this.type=r.a.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(67).a);o.prototype.getSource,e.a=o},function(t,e,n){"use strict";var r=n(2),o=n(37),c=n(34),l=n(20),h=n(82),f=n(12),d=n(1),m=n(4),y=n(0),v=n(221),_=n(8),x=n(29),w={LAYERS:"layers"},E=function(t){function e(e){var n=e||{},r=Object(_.a)({},n);delete r.layers;var c=n.layers;t.call(this,r),this.layersListenerKeys_=[],this.listenerKeys_={},Object(d.a)(this,Object(l.b)(w.LAYERS),this.handleLayersChanged_,this),c?Array.isArray(c)?c=new o.a(c.slice(),{unique:!0}):Object(f.a)("function"==typeof c.getArray,43):c=new o.a(void 0,{unique:!0}),this.setLayers(c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(d.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(d.a)(t,c.a.ADD,this.handleLayersAdd_,this),Object(d.a)(t,c.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(d.e);Object(_.b)(this.listenerKeys_);for(var n=t.getArray(),i=0,o=n.length;i<o;i++){var l=n[i];this.listenerKeys_[Object(r.c)(l)]=[Object(d.a)(l,h.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(d.a)(l,m.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(r.c)(e)]=[Object(d.a)(e,h.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(d.a)(e,m.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=Object(r.c)(e);this.listenerKeys_[n].forEach(d.e),delete this.listenerKeys_[n],this.changed()},e.prototype.getLayers=function(){return this.get(w.LAYERS)},e.prototype.setLayers=function(t){this.set(w.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),i=n,o=e.length;i<o;i++){var c=e[i];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==c.extent?c.extent=Object(y.B)(c.extent,r.extent):c.extent=r.extent)}return e},e.prototype.getSourceState=function(){return x.a.READY},e}(v.a);e.a=E},,,,,,,,,,,,,,function(t,e,n){"use strict";var r=/:hover/;t.exports=function(){var t,e,n,o,c,l,h,f,d=document.styleSheets;if("ontouchend"in document&&d&&d.length)for(t=0;t<d.length;++t)if((o=d[t]).cssRules)for(l=o.cssRules.length,e=0;e<l;++e)if((c=o.cssRules[e])&&c.selectorText&&r.test(c.selectorText)){for(h=c.selectorText.split(","),f="",n=0;n<h.length;++n)r.test(h[n])||(f&&(f+=","),f+=h[n]);f?c.selectorText=f:o.deleteRule(e)}}},function(t,e){function n(t,e,n,r){for(var i=0;i<r;++i)t[e+i]=t[n+i]}function r(t,e,n,r){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n+i],t[n+i]=o}}t.exports=function(t){return{createProgram:function(n,r){var o=t.createProgram(),c=e(n,t.VERTEX_SHADER),l=e(r,t.FRAGMENT_SHADER);if(t.attachShader(o,c),t.attachShader(o,l),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS)){var h=t.getShaderInfoLog(o);throw window.alert(h),h}return o},extendArray:function(t,e,n){if((e+1)*n>t.length){var r=new Float32Array(t.length*n*2);return r.set(t),r}return t},copyArrayPart:n,swapArrayPart:r,getLocations:function(e,n){for(var r={},i=0;i<n.length;++i){var o=n[i],c=-1;if("a"===o[0]&&"_"===o[1]){if(-1===(c=t.getAttribLocation(e,o)))throw new Error("Program doesn't have required attribute: "+o);r[o.slice(2)]=c}else{if("u"!==o[0]||"_"!==o[1])throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");if(null===(c=t.getUniformLocation(e,o)))throw new Error("Program doesn't have required uniform: "+o);r[o.slice(2)]=c}}return r},context:t};function e(e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(r);throw window.alert(o),o}return r}}},function(t,e,n){"use strict";var r=n(2),o=n(17),c=n(12),l=n(72),h=n(1),f=n(4),d={FRACTION:"fraction",PIXELS:"pixels"},m=n(204),y={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},v=function(t){function e(e){var n=e||{},h=void 0!==n.opacity?n.opacity:1,f=void 0!==n.rotation?n.rotation:0,v=void 0!==n.scale?n.scale:1,_=void 0!==n.rotateWithView&&n.rotateWithView;t.call(this,{opacity:h,rotation:f,scale:v,rotateWithView:_}),this.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:y.TOP_LEFT,this.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:d.FRACTION,this.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:d.FRACTION,this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var image=void 0!==n.img?n.img:null,x=void 0!==n.imgSize?n.imgSize:null,w=n.src;Object(c.a)(!(void 0!==w&&image),4),Object(c.a)(!image||image&&x,5),void 0!==w&&0!==w.length||!image||(w=image.src||Object(r.c)(image)),Object(c.a)(void 0!==w&&w.length>0,6);var E=void 0!==n.src?o.a.IDLE:o.a.LOADED;this.color_=void 0!==n.color?Object(l.a)(n.color):null,this.iconImage_=Object(m.b)(image,w,x,this.crossOrigin_,E,this.color_),this.offset_=void 0!==n.offset?n.offset:[0,0],this.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:y.TOP_LEFT,this.origin_=null,this.size_=void 0!==n.size?n.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==d.FRACTION||this.anchorYUnits_==d.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==d.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==d.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=y.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=y.TOP_RIGHT&&this.anchorOrigin_!=y.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=y.BOTTOM_LEFT&&this.anchorOrigin_!=y.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=y.TOP_LEFT){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=y.TOP_RIGHT&&this.offsetOrigin_!=y.BOTTOM_RIGHT||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=y.BOTTOM_LEFT&&this.offsetOrigin_!=y.BOTTOM_RIGHT||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(h.a)(this.iconImage_,f.a.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(h.c)(this.iconImage_,f.a.CHANGE,t,e)},e}(n(144).a);e.a=v},,,,,,,,function(t,e,n){"use strict";var r=n(72),o=n(73),c=n(13),l=n(33),h=n(17),f=n(7),d=function(t){function e(e){var n=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var style=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return style.setOpacity(this.getOpacity()),style.setScale(this.getScale()),style},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return h.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,n,r="",h="",d=0,m=null,y=0,v=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=f.k),n=Object(o.a)(n),void 0===(v=this.stroke_.getWidth())&&(v=f.h),m=this.stroke_.getLineDash(),y=this.stroke_.getLineDashOffset(),l.a||(m=null,y=0),void 0===(h=this.stroke_.getLineJoin())&&(h=f.g),void 0===(r=this.stroke_.getLineCap())&&(r=f.d),void 0===(d=this.stroke_.getMiterLimit())&&(d=f.i));var _=2*(this.radius_+v)+1,x={strokeStyle:n,strokeWidth:v,size:_,lineCap:r,lineDash:m,lineDashOffset:y,lineJoin:h,miterLimit:d};if(void 0===t){var w=Object(c.a)(_,_);this.canvas_=w.canvas,e=_=this.canvas_.width,this.draw_(x,w,0,0),this.createHitDetectionCanvas_(x)}else{_=Math.round(_);var E,C=!this.fill_;C&&(E=this.drawHitDetectionCanvas_.bind(this,x));var O=this.getChecksum(),S=t.add(O,_,_,this.draw_.bind(this,x),E);this.canvas_=S.image,this.origin_=[S.offsetX,S.offsetY],e=S.image.width,C?(this.hitDetectionCanvas_=S.hitImage,this.hitDetectionImageSize_=[S.hitImage.width,S.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[_/2,_/2],this.size_=[_,_],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,n,r){var i,c,l;e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var h=this.points_;if(h===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var d=void 0!==this.radius2_?this.radius2_:this.radius_;for(d!==this.radius_&&(h*=2),i=0;i<=h;i++)c=2*i*Math.PI/h-Math.PI/2+this.angle_,l=i%2==0?this.radius_:d,e.lineTo(t.size/2+l*Math.cos(c),t.size/2+l*Math.sin(c))}if(this.fill_){var m=this.fill_.getColor();null===m&&(m=f.b),e.fillStyle=Object(o.a)(m),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(c.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,o){e.setTransform(1,0,0,1,0,0),e.translate(n,o),e.beginPath();var c=this.points_;if(c===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var i,l,h,d=void 0!==this.radius2_?this.radius2_:this.radius_;for(d!==this.radius_&&(c*=2),i=0;i<=c;i++)h=2*i*Math.PI/c-Math.PI/2+this.angle_,l=i%2==0?this.radius_:d,e.lineTo(t.size/2+l*Math.cos(h),t.size/2+l*Math.sin(h))}e.fillStyle=Object(r.b)(f.b),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(n(144).a);e.a=d},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(37),o=n(203),c=n(202),l=n(201);function h(t){var e=t||{},n=new r.a;return(void 0===e.zoom||e.zoom)&&n.push(new l.a(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new c.a(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new o.a(e.attributionOptions)),n}},function(t,e,n){"use strict";var r=n(1),o=n(4),c=n(48),l=n(25),h=n(36),f=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target});var c=void 0!==n.className?n.className:"ol-zoom",h=void 0!==n.delta?n.delta:1,f=void 0!==n.zoomInLabel?n.zoomInLabel:"+",d=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",m=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",y=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=c+"-in",v.setAttribute("type","button"),v.title=m,v.appendChild("string"==typeof f?document.createTextNode(f):f),Object(r.a)(v,o.a.CLICK,this.handleClick_.bind(this,h));var _=document.createElement("button");_.className=c+"-out",_.setAttribute("type","button"),_.title=y,_.appendChild("string"==typeof d?document.createTextNode(d):d),Object(r.a)(_,o.a.CLICK,this.handleClick_.bind(this,-h));var x=c+" "+l.e+" "+l.b,element=this.element;element.className=x,element.appendChild(v),element.appendChild(_),this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var view=this.getMap().getView();if(view){var e=view.getResolution();if(e){var n=view.constrainResolution(e,t);this.duration_>0?(view.getAnimating()&&view.cancelAnimations(),view.animate({resolution:n,duration:this.duration_,easing:h.b})):view.setResolution(n)}}},e}(c.a);e.a=f},function(t,e,n){"use strict";var r=n(48),o=n(25),c=n(36),l=n(1),h=n(4),f=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||d,target:n.target});var r=void 0!==n.className?n.className:"ol-rotate",label=void 0!==n.label?n.label:"⇧";this.label_=null,"string"==typeof label?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=label):(this.label_=label,this.label_.classList.add("ol-compass"));var c=n.tipLabel?n.tipLabel:"Reset rotation",button=document.createElement("button");button.className=r+"-reset",button.setAttribute("type","button"),button.title=c,button.appendChild(this.label_),Object(l.a)(button,h.a.CLICK,this.handleClick_,this);var f=r+" "+o.e+" "+o.b,element=this.element;element.className=f,element.appendChild(button),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(o.c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var view=this.getMap().getView();view&&void 0!==view.getRotation()&&(this.duration_>0?view.animate({rotation:0,duration:this.duration_,easing:c.b}):view.setRotation(0))},e}(r.a);function d(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var c=this.element.classList.contains(o.c);c||0!==n?c&&0!==n&&this.element.classList.remove(o.c):this.element.classList.add(o.c)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=n}}e.a=f},function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(25),l=n(13),h=n(1),f=n(4),d=n(67),m=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||y,target:n.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===n.collapsed||n.collapsed,this.overrideCollapsible_=void 0!==n.collapsible,this.collapsible_=void 0===n.collapsible||n.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",l=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof l?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l):this.collapseLabel_=l;var label=void 0!==n.label?n.label:"i";"string"==typeof label?(this.label_=document.createElement("span"),this.label_.textContent=label):this.label_=label;var d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,button=document.createElement("button");button.setAttribute("type","button"),button.title=o,button.appendChild(d),Object(h.a)(button,f.a.CLICK,this.handleClick_,this);var m=r+" "+c.e+" "+c.b+(this.collapsed_&&this.collapsible_?" "+c.a:"")+(this.collapsible_?"":" ol-uncollapsible"),element=this.element;element.className=m,element.appendChild(this.ulElement_),element.appendChild(button),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=t.layerStatesArray,o=t.viewState.resolution,i=0,c=r.length;i<c;++i){var l=r[i];if(Object(d.b)(l,o)){var source=l.layer.getSource();if(source){var h=source.getAttributions();if(h){var f=h(t);if(f)if(this.overrideCollapsible_||!1!==source.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(f))for(var m=0,y=f.length;m<y;++m)f[m]in e||(n.push(f[m]),e[f[m]]=!0);else f in e||(n.push(f),e[f]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(r.b)(e,this.renderedAttributions_)){Object(l.d)(this.ulElement_);for(var i=0,o=e.length;i<o;++i){var element=document.createElement("li");element.innerHTML=e[i],this.ulElement_.appendChild(element)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(c.a),this.collapsed_?Object(l.f)(this.collapseLabel_,this.label_):Object(l.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(o.a);function y(t){this.updateElement_(t.frameState)}e.a=m},function(t,e,n){"use strict";n.d(e,"b",function(){return m});var r=n(13),o=n(1),c=n(70),l=n(4),h=n(17),f=n(171),d=function(t){function e(image,e,n,r,o,c){t.call(this),this.hitDetectionImage_=null,this.image_=image||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=c?document.createElement("canvas"):null,this.color_=c,this.imageListenerKeys_=null,this.imageState_=o,this.size_=n,this.src_=e,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===h.a.LOADED){this.tainted_=!1;var t=Object(r.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=h.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=h.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],o=Object(r.a)(e,n);o.fillRect(0,0,e,n),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==h.a.IDLE){this.imageState_=h.a.LOADING,this.imageListenerKeys_=[Object(o.b)(this.image_,l.a.ERROR,this.handleImageError_,this),Object(o.b)(this.image_,l.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),data=e.data,n=this.color_[0]/255,g=this.color_[1]/255,b=this.color_[2]/255,i=0,r=data.length;i<r;i+=4)data[i]*=n,data[i+1]*=g,data[i+2]*=b;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(o.e),this.imageListenerKeys_=null},e}(c.a);function m(image,t,e,n,r,o){var c=f.a.get(t,n,o);return c||(c=new d(image,t,e,n,r,o),f.a.set(t,n,o,c)),c}e.a=d},,,function(t,e,n){"use strict";var r=n(2),o=function(t){function e(code){var e="Assertion failed. See https://openlayers.org/en/"+("latest"===r.a?r.a:"v"+r.a.split("-")[0])+"/doc/errors/#"+code+" for details.";t.call(this,e),this.code=code,this.name="AssertionError",this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=o},function(t,e,n){"use strict";function r(t,e,n,r,o,c){for(var l,h=[t[e],t[e+1]],f=[];e+r<n;e+=r){if(f[0]=t[e+r],f[1]=t[e+r+1],l=o.call(c,h,f))return l;h[0]=f[0],h[1]=f[1]}return!1}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e,n,r){for(var o=t[e],c=t[e+1],l=0,i=e+r;i<n;i+=r){var h=t[i],f=t[i+1];l+=Math.sqrt((h-o)*(h-o)+(f-c)*(f-c)),o=h,c=f}return l}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var r=n(11),o=n(84);function c(t,e,n,c,l,h,f){for(var i,d,m,y,v,_,x,w=l[h+1],E=[],C=0,O=n.length;C<O;++C){var S=n[C];for(y=t[S-c],_=t[S-c+1],i=e;i<S;i+=c)v=t[i],x=t[i+1],(w<=_&&x<=w||_<=w&&w<=x)&&(m=(w-_)/(x-_)*(v-y)+y,E.push(m)),y=v,_=x}var I=NaN,T=-1/0;for(E.sort(r.i),y=E[0],i=1,d=E.length;i<d;++i){v=E[i];var P=Math.abs(v-y);P>T&&(m=(y+v)/2,Object(o.c)(t,e,n,c,m,w)&&(I=m,T=P)),y=v}return isNaN(I)&&(I=l[h]),f?(f.push(I,w,T),f):[I,w,T]}function l(t,e,n,r,o){for(var l=[],i=0,h=n.length;i<h;++i){var f=n[i];l=c(t,e,f,r,o,2*i,l),e=f[f.length-1]}return l}},function(t,e,n){"use strict";var r=n(80),o=n(5),c=n(13),l=n(1),h=n(4),f=function(t){function e(e,n,r,o,c,l){t.call(this,e,n,l),this.crossOrigin_=o,this.src_=r,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.tileLoadFunction_=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&(this.unlistenImage_(),this.image_=d()),this.interimTile&&this.interimTile.dispose(),this.state=o.a.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.image_=d(),this.changed()},e.prototype.handleImageLoad_=function(){var image=this.image_;image.naturalWidth&&image.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(l.b)(this.image_,h.a.ERROR,this.handleImageError_,this),Object(l.b)(this.image_,h.a.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(l.e),this.imageListenerKeys_=null},e}(r.a);function d(){var t=Object(c.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}e.a=f},function(t,e,n){"use strict";var r=n(213),o=n(30),c=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(o.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(o.c)(t.tileCoord)),t.dispose())},this)}},e}(r.a);e.a=c},function(t,e,n){"use strict";var r=n(12),o=n(70),c=n(4),l=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(c.a.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(r.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(o.a);e.a=l},function(t,e,n){"use strict";var r=n(0),o=n(9),c=n(6),l=function(t,e,n,o,l){this.sourceProj_=t,this.targetProj_=e;var h={},f=Object(c.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return h[e]||(h[e]=f(t)),h[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Object(r.E)(o)==Object(r.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(r.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(r.E)(this.targetProj_.getExtent()):null;var d=Object(r.C)(n),m=Object(r.D)(n),y=Object(r.w)(n),v=Object(r.v)(n),_=this.transformInv_(d),x=this.transformInv_(m),w=this.transformInv_(y),E=this.transformInv_(v);if(this.addQuad_(d,m,y,v,_,x,w,E,10),this.wrapsXInSource_){var C=1/0;this.triangles_.forEach(function(t,i,e){C=Math.min(C,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-C>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-C>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-C>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-C>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}h={}};l.prototype.addTriangle_=function(a,b,t,e,n,r){this.triangles_.push({source:[e,n,r],target:[a,b,t]})},l.prototype.addQuad_=function(a,b,t,e,n,c,l,h,f){var d=Object(r.b)([n,c,l,h]),m=this.sourceWorldWidth_?Object(r.E)(d)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&m>.5&&m<1,_=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var x=Object(r.b)([a,b,t,e]);_=Object(r.E)(x)/this.targetWorldWidth_>.25||_}!v&&this.sourceProj_.isGlobal()&&m&&(_=m>.25||_)}if(_||!this.maxSourceExtent_||Object(r.F)(d,this.maxSourceExtent_)){if(!(_||isFinite(n[0])&&isFinite(n[1])&&isFinite(c[0])&&isFinite(c[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1]))){if(!(f>0))return;_=!0}if(f>0){if(!_){var w,E=[(a[0]+t[0])/2,(a[1]+t[1])/2],C=this.transformInv_(E);if(v)w=(Object(o.d)(n[0],y)+Object(o.d)(l[0],y))/2-Object(o.d)(C[0],y);else w=(n[0]+l[0])/2-C[0];var O=(n[1]+l[1])/2-C[1];_=w*w+O*O>this.errorThresholdSquared_}if(_){if(Math.abs(a[0]-t[0])<=Math.abs(a[1]-t[1])){var S=[(b[0]+t[0])/2,(b[1]+t[1])/2],I=this.transformInv_(S),T=[(e[0]+a[0])/2,(e[1]+a[1])/2],P=this.transformInv_(T);this.addQuad_(a,b,S,T,n,c,I,P,f-1),this.addQuad_(T,S,t,e,P,I,l,h,f-1)}else{var R=[(a[0]+b[0])/2,(a[1]+b[1])/2],L=this.transformInv_(R),M=[(t[0]+e[0])/2,(t[1]+e[1])/2],N=this.transformInv_(M);this.addQuad_(a,R,M,e,n,L,N,h,f-1),this.addQuad_(R,b,t,M,L,c,l,N,f-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(a,t,e,n,l,h),this.addTriangle_(a,b,t,n,c,l)}},l.prototype.calculateSourceExtent=function(){var t=Object(r.j)();return this.triangles_.forEach(function(e,i,n){var o=e.source;Object(r.r)(t,o[0]),Object(r.r)(t,o[1]),Object(r.r)(t,o[2])}),t},l.prototype.getTriangles=function(){return this.triangles_},e.a=l},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var r=n(19),o=n(114);function c(t,e,n,r){return function(c,l,h){var f=new XMLHttpRequest;f.open("GET","function"==typeof t?t(c,l,h):t,!0),e.getType()==o.a.ARRAY_BUFFER&&(f.responseType="arraybuffer"),f.onload=function(t){if(!f.status||f.status>=200&&f.status<300){var source,c=e.getType();c==o.a.JSON||c==o.a.TEXT?source=f.responseText:c==o.a.XML?(source=f.responseXML)||(source=(new DOMParser).parseFromString(f.responseText,"application/xml")):c==o.a.ARRAY_BUFFER&&(source=f.response),source?n.call(this,e.readFeatures(source,{featureProjection:h}),e.readProjection(source),e.getLastExtent()):r.call(this)}else r.call(this)}.bind(this),f.onerror=function(){r.call(this)}.bind(this),f.send()}}function l(t,e){return c(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},r.c)}},function(t,e,n){"use strict";var r=n(5),o=n(1),c=n(4),l=function(t){function e(e,n){t.call(this,function(element){return e.apply(null,element)},function(element){return element[0].getKey()}),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(element){var e=t.prototype.enqueue.call(this,element);if(e){var n=element[0];Object(o.a)(n,c.a.CHANGE,this.handleTileChange,this)}return e},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(n===r.a.LOADED||n===r.a.ERROR||n===r.a.EMPTY||n===r.a.ABORT){Object(o.c)(e,c.a.CHANGE,this.handleTileChange,this);var l=e.getKey();l in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[l],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,c,l=0,h=!1;this.tilesLoading_<t&&l<e&&this.getCount()>0;)c=(o=this.dequeue()[0]).getKey(),(n=o.getState())===r.a.ABORT?h=!0:n!==r.a.IDLE||c in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++l,o.load());0===l&&h&&this.tileChangeCallback_()},e}(n(169).b);e.a=l},function(t,e,n){"use strict";var r=n(2),o=n(18),c=n(13),l=n(0),h=n(226),f=n(14),d=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(f.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var image=this.getImage();if(image){var r=e.extent,o=void 0!==r&&!Object(l.g)(r,t.extent)&&Object(l.F)(r,t.extent);o&&this.clip(n,t,r);var c=this.getImageTransform(),h=n.globalAlpha;n.globalAlpha=e.opacity;var f=c[4],d=c[5],m=image.width*c[0],y=image.height*c[3];m>=.5&&y>=.5&&n.drawImage(image,0,0,+image.width,+image.height,Math.round(f),Math.round(d),Math.round(m),Math.round(y)),n.globalAlpha=h,o&&n.restore()}this.postCompose(n,t,e)},e.prototype.getImage=function(){return Object(r.b)()},e.prototype.getImageTransform=function(){return Object(r.b)()},e.prototype.forEachLayerAtCoordinate=function(t,e,n,r,l){if(this.getImage()){var h=Object(f.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(o.g)(h,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(c.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),h[0],h[1],1,1,0,0,1,1);var d=this.hitCanvasContext_.getImageData(0,0,1,1).data;return d[3]>0?r.call(l,this.getLayer(),d):void 0}},e}(h.a);e.a=d},function(t,e,n){"use strict";var r=n(11),o=n(73),c=n(0),l=n(3),h=n(51),f=n(68),d=n(33),m=n(219),y=n(7),v=n(14),_=function(t){function e(e,n,r,o,c){t.call(this),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=o,this.viewRotation_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(v.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,n,r){if(this.image_){var o=Object(f.c)(t,e,n,2,this.transform_,this.pixelCoordinates_),c=this.context_,l=this.tmpLocalTransform_,h=c.globalAlpha;1!=this.imageOpacity_&&(c.globalAlpha=h*this.imageOpacity_);var d=this.imageRotation_;this.imageRotateWithView_&&(d+=this.viewRotation_);for(var i=0,m=o.length;i<m;i+=2){var y=o[i]-this.imageAnchorX_,_=o[i+1]-this.imageAnchorY_;if(0!==d||1!=this.imageScale_){var x=y+this.imageAnchorX_,w=_+this.imageAnchorY_;Object(v.b)(l,x,w,this.imageScale_,this.imageScale_,d,-x,-w),c.setTransform.apply(c,l)}c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,_,this.imageWidth_,this.imageHeight_)}0===d&&1==this.imageScale_||c.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(c.globalAlpha=h)}},e.prototype.drawText_=function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=Object(f.c)(t,e,n,r,this.transform_,this.pixelCoordinates_),c=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);e<n;e+=r){var h=o[e]+this.textOffsetX_,d=o[e+1]+this.textOffsetY_;if(0!==l||1!=this.textScale_){var m=Object(v.b)(this.tmpLocalTransform_,h,d,this.textScale_,this.textScale_,l,-h,-d);c.setTransform.apply(c,m)}this.textStrokeState_&&c.strokeText(this.text_,h,d),this.textFillState_&&c.fillText(this.text_,h,d)}0===l&&1==this.textScale_||c.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,r,o){var c=this.context_,l=Object(f.c)(t,e,n,r,this.transform_,this.pixelCoordinates_);c.moveTo(l[0],l[1]);var h=l.length;o&&(h-=2);for(var i=2;i<h;i+=2)c.lineTo(l[i],l[i+1]);return o&&c.closePath(),n},e.prototype.drawRings_=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(h.b)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],o=Math.sqrt(n*n+r*r),l=this.context_;l.beginPath(),l.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(style){this.setFillStrokeStyle(style.getFill(),style.getStroke()),this.setImageStyle(style.getImage()),this.setTextStyle(style.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case l.a.POINT:this.drawPoint(t);break;case l.a.LINE_STRING:this.drawLineString(t);break;case l.a.POLYGON:this.drawPolygon(t);break;case l.a.MULTI_POINT:this.drawMultiPoint(t);break;case l.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case l.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case l.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case l.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,style){var e=style.getGeometryFunction()(t);e&&Object(c.F)(this.extent_,e.getExtent())&&(this.setStyle(style),this.drawGeometry(e))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(c.F)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),o=0,l=t.getEnds(),h=t.getStride();n.beginPath();for(var i=0,f=l.length;i<f;++i)o=this.moveToLineTo_(r,o,l[i],h,!1);n.stroke()}if(""!==this.text_){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(c.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,o=t.getEndss(),l=t.getStride();e.beginPath();for(var i=0,h=o.length;i<h;++i){var f=o[i];r=this.drawRings_(n,r,f,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),d.a&&(Object(r.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,d.a&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:y.l;n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=r&&(n.textAlign=e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:Object(o.a)(n||y.b)}}else this.fillState_=null;if(e){var r=e.getColor(),c=e.getLineCap(),l=e.getLineDash(),h=e.getLineDashOffset(),f=e.getLineJoin(),d=e.getWidth(),m=e.getMiterLimit();this.strokeState_={lineCap:void 0!==c?c:y.d,lineDash:l||y.e,lineDashOffset:h||y.f,lineJoin:void 0!==f?f:y.g,lineWidth:this.pixelRatio_*(void 0!==d?d:y.h),miterLimit:void 0!==m?m:y.i,strokeStyle:Object(o.a)(r||y.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),r=t.getOrigin(),o=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=o[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=o[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Object(o.a)(n||y.b)}}else this.textFillState_=null;var r=t.getStroke();if(r){var c=r.getColor(),l=r.getLineCap(),h=r.getLineDash(),f=r.getLineDashOffset(),d=r.getLineJoin(),m=r.getWidth(),v=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:y.d,lineDash:h||y.e,lineDashOffset:f||y.f,lineJoin:void 0!==d?d:y.g,lineWidth:void 0!==m?m:y.h,miterLimit:void 0!==v?v:y.i,strokeStyle:Object(o.a)(c||y.k)}}else this.textStrokeState_=null;var _=t.getFont(),x=t.getOffsetX(),w=t.getOffsetY(),E=t.getRotateWithView(),C=t.getRotation(),O=t.getScale(),S=t.getText(),I=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:void 0!==_?_:y.c,textAlign:void 0!==I?I:y.l,textBaseline:void 0!==T?T:y.m},this.text_=void 0!==S?S:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==w?this.pixelRatio_*w:0,this.textRotateWithView_=void 0!==E&&E,this.textRotation_=void 0!==C?C:0,this.textScale_=this.pixelRatio_*(void 0!==O?O:1)}else this.text_=""},e}(m.a);e.a=_},function(t,e,n){"use strict";var r=function(){};r.prototype.drawCustom=function(t,e,n){},r.prototype.drawGeometry=function(t){},r.prototype.setStyle=function(style){},r.prototype.drawCircle=function(t,e){},r.prototype.drawFeature=function(t,style){},r.prototype.drawGeometryCollection=function(t,e){},r.prototype.drawLineString=function(t,e){},r.prototype.drawMultiLineString=function(t,e){},r.prototype.drawMultiPoint=function(t,e){},r.prototype.drawMultiPolygon=function(t,e){},r.prototype.drawPoint=function(t,e){},r.prototype.drawPolygon=function(t,e){},r.prototype.drawText=function(t,e){},r.prototype.setFillStrokeStyle=function(t,e){},r.prototype.setImageStyle=function(t,e){},r.prototype.setTextStyle=function(t,e){},e.a=r},function(t,e,n){"use strict";var r=function(t){function e(e,n,r,o,c){t.call(this,e),this.vectorContext=n,this.frameState=r,this.context=o,this.glContext=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n(26).a);e.a=r},function(t,e,n){"use strict";var r=n(2),o=n(20),c=n(40),l=n(9),h=n(8),f=function(t){function e(e){t.call(this);var n=Object(h.a)({},e);n[c.a.OPACITY]=void 0!==e.opacity?e.opacity:1,n[c.a.VISIBLE]=void 0===e.visible||e.visible,n[c.a.Z_INDEX]=e.zIndex,n[c.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[c.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(n),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(l.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return Object(r.b)()},e.prototype.getLayerStatesArray=function(t){return Object(r.b)()},e.prototype.getExtent=function(){return this.get(c.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(c.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(c.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(c.a.OPACITY)},e.prototype.getSourceState=function(){return Object(r.b)()},e.prototype.getVisible=function(){return this.get(c.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(c.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(c.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(c.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(c.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(c.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(c.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(c.a.Z_INDEX,t)},e}(o.a);e.a=f},function(t,e,n){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,n){"use strict";var r=function(t){function e(e,map,n,r,o){t.call(this,e,map,o),this.originalEvent=n,this.pixel=map.getEventPixel(n),this.coordinate=map.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(n(154).a);e.a=r},function(t,e,n){"use strict";e.a={POINT:"point",LINE:"line"}},,function(t,e,n){"use strict";var r=n(2),o=n(0),c=n(19),l=n(220),h=n(62),canvas=n(7),f=n(218),d=n(17),m=n(132),y=n(5),v=n(1),_=n(4),x=n(29),w=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(source,t,e){return function(n,r){return source.forEachLoadedTile(t,n,r,function(t){e[n]||(e[n]={}),e[n][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===d.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(image){var t=image.getState();return t!=d.a.LOADED&&t!=d.a.ERROR&&Object(v.a)(image,_.a.CHANGE,this.handleImageChange_,this),t==d.a.IDLE&&(image.load(),t=image.getState()),t==d.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==x.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,map,e){var n=Object(r.c)(t);n in e.usedTiles&&t.expireCache(e.viewState.projection,e.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n,o){var c=Object(r.c)(e),l=n.toString();c in t?l in t[c]?t[c][l].extend(o):t[c][l]=o:(t[c]={},t[c][l]=o)},e.prototype.manageTilePyramid=function(t,e,n,o,c,l,h,f,d,m){var v=Object(r.c)(e);v in t.wantedTiles||(t.wantedTiles[v]={});var _,x,w,E,C,O,S=t.wantedTiles[v],I=t.tileQueue;for(O=n.getMinZoom();O<=h;++O)for(x=n.getTileRangeForExtentAndZ(l,O,x),w=n.getResolution(O),E=x.minX;E<=x.maxX;++E)for(C=x.minY;C<=x.maxY;++C)h-O<=f?((_=e.getTile(O,E,C,o,c)).getState()==y.a.IDLE&&(S[_.getKey()]=!0,I.isKeyQueued(_.getKey())||I.enqueue([_,v,n.getTileCoordCenter(_.tileCoord),w])),void 0!==d&&d.call(m,_)):e.useTile(O,E,C,c)},e}(m.a),E=n(14),C=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(E.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,n){var r=e.pixelRatio,c=e.size[0]*r,l=e.size[1]*r,h=e.viewState.rotation,f=Object(o.C)(n),d=Object(o.D)(n),m=Object(o.w)(n),y=Object(o.v)(n);Object(E.a)(e.coordinateToPixelTransform,f),Object(E.a)(e.coordinateToPixelTransform,d),Object(E.a)(e.coordinateToPixelTransform,m),Object(E.a)(e.coordinateToPixelTransform,y),t.save(),Object(canvas.s)(t,-h,c/2,l/2),t.beginPath(),t.moveTo(f[0]*r,f[1]*r),t.lineTo(d[0]*r,d[1]*r),t.lineTo(m[0]*r,m[1]*r),t.lineTo(y[0]*r,y[1]*r),t.clip(),Object(canvas.s)(t,h,c/2,l/2)},e.prototype.dispatchComposeEvent_=function(t,e,n,r){var o=this.getLayer();if(o.hasListener(t)){var c=n.size[0]*n.pixelRatio,h=n.size[1]*n.pixelRatio,d=n.viewState.rotation;Object(canvas.s)(e,-d,c/2,h/2);var m=void 0!==r?r:this.getTransform(n,0),y=new f.a(e,n.pixelRatio,n.extent,m,n.viewState.rotation),v=new l.a(t,y,n,e,null);o.dispatchEvent(v),Object(canvas.s)(e,d,c/2,h/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,n,r,o){return this.forEachFeatureAtCoordinate(t,e,n,c.b)?r.call(o,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,n,r){this.dispatchComposeEvent_(h.a.POSTCOMPOSE,t,e,r)},e.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(h.a.PRECOMPOSE,t,e,n)},e.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(h.a.RENDER,t,e,n)},e.prototype.getTransform=function(t,e){var n=t.viewState,r=t.pixelRatio,o=r*t.size[0]/2,c=r*t.size[1]/2,l=r/n.resolution,h=-l,f=-n.rotation,d=-n.center[0]+e,m=-n.center[1];return Object(E.b)(this.transform_,o,c,l,h,f,d,m)},e.prototype.composeFrame=function(t,e,n){Object(r.b)()},e.prototype.prepareFrame=function(t,e){return Object(r.b)()},e}(w);e.a=C},,,,,,,,,,,,,,,,,function(t,e,n){t.exports=function(t){void 0===(t=t||{}).uniqueLinkId&&(t.uniqueLinkId=!0);var e="function"==typeof Object.create?Object.create(null):{},n=[],h={},f=0,d=0,m=Object.keys?A:F,y=t.uniqueLinkId?function(t,e,data){var n=t.toString()+"👉 "+e.toString(),r=h.hasOwnProperty(n);(r||M(t,e))&&(r||(h[n]=0),n+="@"+ ++h[n]);return new l(t,e,data,n)}:function(t,e,data){var n=t.toString()+e.toString();return new l(t,e,data,n)},v=[],_=N,x=N,w=N,E=N,C={addNode:T,addLink:function(t,e,data){w();var r=P(t)||T(t),o=P(e)||T(e),link=y(t,e,data);n.push(link),r.links.push(link),t!==e&&o.links.push(link);return _(link,"add"),E(),link},removeLink:L,removeNode:R,getNode:P,getNodesCount:function(){return f},getLinksCount:function(){return n.length},getLinks:function(t){var e=P(t);return e?e.links:null},forEachNode:m,forEachLinkedNode:function(t,n,r){var o=P(t);if(o&&o.links&&"function"==typeof n)return r?function(t,n,r){for(var i=0;i<t.length;++i){var link=t[i];if(link.fromId===n&&r(e[link.toId],link))return!0}}(o.links,t,n):function(t,n,r){for(var i=0;i<t.length;++i){var link=t[i],o=link.fromId===n?link.toId:link.fromId;if(r(e[o],link))return!0}}(o.links,t,n)},forEachLink:function(t){var i,e;if("function"==typeof t)for(i=0,e=n.length;i<e;++i)t(n[i])},beginUpdate:w,endUpdate:E,clear:function(){w(),m(function(t){R(t.id)}),E()},hasLink:M,getLink:M};return r(C),O=C.on,C.on=function(){return C.beginUpdate=w=j,C.endUpdate=E=D,_=S,x=I,C.on=O,O.apply(C,arguments)},C;var O;function S(link,t){v.push({link:link,changeType:t})}function I(t,e){v.push({node:t,changeType:e})}function T(t,data){if(void 0===t)throw new Error("Invalid node identifier");w();var n=P(t);return n?x(n,"update"):(n=new c(t),f++,x(n,"add")),n.data=data,e[t]=n,E(),n}function P(t){return e[t]}function R(t){var n=P(t);if(!n)return!1;for(w();n.links.length;){var link=n.links[0];L(link)}return delete e[t],f--,x(n,"remove"),E(),!0}function L(link){if(!link)return!1;var t=o(link,n);if(t<0)return!1;w(),n.splice(t,1);var e=P(link.fromId),r=P(link.toId);return e&&(t=o(link,e.links))>=0&&e.links.splice(t,1),r&&(t=o(link,r.links))>=0&&r.links.splice(t,1),_(link,"remove"),E(),!0}function M(t,e){var i,n=P(t);if(!n)return null;for(i=0;i<n.links.length;++i){var link=n.links[i];if(link.fromId===t&&link.toId===e)return link}return null}function N(){}function j(){d+=1}function D(){0===(d-=1)&&v.length>0&&(C.fire("changed",v),v.length=0)}function A(t){if("function"==typeof t)for(var n=Object.keys(e),i=0;i<n.length;++i)if(t(e[n[i]]))return!0}function F(t){var n;if("function"==typeof t)for(n in e)if(t(e[n]))return!0}};var r=n(105);function o(element,t){if(t.indexOf)return t.indexOf(element);var i,e=t.length;for(i=0;i<e;i+=1)if(t[i]===element)return i;return-1}function c(t){this.id=t,this.links=[],this.data=null}function l(t,e,data,n){this.fromId=t,this.toId=e,this.data=data,this.id=n}},function(t,e,n){t.exports=function(t,e){var n={};return{bindDragNDrop:function(t,o){var c;if(o){var l=e.getNodeUI(t.id);c=r(l),"function"==typeof o.onStart&&c.onStart(o.onStart),"function"==typeof o.onDrag&&c.onDrag(o.onDrag),"function"==typeof o.onStop&&c.onStop(o.onStop),n[t.id]=c}else(c=n[t.id])&&(c.release(),delete n[t.id])}}};var r=n(245)},function(t,e,n){t.exports=function(element){var t,e,n,l,h,f,d,m=0,y=0,v=!1,_=0,x=function(t,n,r){e&&e(t,{x:n-m,y:r-y}),m=n,y=r},w=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},E=function(t){t.preventDefault&&t.preventDefault()},C=function(t){return w(t),!1},O=function(t){t=t||window.event,x(t,t.clientX,t.clientY)},S=function(e){if(e=e||window.event,v)return w(e),!1;var n=1===e.button&&null!==window.event||0===e.button;return n?(m=e.clientX,y=e.clientY,d=e.target||e.srcElement,t&&t(e,{x:m,y:y}),r.on("mousemove",O),r.on("mouseup",I),w(e),h=window.document.onselectstart,f=window.document.ondragstart,window.document.onselectstart=C,d.ondragstart=C,!1):void 0},I=function(t){t=t||window.event,r.off("mousemove",O),r.off("mouseup",I),window.document.onselectstart=h,d.ondragstart=f,d=null,n&&n(t)},T=function(t){if("function"==typeof l){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1;var e,n=function(t){var e=0,n=0;(t=t||window.event).pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,n=t.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop);return[e,n]}(t),r=c(element),o={x:n[0]-r[0],y:n[1]-r[1]};e=t.wheelDelta?t.wheelDelta/360:t.detail/-9,l(t,e,o)}},P=function(t){!l&&t?"webkit"===o.browser?element.addEventListener("mousewheel",T,!1):element.addEventListener("DOMMouseScroll",T,!1):l&&!t&&("webkit"===o.browser?element.removeEventListener("mousewheel",T,!1):element.removeEventListener("DOMMouseScroll",T,!1)),l=t},R=function(t,e){return(t.clientX-e.clientX)*(t.clientX-e.clientX)+(t.clientY-e.clientY)*(t.clientY-e.clientY)},L=function(t){if(1===t.touches.length){w(t);var e=t.touches[0];x(t,e.clientX,e.clientY)}else if(2===t.touches.length){var n=R(t.touches[0],t.touches[1]),r=0;n<_?r=-1:n>_&&(r=1),l(t,r,{x:t.touches[0].clientX,y:t.touches[0].clientY}),_=n,w(t),E(t)}},M=function(t){v=!1,r.off("touchmove",L),r.off("touchend",M),r.off("touchcancel",M),d=null,n&&n(t)},N=function(e){if(1===e.touches.length)return function(e,n){w(e),E(e),m=n.clientX,y=n.clientY,d=e.target||e.srcElement,t&&t(e,{x:m,y:y});v||(v=!0,r.on("touchmove",L),r.on("touchend",M),r.on("touchcancel",M))}(e,e.touches[0]);2===e.touches.length&&(w(e),E(e),_=R(e.touches[0],e.touches[1]))};return element.addEventListener("mousedown",S),element.addEventListener("touchstart",N),{onStart:function(e){return t=e,this},onDrag:function(t){return e=t,this},onStop:function(t){return n=t,this},onScroll:function(t){return P(t),this},release:function(){element.removeEventListener("mousedown",S),element.removeEventListener("touchstart",N),r.off("mousemove",O),r.off("mouseup",I),r.off("touchmove",L),r.off("touchend",M),r.off("touchcancel",M),P(null)}}};var r=n(289),o=n(291),c=n(292)},function(t,e){function n(source,t,e){if(source.hasOwnProperty(e)){if("function"==typeof t[e])return;t[e]=function(n){return void 0!==n?(source[e]=n,t):source[e]}}}t.exports=function(t,e,filter){if("[object Array]"===Object.prototype.toString.call(filter))for(var i=0;i<filter.length;++i)n(t,e,filter[i]);else for(var r in t)n(t,e,r)}},function(t,e){t.exports=function(t){var e=10414335;if("string"==typeof t&&t)if(4===t.length&&(t=t.replace(/([^#])/g,"$1$1")),9===t.length)e=parseInt(t.substr(1),16);else{if(7!==t.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+t;e=parseInt(t.substr(1),16)<<8|255}else"number"==typeof t&&(e=t);return e}},function(t,e,n){t.exports=svg,svg.compile=n(579);var r=svg.compileTemplate=n(581),o=n(582),c="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink";function svg(element,t){var e=function(element){var t,e=element;if("string"==typeof element)e=window.document.createElementNS(c,element);else if(element.simplesvg)return element;return e.simplesvg=!0,e.attr=function(t,n){return 2===arguments.length?(null!==n?e.setAttributeNS(null,t,n):e.removeAttributeNS(null,t),e):e.getAttributeNS(null,t)},e.append=function(content){var t=svg(content);return e.appendChild(t),t},e.link=function(t){return arguments.length?(e.setAttributeNS(l,"xlink:href",t),e):e.getAttributeNS(l,"xlink:href")},e.text=function(t){return void 0!==t?(e.textContent=t,e):e.textContent},e.on=function(t,n,r){return o.addEventListener(e,t,n,r),e},e.off=function(t,n,r){return o.removeEventListener(e,t,n,r),e},e.dataSource=function(n){return t||(t=r(e)),t.link(n),e},e}(element);if(void 0===t)return e;for(var n=Object.keys(t),i=0;i<n.length;++i){var h=n[i],f=t[h];"link"===h?e.link(f):e.attr(h,f)}return e}},,,function(t,e,n){"use strict";n.r(e);var r=n(175),o=n(1),c=n(20),l=n(13),h=n(58),f=n(9),d=n(8),m=n(62),y=n(191),v=n(60),_={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},x=["#00f","#0ff","#0f0","#ff0","#f00"];var w=function(t){function e(e){var n=e||{},r=Object(d.a)({},n);delete r.gradient,delete r.radius,delete r.blur,delete r.shadow,delete r.weight,t.call(this,r),this.gradient_=null,this.shadow_=void 0!==n.shadow?n.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(o.a)(this,Object(c.b)(_.GRADIENT),this.handleGradientChanged_,this),this.setGradient(n.gradient?n.gradient:x),this.setBlur(void 0!==n.blur?n.blur:15),this.setRadius(void 0!==n.radius?n.radius:8),Object(o.a)(this,Object(c.b)(_.BLUR),this.handleStyleChanged_,this),Object(o.a)(this,Object(c.b)(_.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var l,h=n.weight?n.weight:"weight";l="string"==typeof h?function(t){return t.get(h)}:h,this.setStyle(function(t,e){var n=l(t),r=void 0!==n?Object(f.a)(n,0,1):1,o=255*r|0,style=this.styleCache_[o];return style||(style=[new v.c({image:new y.a({opacity:r,src:this.circleImage_})})],this.styleCache_[o]=style),style}.bind(this)),this.setRenderOrder(null),Object(o.a)(this,m.a.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),n=t+e+1,r=2*n,o=Object(l.a)(r,r);o.shadowOffsetX=o.shadowOffsetY=this.shadow_,o.shadowBlur=e,o.shadowColor="#000",o.beginPath();var c=n-this.shadow_;return o.arc(c,c,t,0,2*Math.PI,!0),o.fill(),o.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(_.BLUR)},e.prototype.getGradient=function(){return this.get(_.GRADIENT)},e.prototype.getRadius=function(){return this.get(_.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(l.a)(1,256),n=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),i=0,o=t.length;i<o;++i)n.addColorStop(i*r,t[i]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,canvas=e.canvas,image=e.getImageData(0,0,canvas.width,canvas.height),n=image.data,i=0,r=n.length;i<r;i+=4){var o=4*n[i+3];o&&(n[i]=this.gradient_[o],n[i+1]=this.gradient_[o+1],n[i+2]=this.gradient_[o+2])}e.putImageData(image,0,0)},e.prototype.setBlur=function(t){this.set(_.BLUR,t)},e.prototype.setGradient=function(t){this.set(_.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(_.RADIUS,t)},e}(h.a),E=n(174),C=n(67),O=n(161),S=n(261);n.d(e,"Group",function(){return r.a}),n.d(e,"Heatmap",function(){return w}),n.d(e,"Image",function(){return E.a}),n.d(e,"Layer",function(){return C.a}),n.d(e,"Tile",function(){return O.a}),n.d(e,"Vector",function(){return h.a}),n.d(e,"VectorTile",function(){return S.a})},,,function(t,e,n){"use strict";var r=n(2),o=n(37),c=n(34),l=n(223),h=n(33),f=n(21),d=n(97),m=n(1),y=n(70),v=n(54),_=n(172),x=function(t){function e(map,e){t.call(this),this.map_=map,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*h.b:h.b,this.down_=null;var element=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new _.a(element),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(m.a)(this.pointerEventHandler_,v.a.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(m.a)(this.pointerEventHandler_,v.a.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new d.a(f.a.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new d.a(f.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new d.a(f.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==f.a.POINTERUP||e.type==f.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==f.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new d.a(f.a.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(m.e),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new d.a(f.a.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new _.a(document),this.dragListenerKeys_.push(Object(m.a)(this.documentPointerEventHandler_,f.a.POINTERMOVE,this.handlePointerMove_,this),Object(m.a)(this.documentPointerEventHandler_,f.a.POINTERUP,this.handlePointerUp_,this),Object(m.a)(this.pointerEventHandler_,f.a.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new d.a(f.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new d.a(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(m.e)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(m.e)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(m.e),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(y.a),w=n(154),E=n(94),C=n(55),O=n(62),S=n(20),I=n(82),T=n(216),P=n(255),R=n(22),L=n(12),M=n(13),N=n(26),j=n(4),D=n(0),A=n(19),F=n(175),k=n(31),G=n(169),B=n(14);var z=function(t){function e(e){t.call(this);var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,c,l={},h=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new F.a({layers:t.layers});l[C.a.LAYERGROUP]=h,l[C.a.TARGET]=t.target,l[C.a.VIEW]=void 0!==t.view?t.view:new P.a,void 0!==t.controls&&(Array.isArray(t.controls)?n=new o.a(t.controls.slice()):(Object(L.a)("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new o.a(t.interactions.slice()):(Object(L.a)("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?c=new o.a(t.overlays.slice()):(Object(L.a)("function"==typeof t.overlays.getArray,49),c=t.overlays):c=new o.a;return{controls:n,interactions:r,keyboardEventTarget:e,overlays:c,values:l}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:h.b,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(B.c)(),this.pixelToCoordinateTransform_=Object(B.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(h.h?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var r=[j.a.CLICK,j.a.DBLCLICK,j.a.MOUSEDOWN,j.a.TOUCHSTART,j.a.MSPOINTERDOWN,f.a.POINTERDOWN,j.a.MOUSEWHEEL,j.a.WHEEL],i=0,l=r.length;i<l;++i)Object(m.a)(this.overlayContainerStopEvent_,r[i],N.b);for(var d in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new x(this,e.moveTolerance),f.a)Object(m.a)(this.mapBrowserEventHandler_,f.a[d],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=n.keyboardEventTarget,this.keyHandlerKeys_=null,Object(m.a)(this.viewport_,j.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(m.a)(this.viewport_,j.a.WHEEL,this.handleBrowserEvent,this),Object(m.a)(this.viewport_,j.a.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=n.controls||new o.a,this.interactions=n.interactions||new o.a,this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new T.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(m.a)(this,Object(S.b)(C.a.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(m.a)(this,Object(S.b)(C.a.VIEW),this.handleViewChanged_,this),Object(m.a)(this,Object(S.b)(C.a.SIZE),this.handleSizeChanged_,this),Object(m.a)(this,Object(S.b)(C.a.TARGET),this.handleTargetChanged_,this),this.setProperties(n.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(m.a)(this.controls,c.a.ADD,function(t){t.element.setMap(this)},this),Object(m.a)(this.controls,c.a.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(m.a)(this.interactions,c.a.ADD,function(t){t.element.setMap(this)},this),Object(m.a)(this.interactions,c.a.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(m.a)(this.overlays_,c.a.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(m.a)(this.overlays_,c.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(m.c)(this.viewport_,j.a.CONTEXTMENU,this.handleBrowserEvent,this),Object(m.c)(this.viewport_,j.a.WHEEL,this.handleBrowserEvent,this),Object(m.c)(this.viewport_,j.a.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(j.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixel(t),o=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,c=void 0!==n.layerFilter?n.layerFilter:A.b;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,e,null,c,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,function(t){n||(n=[]),n.push(t)},e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},o=void 0!==r.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,c=r.layerFilter||A.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,e,null,c,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:A.b,o=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(C.a.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(B.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(C.a.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(B.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(C.a.SIZE)},e.prototype.getView=function(){return this.get(C.a.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,r){var o=this.frameState_;if(!(o&&e in o.wantedTiles))return G.a;if(!o.wantedTiles[e][t.getKey()])return G.a;var c=n[0]-o.focus[0],l=n[1]-o.focus[1];return 65536*Math.log(r)+Math.sqrt(c*c+l*l)/r},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new l.a(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.getActive())if(!n.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var o=t.viewHints;o[R.a.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,r=2),o[R.a.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(O.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,n=e.length;i<n;++i){var r=e[i];if("function"==typeof r.getLayers)return t(r.getLayers().getArray());var source=r.getSource();if(source&&source.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(O.a.RENDERCOMPLETE,t);for(var c=this.postRenderFunctions_,i=0,l=c.length;i<l;++i)c[i](this,t);c.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var i=0,e=this.keyHandlerKeys_.length;i<e;++i)Object(m.e)(this.keyHandlerKeys_[i]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(m.a)(n,j.a.KEYDOWN,this.handleBrowserEvent,this),Object(m.a)(n,j.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(j.a.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(M.e)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(j.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(m.e)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(m.e)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var view=this.getView();view&&(this.viewport_.setAttribute("data-view",Object(r.c)(view)),this.viewPropertyListenerKey_=Object(m.a)(view,I.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(m.a)(view,j.a.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m.e),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(m.a)(t,I.a.PROPERTYCHANGE,this.render,this),Object(m.a)(t,j.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(time){var t,e=this.getSize(),view=this.getView(),n=Object(D.j)(),o=this.frameState_,c=null;if(void 0!==e&&Object(k.b)(e)&&view&&view.isDef()){for(var l=view.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=this.getLayerGroup().getLayerStatesArray(),f={},i=0,d=h.length;i<d;++i)f[Object(r.c)(h[i].layer)]=h[i];t=view.getState(this.pixelRatio_),c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:n,focus:this.focus_?this.focus_:t.center,index:this.frameIndex_++,layerStates:f,layerStatesArray:h,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:time,usedTiles:{},viewState:t,viewHints:l,wantedTiles:{}}}if(c&&(c.extent=Object(D.z)(t.center,t.resolution,t.rotation,c.size,n)),this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),o)(!this.previousExtent_||!Object(D.H)(this.previousExtent_)&&!Object(D.p)(c.extent,this.previousExtent_))&&(this.dispatchEvent(new w.a(E.a.MOVESTART,this,o)),this.previousExtent_=Object(D.l)(this.previousExtent_));this.previousExtent_&&!c.viewHints[R.a.ANIMATING]&&!c.viewHints[R.a.INTERACTING]&&!Object(D.p)(c.extent,this.previousExtent_)&&(this.dispatchEvent(new w.a(E.a.MOVEEND,this,c)),Object(D.d)(c.extent,this.previousExtent_))}this.dispatchEvent(new w.a(E.a.POSTRENDER,this,c)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(C.a.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(C.a.SIZE,t)},e.prototype.setTarget=function(t){this.set(C.a.TARGET,t)},e.prototype.setView=function(view){this.set(C.a.VIEW,view)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[Object(r.c)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Object(r.c)(t)],this.render()},e}(S.a);var U=n(200),V=n(128),Y=n(8),X=n(170),W=n(173),H=n(125),$=n(39),K=n(150),Z=n.n(K),J=n(7),Q=n(11),tt=n(68),et=function(){};et.prototype.getReplay=function(t,e){return Object(r.b)()},et.prototype.isEmpty=function(){return Object(r.b)()},et.prototype.addDeclutter=function(t){return Object(r.b)()};var nt=et,it={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},ot=n(73),st=n(49),at=n(3),ut=n(61),ct=n(209),lt=n(9);function ht(t,e,n,r,text,o,c,l){for(var data,h,f,d=[],m=t[e]>t[n-r],y=text.length,v=t[e],_=t[e+1],x=t[e+=r],w=t[e+1],E=0,C=Math.sqrt(Math.pow(x-v,2)+Math.pow(w-_,2)),O="",S=0,i=0;i<y;++i){h=m?y-i-1:i;var I=text.charAt(h),T=o(O=m?I+O:O+I)-S;S+=T;for(var P=c+T/2;e<n-r&&E+C<P;)v=x,_=w,x=t[e+=r],w=t[e+1],E+=C,C=Math.sqrt(Math.pow(x-v,2)+Math.pow(w-_,2));var R=P-E,L=Math.atan2(w-_,x-v);if(m&&(L+=L>0?-Math.PI:Math.PI),void 0!==f){var M=L-f;if(M+=M>Math.PI?-2*Math.PI:M<-Math.PI?2*Math.PI:0,Math.abs(M)>l)return null}var N=R/C,j=Object(lt.c)(v,x,N),D=Object(lt.c)(_,w,N);f==L?(m&&(data[0]=j,data[1]=D,data[2]=T/2),data[4]=O):(S=T,data=[j,D,T/2,L,O=I],m?d.unshift(data):d.push(data),f=L),c+=T}return d}var pt=n(219),ft={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},gt=[ft.FILL],mt=[ft.STROKE],yt=[ft.BEGIN_PATH],vt=[ft.CLOSE_PATH],_t=ft,bt=[it.POLYGON,it.CIRCLE,it.LINE_STRING,it.IMAGE,it.TEXT,it.DEFAULT],xt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},wt=Object(D.j)(),Et=Object(B.c)(),Ct=function(t){function e(e,n,r,o,c,l){t.call(this),this.declutterTree=l,this.tolerance=e,this.maxExtent=n,this.overlaps=c,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=r,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(B.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,n,r,o,c,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,o),t.lineTo.apply(t,e),c&&(this.alignFill_=c[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())},e.prototype.replayImage_=function(t,e,n,image,r,o,c,l,h,f,d,m,y,v,_,x,w,E){var C=w||E;e-=r*=y,n-=o*=y;var O,S,I,T,P=_+f>image.width?image.width-f:_,R=l+d>image.height?image.height-d:l,L=x[3]+P*y+x[1],M=x[0]+R*y+x[2],N=e-x[3],j=n-x[0];(C||0!==m)&&(O=[N,j],S=[N+L,j],I=[N+L,j+M],T=[N,j+M]);var A=null;if(0!==m){var F=e+r,k=n+o;A=Object(B.b)(Et,F,k,1,1,m,-F,-k),Object(D.l)(wt),Object(D.r)(wt,Object(B.a)(Et,O)),Object(D.r)(wt,Object(B.a)(Et,S)),Object(D.r)(wt,Object(B.a)(Et,I)),Object(D.r)(wt,Object(B.a)(Et,T))}else Object(D.k)(N,j,N+L,j+M,wt);var canvas=t.canvas,G=E?E[2]*y/2:0,z=wt[0]-G<=canvas.width&&wt[2]+G>=0&&wt[1]-G<=canvas.height&&wt[3]+G>=0;if(v&&(e=Math.round(e),n=Math.round(n)),c){if(!z&&1==c[4])return;Object(D.q)(c,wt);var U=z?[t,A?A.slice(0):null,h,image,f,d,P,R,e,n,y]:null;U&&C&&U.push(w,E,O,S,I,T),c.push(U)}else z&&(C&&this.replayTextBackground_(t,O,S,I,T,w,E),Object(J.n)(t,A,h,image,f,d,P,R,e,n,y))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,n,r,o,c){var l=this.coordinates.length,h=this.getBufferedMaxExtent();c&&(e+=r);var i,f,d,m=[t[e],t[e+1]],y=[NaN,NaN],v=!0;for(i=e+r;i<n;i+=r)y[0]=t[i],y[1]=t[i+1],(d=Object(D.i)(h,y))!==f?(v&&(this.coordinates[l++]=m[0],this.coordinates[l++]=m[1]),this.coordinates[l++]=y[0],this.coordinates[l++]=y[1],v=!1):d===st.a.INTERSECTING?(this.coordinates[l++]=y[0],this.coordinates[l++]=y[1],v=!1):v=!0,m[0]=y[0],m[1]=y[1],f=d;return(o&&v||i===e+r)&&(this.coordinates[l++]=m[0],this.coordinates[l++]=m[1]),l},e.prototype.drawCustomCoordinates_=function(t,e,n,r,o){for(var i=0,c=n.length;i<c;++i){var l=n[i],h=this.appendFlatCoordinates(t,e,l,r,!1,!1);o.push(h),e=l}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var r,o,c,l,h,f=t.getType(),d=t.getStride(),m=this.coordinates.length;if(f==at.a.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),l=[];var y=t.getEndss();h=0;for(var i=0,v=y.length;i<v;++i){var _=[];h=this.drawCustomCoordinates_(r,h,y[i],d,_),l.push(_)}this.instructions.push([_t.CUSTOM,m,l,t,n,ut.c])}else f==at.a.POLYGON||f==at.a.MULTI_LINE_STRING?(c=[],r=f==at.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(r,0,t.getEnds(),d,c),this.instructions.push([_t.CUSTOM,m,c,t,n,ut.b])):f==at.a.LINE_STRING||f==at.a.MULTI_POINT?(r=t.getFlatCoordinates(),o=this.appendFlatCoordinates(r,0,r.length,d,!1,!1),this.instructions.push([_t.CUSTOM,m,o,t,n,ut.a])):f==at.a.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),o=this.coordinates.length,this.instructions.push([_t.CUSTOM,m,o,t,n]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[_t.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[_t.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(B.a)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,J.r)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],h.a&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var n=t[4];if(1==n||n==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var o=5,c=t.length;o<c;++o){var l=t[o];l&&(l.length>11&&this.replayTextBackground_(l[0],l[13],l[14],l[15],l[16],l[11],l[12]),J.n.apply(void 0,l))}}t.length=5,Object(D.l)(t)}}},e.prototype.replay_=function(t,e,n,o,c,l,h){var f;this.pixelCoordinates_&&Object(Q.b)(e,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=Object(tt.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(B.g)(this.renderedTransform_,e));for(var dd,d,m,y,v,_,x,w,image,E,C,O,S=!Object(Y.d)(n),i=0,I=o.length,T=0,P=0,R=0,L=null,M=null,N=this.coordinateCache_,j=this.viewRotation_,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},F=this.instructions!=o||this.overlaps?0:200;i<I;){var k=o[i];switch(k[0]){case _t.BEGIN_GEOMETRY:E=k[1],S&&n[Object(r.c)(E)]||!E.getGeometry()?i=k[2]:void 0===h||Object(D.F)(h,E.getGeometry().getExtent())?++i:i=k[2]+1;break;case _t.BEGIN_PATH:P>F&&(this.fill_(t),P=0),R>F&&(t.stroke(),R=0),P||R||(t.beginPath(),y=v=NaN),++i;break;case _t.CIRCLE:var G=f[T=k[1]],z=f[T+1],U=f[T+2]-G,V=f[T+3]-z,X=Math.sqrt(U*U+V*V);t.moveTo(G+X,z),t.arc(G,z,X,0,2*Math.PI,!0),++i;break;case _t.CLOSE_PATH:t.closePath(),++i;break;case _t.CUSTOM:T=k[1],dd=k[2];var W=k[3],H=k[4],$=6==k.length?k[5]:void 0;A.geometry=W,A.feature=E,i in N||(N[i]=[]);var K=N[i];$?$(f,T,dd,2,K):(K[0]=f[T],K[1]=f[T+1],K.length=2),H(K,A),++i;break;case _t.DRAW_IMAGE:T=k[1],dd=k[2],image=k[3],d=k[4],m=k[5],w=l?null:k[6];var Z=k[7],et=k[8],nt=k[9],it=k[10],ot=k[11],st=k[12],at=k[13],ut=k[14],lt=void 0,pt=void 0,ft=void 0;for(k.length>16?(lt=k[15],pt=k[16],ft=k[17]):(lt=J.j,pt=ft=!1),ot&&(st+=j);T<dd;T+=2)this.replayImage_(t,f[T],f[T+1],image,d,m,w,Z,et,nt,it,st,at,c,ut,lt,pt?L:null,ft?M:null);this.renderDeclutter_(w,E),++i;break;case _t.DRAW_CHARS:var gt=k[1],mt=k[2],yt=k[3];w=l?null:k[4];var vt=k[5],bt=k[6],wt=k[7],Et=k[8],Ct=k[9],Ot=k[10],St=k[11],text=k[12],It=k[13],Tt=k[14],Pt=Object(ct.a)(f,gt,mt,2),Rt=Et(text);if(vt||Rt<=Pt){var Lt=this.textStates[It].textAlign,Mt=ht(f,gt,mt,2,text,Et,(Pt-Rt)*xt[Lt],wt);if(Mt){var Nt=void 0,jt=void 0,Dt=void 0,label=void 0,At=void 0;if(Ot)for(Nt=0,jt=Mt.length;Nt<jt;++Nt)Dt=(At=Mt[Nt])[4],label=this.getImage(Dt,It,"",Ot),d=At[2]+St,m=yt*label.height+2*(.5-yt)*St-Ct,this.replayImage_(t,At[0],At[1],label,d,m,w,label.height,1,0,0,At[3],Tt,!1,label.width,J.j,null,null);if(bt)for(Nt=0,jt=Mt.length;Nt<jt;++Nt)Dt=(At=Mt[Nt])[4],label=this.getImage(Dt,It,bt,""),d=At[2],m=yt*label.height-Ct,this.replayImage_(t,At[0],At[1],label,d,m,w,label.height,1,0,0,At[3],Tt,!1,label.width,J.j,null,null)}}this.renderDeclutter_(w,E),++i;break;case _t.END_GEOMETRY:if(void 0!==l){var Ft=l(E=k[1]);if(Ft)return Ft}++i;break;case _t.FILL:F?P++:this.fill_(t),++i;break;case _t.MOVE_TO_LINE_TO:for(T=k[1],dd=k[2],C=f[T],x=(O=f[T+1])+.5|0,(_=C+.5|0)===y&&x===v||(t.moveTo(C,O),y=_,v=x),T+=2;T<dd;T+=2)_=(C=f[T])+.5|0,x=(O=f[T+1])+.5|0,T!=dd-2&&_===y&&x===v||(t.lineTo(C,O),y=_,v=x);++i;break;case _t.SET_FILL_STYLE:L=k,this.alignFill_=k[2],P&&(this.fill_(t),P=0,R&&(t.stroke(),R=0)),t.fillStyle=k[1],++i;break;case _t.SET_STROKE_STYLE:M=k,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,k),++i;break;case _t.STROKE:F?R++:t.stroke(),++i;break;default:++i}}P&&this.fill_(t),R&&t.stroke()},e.prototype.replay=function(t,e,n,r,o){this.viewRotation_=n,this.replay_(t,e,r,this.instructions,o,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,n,r,o,c){return this.viewRotation_=n,this.replay_(t,e,r,this.hitDetectionInstructions,!0,o,c)},e.prototype.reverseHitDetectionInstructions=function(){var i,t=this.hitDetectionInstructions;t.reverse();var e,n,r=t.length,o=-1;for(i=0;i<r;++i)(n=(e=t[i])[0])==_t.END_GEOMETRY?o=i:n==_t.BEGIN_GEOMETRY&&(e[2]=i,Object(Q.k)(this.hitDetectionInstructions,o,i),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Object(ot.a)(r||J.b)}else n.fillStyle=void 0;if(e){var o=e.getColor();n.strokeStyle=Object(ot.a)(o||J.k);var c=e.getLineCap();n.lineCap=void 0!==c?c:J.d;var l=e.getLineDash();n.lineDash=l?l.slice():J.e;var h=e.getLineDashOffset();n.lineDashOffset=h||J.f;var f=e.getLineJoin();n.lineJoin=void 0!==f?f:J.g;var d=e.getWidth();n.lineWidth=void 0!==d?d:J.h;var m=e.getMiterLimit();n.miterLimit=void 0!==m?m:J.i,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t,e){var n=t.fillStyle,r=[_t.SET_FILL_STYLE,n];return"string"!=typeof n&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[_t.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,n){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,o=t.lineDash,c=t.lineDashOffset,l=t.lineJoin,h=t.lineWidth,f=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||o!=t.currentLineDash&&!Object(Q.b)(t.currentLineDash,o)||t.currentLineDashOffset!=c||t.currentLineJoin!=l||t.currentLineWidth!=h||t.currentMiterLimit!=f)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=o,t.currentLineDashOffset=c,t.currentLineJoin=l,t.currentLineWidth=h,t.currentMiterLimit=f)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[_t.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(D.d)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(D.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(pt.a),Ot=function(t){function e(e,n,r,o,c,l){t.call(this,e,n,r,o,c,l),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,n,r){return this.appendFlatCoordinates(t,e,n,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,c=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([_t.DRAW_IMAGE,o,c,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,o,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,c=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([_t.DRAW_IMAGE,o,c,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,o,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),o=t.getHitDetectionImage(1),image=t.getImage(1),c=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=o,this.image_=image,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},e}(Ct),St=function(t){function e(e,n,r,o,c,l){t.call(this,e,n,r,o,c,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,n,r){var o=this.coordinates.length,c=this.appendFlatCoordinates(t,e,n,r,!1,!1),l=[_t.MOVE_TO_LINE_TO,o,c];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],yt);var c=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(c,0,c.length,l),this.hitDetectionInstructions.push(mt),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],yt);for(var c=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride(),f=0,i=0,d=c.length;i<d;++i)f=this.drawFlatCoordinates_(l,f,c[i],h);this.hitDetectionInstructions.push(mt),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(mt),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(mt),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(yt)},e}(Ct),It=n(72),Tt=n(79),Pt=function(t){function e(e,n,r,o,c,l){t.call(this,e,n,r,o,c,l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,n,r){var o=this.state,c=void 0!==o.fillStyle,l=null!=o.strokeStyle,h=n.length;this.instructions.push(yt),this.hitDetectionInstructions.push(yt);for(var i=0;i<h;++i){var f=n[i],d=this.coordinates.length,m=this.appendFlatCoordinates(t,e,f,r,!0,!l),y=[_t.MOVE_TO_LINE_TO,d,m];this.instructions.push(y),this.hitDetectionInstructions.push(y),l&&(this.instructions.push(vt),this.hitDetectionInstructions.push(vt)),e=f}return c&&(this.instructions.push(gt),this.hitDetectionInstructions.push(gt)),l&&(this.instructions.push(mt),this.hitDetectionInstructions.push(mt)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,o=n.strokeStyle;if(void 0!==r||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,Object(It.b)(J.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var c=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(c,0,c.length,l,!1,!1);var f=[_t.CIRCLE,h];this.instructions.push(yt,f),this.hitDetectionInstructions.push(yt,f),this.hitDetectionInstructions.push(gt),void 0!==n.fillStyle&&this.instructions.push(gt),void 0!==n.strokeStyle&&(this.instructions.push(mt),this.hitDetectionInstructions.push(mt)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,o=n.strokeStyle;if(void 0!==r||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,Object(It.b)(J.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var c=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,c,h),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,o=n.strokeStyle;if(void 0!==r||void 0!==o){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([_t.SET_FILL_STYLE,Object(It.b)(J.b)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([_t.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var c=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride(),f=0,i=0,d=c.length;i<d;++i)f=this.drawFlatCoordinatess_(l,f,c[i],h);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,n=e.length;i<n;++i)e[i]=Object(Tt.e)(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(Ct);function Rt(t,e,n,r,o){var i,c,l,h,f,d,m,y,v,_=n,x=n,w=0,E=0,C=n;for(i=n;i<r;i+=o){var O=e[i],S=e[i+1];void 0!==h&&(y=O-h,v=S-f,l=Math.sqrt(y*y+v*v),void 0!==d&&(E+=c,Math.acos((d*y+m*v)/(c*l))>t&&(E>w&&(w=E,_=C,x=i),E=0,C=i-o)),c=l,d=y,m=v),h=O,f=S}return(E+=l)>w?[C,i]:[_,x]}var Lt=n(224);var Mt={Circle:Pt,Default:Ct,Image:Ot,LineString:St,Polygon:Pt,Text:function(t){function e(e,n,r,o,c,l){t.call(this,e,n,r,o,c,l),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},J.o.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var n=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(n||r)){var i,c,l=this.coordinates.length,h=t.getType(),f=null,d=2,m=2;if(o.placement===Lt.a.LINE){if(!Object(D.F)(this.getBufferedMaxExtent(),t.getExtent()))return;var y;if(f=t.getFlatCoordinates(),m=t.getStride(),h==at.a.LINE_STRING)y=[f.length];else if(h==at.a.MULTI_LINE_STRING)y=t.getEnds();else if(h==at.a.POLYGON)y=t.getEnds().slice(0,1);else if(h==at.a.MULTI_POLYGON){var v=t.getEndss();for(y=[],i=0,c=v.length;i<c;++i)y.push(v[i][0])}this.beginGeometry(t,e);for(var _,x=o.textAlign,w=0,E=0,C=y.length;E<C;++E){if(null==x){var O=Rt(o.maxAngle,f,w,y[E],m);w=O[0],_=O[1]}else _=y[E];for(i=w;i<_;i+=m)this.coordinates.push(f[i],f[i+1]);d=this.coordinates.length,w=y[E],this.drawChars_(l,d,this.declutterGroup_),l=d}this.endGeometry(t,e)}else{var label=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),S=label.width/this.pixelRatio;switch(h){case at.a.POINT:case at.a.MULTI_POINT:d=(f=t.getFlatCoordinates()).length;break;case at.a.LINE_STRING:f=t.getFlatMidpoint();break;case at.a.CIRCLE:f=t.getCenter();break;case at.a.MULTI_LINE_STRING:d=(f=t.getFlatMidpoints()).length;break;case at.a.POLYGON:if(f=t.getFlatInteriorPoint(),!o.overflow&&f[2]/this.resolution<S)return;m=3;break;case at.a.MULTI_POLYGON:var I=t.getFlatInteriorPoints();for(f=[],i=0,c=I.length;i<c;i+=3)(o.overflow||I[i+2]/this.resolution>=S)&&f.push(I[i],I[i+1]);if(0==(d=f.length))return}d=this.appendFlatCoordinates(f,0,d,m,!1,!1),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(label,l,d),this.endGeometry(t,e)}}},e.prototype.getImage=function(text,t,e,n){var label,r=n+t+text+e+this.pixelRatio;if(!J.o.containsKey(r)){var o=n?this.strokeStates[n]||this.textStrokeState_:null,c=e?this.fillStates[e]||this.textFillState_:null,l=this.textStates[t]||this.textState_,f=this.pixelRatio,d=l.scale*f,m=xt[l.textAlign||J.l],y=n&&o.lineWidth?o.lineWidth:0,v=text.split("\n"),_=v.length,x=[],w=function(t,e,n){for(var r=e.length,o=0,i=0;i<r;++i){var c=Object(J.q)(t,e[i]);o=Math.max(o,c),n.push(c)}return o}(l.font,v,x),E=Object(J.p)(l.font),C=E*_,O=w+y,S=Object(M.a)(Math.ceil(O*d),Math.ceil((C+y)*d));label=S.canvas,J.o.set(r,label),1!=d&&S.scale(d,d),S.font=l.font,n&&(S.strokeStyle=o.strokeStyle,S.lineWidth=y,S.lineCap=o.lineCap,S.lineJoin=o.lineJoin,S.miterLimit=o.miterLimit,h.a&&o.lineDash.length&&(S.setLineDash(o.lineDash),S.lineDashOffset=o.lineDashOffset)),e&&(S.fillStyle=c.fillStyle),S.textBaseline="middle",S.textAlign="center";var i,I=.5-m,T=m*label.width/d+I*y;if(n)for(i=0;i<_;++i)S.strokeText(v[i],T+I*x[i],.5*(y+E)+i*E);if(e)for(i=0;i<_;++i)S.fillText(v[i],T+I*x[i],.5*(y+E)+i*E)}return J.o.get(r)},e.prototype.drawTextImage_=function(label,t,e){var n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,c=xt[n.textAlign||J.l],l=xt[n.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,f=c*label.width/o+2*(.5-c)*h,d=l*label.height/o+2*(.5-l)*h;this.instructions.push([_t.DRAW_IMAGE,t,e,label,(f-this.textOffsetX_)*o,(d-this.textOffsetY_)*o,this.declutterGroup_,label.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,label.width,n.padding==J.j?J.j:n.padding.map(function(p){return p*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([_t.DRAW_IMAGE,t,e,label,(f-this.textOffsetX_)*o,(d-this.textOffsetY_)*o,this.declutterGroup_,label.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,label.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},e.prototype.drawChars_=function(t,e,n){var r=this.textStrokeState_,o=this.textState_,c=this.textFillState_,l=this.strokeKey_;r&&(l in this.strokeStates||(this.strokeStates[l]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var h=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:o.font,textAlign:o.textAlign||J.l,scale:o.scale});var f=this.fillKey_;c&&(f in this.fillStates||(this.fillStates[f]={fillStyle:c.fillStyle}));var d=this.pixelRatio,m=xt[o.textBaseline],y=this.textOffsetY_*d,text=this.text_,v=o.font,_=o.scale,x=r?r.lineWidth*_/2:0,w=this.widths_[v];w||(this.widths_[v]=w={}),this.instructions.push([_t.DRAW_CHARS,t,e,m,n,o.overflow,f,o.maxAngle,function(text){var t=w[text];return t||(t=w[text]=Object(J.q)(v,text)),t*_*d},y,l,x*d,text,h,1]),this.hitDetectionInstructions.push([_t.DRAW_CHARS,t,e,m,n,o.overflow,f,o.maxAngle,function(text){var t=w[text];return t||(t=w[text]=Object(J.q)(v,text)),t*_},y,l,x,text,h,1/d])},e.prototype.setTextStyle=function(t,e){var n,o,c;if(t){this.declutterGroup_=e;var l=t.getFill();l?((o=this.textFillState_)||(o=this.textFillState_={}),o.fillStyle=Object(ot.a)(l.getColor()||J.b)):o=this.textFillState_=null;var h=t.getStroke();if(h){(c=this.textStrokeState_)||(c=this.textStrokeState_={});var f=h.getLineDash(),d=h.getLineDashOffset(),m=h.getWidth(),y=h.getMiterLimit();c.lineCap=h.getLineCap()||J.d,c.lineDash=f?f.slice():J.e,c.lineDashOffset=void 0===d?J.f:d,c.lineJoin=h.getLineJoin()||J.g,c.lineWidth=void 0===m?J.h:m,c.miterLimit=void 0===y?J.i:y,c.strokeStyle=Object(ot.a)(h.getColor()||J.k)}else c=this.textStrokeState_=null;n=this.textState_;var v=t.getFont()||J.c;Object(J.a)(v);var _=t.getScale();n.overflow=t.getOverflow(),n.font=v,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||J.m,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||J.j,n.scale=void 0===_?1:_;var x=t.getOffsetX(),w=t.getOffsetY(),E=t.getRotateWithView(),C=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===x?0:x,this.textOffsetY_=void 0===w?0:w,this.textRotateWithView_=void 0!==E&&E,this.textRotation_=void 0===C?0:C,this.strokeKey_=c?("string"==typeof c.strokeStyle?c.strokeStyle:Object(r.c)(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+Object(r.c)(o.fillStyle):""}else this.text_=""},e}(Ct)},Nt=function(t){function e(e,n,r,o,c,l,h){t.call(this),this.declutterTree_=l,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=n,this.overlaps_=c,this.pixelRatio_=o,this.resolution_=r,this.renderBuffer_=h,this.replaysByZIndex_={},this.hitDetectionContext_=Object(M.a)(1,1),this.hitDetectionTransform_=Object(B.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(D.j)()).push(1)),e},e.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],i=0,r=t.length;i<r;++i)if(t[i]in n)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e)e[n].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,o,c,l){var h,f=2*(r=Math.round(r))+1,d=Object(B.b)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),m=this.hitDetectionContext_;m.canvas.width!==f||m.canvas.height!==f?(m.canvas.width=f,m.canvas.height=f):m.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(h=Object(D.j)(),Object(D.r)(h,t),Object(D.c)(h,e*(this.renderBuffer_+r),h));var y,v,mask=function(t){if(void 0!==jt[t])return jt[t];for(var e=2*t+1,n=new Array(e),i=0;i<e;i++)n[i]=new Array(e);var r=t,o=0,c=0;for(;r>=o;)Dt(n,t+r,t+o),Dt(n,t+o,t+r),Dt(n,t-o,t+r),Dt(n,t-r,t+o),Dt(n,t-r,t-o),Dt(n,t-o,t-r),Dt(n,t+o,t-r),Dt(n,t+r,t-o),2*((c+=1+2*++o)-r)+1>0&&(c+=1-2*(r-=1));return jt[t]=n,n}(r);function _(t){for(var e=m.getImageData(0,0,f,f).data,i=0;i<f;i++)for(var n=0;n<f;n++)if(mask[i][n]&&e[4*(n*f+i)+3]>0){var r=void 0;return(!y||v!=it.IMAGE&&v!=it.TEXT||-1!==y.indexOf(t))&&(r=c(t)),r||void m.clearRect(0,0,f,f)}}this.declutterTree_&&(y=this.declutterTree_.all().map(function(t){return t.value}));var i,x,w,E,C,O=Object.keys(this.replaysByZIndex_).map(Number);for(O.sort(Q.i),i=O.length-1;i>=0;--i){var S=O[i].toString();for(w=this.replaysByZIndex_[S],x=bt.length-1;x>=0;--x)if(void 0!==(E=w[v=bt[x]]))if(!l||v!=it.IMAGE&&v!=it.TEXT){if(C=E.replayHitDetection(m,d,n,o,_,h))return C}else{var I=l[S];I?I.push(E,d.slice(0)):l[S]=[E,d.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],r=e[1],o=e[2],c=e[3],l=[n,r,n,c,o,c,o,r];return Object(tt.c)(l,0,8,2,t,l),l},e.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[n];void 0===r&&(r={},this.replaysByZIndex_[n]=r);var o=r[e];void 0===o&&(o=new(0,Mt[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=o);return o},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(Y.d)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,n,r,o,c,l){var h=Object.keys(this.replaysByZIndex_).map(Number);h.sort(Q.i),t.save(),this.clip(t,e);var i,f,d,m,y,v,_=c||bt;for(i=0,f=h.length;i<f;++i){var x=h[i].toString();for(y=this.replaysByZIndex_[x],d=0,m=_.length;d<m;++d){var w=_[d];if(v=y[w],void 0!==v)if(!l||w!=it.IMAGE&&w!=it.TEXT)v.replay(t,e,n,r,o);else{var E=l[x];E?E.push(v,e.slice(0)):l[x]=[v,e.slice(0)]}}}t.restore()},e}(nt),jt={0:[[!0]]};function Dt(t,e,n){var i,r=Math.floor(t.length/2);if(e>=r)for(i=r;i<e;i++)t[i][n]=!0;else if(e<r)for(i=e+1;i<r;i++)t[i][n]=!0}var At=Nt,Ft=n(226),kt=n(17),Gt=.5,Bt={Point:function(t,e,style,n){var r=style.getImage();if(r){if(r.getImageState()!=kt.a.LOADED)return;var o=t.getReplay(style.getZIndex(),it.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var c=style.getText();if(c){var l=t.getReplay(style.getZIndex(),it.TEXT);l.setTextStyle(c,t.addDeclutter(!!r)),l.drawText(e,n)}},LineString:function(t,e,style,n){var r=style.getStroke();if(r){var o=t.getReplay(style.getZIndex(),it.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var c=style.getText();if(c){var l=t.getReplay(style.getZIndex(),it.TEXT);l.setTextStyle(c,t.addDeclutter(!1)),l.drawText(e,n)}},Polygon:function(t,e,style,n){var r=style.getFill(),o=style.getStroke();if(r||o){var c=t.getReplay(style.getZIndex(),it.POLYGON);c.setFillStrokeStyle(r,o),c.drawPolygon(e,n)}var l=style.getText();if(l){var h=t.getReplay(style.getZIndex(),it.TEXT);h.setTextStyle(l,t.addDeclutter(!1)),h.drawText(e,n)}},MultiPoint:function(t,e,style,n){var r=style.getImage();if(r){if(r.getImageState()!=kt.a.LOADED)return;var o=t.getReplay(style.getZIndex(),it.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var c=style.getText();if(c){var l=t.getReplay(style.getZIndex(),it.TEXT);l.setTextStyle(c,t.addDeclutter(!!r)),l.drawText(e,n)}},MultiLineString:function(t,e,style,n){var r=style.getStroke();if(r){var o=t.getReplay(style.getZIndex(),it.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var c=style.getText();if(c){var l=t.getReplay(style.getZIndex(),it.TEXT);l.setTextStyle(c,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPolygon:function(t,e,style,n){var r=style.getFill(),o=style.getStroke();if(o||r){var c=t.getReplay(style.getZIndex(),it.POLYGON);c.setFillStrokeStyle(r,o),c.drawMultiPolygon(e,n)}var l=style.getText();if(l){var h=t.getReplay(style.getZIndex(),it.TEXT);h.setTextStyle(l,t.addDeclutter(!1)),h.drawText(e,n)}},GeometryCollection:function(t,e,style,n){var i,r,o=e.getGeometriesArray();for(i=0,r=o.length;i<r;++i){var c=Bt[o[i].getType()];c(t,o[i],style,n)}},Circle:function(t,e,style,n){var r=style.getFill(),o=style.getStroke();if(r||o){var c=t.getReplay(style.getZIndex(),it.CIRCLE);c.setFillStrokeStyle(r,o),c.drawCircle(e,n)}var l=style.getText();if(l){var h=t.getReplay(style.getZIndex(),it.TEXT);h.setTextStyle(l,t.addDeclutter(!1)),h.drawText(e,n)}}};function zt(t,e){return parseInt(Object(r.c)(t),10)-parseInt(Object(r.c)(e),10)}function Ut(t,e){var n=qt(t,e);return n*n}function qt(t,e){return Gt*t/e}function Vt(t,e,style,n,r,o){var c=!1,l=style.getImage();if(l){var h=l.getImageState();h==kt.a.LOADED||h==kt.a.ERROR?l.unlistenImageChange(r,o):(h==kt.a.IDLE&&l.load(),h=l.getImageState(),l.listenImageChange(r,o),c=!0)}return function(t,e,style,n){var r=style.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(n);if(style.getRenderer())!function t(e,n,style,r){if(n.getType()==at.a.GEOMETRY_COLLECTION){for(var o=n.getGeometries(),i=0,c=o.length;i<c;++i)t(e,o[i],style,r);return}var l=e.getReplay(style.getZIndex(),it.DEFAULT);l.drawCustom(n,r,style.getRenderer())}(t,o,style,e);else{var c=Bt[o.getType()];c(t,o,style,e)}}(t,e,style,n),c}var Yt=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?Z()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(D.j)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(M.a)(),Object(m.a)(J.o,j.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(m.c)(J.o,j.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,n){var r=e.extent,o=e.pixelRatio,c=n.managed?e.skippedFeatureUids:{},l=e.viewState,h=l.projection,f=l.rotation,d=h.getExtent(),m=this.getLayer().getSource(),y=this.getTransform(e,0),v=n.extent,_=void 0!==v;_&&this.clip(t,e,v);var x=this.replayGroup_;if(x&&!x.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var w,E=this.getLayer(),C=0,S=0,I=1!==n.opacity,T=E.hasListener(O.a.RENDER);if(I||T){var P=t.canvas.width,L=t.canvas.height;if(f){var M=Math.round(Math.sqrt(P*P+L*L));C=(M-P)/2,S=(M-L)/2,P=L=M}this.context.canvas.width=P,this.context.canvas.height=L,w=this.context}else w=t;var N=w.globalAlpha;I||(w.globalAlpha=n.opacity),w!=t&&w.translate(C,S);var j=e.viewHints,A=!(j[R.a.ANIMATING]||j[R.a.INTERACTING]),F=e.size[0]*o,k=e.size[1]*o;if(Object(J.s)(w,-f,F/2,k/2),x.replay(w,y,f,c,A),m.getWrapX()&&h.canWrapX()&&!Object(D.g)(d,r)){for(var G,B=r[0],z=Object(D.E)(d),U=0;B<d[0];)G=z*--U,y=this.getTransform(e,G),x.replay(w,y,f,c,A),B+=z;for(U=0,B=r[2];B>d[2];)G=z*++U,y=this.getTransform(e,G),x.replay(w,y,f,c,A),B-=z}if(Object(J.s)(w,f,F/2,k/2),T&&this.dispatchRenderEvent(w,e,y),w!=t){if(I){var V=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(w.canvas,-C,-S),t.globalAlpha=V}else t.drawImage(w.canvas,-C,-S);w.translate(-C,-S)}I||(w.globalAlpha=N)}_&&t.restore()},e.prototype.composeFrame=function(t,e,n){var r=this.getTransform(t,0);this.preCompose(n,t,r),this.compose(n,t,e),this.postCompose(n,t,e,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,c){if(this.replayGroup_){var l=e.viewState.resolution,h=e.viewState.rotation,f=this.getLayer(),d={};return this.replayGroup_.forEachFeatureAtCoordinate(t,l,h,n,{},function(t){var e=Object(r.c)(t);if(!(e in d))return d[e]=!0,o.call(c,t,f)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var n=this.getLayer(),r=n.getSource(),o=t.viewHints[R.a.ANIMATING],c=t.viewHints[R.a.INTERACTING],l=n.getUpdateWhileAnimating(),h=n.getUpdateWhileInteracting();if(!this.dirty_&&!l&&o||!h&&c)return!0;var f=t.extent,d=t.viewState,m=d.projection,y=d.resolution,v=t.pixelRatio,_=n.getRevision(),x=n.getRenderBuffer(),w=n.getRenderOrder();void 0===w&&(w=zt);var E=Object(D.c)(f,x*y),C=d.projection.getExtent();if(r.getWrapX()&&d.projection.canWrapX()&&!Object(D.g)(C,t.extent)){var O=Object(D.E)(C),S=Math.max(Object(D.E)(E)/2,O);E[0]=C[0]-S,E[2]=C[2]+S}if(!this.dirty_&&this.renderedResolution_==y&&this.renderedRevision_==_&&this.renderedRenderOrder_==w&&Object(D.g)(this.renderedExtent_,E))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I=new At(qt(y,v),E,y,v,r.getOverlaps(),this.declutterTree_,n.getRenderBuffer());r.loadFeatures(E,y,m);var T=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,y)),e){var o=this.renderFeature(t,y,v,e,I);this.dirty_=this.dirty_||o}}.bind(this);if(w){var P=[];r.forEachFeatureInExtent(E,function(t){P.push(t)}),P.sort(w);for(var i=0,L=P.length;i<L;++i)T(P[i])}else r.forEachFeatureInExtent(E,T);return I.finish(),this.renderedResolution_=y,this.renderedRevision_=_,this.renderedRenderOrder_=w,this.renderedExtent_=E,this.replayGroup_=I,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,r,o){if(!r)return!1;var c=!1;if(Array.isArray(r))for(var i=0,l=r.length;i<l;++i)c=Vt(o,t,r[i],Ut(e,n),this.handleStyleImageChange_,this)||c;else c=Vt(o,t,r,Ut(e,n),this.handleStyleImageChange_,this);return c},e}(Ft.a);Yt.handles=function(t){return t.getType()===$.a.VECTOR},Yt.create=function(t,e){return new Yt(e)};var Xt=Yt,Wt=n(5),Ht=n(89),$t=n(6),Kt=n(35),Zt={image:[it.POLYGON,it.CIRCLE,it.LINE_STRING,it.IMAGE,it.TEXT],hybrid:[it.POLYGON,it.LINE_STRING]},Jt={image:[it.DEFAULT],hybrid:[it.IMAGE,it.TEXT,it.DEFAULT],vector:bt},Qt=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?Z()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(B.c)();var n=e.getRenderMode();this.zDirection=n===Ht.a.VECTOR?1:0,n!==Ht.a.VECTOR&&(this.context=Object(M.a)()),Object(m.a)(J.o,j.a.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(m.c)(J.o,j.a.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,n,r,o,c){var l=t.prototype.getTile.call(this,e,n,r,o,c);return l.getState()===Wt.a.LOADED&&(this.createReplayGroup_(l,o,c),this.context&&this.renderTileImage_(l,o,c)),l},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,n){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e,n)},e.prototype.createReplayGroup_=function(t,e,n){var r=this,o=this.getLayer(),c=o.getRevision(),l=o.getRenderOrder()||null,h=t.getReplayState(o);if(h.dirty||h.renderedRevision!=c||h.renderedRenderOrder!=l){for(var source=o.getSource(),f=source.getTileGrid(),d=source.getTileGridForProjection(n).getResolution(t.tileCoord[0]),m=t.extent,y=function(c,y){var v=t.getTile(t.tileKeys[c]);if(v.getState()==Wt.a.LOADED){var _=v.tileCoord,x=f.getTileCoordExtent(_),w=Object(D.B)(m,x),E=Object(D.p)(x,w)?null:Object(D.c)(w,o.getRenderBuffer()*d,r.tmpExtent),C=v.getProjection(),O=!1;Object($t.equivalent)(n,C)||(O=!0,v.setProjection(n)),h.dirty=!1;var S=new At(0,w,d,e,source.getOverlaps(),r.declutterTree_,o.getRenderBuffer()),I=Ut(d,e),T=function(t){var e,n=t.getStyleFunction()||o.getStyleFunction();if(n&&(e=n(t,d)),e){var r=this.renderFeature(t,I,e,S);this.dirty_=this.dirty_||r,h.dirty=h.dirty||r}},P=v.getFeatures();l&&l!==h.renderedRenderOrder&&P.sort(l);for(var i=0,R=P.length;i<R;++i){var L=P[i];O&&(C.getUnits()==Kt.b.TILE_PIXELS&&(C.setWorldExtent(x),C.setExtent(v.getExtent())),L.getGeometry().transform(C,n)),E&&!Object(D.F)(E,L.getGeometry().getExtent())||T.call(r,L)}S.finish(),v.setReplayGroup(o,t.tileCoord.toString(),S)}},v=0,_=t.tileKeys.length;v<_;++v)y(v);h.renderedRevision=c,h.renderedRenderOrder=l}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,c){var l=e.viewState.resolution,h=e.viewState.rotation;n=null==n?0:n;var f,d,i,m,y=this.getLayer(),v={},_=this.renderedTiles;for(i=0,m=_.length;i<m;++i){var x=_[i];if(f=Object(D.c)(x.extent,n*l,f),Object(D.f)(f,t))for(var w=0,E=x.tileKeys.length;w<E;++w){var C=x.getTile(x.tileKeys[w]);if(C.getState()==Wt.a.LOADED){var O=C.getReplayGroup(y,x.tileCoord.toString());d=d||O.forEachFeatureAtCoordinate(t,l,h,n,{},function(t){var e=Object(r.c)(t);if(!(e in v))return v[e]=!0,o.call(c,t,y)},null)}}}return d},e.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),r=t.tileCoord,o=n.getResolution(r[0]),c=e.viewState,l=e.pixelRatio,h=c.resolution/l,f=n.getTileCoordExtent(r,this.tmpExtent),d=c.center,m=Object(D.C)(f),y=e.size,v=Math.round(l*y[0]/2),_=Math.round(l*y[1]/2);return Object(B.b)(this.tmpTransform_,v,_,o/h,o/h,c.rotation,(m[0]-d[0])/o,(d[1]-m[1])/o)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,n,r){var o=this.getLayer(),c=o.getRenderMode();if(c!=Ht.a.IMAGE){var l,h,f=o.getDeclutter()?{}:null,source=o.getSource(),d=Jt[c],m=n.pixelRatio,y=n.viewState.rotation,v=n.size;y&&(l=Math.round(m*v[0]/2),h=Math.round(m*v[1]/2),Object(J.s)(e,-y,l,h)),f&&this.declutterTree_.clear();for(var _=n.viewHints,x=!(_[R.a.ANIMATING]||_[R.a.INTERACTING]),w=this.renderedTiles,E=source.getTileGridForProjection(n.viewState.projection),C=[],O=[],i=w.length-1;i>=0;--i){var S=w[i];if(S.getState()!=Wt.a.ABORT)for(var I=S.tileCoord,T=E.getTileCoordExtent(I,this.tmpExtent)[0]-S.extent[0],P=void 0,L=0,M=S.tileKeys.length;L<M;++L){var N=S.getTile(S.tileKeys[L]);if(N.getState()==Wt.a.LOADED){var j=N.getReplayGroup(o,I.toString());if(j&&j.hasReplays(d)){P||(P=this.getTransform(n,T));var D=N.tileCoord[0],A=j.getClipCoords(P);e.save(),e.globalAlpha=r.opacity;for(var F=0,k=C.length;F<k;++F){var G=C[F];D<O[F]&&(e.beginPath(),e.moveTo(A[0],A[1]),e.lineTo(A[2],A[3]),e.lineTo(A[4],A[5]),e.lineTo(A[6],A[7]),e.moveTo(G[6],G[7]),e.lineTo(G[4],G[5]),e.lineTo(G[2],G[3]),e.lineTo(G[0],G[1]),e.clip())}j.replay(e,P,y,{},x,d,f),e.restore(),C.push(A),O.push(D)}}}}f&&function(t,e,n,r){for(var o=Object.keys(t).map(Number).sort(Q.i),c={},l=0,h=o.length;l<h;++l)for(var f=t[o[l].toString()],i=0,d=f.length;i<d;){var m=f[i++],y=f[i++];m.replay(e,y,n,c,r)}}(f,e,y,x),y&&Object(J.s)(e,y,l,h)}t.prototype.postCompose.call(this,e,n,r)},e.prototype.renderFeature=function(t,e,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var i=0,c=n.length;i<c;++i)o=Vt(r,t,n[i],e,this.handleStyleImageChange_,this)||o;else o=Vt(r,t,n,e,this.handleStyleImageChange_,this);return o},e.prototype.renderTileImage_=function(t,e,n){var r=this.getLayer(),o=t.getReplayState(r),c=r.getRevision(),l=Zt[r.getRenderMode()];if(l&&o.renderedTileRevision!==c){o.renderedTileRevision=c;var h=t.wrappedTileCoord,f=h[0],source=r.getSource(),d=source.getTileGridForProjection(n),m=d.getResolution(f),y=t.getContext(r),v=source.getTilePixelSize(f,e,n);y.canvas.width=v[0],y.canvas.height=v[1];for(var _=d.getTileCoordExtent(h,this.tmpExtent),i=0,x=t.tileKeys.length;i<x;++i){var w=t.getTile(t.tileKeys[i]);if(w.getState()==Wt.a.LOADED){var E=e/m,C=Object(B.e)(this.tmpTransform_);Object(B.f)(C,E,-E),Object(B.h)(C,-_[0],-_[3]),w.getReplayGroup(r,t.tileCoord.toString()).replay(y,C,0,{},!0,l)}}}},e}(H.a);Qt.handles=function(t){return t.getType()===$.a.VECTOR_TILE},Qt.create=function(t,e){return new Qt(e)};var te=Qt,ee=function(t){function e(e){(e=Object(Y.a)({},e)).controls||(e.controls=Object(U.a)()),e.interactions||(e.interactions=Object(V.defaults)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new W.a(this);return t.registerLayerRenderers([X.a,H.a,Xt,te]),t},e}(z);e.a=ee},function(t,e,n){"use strict";var r=n(100),o=n(2),c=n(19),l=n(9);function h(t){return t}var f=n(20),d=n(11);var m=n(85),y=n(22),v=n(43),_=n(12),x=n(18),w=n(36),E=n(0),C=n(3),O=n(38),S=n(8),I=n(6),T=n(35),P=0,R=function(t){function e(e){t.call(this);var n=Object(S.a)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(I.createProjection)(n.projection,"EPSG:3857"),this.applyOptions_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[v.a.CENTER]=void 0!==t.center?t.center:null;var n=function(t){var e,n,o,c=void 0!==t.minZoom?t.minZoom:P,h=void 0!==t.maxZoom?t.maxZoom:28,f=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var m=t.resolutions;n=m[c],o=void 0!==m[h]?m[h]:m[m.length-1],e=function(t){return function(e,n,r){if(void 0!==e){var o=Object(d.h)(t,e,r);o=Object(l.a)(o+n,0,t.length-1);var c=Math.floor(o);if(o!=c&&c<t.length-1){var h=t[c]/t[c+1];return t[c]/Math.pow(h,o-c)}return t[c]}}}(m)}else{var y=Object(I.createProjection)(t.projection,"EPSG:3857"),v=y.getExtent(),_=v?Math.max(Object(E.E)(v),Object(E.A)(v)):360*I.METERS_PER_UNIT[T.b.DEGREES]/y.getMetersPerUnit(),x=_/r.b/Math.pow(2,P),w=x/Math.pow(2,28-P);void 0!==(n=t.maxResolution)?c=0:n=x/Math.pow(f,c),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(f,h):x/Math.pow(f,h):w),h=c+Math.floor(Math.log(n/o)/Math.log(f)),o=n/Math.pow(f,h-c),e=function(t,e,n){return function(r,o,c){if(void 0!==r){var l=-c/2+.5,h=Math.floor(Math.log(e/r)/Math.log(t)+l),f=Math.max(h+o,0);return void 0!==n&&(f=Math.min(f,n)),e/Math.pow(t,f)}}}(f,n,h-c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:c,zoomFactor:f}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var o=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Object(l.a)(t[0],e[0],e[2]),Object(l.a)(t[1],e[1],e[3])]:void 0}):h;var e}(t),c=n.constraint,f=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(m.b)():!1===e?m.d:"number"==typeof e?Object(m.a)(e):m.d}return m.c}(t);this.constraints_={center:o,resolution:c,rotation:f},void 0!==t.resolution?e[v.a.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[v.a.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[v.a.RESOLUTION]=Object(l.a)(Number(this.getResolution()||e[v.a.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[v.a.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(S.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(S.a)({},e,t)},e.prototype.animate=function(t){var e,n=arguments,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var o=arguments[r-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&L(e,!0))}for(var c=Date.now(),h=this.getCenter().slice(),f=this.getResolution(),d=this.getRotation(),m=[],i=0;i<r;++i){var v=n[i],_={start:c,complete:!1,anchor:v.anchor,duration:void 0!==v.duration?v.duration:1e3,easing:v.easing||w.c};if(v.center&&(_.sourceCenter=h,_.targetCenter=v.center,h=_.targetCenter),void 0!==v.zoom?(_.sourceResolution=f,_.targetResolution=this.constrainResolution(this.maxResolution_,v.zoom-this.minZoom_,0),f=_.targetResolution):v.resolution&&(_.sourceResolution=f,_.targetResolution=v.resolution,f=_.targetResolution),void 0!==v.rotation){_.sourceRotation=d;var x=Object(l.d)(v.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+x,d=_.targetRotation}_.callback=e,M(_)?_.complete=!0:c+=_.duration,m.push(_)}this.animations_.push(m),this.setHint(y.a.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[y.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[y.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(y.a.ANIMATING,-this.hints_[y.a.ANIMATING]);for(var i=0,t=this.animations_.length;i<t;++i){var e=this.animations_[i];e[0].callback&&L(e[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,c=n.length;o<c;++o){var h=n[o];if(!h.complete){var f=t-h.start,d=h.duration>0?f/h.duration:1;d>=1?(h.complete=!0,d=1):r=!1;var progress=h.easing(d);if(h.sourceCenter){var m=h.sourceCenter[0],_=h.sourceCenter[1],x=m+progress*(h.targetCenter[0]-m),w=_+progress*(h.targetCenter[1]-_);this.set(v.a.CENTER,[x,w])}if(h.sourceResolution&&h.targetResolution){var E=1===progress?h.targetResolution:h.sourceResolution+progress*(h.targetResolution-h.sourceResolution);h.anchor&&this.set(v.a.CENTER,this.calculateCenterZoom(E,h.anchor)),this.set(v.a.RESOLUTION,E)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var C=1===progress?Object(l.d)(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+progress*(h.targetRotation-h.sourceRotation);h.anchor&&this.set(v.a.CENTER,this.calculateCenterRotate(C,h.anchor)),this.set(v.a.ROTATION,C)}if(e=!0,!h.complete)break}}if(r){this.animations_[i]=null,this.setHint(y.a.ANIMATING,-1);var O=n[0].callback;O&&L(O,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenter();return void 0!==r&&(n=[r[0]-e[0],r[1]-e[1]],Object(x.f)(n,t-this.getRotation()),Object(x.a)(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenter(),o=this.getResolution();void 0!==r&&void 0!==o&&(n=[e[0]-t*(e[0]-r[0])/o,e[1]-t*(e[1]-r[1])/o]);return n},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(o.c)(this)+'"]',element=document.querySelector(e);if(element){var n=getComputedStyle(element);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,n){var r=e||0,o=n||0;return this.constraints_.resolution(t,r,o)},e.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)},e.prototype.getCenter=function(){return this.get(v.a.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();Object(_.a)(n,1);var r=this.getResolution();Object(_.a)(void 0!==r,2);var o=this.getRotation();return Object(_.a)(void 0!==o,3),Object(E.z)(n,r,o,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(v.a.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),r=Object(E.E)(t)/n[0],o=Object(E.A)(t)/n[1];return Math.max(r,o)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,o=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*o)}},e.prototype.getRotation=function(){return this.get(v.a.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,o=Math.log(n/r)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/o}},e.prototype.getState=function(t){var e=this.getCenter(),n=this.getProjection(),r=this.getResolution(),o=r/t,c=this.getRotation();return{center:[Math.round(e[0]/o)*o,Math.round(e[1]/o)*o],projection:void 0!==n?n:null,resolution:r,rotation:c,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var o=Object(d.h)(this.resolutions_,t,1);r=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var n,r=e||{},o=r.size;o||(o=this.getSizeFromViewport_()),Object(_.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Object(_.a)(!Object(E.H)(t),25),n=Object(O.d)(t)):t.getType()===C.a.CIRCLE?(t=t.getExtent(),(n=Object(O.d)(t)).rotate(this.getRotation(),Object(E.x)(t))):n=t;var l,h=void 0!==r.padding?r.padding:[0,0,0,0],f=void 0===r.constrainResolution||r.constrainResolution,d=void 0!==r.nearest&&r.nearest;l=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;for(var m=n.getFlatCoordinates(),y=this.getRotation(),v=Math.cos(-y),x=Math.sin(-y),w=1/0,S=1/0,I=-1/0,T=-1/0,P=n.getStride(),i=0,R=m.length;i<R;i+=P){var M=m[i]*v-m[i+1]*x,N=m[i]*x+m[i+1]*v;w=Math.min(w,M),S=Math.min(S,N),I=Math.max(I,M),T=Math.max(T,N)}var j=this.getResolutionForExtent([w,S,I,T],[o[0]-h[1]-h[3],o[1]-h[0]-h[2]]);if(j=isNaN(j)?l:Math.max(j,l),f){var D=this.constrainResolution(j,0,0);!d&&D<j&&(D=this.constrainResolution(D,-1,0)),j=D}x=-x;var A=(w+I)/2,F=(S+T)/2,k=[(A+=(h[1]-h[3])/2*j)*v-(F+=(h[0]-h[2])/2*j)*x,F*v+A*x],G=r.callback?r.callback:c.c;void 0!==r.duration?this.animate({resolution:j,center:k,duration:r.duration,easing:r.easing},G):(this.setResolution(j),this.setCenter(k),L(G,!0))},e.prototype.centerOn=function(t,e,n){var r=this.getRotation(),o=Math.cos(-r),c=Math.sin(-r),l=t[0]*o-t[1]*c,h=t[1]*o+t[0]*c,f=this.getResolution(),d=(l+=(e[0]/2-n[0])*f)*o-(h+=(n[1]-e[1]/2)*f)*(c=-c),m=h*o+l*c;this.setCenter([d,m])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(v.a.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(v.a.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(v.a.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(f.a);function L(t,e){setTimeout(function(){t(e)},0)}function M(t){return!(t.sourceCenter&&t.targetCenter&&!Object(x.e)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}e.a=R},function(t,e,n){"use strict";var r=n(2),o=n(12),c=n(63),l=n(3),h=n(18),f=n(1),d=n(4),m=n(0),y=n(47),v=function(t){function e(e){t.call(this,{attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Object(o.a)(e.getType()==l.a.POINT,10),e},this.source=e.source,Object(f.a)(this.source,d.a.CHANGE,this.refresh,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),t.prototype.refresh.call(this)},e.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=Object(m.j)(),e=this.distance*this.resolution,n=this.source.getFeatures(),o={},i=0,c=n.length;i<c;i++){var l=n[i];if(!(Object(r.c)(l)in o)){var h=this.geometryFunction(l);if(h){var f=h.getCoordinates();Object(m.m)(f,t),Object(m.c)(t,e,t);var d=this.source.getFeaturesInExtent(t);d=d.filter(function(t){var e=Object(r.c)(t);return!(e in o)&&(o[e]=!0,!0)}),this.features.push(this.createCluster(d))}}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var n=this.geometryFunction(t[i]);n?Object(h.a)(e,n.getCoordinates()):t.splice(i,1)}Object(h.g)(e,1/t.length);var r=new c.a(new y.a(e));return r.set("features",t),r},e}(n(75).a);e.a=v},function(t,e,n){"use strict";var r=n(110),o=n(17),c=n(13),l=n(1),h=n(4),f=n(0),d=n(6),m=n(52),y=function(t){function e(e){var n=void 0!==e.crossOrigin?e.crossOrigin:null,o=void 0!==e.imageLoadFunction?e.imageLoadFunction:m.b;t.call(this,{attributions:e.attributions,projection:Object(d.get)(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new r.a(this.imageExtent_,void 0,1,this.url_,n,o),this.imageSize_=e.imageSize?e.imageSize:null,Object(l.a)(this.image_,h.a.CHANGE,this.handleImageChange,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,n,r){return Object(f.F)(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==o.a.LOADED){var n,r,l=this.image_.getExtent(),image=this.image_.getImage();this.imageSize_?(n=this.imageSize_[0],r=this.imageSize_[1]):(n=image.width,r=image.height);var h=Object(f.A)(l)/r,d=Math.ceil(Object(f.E)(l)/h);if(d!=n){var m=Object(c.a)(d,r),canvas=m.canvas;m.drawImage(image,0,0,n,r,0,0,canvas.width,canvas.height),this.image_.setImage(canvas)}}t.prototype.handleImageChange.call(this,e)},e}(m.a);e.a=y},function(t,e,n){"use strict";var r=n(115),o=n(110),c=n(12),l=n(1),h=n(4),f=n(0),d=n(8),m=n(6),y=n(93),v=n(52),_=n(95),x=n(123),w=n(76),E=[101,101],C=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions}),this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,this.url_=n.url,this.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:v.b,this.params_=n.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=n.serverType,this.hidpi_=void 0===n.hidpi||n.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==n.ratio?n.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,n,o){if(void 0!==this.url_){var c=Object(m.get)(n),l=this.getProjection();l&&l!==c&&(e=Object(y.a)(l,c,t,e),t=Object(m.transform)(t,c,l));var h=Object(f.z)(t,e,0,E),v={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(d.a)(v,this.params_,o);var _=Math.floor((t[0]-h[0])/e),x=Math.floor((h[3]-t[1])/e);return v[this.v13_?"I":"X"]=_,v[this.v13_?"J":"Y"]=x,this.getRequestUrl_(h,E,1,l||c,v)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,n,c){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);var m=e/n,y=Object(f.x)(t),v=Math.ceil(Object(f.E)(t)/m),_=Math.ceil(Object(f.A)(t)/m),x=Object(f.z)(y,m,0,[v,_]),w=Math.ceil(this.ratio_*Object(f.E)(t)/m),E=Math.ceil(this.ratio_*Object(f.A)(t)/m),C=Object(f.z)(y,m,0,[w,E]),image=this.image_;if(image&&this.renderedRevision_==this.getRevision()&&image.getResolution()==e&&image.getPixelRatio()==n&&Object(f.g)(image.getExtent(),x))return image;var O={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(d.a)(O,this.params_),this.imageSize_[0]=Math.round(Object(f.E)(C)/m),this.imageSize_[1]=Math.round(Object(f.A)(C)/m);var S=this.getRequestUrl_(C,this.imageSize_,n,c,O);return this.image_=new o.a(C,e,n,S,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(l.a)(this.image_,h.a.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,n,r,o){if(Object(c.a)(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case _.a.GEOSERVER:var l=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+l:o.FORMAT_OPTIONS="dpi:"+l;break;case _.a.MAPSERVER:o.MAP_RESOLUTION=90*n;break;case _.a.CARMENTA_SERVER:case _.a.QGIS:o.DPI=90*n;break;default:Object(c.a)(!1,8)}o.WIDTH=e[0],o.HEIGHT=e[1];var h,f=r.getAxisOrientation();return h=this.v13_&&"ne"==f.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o.BBOX=h.join(","),Object(w.a)(this.url_,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(d.a)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a;this.v13_=Object(x.a)(t,"1.3")>=0},e}(v.a);e.a=C},function(t,e,n){"use strict";var r=n(115),o=n(12),c=n(0),l=n(8),h=n(9),f=n(6),d=n(93),m=n(31),y=n(57),v=n(95),_=n(30),x=n(123),w=n(76),E=function(t){function e(e){var n=e||{},r=n.params||{},o=!("TRANSPARENT"in r)||r.TRANSPARENT;t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!o,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:C,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition}),this.gutter_=void 0!==n.gutter?n.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=n.serverType,this.hidpi_=void 0===n.hidpi||n.hidpi,this.tmpExtent_=Object(c.j)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,n,o){var h=Object(f.get)(n),y=this.getProjection(),v=this.getTileGrid();v||(v=this.getTileGridForProjection(h));var _=v.getTileCoordForCoordAndResolution(t,e);if(!(v.getResolutions().length<=_[0])){var x=v.getResolution(_[0]),w=v.getTileCoordExtent(_,this.tmpExtent_),E=Object(m.d)(v.getTileSize(_[0]),this.tmpSize),C=this.gutter_;0!==C&&(E=Object(m.a)(E,C,this.tmpSize),w=Object(c.c)(w,x*C,w)),y&&y!==h&&(x=Object(d.a)(y,h,t,x),w=Object(f.transformExtent)(w,h,y),t=Object(f.transform)(t,h,y));var O={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(l.a)(O,this.params_,o);var S=Math.floor((t[0]-w[0])/x),I=Math.floor((w[3]-t[1])/x);return O[this.v13_?"I":"X"]=S,O[this.v13_?"J":"Y"]=I,this.getRequestUrl_(_,E,w,1,y||h,O)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,n,r,c,l){var f=this.urls;if(f){if(l.WIDTH=e[0],l.HEIGHT=e[1],l[this.v13_?"CRS":"SRS"]=c.getCode(),"STYLES"in this.params_||(l.STYLES=""),1!=r)switch(this.serverType_){case v.a.GEOSERVER:var d=90*r+.5|0;"FORMAT_OPTIONS"in l?l.FORMAT_OPTIONS+=";dpi:"+d:l.FORMAT_OPTIONS="dpi:"+d;break;case v.a.MAPSERVER:l.MAP_RESOLUTION=90*r;break;case v.a.CARMENTA_SERVER:case v.a.QGIS:l.DPI=90*r;break;default:Object(o.a)(!1,52)}var m,y,x=c.getAxisOrientation(),E=n;if(this.v13_&&"ne"==x.substr(0,2))m=n[0],E[0]=n[1],E[1]=m,m=n[2],E[2]=n[3],E[3]=m;if(l.BBOX=E.join(","),1==f.length)y=f[0];else y=f[Object(h.d)(Object(_.e)(t),f.length)];return Object(w.a)(y,l)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var i=0,t=[];for(var e in this.params_)t[i++]=e+"-"+this.params_[e];return t.join("/")},e.prototype.updateParams=function(t){Object(l.a)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a;this.v13_=Object(x.a)(t,"1.3")>=0},e}(y.a);function C(t,e,n){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(n)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var h=o.getResolution(t[0]),f=o.getTileCoordExtent(t,this.tmpExtent_),d=Object(m.d)(o.getTileSize(t[0]),this.tmpSize),y=this.gutter_;0!==y&&(d=Object(m.a)(d,y,this.tmpSize),f=Object(c.c)(f,h*y,f)),1!=e&&(d=Object(m.c)(d,e,this.tmpSize));var v={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(l.a)(v,this.params_),this.getRequestUrl_(t,d,f,e,n,v)}}e.a=E},function(t,e,n){"use strict";var r=n(94),o=n(20),c=n(64),l=n(25),h=n(13),f=n(1),d=n(0),m={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},y=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+l.d,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(f.a)(this,Object(o.b)(m.ELEMENT),this.handleElementChanged,this),Object(f.a)(this,Object(o.b)(m.MAP),this.handleMapChanged,this),Object(f.a)(this,Object(o.b)(m.OFFSET),this.handleOffsetChanged,this),Object(f.a)(this,Object(o.b)(m.POSITION),this.handlePositionChanged,this),Object(f.a)(this,Object(o.b)(m.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:c.a.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(m.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(m.MAP)},e.prototype.getOffset=function(){return this.get(m.OFFSET)},e.prototype.getPosition=function(){return this.get(m.POSITION)},e.prototype.getPositioning=function(){return this.get(m.POSITIONING)},e.prototype.handleElementChanged=function(){Object(h.d)(this.element);var element=this.getElement();element&&this.element.appendChild(element)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(h.e)(this.element),Object(f.e)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var map=this.getMap();if(map){this.mapPostrenderListenerKey=Object(f.a)(map,r.a.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?map.getOverlayContainerStopEvent():map.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(m.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(element){this.set(m.ELEMENT,element)},e.prototype.setMap=function(map){this.set(m.MAP,map)},e.prototype.setOffset=function(t){this.set(m.OFFSET,t)},e.prototype.setPosition=function(t){this.set(m.POSITION,t)},e.prototype.panIntoView=function(){var map=this.getMap();if(map&&map.getTargetElement()){var t=this.getRect(map.getTargetElement(),map.getSize()),element=this.getElement(),e=this.getRect(element,[Object(h.c)(element),Object(h.b)(element)]),n=this.autoPanMargin;if(!Object(d.g)(t,e)){var r=e[0]-t[0],o=t[2]-e[2],c=e[1]-t[1],l=t[3]-e[3],f=[0,0];if(r<0?f[0]=r-n:o<0&&(f[0]=Math.abs(o)+n),c<0?f[1]=c-n:l<0&&(f[1]=Math.abs(l)+n),0!==f[0]||0!==f[1]){var m=map.getView().getCenter(),y=map.getPixelFromCoordinate(m),v=[y[0]+f[0],y[1]+f[1]];map.getView().animate({center:map.getCoordinateFromPixel(v),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(element,t){var e=element.getBoundingClientRect(),n=e.left+window.pageXOffset,r=e.top+window.pageYOffset;return[n,r,n+t[0],r+t[1]]},e.prototype.setPositioning=function(t){this.set(m.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var map=this.getMap(),t=this.getPosition();if(map&&map.isRendered()&&t){var e=map.getPixelFromCoordinate(t),n=map.getSize();this.updateRenderedPosition(e,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var style=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=n[0],l=n[1];if(r==c.a.BOTTOM_RIGHT||r==c.a.CENTER_RIGHT||r==c.a.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=style.left="");var h=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=h&&(this.rendered.right_=style.right=h)}else{""!==this.rendered.right_&&(this.rendered.right_=style.right=""),r!=c.a.BOTTOM_CENTER&&r!=c.a.CENTER_CENTER&&r!=c.a.TOP_CENTER||(o-=this.element.offsetWidth/2);var f=Math.round(t[0]+o)+"px";this.rendered.left_!=f&&(this.rendered.left_=style.left=f)}if(r==c.a.BOTTOM_LEFT||r==c.a.BOTTOM_CENTER||r==c.a.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=style.top="");var d=Math.round(e[1]-t[1]-l)+"px";this.rendered.bottom_!=d&&(this.rendered.bottom_=style.bottom=d)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=style.bottom=""),r!=c.a.CENTER_LEFT&&r!=c.a.CENTER_CENTER&&r!=c.a.CENTER_RIGHT||(l-=this.element.offsetHeight/2);var m=Math.round(t[1]+l)+"px";this.rendered.top_!=m&&(this.rendered.top_=style.top=m)}},e.prototype.getOptions=function(){return this.options},e}(o.a);e.a=y},function(t,e,n){"use strict";var r=n(39),o=n(12),c=n(96),l=n(58),h=n(89),f=n(8),d=function(t){function e(e){var n=e||{},c=n.renderMode||h.a.HYBRID;Object(o.a)(null==c||c==h.a.IMAGE||c==h.a.HYBRID||c==h.a.VECTOR,28),n.declutter&&c==h.a.IMAGE&&(c=h.a.HYBRID),n.renderMode=c;var l=Object(f.a)({},n);delete l.preload,delete l.useInterimTilesOnError,t.call(this,l),this.setPreload(n.preload?n.preload:0),this.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),this.type=r.a.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(c.a.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(c.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(c.a.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(c.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(l.a);d.prototype.getSource,e.a=d},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t,e,n,r,o,c,l,h){var f,d,m,y,v,_,x,w,E,C,O,S,I={x:0,y:0};if(C=(f=r-e)*l+(m=t-n)*h+(v=n*e-t*r),0!==(E=f*o+m*c+v)&&0!==C&&E>=0==C>=4)return null;if(w=(d=h-c)*n+(y=o-l)*r+(_=l*c-o*h),0!==(x=d*t+y*e+_)&&0!==w&&x>=0==w>=0)return null;if(0==(O=f*y-d*m))return null;return O<0?-O/2:O/2,0,S=m*_-y*v,I.x=(S<0?S-0:S+0)/O,S=d*v-f*_,I.y=(S<0?S-0:S+0)/O,I}},function(t,e,n){var r=n(289);t.exports=function(t){if(t.webglInputEvents)return t.webglInputEvents;var e,n,o=null,c=[],l=[],h=[],f=[],d=[],m=[],y=[];!function(t){var v={x:0,y:0},_=null,O=1,S=+new Date,I=function(t){C(d,[_,t]),v.x=t.clientX,v.y=t.clientY},T=function(){r.off("mousemove",I),r.off("mouseup",T)},P=function(){n=t.getBoundingClientRect()};window.addEventListener("resize",P),P(),t.addEventListener("mousemove",function(t){if(!o){O++%7==0&&(P(),O=1);var e,r=!1;v.x=t.clientX-n.left,v.y=t.clientY-n.top,(e=x(v))&&_!==e?(_=e,r=r||C(c,[_])):null===e&&_!==e&&(r=r||C(l,[_]),_=null),r&&w(t)}}),t.addEventListener("mousedown",function(t){var o,c=!1;P(),v.x=t.clientX-n.left,v.y=t.clientY-n.top,(o=[x(v),t])[0]?(c=C(h,o),r.on("mousemove",I),r.on("mouseup",T),e=window.document.onselectstart,window.document.onselectstart=E,_=o[0]):_=null,c&&w(t)}),t.addEventListener("mouseup",function(t){var r,o=+new Date;v.x=t.clientX-n.left,v.y=t.clientY-n.top;var c=x(v),l=c===_;(r=[c||_,t])[0]&&(window.document.onselectstart=e,C(o-S<400&&l?y:m,r),S=o,C(f,r)&&w(t))})}(t.getGraphicsRoot());var v={mouseEnter:function(t){"function"==typeof t&&c.push(t);return v},mouseLeave:function(t){"function"==typeof t&&l.push(t);return v},mouseDown:function(t){"function"==typeof t&&h.push(t);return v},mouseUp:function(t){"function"==typeof t&&f.push(t);return v},mouseMove:function(t){"function"==typeof t&&d.push(t);return v},click:function(t){"function"==typeof t&&m.push(t);return v},dblClick:function(t){"function"==typeof t&&y.push(t);return v},mouseCapture:function(t){o=t},releaseMouseCapture:function(){o=null}};return t.webglInputEvents=v,v;function _(t,e,n){if(t&&t.size){var r=t.position,o=t.size;return r.x-o<e&&e<r.x+o&&r.y-o<n&&n<r.y+o}return!0}function x(e){return t.getNodeAtClientPos(e,_)}function w(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function E(t){return w(t),!1}function C(t,e){var i;for(i=0;i<t.length;i+=1)if(t[i].apply(void 0,e))return!0}}},function(t,e,n){var r=n(290);function o(t,e){document.addEventListener(t,e)}function c(t,e){document.removeEventListener(t,e)}t.exports=function(){if(void 0===typeof document)return r;return{on:o,off:c}}()},function(t,e){function n(){}t.exports={on:n,off:n,stop:n}},function(t,e){t.exports=function(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var t=window.navigator.userAgent.toLowerCase(),e=/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}()},function(t,e){t.exports=function(t){var e=0,n=0;if(t.offsetParent)do{e+=t.offsetLeft,n+=t.offsetTop}while(null!==(t=t.offsetParent));return[e,n]}},function(t,e,n){t.exports=function(t,e){var n=r(e),o=null,c={},l={x:0,y:0};return n.mouseDown(function(t,e){o=t,l.x=e.clientX,l.y=e.clientY,n.mouseCapture(o);var r=c[t.id];return r&&r.onStart&&r.onStart(e,l),!0}).mouseUp(function(t){n.releaseMouseCapture(o),o=null;var e=c[t.id];return e&&e.onStop&&e.onStop(),!0}).mouseMove(function(t,e){if(o){var n=c[o.id];return n&&n.onDrag&&n.onDrag(e,{x:e.clientX-l.x,y:e.clientY-l.y}),l.x=e.clientX,l.y=e.clientY,!0}}),{bindDragNDrop:function(t,e){c[t.id]=e,e||delete c[t.id]}}};var r=n(288)},function(t,e,n){(function(e){function n(){}t.exports=function(){var i,t,r=0,o=["ms","moz","webkit","o"];t="undefined"!=typeof window?window:void 0!==e?e:{setTimeout:n,clearTimeout:n};for(i=0;i<o.length&&!t.requestAnimationFrame;++i){var c=o[i];t.requestAnimationFrame=t[c+"RequestAnimationFrame"],t.cancelAnimationFrame=t[c+"CancelAnimationFrame"]||t[c+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var n=(new Date).getTime(),o=Math.max(0,16-(n-r)),c=t.setTimeout(function(){e(n+o)},o);return r=n+o,c});t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){t.clearTimeout(e)});return function(e){var n;return r(),{stop:o,restart:function(){n||r()}};function r(){n=t.requestAnimationFrame(r),e()||o()}function o(){t.cancelAnimationFrame(n),n=0}}}()}).call(this,n(118))},function(t,e){t.exports=function(t){if(!t)throw{message:"Cannot get dimensions of undefined container"};var e=t.clientWidth,n=t.clientHeight;return{left:0,top:0,width:e,height:n}}},function(t,e,n){t.exports=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var c=n(297)(e),l=Object.create(null),h={},f=0,d=c.settings.springTransform||o;f=0,t.forEachNode(function(t){_(t.id),f+=1}),t.forEachLink(w),t.on("changed",v);var m=!1,y={step:function(){if(0===f)return!0;var t=c.step();y.lastMove=t,y.fire("step");var e,n=t/f,r=n<=.01;return m!==r&&(m=r,e=r,y.fire("stable",e)),r},getNodePosition:function(t){return O(t).pos},setNodePosition:function(t){var body=O(t);body.setPosition.apply(body,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=h[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return c.getBBox()},forEachBody:function(t){Object.keys(l).forEach(function(e){t(l[e],e)})},pinNode:function(t,e){var body=O(t.id);body.isPinned=!!e},isNodePinned:function(t){return O(t.id).isPinned},dispose:function(){t.off("changed",v),y.fire("disposed")},getBody:function(t){return l[t]},getSpring:function(e,n){var r;if(void 0===n)r="object"!=typeof e?e:e.id;else{var link=t.hasLink(e,n);if(!link)return;r=link.id}return h[r]},simulator:c,graph:t,lastMove:0};return r(y),y;function v(e){for(var i=0;i<e.length;++i){var n=e[i];"add"===n.changeType?(n.node&&_(n.node.id),n.link&&w(n.link)):"remove"===n.changeType&&(n.node&&x(n.node),n.link&&E(n.link))}f=t.getNodesCount()}function _(e){var body=l[e];if(!body){var n=t.getNode(e);if(!n)throw new Error("initBody() was called with unknown node id");var r=n.position;if(!r){var o=function(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),i=0;i<n;++i){var link=t.links[i],r=link.fromId!==t.id?l[link.fromId]:l[link.toId];r&&r.pos&&e.push(r)}return e}(n);r=c.getBestNewBodyPosition(o)}(body=c.addBodyAt(r)).id=e,l[e]=body,C(e),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(n)&&(body.isPinned=!0)}}function x(t){var e=t.id,body=l[e];body&&(l[e]=null,delete l[e],c.removeBody(body))}function w(link){C(link.fromId),C(link.toId);var t=l[link.fromId],e=l[link.toId],n=c.addSpring(t,e,link.length);d(link,n),h[link.id]=n}function E(link){var e=h[link.id];if(e){var n=t.getNode(link.fromId),r=t.getNode(link.toId);n&&C(n.id),r&&C(r.id),delete h[link.id],c.removeSpring(e)}}function C(e){var body=l[e];body.mass=function(e){var n=t.getLinks(e);return n?1+n.length/3:1}(e)}function O(t){var body=l[t];return body||(_(t),body=l[t]),body}},t.exports.simulator=n(297);var r=n(105);function o(){}},function(t,e,n){t.exports=function(t){var e=n(564),r=n(246),o=n(140),c=n(105),l=(t=o(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||n(565),h=t.createBounds||n(569),f=t.createDragForce||n(570),d=t.createSpringForce||n(571),m=t.integrator||n(572),y=t.createBody||n(573),v=[],_=[],x=l(t),w=h(v,t),E=d(t),C=f(t),O={bodies:v,quadTree:x,springs:_,settings:t,step:function(){!function(){var body,i=v.length;if(i)for(x.insertBodies(v);i--;)(body=v[i]).isPinned||(body.force.reset(),x.updateBodyForce(body),C.update(body));i=_.length;for(;i--;)E.update(_[i])}();var e=m(v,t.timeStep);return w.update(),e},addBody:function(body){if(!body)throw new Error("Body is required");return v.push(body),body},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var body=y(t);return v.push(body),body},removeBody:function(body){if(body){var t=v.indexOf(body);if(!(t<0))return v.splice(t,1),0===v.length&&w.reset(),!0}},addSpring:function(t,n,r,o,c){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var l=new e(t,n,r,c>=0?c:-1,o);return _.push(l),l},getTotalMovement:function(){return 0},removeSpring:function(t){if(t){var e=_.indexOf(t);return e>-1?(_.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return w.getBestNewPosition(t)},getBBox:function(){return w.box},gravity:function(e){return void 0!==e?(t.gravity=e,x.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,x.options({theta:e}),this):t.theta}};return r(t,O),c(O),O}},function(t,e){t.exports=function(t,e,n,r){this.x1=t||0,this.y1=e||0,this.x2=n||0,this.y2=r||0}},function(t,e){t.exports=function(t){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=t}},function(t,e,n){var r=n(299);t.exports=function(t){var e,n=Math.sqrt(t||1024)<<0,o=n,c=1,l={},h=0,f=[],d=[];if(m=t,0!=(m&m-1))throw"Tiles per texture should be power of two.";var m;var y={isDirty:!1,clearDirty:function(){var i;for(y.isDirty=!1,i=0;i<f.length;++i)f[i].isDirty=!1},remove:function(t){var e=l[t];if(!e)return!1;if(delete l[t],(c-=1)===e.offset)return!0;var n=v(e.offset);return r=v(c),h=n,m=f[r.textureNumber].canvas,y=f[h.textureNumber].ctx,_=h.col*o,w=h.row*o,y.drawImage(m,r.col*o,r.row*o,o,o,_,w,o,o),f[r.textureNumber].isDirty=!0,f[h.textureNumber].isDirty=!0,l[d[c]].offset=e.offset,d[e.offset]=d[c],x(),!0;var r,h,m,y,_,w},getTextures:function(){return f},getCoordinates:function(t){return l[t]},load:function(t,e){if(l.hasOwnProperty(t))e(l[t]);else{var img=new window.Image,h=c;c+=1,img.crossOrigin="anonymous",img.onload=function(){x(),function(t,img,e){var c=v(t),h={offset:t};c.textureNumber>=f.length&&(m=new r(n*o),f.push(m));var m;var y=f[c.textureNumber];y.ctx.drawImage(img,c.col*o,c.row*o,o,o),d[t]=img.src,l[img.src]=h,y.isDirty=!0,e(h)}(h,img,e)},img.src=t}}};return y;function v(e){var r=e/t<<0,o=e%t,c=o/n<<0,col=o%n;return{textureNumber:r,row:c,col:col}}function _(){y.isDirty=!0,h=0,e=null}function x(){e&&(window.clearTimeout(e),h+=1,e=null),h>10?_():e=window.setTimeout(_,400)}}},function(t,e,n){var r=n(190);t.exports=function(){var t,e,n,o,c,l,h,f,d,m,y=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),v=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),_=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),x=0,w=new ArrayBuffer(16*y),E=new Float32Array(w),C=new Uint32Array(w);return{load:function(l){e=l,o=r(l),t=o.createProgram(_,v),e.useProgram(t),c=o.getLocations(t,["a_vertexPos","a_color","u_screenSize","u_transform"]),e.enableVertexAttribArray(c.vertexPos),e.enableVertexAttribArray(c.color),n=e.createBuffer()},position:function(t,e,n){var r=t.id,o=6*r;E[o]=e.x,E[o+1]=e.y,C[o+2]=t.color,E[o+3]=n.x,E[o+4]=n.y,C[o+5]=t.color},createLink:function(t){!function(){if((x+1)*y>w.byteLength){var t=new ArrayBuffer(2*w.byteLength),e=new Float32Array(t),n=new Uint32Array(t);n.set(C),E=e,C=n,w=t}}(),x+=1,l=t.id},removeLink:function(t){x>0&&(x-=1),t.id<x&&x>0&&o.copyArrayPart(C,6*t.id,6*x,6)},updateTransform:function(t){m=!0,d=t},updateSize:function(t,e){h=t,f=e,m=!0},render:function(){e.useProgram(t),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,w,e.DYNAMIC_DRAW),m&&(m=!1,e.uniformMatrix4fv(c.transform,!1,d),e.uniform2f(c.screenSize,h,f)),e.vertexAttribPointer(c.vertexPos,2,e.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(c.color,4,e.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),e.drawArrays(e.LINES,0,2*x),l=x-1},bringToFront:function(link){l>link.id&&o.swapArrayPart(E,6*link.id,6*l,6),l>0&&(l-=1)},getFrontLinkId:function(){return l}}}},function(t,e,n){var r=n(190);t.exports=function(){var t,e,n,o,c,l,h,f,d,m=4,y=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,v=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),_=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),x=new ArrayBuffer(16*y),w=new Float32Array(x),E=new Uint32Array(x),C=0;return{load:function(l){e=l,c=r(l),t=c.createProgram(_,v),e.useProgram(t),o=c.getLocations(t,["a_vertexPos","a_color","u_screenSize","u_transform"]),e.enableVertexAttribArray(o.vertexPos),e.enableVertexAttribArray(o.color),n=e.createBuffer()},position:function(t,e){var n=t.id;w[n*m]=e.x,w[n*m+1]=-e.y,w[n*m+2]=t.size,E[n*m+3]=t.color},updateTransform:function(t){d=!0,f=t},updateSize:function(t,e){l=t,h=e,d=!0},removeNode:function(t){C>0&&(C-=1);t.id<C&&C>0&&c.copyArrayPart(E,t.id*m,C*m,m)},createNode:function(){(function(){if((C+1)*y>=x.byteLength){var t=new ArrayBuffer(2*x.byteLength),e=new Float32Array(t),n=new Uint32Array(t);n.set(E),w=e,E=n,x=t}})(),C+=1},replaceProperties:function(){},render:function(){e.useProgram(t),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,x,e.DYNAMIC_DRAW),d&&(d=!1,e.uniformMatrix4fv(o.transform,!1,f),e.uniform2f(o.screenSize,l,h));e.vertexAttribPointer(o.vertexPos,3,e.FLOAT,!1,m*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o.color,4,e.UNSIGNED_BYTE,!0,m*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,0,C)}}}},function(t,e,n){var r=n(247);t.exports=function(t){return{color:r(t)}}},function(t,e,n){var r=n(247);t.exports=function(t,e){return{size:"number"==typeof t?t:10,color:r(e)}}},function(t,e,n){t.exports=function(){var t,e,n,c=0,l=0,h=1,f={},d={},m=function(t){return svg("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},y=function(t,e){t.attr("x",e.x-5).attr("y",e.y-5)},v=function(link){return svg("line").attr("stroke","#999")},_=function(t,e,n){t.attr("x1",e.x).attr("y1",e.y).attr("x2",n.x).attr("y2",n.y)},x=function(t){t.fire("rescaled")},w={x:0,y:0},E={x:0,y:0},C={x:0,y:0},O=function(){if(t){var e="matrix("+h+", 0, 0,"+h+","+c+","+l+")";t.attr("transform",e)}};e=function(){var e=svg("svg");return t=svg("g").attr("buffered-rendering","dynamic"),e.appendChild(t),e}();var S={getNodeUI:function(t){return f[t]},getLinkUI:function(t){return d[t]},node:function(t){if("function"==typeof t)return m=t,this},link:function(t){if("function"==typeof t)return v=t,this},placeNode:function(t){return y=t,this},placeLink:function(t){return _=t,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(t,e){c=t,l=e,O()},inputManager:o,translateRel:function(n,r){var p=e.createSVGPoint(),o=t.getCTM(),c=e.createSVGPoint().matrixTransform(o.inverse());p.x=n,p.y=r,(p=p.matrixTransform(o.inverse())).x=(p.x-c.x)*o.a,p.y=(p.y-c.y)*o.d,o.e+=p.x,o.f+=p.y;var l="matrix("+o.a+", 0, 0,"+o.d+","+o.e+","+o.f+")";t.attr("transform",l)},scale:function(n,r){var p=e.createSVGPoint();p.x=r.x,p.y=r.y,p=p.matrixTransform(t.getCTM().inverse());var o=e.createSVGMatrix().translate(p.x,p.y).scale(n).translate(-p.x,-p.y),f=t.getCTM().multiply(o);h=f.a,c=f.e,l=f.f;var d="matrix("+f.a+", 0, 0,"+f.d+","+f.e+","+f.f+")";return t.attr("transform",d),x(this),h},resetScale:function(){h=1;return t.attr("transform","matrix(1, 0, 0, 1, 0, 0)"),x(this),this},init:function(t){t.appendChild(e),O(),"function"==typeof n&&n(e)},release:function(t){e&&t&&t.removeChild(e)},addLink:function(link,e){var n=v(link);if(n)return n.position=e,n.link=link,d[link.id]=n,t.childElementCount>0?t.insertBefore(n,t.firstChild):t.appendChild(n),n},releaseLink:function(link){var e=d[link.id];e&&(t.removeChild(e),delete d[link.id])},addNode:function(e,n){var r=m(e);if(r)return r.position=n,r.node=e,f[e.id]=r,t.appendChild(r),r},releaseNode:function(e){var n=f[e.id];n&&(t.removeChild(n),delete f[e.id])},renderNodes:function(){for(var t in f)if(f.hasOwnProperty(t)){var e=f[t];w.x=e.position.x,w.y=e.position.y,y(e,w,e.node)}},renderLinks:function(){for(var t in d)if(d.hasOwnProperty(t)){var e=d[t];E.x=e.position.from.x,E.y=e.position.from.y,C.x=e.position.to.x,C.y=e.position.to.y,_(e,E,C,e.link)}},getGraphicsRoot:function(t){return"function"==typeof t&&(e?t(e):n=t),e},getSvgRoot:function(){return e}};return r(S),S};var svg=n(248),r=n(105),o=n(244)},,,,,,,,function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise(function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n}),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)})}},function(t,e,n){"use strict";e.decode=e.parse=n(368),e.encode=e.stringify=n(369)},,function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",function(){n.$forceUpdate()}),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map(function(){return t(!1)}):t(!1))}};t.exports=r},function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&O(r),i&&S(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var s,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&O(i),t){case"Point":s=r(e).geometry;break;case"LineString":s=a(e).geometry;break;case"Polygon":s=o(e).geometry;break;case"MultiPoint":s=h(e).geometry;break;case"MultiLineString":s=l(e).geometry;break;case"MultiPolygon":s=p(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(s.bbox=i),s}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(t[0])||!b(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!b(o[0][0])||!b(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return o(t,e)}),n)}function a(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!b(t[0][1])||!b(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return a(t,e)}),n)}function c(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&O(n),r&&S(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function g(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Eo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Eo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function y(t,e){return _(m(t,e))}function v(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function x(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function w(t,e,n){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return d(m(t,e),n||"kilometers")}function E(t,e,n){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Oo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Oo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function b(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function C(t){return!!t&&t.constructor===Object}function O(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!b(t))throw new Error("bbox must only contain numbers")})}function S(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function I(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,h=0,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,m=g?t.features.length:1,y=0;y<m;y++){a=(l=!!(c=g?t.features[y].geometry:d?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,x=0;if(null!==(s=l?c.geometries[v]:c)){u=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(u,p,y,_,x),p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,y,_,x),p++,"MultiPoint"===w&&_++;"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,y,_,x),p++;"MultiLineString"===w&&_++,"Polygon"===w&&x++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===w&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,y,_,x),p++;x++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)I(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function T(t,e,n,r){var i=n;return I(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function P(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function R(t,e,n){var r=n;return P(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function L(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function M(t,e,n){var r=n;return L(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function N(t){var e=[];return I(t,function(t){e.push(t)}),e}function j(t,e){var n,r,i,o,s,a,u,c,l,h,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1;for(n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,c=f?t.features[n].properties:g?t.properties:{},l=f?t.features[n].bbox:g?t.bbox:void 0,h=f?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,h);p++}}function D(t,e,n){var r=n;return j(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function A(t,n){j(t,function(t,r,i,o,s){var u,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:s}),r,0)}switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:u,coordinates:t},i),r,o)})})}function q(t,e,n){var r=n;return A(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function F(t,e){A(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&T(t,function(o,s,u,c,l,h){var p=a([o,s],t.properties);return e(p,n,r,h,i),i++,s})}})}function k(t,e,n){var r=n,i=!1;return F(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function G(t,e){if(!t)throw new Error("geojson is required");A(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),n,r,s)}}})}function B(t,e,n){var r=n;return G(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function z(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function U(t){if(!t)throw new Error("obj is required");var e=V(t);if(e.length>1&&b(e[0])&&b(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function V(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Y(e),e;throw new Error("No valid coordinates")}function Y(t){if(t.length>1&&b(t[0])&&b(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Y(t[0]);throw new Error("coordinates must only contain numbers")}function X(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function W(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function H(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function $(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function K(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function Z(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function J(t,e,n){n=n||{};for(var r=Object.keys(Po),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:Po[o],Ro[o]=s}Ro.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var s=function(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(h,o=l[p]),a.push([n+f[0],e+f[1]]),et(h);for(var g=n+u[p],d=e+c[p],m=p;g>=0&&d>=0&&d<s&&(g!=n||d!=e)&&void 0!==(h=t[d][g]);){if(0===(p=h.cval)||15===p)return{path:a,info:"mergeable"};o=l[p],r=u[p],i=c[p],5!==p&&10!==p||(5===p?h.flipped?-1===c[m]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[m]&&(o="bottom",r=0,i=-1):10===p&&(h.flipped?-1===u[m]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[m]&&(o="left",r=-1,i=0))),f=nt(h,o),a.push([g+f[0],d+f[1]]),et(h),g+=r,d+=i,m=p}return{path:a,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],c=s.path[s.path.length-1][1],l=n-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var h=s.path.length-2;h>=0;--h)e[l].unshift(s.path[h]);a=!0;break}a||(e[n++]=s.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],c=t[o+1][s+1],l=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h))){a|=u>=e?8:0,a|=c>=e?4:0,a|=l>=e?2:0;var g,f,d,m,p=!1;if(5==(a|=h>=e?1:0)||10===a){var y=(u+c+l+h)/4;5===a&&y<e?(a=10,p=!0):10===a&&y<e&&(a=5,p=!0)}0!==a&&15!==a&&(g=f=d=m=.5,1===a?(d=1-Q(e,u,h),f=1-Q(e,l,h)):2===a?(f=Q(e,h,l),m=1-Q(e,c,l)):3===a?(d=1-Q(e,u,h),m=1-Q(e,c,l)):4===a?(g=Q(e,u,c),m=Q(e,l,c)):5===a?(g=Q(e,u,c),m=Q(e,l,c),f=1-Q(e,l,h),d=1-Q(e,u,h)):6===a?(f=Q(e,h,l),g=Q(e,u,c)):7===a?(d=1-Q(e,u,h),g=Q(e,u,c)):8===a?(d=Q(e,h,u),g=1-Q(e,c,u)):9===a?(f=1-Q(e,l,h),g=1-Q(e,c,u)):10===a?(g=1-Q(e,c,u),m=1-Q(e,c,l),f=Q(e,h,l),d=Q(e,h,u)):11===a?(g=1-Q(e,c,u),m=1-Q(e,c,l)):12===a?(d=Q(e,h,u),m=Q(e,l,c)):13===a?(f=1-Q(e,l,h),m=Q(e,l,c)):14===a?(d=Q(e,h,u),f=Q(e,h,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:p,top:g,right:m,bottom:f,left:d})}}}return i}(t,e));return"function"==typeof Ro.successCallback&&Ro.successCallback(a),a}function Q(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function it(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ot(t,e){if(!(this instanceof ot))return new ot(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,r,i){i||(i=gt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],ut(i,t.leaf?r(o):o);return i}function ut(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ct(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ht(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function dt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function gt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Lo(t,o,e,n,i),s.push(e,o,o,n))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function _t(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)Vo(t[o],a)||u.push(t[o]);var c=Bo(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Mo(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=Ct(u,r),s.push(r)}var c=Mo(16);for(a=0;a<s.length;a++)c.insert(Et(s[a]));for(var l=e*e,h=n*n;s.length;){var p=s.shift(),f=p.p,g=p.next.p,d=Ot(f,g);if(!(d<h)){var m=d/l;(u=function(t,e,n,r,i,o,s){for(var a=new Uo(null,bt),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],h=u.leaf?St(l,n,r):function(t,e,n){if(xt(t,n)||xt(e,n))return 0;var r=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=It(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=It(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}(n,r,l);h>o||a.push({node:l,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,g=St(f,e,n),d=St(f,r,i);if(p.dist<g&&p.dist<d&&wt(n,f,s)&&wt(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,g,p.next.next.p,m,c))&&Math.min(Ot(u,f),Ot(u,g))<=m&&(s.push(p),s.push(Ct(u,p)),o.remove(u),c.remove(p),c.insert(Et(p)),c.insert(Et(p.next)))}}p=r;var y=[];do{y.push(p.p),p=p.next}while(p!==r);return y.push(p.p),y}function bt(t,e){return t.dist-e.dist}function xt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function wt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&Yo(t,e,n)>0!=Yo(t,e,r)>0&&Yo(n,r,t)>0!=Yo(n,r,e)>0}(a[u].p,a[u].next.p,t,e))return!1;return!0}function Et(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Ct(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ot(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function St(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return o=t[0]-r,s=t[1]-i,o*o+s*s}function It(t,e,n,r,i,o,s,a){var u,c,l,h,p=n-t,f=r-e,g=s-i,d=a-o,m=t-i,y=e-o,v=p*p+f*f,_=p*g+f*d,x=g*g+d*d,w=p*m+f*y,E=g*m+d*y,b=v*x-_*_,C=b,O=b;0===b?(c=0,C=1,h=E,O=x):(h=v*E-_*w,(c=_*E-x*w)<0?(c=0,h=E,O=x):c>C&&(c=C,h=E+_,O=x)),h<0?(h=0,-w<0?c=0:-w>v?c=C:(c=-w,C=v)):h>O&&(h=O,-w+_<0?c=0:-w+_>v?c=C:(c=-w+_,C=v));var S=(1-(l=0===h?0:h/O))*i+l*s-((1-(u=0===c?0:c/C))*t+u*n),I=(1-l)*o+l*a-((1-u)*e+u*r);return S*S+I*I}function Tt(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(I(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Xo(r,n);return i.length>3?o([i]):null}function Pt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=U(t),o=V(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Rt(i,o[u][0],r)){for(var l=!1,h=1;h<o[u].length&&!l;)Rt(i,o[u][h],!r)&&(l=!0),h++;l||(c=!0)}return c}function Rt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}function Lt(t,e){var n=[];return j(e,function(e){L(t,function(t){Pt(t,e)&&n.push(t)})}),c(n)}function Mt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(jt);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,c=t[0].x,l=t[a].y,h=l;a--;)t[a].y<l&&(l=t[a].y),t[a].y>h&&(h=t[a].y);var p,f=c-u,g=h-l,d=f>g?f:g,m=.5*(c+u),y=.5*(h+l),v=[new Nt({x:m-20*d,y:y-d,__sentinel:!0},{x:m,y:y+20*d,__sentinel:!0},{x:m+20*d,y:y-d,__sentinel:!0})],_=[],x=[];for(a=t.length;a--;){for(x.length=0,p=v.length;p--;)(f=t[a].x-v[p].x)>0&&f*f>v[p].r?(_.push(v[p]),v.splice(p,1)):(g=t[a].y-v[p].y,f*f+g*g>v[p].r||(x.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1)));for(Dt(x),p=x.length;p;)n=x[--p],e=x[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>1e-12&&v.push(new Nt(e,n,r))}for(Array.prototype.push.apply(_,v),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],s)}))}function Nt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*c-s*l)/h,this.y=(o*l-a*c)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function jt(t,e){return e.x-t.x}function Dt(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function At(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=U(t),o=U(e),s=x(o[1]-i[1]),a=x(o[0]-i[0]),u=x(i[1]),c=x(o[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return d(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return kt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return kt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gt(t);default:throw new Error("unknown GeoJSON type")}}function kt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(r){var o=e[r];"object"==typeof o?null===o?n[r]=null:o.length?n[r]=o.map(function(t){return t}):n[r]=t(o):n[r]=o}),n):n}(t.properties),e.geometry=Gt(t.geometry),e}function Gt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Gt(t)}),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e)}function Bt(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&Ko(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}var u=$o(t.transform),c=t.arcs;return function a(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(a)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=s(t.arcs);break;case"MultiPolygon":e=t.arcs.map(s);break;default:return null}return{type:n,coordinates:e}}(e)}function zt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Ut(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(qt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?qt:Vt)(t)}function qt(t){var e,n=Vt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Vt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Vt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Yt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Xt(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Wt(t){return t[0].toString()+","+t[1].toString()}function Ht(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=function(t){var e={};A(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[],i=B(t,function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Wt(r[0]),s=Wt(r[r.length-1]),u=Wt(i[0]),c=Wt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===s)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(s!==c)return null;n=r.concat(i.reverse().slice(1))}return a(n)}(t,e);return n||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:l(r.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[];A(t,function(t){r.push(t.geometry)});var i=ss({geoms:f(r).geometry});return Jo(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function $t(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=Z(t),o=[];switch(i){case"LineString":o=Kt(t);break;case"MultiLineString":case"Polygon":V(t).forEach(function(t){o.push(Kt(t))});break;case"MultiPolygon":V(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Kt(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};V(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function Kt(t){var e=V(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],r=e[a],function(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,l=u-s;return(r-o)*l-(i-s)*c==0&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=a:a<=r&&r<=o:l>0?s<=i&&i<=u:u<=i&&i<=s)}(n,i=e[a+1],r)||o.push(r);return o.push(i),o}function Zt(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Jt(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return o=t.x-r,s=t.y-i,o*o+s*s}function Qt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=function(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,o,i){for(var c,s=o,a=n+1;a<r;a++){var u=Jt(e[a],e[n],e[r]);u>s&&(c=a,s=u)}s>o&&(c-n>1&&t(e,n,c,o,i),i.push(e[c]),r-c>1&&t(e,c,r,o,i))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)Zt(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function te(t,e,n){return Qt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function ee(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=Qt(r,e,n).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=Qt(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function ne(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!b(n))throw new Error("resolution must be an number");if(!b(r))throw new Error("sharpness must be an number");for(var i=[],o=new as({points:$(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&i.push([u.x,u.y])}return a(i,t.properties)}function ie(t){O(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n];return o([[s,[r,n],[r,i],[e,i],s]])}function re(t){return ie(z(t))}function oe(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(At(t.slice(0,2),[r,n])>=At(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function se(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties,a=U(t),u=x(a[0]),c=x(a[1]),l=x(n),h=m(e,o),p=Math.asin(Math.sin(c)*Math.cos(h)+Math.cos(c)*Math.sin(h)*Math.cos(l));return r([_(u+Math.atan2(Math.sin(l)*Math.sin(h)*Math.cos(c),Math.cos(h)-Math.sin(c)*Math.sin(p))),_(p)],s)}function ae(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var s=[],a=0;a<r;a++)s.push(se(t,e,-360*a/r,n).geometry.coordinates);return s.push(s[0]),o([s],i)}function ue(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ue(e,t);return n=(n+180)%360}(t,e);var r=U(t),i=U(e),o=x(r[0]),s=x(i[0]),a=x(r[1]),u=x(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return _(Math.atan2(c,l))}function ce(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=z(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function le(t,e){var n=0,i=0,o=0;return I(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function he(t){var e=[];return"FeatureCollection"===t.type?L(t,function(t){I(t,function(n){e.push(r(n,t.properties))})}):I(t,function(n){e.push(r(n,t.properties))}),c(e)}function pe(t,e,n){n=n||2;var a,u,r,o,c,p,l,h=e&&e.length,i=h?e[0]*n:t.length,f=fe(t,0,i,n,!0),s=[];if(!f)return s;if(h&&(f=function(t,e,n,r){var i,o,s,a,u,c=[];for(i=0,o=e.length;i<o;i++)s=e[i]*r,a=i<o-1?e[i+1]*r:t.length,(u=fe(t,s,a,r,!1))===u.next&&(u.steiner=!0),c.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(c.sort(ge),i=0;i<c.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,c=n,l=n.x,h=n.y,p=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&ye(o<h?i:s,o,l,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&xe(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=we(e,t);de(n,n.next)}}(c[i],n),n=de(n,n.next);return n}(t,e,f,n)),t.length>80*n){a=r=t[0],u=o=t[1];for(var g=n;g<i;g+=n)c=t[g],p=t[g+1],c<a&&(a=c),p<u&&(u=p),c>r&&(r=c),p>o&&(o=p);l=0!==(l=Math.max(r-a,o-u))?1/l:0}return function t(e,n,r,o,i,c,s){if(e){!s&&c&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=me(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(e,o,i,c);for(var a,u,l=e;e.prev!==e.next;)if(a=e.prev,u=e.next,c?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(ve(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=me(a,u,e,n,r),p=me(c,l,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&ye(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&ve(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&ye(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&ve(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}(e,o,i,c):function(t){var e=t.prev,n=t,r=t.next;if(ve(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(ye(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ve(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))n.push(a.i/r),n.push(e.i/r),n.push(u.i/r),Ce(e),e=u.next,l=u.next;else if((e=u)===l){s?1===s?t(e=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!_e(i,o)&&be(i,r,r.next,o)&&xe(i,o)&&xe(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ce(r),Ce(r.next),r=t=o),r=r.next}while(r!==t);return r}(e,n,r),n,r,o,i,c,2):2===s&&function(e,n,r,o,i,c){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&be(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&xe(t,e)&&xe(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(s,a)){var u=we(s,a);return s=de(s,s.next),u=de(u,u.next),t(s,n,r,o,i,c),void t(u,n,r,o,i,c)}a=a.next}s=s.next}while(s!==e)}(e,n,r,o,i,c):t(de(e),n,r,o,i,c,1);break}}}(f,s,n,a,u,l),s}function fe(t,e,n,r,i){var o,s;if(i===Se(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Ee(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Ee(o,t[o],t[o+1],s);return s&&_e(s,s.next)&&(Ce(s),s=s.next),s}function de(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!_e(r,r.next)&&0!==ve(r.prev,r,r.next))r=r.next;else{if(Ce(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ge(t,e){return t.x-e.x}function me(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ye(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function ve(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _e(t,e){return t.x===e.x&&t.y===e.y}function be(t,e,n,r){return!!(_e(t,e)&&_e(n,r)||_e(t,r)&&_e(n,e))||ve(t,e,n)>0!=ve(t,e,r)>0&&ve(n,r,t)>0!=ve(n,r,e)>0}function xe(t,e){return ve(t.prev,t,t.next)<0?ve(t,e,t.next)>=0&&ve(t,t.prev,e)>=0:ve(t,e,t.prev)<0||ve(t,t.next,e)<0}function we(t,e){var n=new Oe(t.i,t.x,t.y),r=new Oe(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ee(t,e,n,r){var i=new Oe(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ce(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Oe(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Se(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Ie(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=us(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var s=0;s<i.length;s+=3){var a=i.slice(s,s+3);a.push(i[s]),r.push(o([a]))}return r}function Te(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return L(e,function(e,i){var o=At(t,e);o<r&&((n=Ft(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function Pe(t,e,n,r,i){!function t(e,n,r,o,i){for(;o>r;){if(o-r>600){var c=o-r+1,s=n-r+1,a=Math.log(c),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(c-u)/c)*(s-c/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/c+l)),Math.min(o,Math.floor(n+(c-s)*u/c+l)),i)}var h=e[n],f=r,p=o;for(Re(e,r,n),i(e[o],h)>0&&Re(e,r,o);f<p;){for(Re(e,f,p),f++,p--;i(e[f],h)<0;)f++;for(;i(e[p],h)>0;)p--}0===i(e[r],h)?Re(e,r,p):Re(e,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Re(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Le(t,e){if(!(this instanceof Le))return new Le(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Me(t,e){Ne(t,0,t.children.length,e,t)}function Ne(t,e,n,r,i){i||(i=ze(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],je(i,t.leaf?r(o):o);return i}function je(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function De(t,e){return t.minX-e.minX}function Ae(t,e){return t.minY-e.minY}function Fe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ke(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ge(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Be(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ue(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(Pe(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function qe(t){var e=Le(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Ve(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ye(t);return Le.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=Ve(t);n.bbox=t,e.push(n)}):L(t,function(t){t.bbox=t.bbox?t.bbox:Ye(t),e.push(t)}),Le.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Ve(e)).bbox=e}return Le.prototype.remove.call(this,t)},e.clear=function(){return Le.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Le.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Le.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Le.prototype.all.call(this)}},e.toJSON=function(){return Le.prototype.toJSON.call(this)},e.fromJSON=function(t){return Le.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ye(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ve(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function Ye(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Xe(t){if(!t)throw new Error("geojson is required");var e=[];return A(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=V(r);break;case"LineString":n=[V(r)]}n.forEach(function(n){var r=function(t,e){var n=[];return t.reduce(function(t,r){var i=a([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n}(n,t.properties);r.forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),c(e)}function We(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=He(t,n);return o&&i.push(o),c(i)}var s=qe();return s.load(Xe(n)),L(Xe(t),function(t){L(s.search(t),function(e){var n=He(t,e);if(n){var o=V(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),c(i)}function He(t,e){var n=V(t),i=V(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],c=i[0][0],l=i[0][1],h=i[1][0],p=i[1][1],f=(p-l)*(a-o)-(h-c)*(u-s),g=(h-c)*(s-l)-(p-l)*(o-c),d=(a-o)*(s-l)-(u-s)*(o-c);if(0===f)return null;var m=g/f,y=d/f;return m>=0&&m<=1&&y>=0&&y<=1?r([o+m*(a-o),s+m*(u-s)]):null}function $e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),s=0;return A(t,function(t){for(var i=V(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=At(e,c,n);var l=r(i[u+1]);l.properties.dist=At(e,l,n);var h=At(c,l,n),p=Math.max(c.properties.dist,l.properties.dist),f=ue(c,l),g=se(e,p,f+90,n),d=se(e,p,f-90,n),m=We(a([g.geometry.coordinates,d.geometry.coordinates]),a([c.geometry.coordinates,l.geometry.coordinates])),y=null;m.features.length>0&&((y=m.features[0]).properties.dist=At(e,y,n),y.properties.location=s+At(c,y,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=s),l.properties.dist<o.properties.dist&&((o=l).properties.index=u+1,o.properties.location=s+h),y&&y.properties.dist<o.properties.dist&&((o=y).properties.index=u),s+=h}}),o}function Ke(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i,r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(i=r?Ze(U(e),U(t)):Ze(U(t),U(e)))>180?-(360-i):i}function Ze(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(i,o))+360)%360}function Je(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=U(t),o=U(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,w(function(t,e,n){var r=n=void 0===n?wo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+c*c*a*a)*r}(i,o),"meters",r)}function Qe(t,e){return en(t,"mercator",e)}function tn(t,e){return en(t,"wgs84",e)}function en(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&b(t[0])?t="mercator"===e?nn(t):rn(t):(!0!==r&&(t=Ft(t)),I(t,function(t){var n="mercator"===e?nn(t):rn(t);t[0]=n[0],t[1]=n[1]})),t}function nn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function rn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function on(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):W(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):W(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return F(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],a=function(t,e,n,i){var o=i.mercator,s=!0!==o?At(e,t,i):sn(e,t,i),a=v(!0!==o?ue(e,t):Ke(e,t)),u=v(!0!==o?ue(e,n):Ke(e,n)),c=Math.abs(a-u);if(c>90)return s;var l=(u+180)%360,h=v(!0!==o?ue(n,t):Ke(n,t)),p=Math.abs(h-l);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?At(t,n,i):sn(t,n,i):!0!==o?s*Math.sin(x(c)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var s=r(n),a=Qe([t[0]+o,t[1]]),u=Qe([e[0]+o,e[1]]),c=Qe([n[0]+o,n[1]]),l=tn(function(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1],a=n[0],u=n[1],c=o-r,l=s-i,h=((a-r)*c+(u-i)*l)/(c*c+l*l);return[r+h*c,i+h*l]}(a,u,c));return 0!==o&&(l[0]-=o),Je(s,l,i)}(e,n,t,i)}(s,e,n,i);o>a&&(o=a)}),o}function sn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=Qe([t[0]+i,t[1]]),s=Qe([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return w(Math.sqrt(u),"meters",r)}function an(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=ce(n),o=!1,s=0;!o&&s<n.features.length;){var a,u=n.features[s].geometry,l=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(a=0;!h&&a<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[a][0]&&i.geometry.coordinates[1]===u.coordinates[a][1]&&(o=!0,h=!0),a++}else if("LineString"===u.type)for(a=0;!l&&a<u.coordinates.length-1;)un(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(l=!0,o=!0),a++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){l=!1,a=0;for(var f=u.coordinates[p];!l&&a<f.length-1;)un(i.geometry.coordinates[0],i.geometry.coordinates[1],f[a][0],f[a][1],f[a+1][0],f[a+1][1])&&(l=!0,o=!0),a++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Pt(i,u)&&(o=!0);s++}if(o)return i;var g=c([]);for(s=0;s<n.features.length;s++)g.features=g.features.concat(he(n.features[s]).features);return r(Te(i,g).geometry.coordinates)}function un(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function cn(t){return D(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return ln(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=ln(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}function ln(t){var e=0;if(t&&t.length>0){e+=Math.abs(hn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(hn(t[n]))}return e}function hn(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(pn(t[o][0])-pn(e[0]))*Math.sin(pn(n[1]));a=a*hs*hs/2}return a}function pn(t){return t*Math.PI/180}function fn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return k(t,function(t,n){var r=n.geometry.coordinates;return t+At(r[0],r[1],e)},0)}function dn(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,u,c,l=0,h=0;h<i.length&&!(e>=l&&h===i.length-1);h++){if(l>e&&0===o.length){if(!(s=e-l))return o.push(i[h]),a(o);u=ue(i[h],i[h-1])-180,c=se(i[h],s,u,r),o.push(c.geometry.coordinates)}if(l>=n)return(s=n-l)?(u=ue(i[h],i[h-1])-180,c=se(i[h],s,u,r),o.push(c.geometry.coordinates),a(o)):(o.push(i[h]),a(o));if(l>=e&&o.push(i[h]),h===i.length-1)return a(o);l+=At(i[h],i[h+1],r)}return a(i[i.length-1])}function gn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!C(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=U(t),o=V(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],c=e[1],l=n[0]-s,h=n[1]-a,p=u-s,f=c-a;return l*f-h*p==0&&(r?"start"===r?Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<=u:u<=i&&i<s:f>0?a<o&&o<=c:c<=o&&o<a:"end"===r?Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<u:u<i&&i<=s:f>0?a<=o&&o<c:c<o&&o<=a:"both"===r?Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<u:u<i&&i<s:f>0?a<o&&o<c:c<o&&o<a:void 0:Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<=u:u<=i&&i<=s:f>0?a<=o&&o<=c:c<=o&&o<=a)}(o[s],o[s+1],i,a))return!0}return!1}function mn(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(vn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return gn(i,o,{ignoreEndVertices:!0});case"Polygon":return Pt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)vn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!gn(t.coordinates[r],e))return!1;n||(n=gn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Pt(t.coordinates[1],e);if(!i){n=!1;break}i=Pt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!gn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n=z(e),r=z(t);if(!yn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Pt(t.coordinates[o],e))return!1;if(i||(i=Pt(t.coordinates[o],e,{ignoreBoundary:!0})),!i){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);i=Pt(s,e,{ignoreBoundary:!0})}}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=z(t);if(!yn(z(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Pt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function yn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function vn(t,e){return t[0]===e[0]&&t[1]===e[1]}function _n(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],h=t[3],p=e/At([a,u],[l,u],n)*(l-a),f=e/At([a,u],[a,h],n)*(h-u),g=l-a,d=h-u,m=Math.floor(g/p),y=(d-Math.floor(d/f)*f)/2,v=a+(g-m*p)/2;v<=l;){for(var _=u+y;_<=h;){var x=r([v,_],o);i?mn(x,i)&&s.push(x):s.push(x),_+=f}v+=p}return c(s)}function bn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return I(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function xn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!xn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function wn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function En(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!En(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Cn(t,e){var n=[],r=qe();return A(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Sn(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),L(On(o,e),function(t){n.push(t),r.insert(t)})}}else(n=On(t,e).features).forEach(function(t){t.bbox||(t.bbox=oe(z(t)))}),r.load(c(n))}),c(n)}function On(t,e){var n=[],r=V(t)[0],i=V(t)[t.geometry.coordinates.length-1];if(In(r,U(e))||In(i,U(e)))return c([t]);var o=qe(),s=Xe(t);o.load(s);var u=o.search(e);if(!u.features.length)return c([t]);var l=Sn(e,u),h=M(s,function(t,r,i){var o=V(r)[1],s=U(e);return i===l.id?(t.push(s),n.push(a(t)),In(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return h.length>1&&n.push(a(h)),c(n)}function Sn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return L(e,function(e){var i=$e(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function In(t,e){return t[0]===e[0]&&t[1]===e[1]}function Tn(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Pn(n),c=Pn(r),l=t.properties;if(u===c)return a(ae(t,e,i).geometry.coordinates[0],l);for(var h=u,p=u<c?c:c+360,f=h,g=[],d=0;f<p;)g.push(se(t,e,f,s).geometry.coordinates),f=h+360*++d/o;return f>p&&g.push(se(t,e,p,s).geometry.coordinates),a(g,l)}function Pn(t){var e=t%360;return e<0&&(e+=360),e}function Rn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=Z(t),i=V(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Ln(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Ln(t,n))}),c(o);default:throw new Error("geom "+r+" not supported")}}function Ln(t,e){return t.length>1?l(t,e):a(t[0],e)}function Mn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,Z(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(V(Nn(t,{},r,i)))}),p(o,n)}return Nn(t,n,r,i)}function Nn(t,e,n,r){e=e||t.properties||{};var i=V(t),s=Z(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=jn(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach(function(t){if(n&&(t=jn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(z(a(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function jn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Dn(t,e,n){var r,i,o,s,a,u=t.length,c=Fn(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],s=a=Fn(o=t[r],e);;){if(!(c|s)){l.push(i),s!==a?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&s)break;c?c=Fn(i=An(i,o,c,e),e):s=Fn(o=An(i,o,s,e),e)}c=a}return l.length&&n.push(l),n}function An(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Fn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function kn(t,e){for(var n=[],r=0;r<t.length;r++){var i=xs.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function Gn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Bn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(zn(t)||zn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Gn(t))return!!Gn(e)&&(t=ws.call(t),e=ws.call(e),Bn(t,e,n));if(Un(t)){if(!Un(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;r>=0;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!Bn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function zn(t){return null==t}function Un(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function qn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var s,r=n.tolerance||0,i=[],o=qe();return o.load(Xe(t)),F(e,function(t){var e=!1;L(o.search(t),function(n){if(!1===e){var i=V(t).sort(),o=V(n).sort();Bn(i,o)?(e=!0,s=s?tr(s,t):t):(0===r?gn(i[0],n)&&gn(i[1],n):$e(n,i[0]).properties.dist<=r&&$e(n,i[1]).properties.dist<=r)?(e=!0,s=s?tr(s,t):t):(0===r?gn(o[0],t)&&gn(o[1],t):$e(t,o[0]).properties.dist<=r&&$e(t,o[1]).properties.dist<=r)&&(s=s?tr(s,n):n)}}),!1===e&&s&&(i.push(s),s=void 0)}),s&&i.push(s),c(i)}function tr(t,e){var n=V(e),r=V(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Bn(n[0],i)?s.unshift(n[1]):Bn(n[0],o)?s.push(n[1]):Bn(n[1],i)?s.unshift(n[0]):Bn(n[1],o)&&s.push(n[0]),t}function Vn(t){var e=t%360;return e<0&&(e+=360),e}function Yn(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=w(e,o,"meters"),u=U(t),c=function(t,e,n,r){r=void 0===r?wo:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(l)>1e-11?u/l:Math.cos(s),p=i*Math.sin(a)/h;return[(180*(o+p)/Math.PI+540)%360-180,180*c/Math.PI]}(u,a,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,s)}function Xn(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Wn(a,u,e),n<=0&&r>0?function(t,e,n){return Wn(t,e,n)<0}(e,a,i)||(i=a):n>0&&r<=0&&(function(t,e,n){return Wn(t,e,n)>0}(e,a,o)||(o=a)),n=r}return[i,o]}function Wn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Hn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=V(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return o>0}function $n(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return j(t,function(t){$n(t,e)}),t;case"LineString":return Kn(V(t),e),t;case"Polygon":return Zn(V(t),e),t;case"MultiLineString":return V(t).forEach(function(t){Kn(t,e)}),t;case"MultiPolygon":return V(t).forEach(function(t){Zn(t,e)}),t;case"Point":case"MultiPoint":return t}}function Kn(t,e){Hn(t)===e&&t.reverse()}function Zn(t,e){Hn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Hn(t[n])===e&&t[n].reverse()}function hr(t,e,n,r){r=r||{};for(var i=Object.keys(Es),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Es[s],Cs[s]=a}Cs.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var c=0,l=t[a+1][u],h=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(l)||isNaN(h)||isNaN(p)||isNaN(f))){c|=l<e?0:l>s?128:64,c|=h<e?0:h>s?32:16,c|=p<e?0:p>s?8:4;var g=+(c|=f<e?0:f>s?2:1),d=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var m=(l+h+p+f)/4;d=m>s?2:m<e?0:1,34===c?1===d?c=35:0===d&&(c=136):136===c?1===d?(c=35,d=4):0===d&&(c=34):17===c?1===d?(c=155,d=4):0===d&&(c=153):68===c?1===d?(c=103,d=4):0===d&&(c=102):153===c?1===d&&(c=155):102===c?1===d&&(c=103):152===c?d<2&&(c=156,d=1):137===c?d<2&&(c=139,d=1):98===c?d<2&&(c=99,d=1):38===c?d<2&&(c=39,d=1):18===c?d>0?(c=156,d=4):c=152:33===c?d>0?(c=139,d=4):c=137:72===c?d>0?(c=99,d=4):c=98:132===c&&(d>0?(c=39,d=4):c=38)}if(0!=c&&170!=c){var y,v,_,x,w,E,b,C;y=v=_=x=w=E=b=C=.5;var O=[];1===c?(_=1-Jn(e,p,f),C=1-Jn(e,l,f),O.push(la[c])):169===c?(_=Jn(s,f,p),C=Jn(s,f,l),O.push(la[c])):4===c?(E=1-Jn(e,h,p),x=Jn(e,f,p),O.push(ua[c])):166===c?(E=Jn(s,p,h),x=1-Jn(s,p,f),O.push(ua[c])):16===c?(w=Jn(e,p,h),v=Jn(e,l,h),O.push(aa[c])):154===c?(w=1-Jn(s,h,p),v=1-Jn(s,h,l),O.push(aa[c])):64===c?(b=Jn(e,f,l),y=1-Jn(e,h,l),O.push(pa[c])):106===c?(b=1-Jn(s,l,f),y=Jn(s,l,h),O.push(pa[c])):168===c?(x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),O.push(ca[c]),O.push(la[c])):2===c?(x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),O.push(ca[c]),O.push(la[c])):162===c?(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),O.push(ca[c]),O.push(la[c])):8===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),O.push(aa[c]),O.push(ua[c])):138===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(aa[c]),O.push(ua[c])):32===c?(w=Jn(s,p,h),E=Jn(e,p,h),y=Jn(e,l,h),v=Jn(s,l,h),O.push(aa[c]),O.push(ua[c])):42===c?(C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h),O.push(ha[c]),O.push(pa[c])):128===c&&(C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(ha[c]),O.push(pa[c])),5===c?(E=1-Jn(e,h,p),C=1-Jn(e,l,f),O.push(ua[c])):165===c?(E=Jn(s,p,h),C=Jn(s,f,l),O.push(ua[c])):20===c?(x=Jn(e,f,p),v=Jn(e,l,h),O.push(ca[c])):150===c?(x=1-Jn(s,p,f),v=1-Jn(s,h,l),O.push(ca[c])):80===c?(w=Jn(e,p,h),b=Jn(e,f,l),O.push(aa[c])):90===c?(w=1-Jn(s,h,p),b=1-Jn(s,l,f),O.push(aa[c])):65===c?(_=1-Jn(e,p,f),y=1-Jn(e,h,l),O.push(la[c])):105===c?(_=Jn(s,f,p),y=Jn(s,l,h),O.push(la[c])):160===c?(w=Jn(s,p,h),E=Jn(e,p,h),C=Jn(e,f,l),b=Jn(s,f,l),O.push(aa[c]),O.push(ua[c])):10===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),C=1-Jn(s,l,f),b=1-Jn(e,l,f),O.push(aa[c]),O.push(ua[c])):130===c?(x=1-Jn(e,p,f),_=1-Jn(s,p,f),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(ca[c]),O.push(la[c])):40===c?(x=Jn(s,f,p),_=Jn(e,f,p),y=Jn(e,l,h),v=Jn(s,l,h),O.push(ca[c]),O.push(la[c])):101===c?(E=Jn(s,p,h),y=Jn(s,l,h),O.push(ua[c])):69===c?(E=1-Jn(e,h,p),y=1-Jn(e,h,l),O.push(ua[c])):149===c?(C=Jn(s,f,l),v=1-Jn(s,h,l),O.push(ha[c])):21===c?(C=1-Jn(e,l,f),v=Jn(e,l,h),O.push(ha[c])):86===c?(x=1-Jn(s,p,f),b=1-Jn(s,l,f),O.push(ca[c])):84===c?(x=Jn(e,f,p),b=Jn(e,f,l),O.push(ca[c])):89===c?(w=1-Jn(s,h,p),_=Jn(s,f,p),O.push(la[c])):81===c?(w=Jn(e,p,h),_=1-Jn(e,p,f),O.push(la[c])):96===c?(w=Jn(s,p,h),E=Jn(e,p,h),b=Jn(e,f,l),y=Jn(s,l,h),O.push(aa[c]),O.push(ua[c])):74===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),b=1-Jn(s,l,f),y=1-Jn(e,h,l),O.push(aa[c]),O.push(ua[c])):24===c?(w=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),v=Jn(e,l,h),O.push(aa[c]),O.push(la[c])):146===c?(w=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),v=1-Jn(s,h,l),O.push(aa[c]),O.push(la[c])):6===c?(E=1-Jn(e,h,p),x=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),O.push(ua[c]),O.push(ca[c])):164===c?(E=Jn(s,p,h),x=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),O.push(ua[c]),O.push(ca[c])):129===c?(_=1-Jn(e,p,f),C=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(la[c]),O.push(ha[c])):41===c?(_=Jn(s,f,p),C=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h),O.push(la[c]),O.push(ha[c])):66===c?(x=1-Jn(e,p,f),_=1-Jn(s,p,f),b=1-Jn(s,l,f),y=1-Jn(e,h,l),O.push(ca[c]),O.push(la[c])):104===c?(x=Jn(s,f,p),_=Jn(e,f,p),b=Jn(e,f,l),y=Jn(s,l,h),O.push(la[c]),O.push(fa[c])):144===c?(w=Jn(e,p,h),C=Jn(e,f,l),b=Jn(s,f,l),v=1-Jn(s,h,l),O.push(aa[c]),O.push(pa[c])):26===c?(w=1-Jn(s,h,p),C=1-Jn(s,l,f),b=1-Jn(e,l,f),v=Jn(e,l,h),O.push(aa[c]),O.push(pa[c])):36===c?(E=Jn(s,p,h),x=Jn(e,f,p),y=Jn(e,l,h),v=Jn(s,l,h),O.push(ua[c]),O.push(ca[c])):134===c?(E=1-Jn(e,h,p),x=1-Jn(s,p,f),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(ua[c]),O.push(ca[c])):9===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),_=Jn(s,f,p),C=1-Jn(e,l,f),O.push(aa[c]),O.push(ua[c])):161===c?(w=Jn(s,p,h),E=Jn(e,p,h),_=1-Jn(e,p,f),C=Jn(s,f,l),O.push(aa[c]),O.push(ua[c])):37===c?(E=Jn(s,p,h),C=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h),O.push(ua[c]),O.push(ha[c])):133===c?(E=1-Jn(e,h,p),C=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l),O.push(ua[c]),O.push(ha[c])):148===c?(x=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),v=1-Jn(s,h,l),O.push(ca[c]),O.push(pa[c])):22===c?(x=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),v=Jn(e,l,h),O.push(ca[c]),O.push(pa[c])):82===c?(w=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),b=1-Jn(s,l,f),O.push(aa[c]),O.push(la[c])):88===c?(w=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),b=Jn(e,f,l),O.push(aa[c]),O.push(la[c])):73===c?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),_=Jn(s,f,p),y=1-Jn(e,h,l),O.push(aa[c]),O.push(ua[c])):97===c?(w=Jn(s,p,h),E=Jn(e,p,h),_=1-Jn(e,p,f),y=Jn(s,l,h),O.push(aa[c]),O.push(ua[c])):145===c?(w=Jn(e,p,h),_=1-Jn(e,p,f),C=Jn(s,f,l),v=1-Jn(s,h,l),O.push(aa[c]),O.push(ha[c])):25===c?(w=1-Jn(s,h,p),_=Jn(s,f,p),C=1-Jn(e,l,f),v=Jn(e,l,h),O.push(aa[c]),O.push(ha[c])):70===c?(E=1-Jn(e,h,p),x=1-Jn(s,p,f),b=1-Jn(s,l,f),y=1-Jn(e,h,l),O.push(ua[c]),O.push(ca[c])):100===c?(E=Jn(s,p,h),x=Jn(e,f,p),b=Jn(e,f,l),y=Jn(s,l,h),O.push(ua[c]),O.push(ca[c])):34===c?(0===d?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)):(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)),O.push(aa[c]),O.push(ua[c]),O.push(ha[c]),O.push(pa[c])):35===c?(4===d?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)):(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)),O.push(aa[c]),O.push(ua[c]),O.push(la[c]),O.push(pa[c])):136===c?(0===d?(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)):(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)),O.push(aa[c]),O.push(ua[c]),O.push(ha[c]),O.push(pa[c])):153===c?(0===d?(w=Jn(e,p,h),_=1-Jn(e,p,f),C=1-Jn(e,l,f),v=Jn(e,l,h)):(w=1-Jn(s,h,p),_=Jn(s,f,p),C=Jn(s,f,l),v=1-Jn(s,h,l)),O.push(aa[c]),O.push(la[c])):102===c?(0===d?(E=1-Jn(e,h,p),x=Jn(e,f,p),b=Jn(e,f,l),y=1-Jn(e,h,l)):(E=Jn(s,p,h),x=1-Jn(s,p,f),b=1-Jn(s,l,f),y=Jn(s,l,h)),O.push(ua[c]),O.push(pa[c])):155===c?(4===d?(w=Jn(e,p,h),_=1-Jn(e,p,f),C=1-Jn(e,l,f),v=Jn(e,l,h)):(w=1-Jn(s,h,p),_=Jn(s,f,p),C=Jn(s,f,l),v=1-Jn(s,h,l)),O.push(aa[c]),O.push(ha[c])):103===c?(4===d?(E=1-Jn(e,h,p),x=Jn(e,f,p),b=Jn(e,f,l),y=1-Jn(e,h,l)):(E=Jn(s,p,h),x=1-Jn(s,p,f),b=1-Jn(s,l,f),y=Jn(s,l,h)),O.push(ua[c]),O.push(ca[c])):152===c?(0===d?(w=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),v=Jn(e,l,h)):(w=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),v=1-Jn(s,h,l)),O.push(aa[c]),O.push(ca[c]),O.push(la[c])):156===c?(4===d?(w=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),v=Jn(e,l,h)):(w=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),v=1-Jn(s,h,l)),O.push(aa[c]),O.push(la[c]),O.push(pa[c])):137===c?(0===d?(w=Jn(s,p,h),E=Jn(e,p,h),_=1-Jn(e,p,f),C=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)):(w=1-Jn(e,h,p),E=1-Jn(s,h,p),_=Jn(s,f,p),C=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)),O.push(aa[c]),O.push(ua[c]),O.push(la[c])):139===c?(4===d?(w=Jn(s,p,h),E=Jn(e,p,h),_=1-Jn(e,p,f),C=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)):(w=1-Jn(e,h,p),E=1-Jn(s,h,p),_=Jn(s,f,p),C=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)),O.push(aa[c]),O.push(ua[c]),O.push(ha[c])):98===c?(0===d?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),b=Jn(e,f,l),y=1-Jn(e,h,l)):(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),b=1-Jn(s,l,f),y=Jn(s,l,h)),O.push(aa[c]),O.push(ua[c]),O.push(pa[c])):99===c?(4===d?(w=1-Jn(e,h,p),E=1-Jn(s,h,p),x=Jn(s,f,p),_=Jn(e,f,p),b=Jn(e,f,l),y=1-Jn(e,h,l)):(w=Jn(s,p,h),E=Jn(e,p,h),x=1-Jn(e,p,f),_=1-Jn(s,p,f),b=1-Jn(s,l,f),y=Jn(s,l,h)),O.push(aa[c]),O.push(ua[c]),O.push(la[c])):38===c?(0===d?(E=1-Jn(e,h,p),x=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)):(E=Jn(s,p,h),x=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)),O.push(ua[c]),O.push(ha[c]),O.push(pa[c])):39===c?(4===d?(E=1-Jn(e,h,p),x=Jn(e,f,p),C=Jn(e,f,l),b=Jn(s,f,l),y=1-Jn(s,h,l),v=1-Jn(e,h,l)):(E=Jn(s,p,h),x=1-Jn(s,p,f),C=1-Jn(s,l,f),b=1-Jn(e,l,f),y=Jn(e,l,h),v=Jn(s,l,h)),O.push(ua[c]),O.push(ca[c]),O.push(pa[c])):85===c&&(w=1,E=0,x=1,_=0,C=0,b=1,y=0,v=1),(y<0||y>1||v<0||v>1||w<0||w>1||x<0||x>1||C<0||C>1||b<0||b>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+g+" "+l+","+h+","+p+","+f+" "+d+" "+y+" "+v+" "+w+" "+E+" "+x+" "+_+" "+C+" "+b),o.cells[a][u]={cval:c,cval_real:g,flipped:d,topleft:y,topright:v,righttop:w,rightbottom:E,bottomright:x,bottomleft:_,leftbottom:C,lefttop:b,edges:O}}}}}return o}(t,e,n);return Cs.polygons?(Cs.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=ga[t.cval](t);"object"==typeof o&&Qn(o)?"object"==typeof o[0]&&Qn(o[0])?"object"==typeof o[0][0]&&Qn(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(c)):(Cs.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=t.cells[o][s],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Ss?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Is?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Is?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Ts?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Ss?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Is?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Is?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Ts?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Is?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Ts?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Ts?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Os?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Is?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Ts?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Ts?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Os?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Is?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Os?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Ts?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Os?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Os?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Ss?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Os?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Ss?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(a),c=null,l=s,h=o;null!==u&&i.push([u.p[0]+l,u.p[1]+h]);do{if(null===(c=function(t,e,n,r){var i,o,s,a,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=ua[c],s=ks[c],a=Gs[c],u=Bs[c];break;default:i=aa[c],s=Ds[c],a=As[c],u=Fs[c]}break;case 1:switch(r){case 0:i=ha[c],s=Ks[c],a=Zs[c],u=Js[c];break;default:i=pa[c],s=Ws[c],a=Hs[c],u=$s[c]}break;default:switch(n){case-1:switch(r){case 0:i=fa[c],s=Ps[c],a=Rs[c],u=Ls[c];break;default:i=da[c],s=Ms[c],a=Ns[c],u=js[c]}break;case 1:switch(r){case 0:i=la[c],s=zs[c],a=Us[c],u=qs[c];break;default:i=ca[c],s=Vs[c],a=Ys[c],u=Xs[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&Ss?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&Is?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&Is?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&Ts?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&Ss?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&Is?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&Is?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&Ts?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&Is?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&Ts?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&Ts?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&Os?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&Is?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&Ts?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&Ts?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&Os?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&Is?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&Os?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&Ts?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&Os?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&Os?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&Ss?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&Os?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&Ss?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}(t.cells[h][l],u.x,u.y,u.o)))break;if(i.push([c.p[0]+l,c.p[1]+h]),l+=c.x,h+=c.y,u=c,h<0||h>=n||l<0||l>=r||void 0===t.cells[h][l]){l-=c.x,h-=c.y;var p=function(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,c=n+i,l=[],h=!1;!h;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,s=t.cells[c][u],a=s.cval_real,-1===i)if(0===o)if(a&Ts)l.push([u,c]),r=-1,i=0,o=0;else{if(!(a&Is)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(a&Ts)){if(a&Is){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+s.bottomleft,c]),r=0,i=1,o=0,h=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&Ss)){if(a&Os){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+s.topright,c+1]),r=0,i=-1,o=1,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&Os)){if(a&Ts){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+s.lefttop]),r=1,i=0,o=1,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(a&Os)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&Is)){l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(a&Is)){if(a&Ss){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(s=t.cells[c][u],a=s.cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(a&Ts)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u,c])}else{if(!(a&Os)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(a&Ss)){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(a&Is)){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(a&Os)){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(c+=i,(u+=r)===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}(t,l,h,c.x,c.y,c.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),l=p.i,h=p.j,u=p}}while(void 0!==t.cells[h][l]&&t.cells[h][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(c)),"function"==typeof Cs.successCallback&&Cs.successCallback(u),u}function Jn(t,e,n){return(t-e)/(n-e)}function Qn(t){return t.constructor.toString().indexOf("Array")>-1}function ti(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=le(t)),!1!==i&&void 0!==i||(t=Ft(t)),I(t,function(t){var n=Ke(r,t)+e,i=Je(r,t),o=V(Yn(r,i,n));t[0]=o[0],t[1]=o[1]}),t)}function ei(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ft(t)),"FeatureCollection"!==t.type||o?ni(t,e,r):(L(t,function(n,i){t.features[i]=ni(n,e,r)}),t)}function ni(t,e,n){var i="Point"===Z(t);return n=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return U(e);var n=t.bbox?t.bbox:z(t),i=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return r([s,a]);case"center":return ce(t);case void 0:case null:case"centroid":return le(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(I(t,function(t){var r=Je(n,t),i=Ke(n,t),o=V(Yn(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function ii(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function ri(t,e){return t[0]*e[1]-e[0]*t[1]}function oi(t,e,n){var r=[],i=y(e,n),o=V(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,s=t[1]+n*(t[0]-e[0])/r,a=e[1]+n*(t[0]-e[0])/r;return[[i,s],[o,a]]}(t,o[e+1],i);if(r.push(n),e>0){var a=r[e-1],u=function(t,e){return!function(t,e){return 0===ri(ii(t),ii(e))}(t,e)&&function(t,e){var n=t[0],r=ii(t),i=e[0],o=ii(e),s=ri(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(ri(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/s,r))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}}),a(s,t.properties)}function si(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function ai(t,e){return e.geometry.coordinates[0].every(function(e){return Pt(r(e),t)})}function ui(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return r*s-i*o==0&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function br(t,e){return We(e,Rn(t)).features.length>0}function ci(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function hi(t,e){return t[0]===e[0]&&t[1]===e[1]}function pi(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),gi(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function fi(t,e){return We(t,Rn(e)).features.length>0}function di(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&n&&i;)Pt(r(t.coordinates[0][s]),e)?n=!0:i=!0,s++;return i&&i}function gi(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function mi(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function yi(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function vi(t,e){return Ea(t,e,{strict:!0})}function _i(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=Z(t);if(n!==Z(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Oa({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=N(t),o=N(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":F(t,function(t){F(e,function(e){qn(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":F(t,function(t){F(e,function(e){We(t,e).features.length&&r++})})}return r>0}function bi(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function xi(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wi(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Ei(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ci(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ci(t,e,n){this.x=t,this.y=e,this.weight=n}function Oi(t){this.content=[],this.scoreFunction=t}function Si(t){return t[0]}function Ii(t){return t[1]}function Ti(){this._=null}function Pi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ri(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Li(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Mi(t){for(;t.L;)t=t.L;return t}function Ni(t,e,n,r){var i=[null,null],o=Ua.push(i)-1;return i.left=t,i.right=e,n&&Di(i,t,e,n),r&&Di(i,e,t,r),Ba[t.index].halfedges.push(o),Ba[e.index].halfedges.push(o),i}function ji(t,e,n){var r=[e,n];return r.left=t,r}function Di(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Ai(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,h=1,p=a[0]-u,f=a[1]-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*p,c+l*f]),h<1&&(t[1]=[u+h*p,c+h*f]),!0)}}}}}function Fi(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],p=c[1],f=l[0],g=l[1],d=(h+f)/2,m=(p+g)/2;if(g===p){if(d<e||d>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(a=m-(s=(h-f)/(g-p))*d,s<-1||s>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<g){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ki(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Gi(t,e){return e[+(e.left!==t.site)]}function Bi(t,e){return e[+(e.left===t.site)]}function zi(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,l=o[0]-s,h=o[1]-a,p=2*(u*h-c*l);if(!(p>=-Xa)){var f=u*u+c*c,g=l*l+h*h,d=(h*f-c*g)/p,m=(u*g-l*f)/p,y=qa.pop()||new function(){Pi(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=i,y.x=d+s,y.y=(y.cy=m+a)+Math.sqrt(d*d+m*m),t.circle=y;for(var v=null,_=za._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}za.insert(v,y),v||(ka=y)}}}}function Ui(t){var e=t.circle;e&&(e.P||(ka=e.N),za.remove(e),qa.push(e),Pi(e),t.circle=null)}function qi(t){var e=Va.pop()||new function(){Pi(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Vi(t){Ui(t),Ga.remove(t),Va.push(t),Pi(t)}function Yi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Vi(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Ya&&Math.abs(r-u.circle.cy)<Ya;)o=u.P,a.unshift(u),Vi(u),u=o;a.unshift(u),Ui(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<Ya&&Math.abs(r-c.circle.cy)<Ya;)s=c.N,a.push(c),Vi(c),c=s;a.push(c),Ui(c);var l,h=a.length;for(l=1;l<h;++l)c=a[l],u=a[l-1],Di(c.edge,u.site,c.site,i);u=a[0],(c=a[h-1]).edge=Ni(u.site,c.site,null,i),zi(u),zi(c)}function Xi(t){for(var e,n,r,i,o=t[0],s=t[1],a=Ga._;a;)if((r=Wi(a,s)-o)>Ya)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Wi(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(a,s))>Ya)){r>-Ya?(e=a.P,n=a):i>-Ya?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ba[t.index]={site:t,halfedges:[]}}(t);var u=qi(t);if(Ga.insert(e,u),e||n){if(e===n)return Ui(e),n=qi(e.site),Ga.insert(u,n),u.edge=n.edge=Ni(e.site,u.site),zi(e),void zi(n);if(n){Ui(e),Ui(n);var c=e.site,l=c[0],h=c[1],p=t[0]-l,f=t[1]-h,g=n.site,d=g[0]-l,m=g[1]-h,y=2*(p*m-f*d),v=p*p+f*f,_=d*d+m*m,x=[(m*v-f*_)/y+l,(p*_-d*v)/y+h];Di(n.edge,c,g,x),u.edge=Ni(c,t,null,x),n.edge=Ni(t,g,null,x),zi(e),zi(n)}else u.edge=Ni(e.site,u.site)}}function Wi(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var l=a-r,h=1/o-1/c,p=l/c;return h?(-p+Math.sqrt(p*p-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+a)/2}function Hi(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function $i(t,e){return e[1]-t[1]||e[0]-t[0]}function Ki(t,e){var n,r,i,o=t.sort($i).pop();for(Ua=[],Ba=new Array(t.length),Ga=new Ti,za=new Ti;;)if(i=ka,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Xi(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Yi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ba.length;i<o;++i)if((t=Ba[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ki(t,Ua[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=Ua.length;o--;)Fi(i=Ua[o],t,e,n,r)&&Ai(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ya||Math.abs(i[0][1]-i[1][1])>Ya)||delete Ua[o]}(s,a,u,c),function(t,e,n,r){var i,o,s,a,u,c,l,h,p,f,g,d,m=Ba.length,y=!0;for(i=0;i<m;++i)if(o=Ba[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ua[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)g=(f=Bi(o,Ua[u[a]]))[0],d=f[1],h=(l=Gi(o,Ua[u[++a%c]]))[0],p=l[1],(Math.abs(g-h)>Ya||Math.abs(d-p)>Ya)&&(u.splice(a,0,Ua.push(ji(s,f,Math.abs(g-t)<Ya&&r-d>Ya?[t,Math.abs(h-t)<Ya?p:r]:Math.abs(d-r)<Ya&&n-g>Ya?[Math.abs(p-r)<Ya?h:n,r]:Math.abs(g-n)<Ya&&d-e>Ya?[n,Math.abs(h-n)<Ya?p:e]:Math.abs(d-e)<Ya&&g-t>Ya?[Math.abs(p-e)<Ya?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var v,_,x,w=1/0;for(i=0,y=null;i<m;++i)(o=Ba[i])&&(x=(v=(s=o.site)[0]-t)*v+(_=s[1]-e)*_)<w&&(w=x,y=o);if(y){var E=[t,e],b=[t,r],C=[n,r],O=[n,e];y.halfedges.push(Ua.push(ji(s=y.site,E,b))-1,Ua.push(ji(s,b,C))-1,Ua.push(ji(s,C,O))-1,Ua.push(ji(s,O,E))-1)}}for(i=0;i<m;++i)(o=Ba[i])&&(o.halfedges.length||delete Ba[i])}(s,a,u,c)}this.edges=Ua,this.cells=Ba,Ga=za=Ua=Ba=null}function li(t){return(t=t.slice()).push(t[0]),o([t])}function Zi(t,e,n,r){var i=(r=r||{}).steps||64,s=r.units||"kilometers",a=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!C(r))throw new Error("options must be an object");if(!b(i))throw new Error("steps must be a number");if(!b(a))throw new Error("angle must be a number");var l=U(t);if("degrees"===s)var h=x(a);else e=Yn(t,e,90,{units:s}),n=Yn(t,n,0,{units:s}),e=U(e)[0]-l[0],n=U(n)[1]-l[1];for(var p=[],f=0;f<i;f+=1){var g=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ji(g),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ji(g),2));if(g<-90&&g>=-270&&(d=-d),g<-180&&g>=-360&&(m=-m),"degrees"===s){var y=d*Math.cos(h)+m*Math.sin(h),v=m*Math.cos(h)-d*Math.sin(h);d=y,m=v}p.push([d+l[0],m+l[1]])}return p.push(p[0]),"degrees"===s?o([p],c):ti(o([p],c),a,{pivot:u})}function Ji(t){var e=t*Math.PI/180;return Math.tan(e)}function Qi(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return j(t,function(t,e,n){var r=n[i];if(!b(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&I(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),r([o/a,s/a],n)}function er(t,e,n,i){var o=n.properties.tolerance||.001,s=0,a=0,u=0,c=0;if(L(n,function(e){var n=e.properties.weight,r=null==n?1:n;if(!b(r=Number(r)))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*At(e,t);0===i&&(i=1);var o=r/i;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}}),c<1)throw new Error("no features to measure");var l=s/u,h=a/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(h-e[1])<o?r([l,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,h]),er([l,h],t,n,i-1))}function nr(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ir(t){if(C(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*ar(),180*ar()]}function rr(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(ir(n)));return c(i)}function or(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),b(r)||(r=10),b(i)||(i=10);for(var s=[],a=0;a<t;a++){var u=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),l.forEach(function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(ir(n))),s.push(o([u]))}return c(s)}function sr(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!b(r)||r<2)&&(r=10),b(i)||(i=1e-4),b(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var l=[ir(n)],h=0;h<r-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((l[h][1]-l[h-1][1])/(l[h][0]-l[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;l.push([l[h][0]+f*Math.cos(p),l[h][1]+f*Math.sin(p)])}s.push(a(l))}return c(s)}function ar(){return Math.random()-.5}function ur(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return L(t,function(t){fr(t.properties,e)&&n.push(t)}),c(n)}function cr(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=pr(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(c(u),s,o)}}function lr(t,e,n,r){var i=r;return cr(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function pr(t,e){var n={};return L(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function fr(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!fr(t,e[r]))return!1;return!0}return dr(t,e)}function dr(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function gr(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function mr(){}function yr(t){this.message=t||""}function vr(t){this.message=t||""}function _r(){}function xr(t){return null===t?fc:t.color}function wr(t){return null===t?null:t.parent}function Er(t,e){null!==t&&(t.color=e)}function Cr(t){return null===t?null:t.left}function Or(t){return null===t?null:t.right}function Sr(){this.root_=null,this.size_=0}function Ir(){}function Tr(){this.array_=[],arguments[0]instanceof Ju&&this.addAll(arguments[0])}function Pr(){}function Rr(t){this.message=t||""}function Lr(){this.array_=[]}function Mr(t){switch(t.type){case"Polygon":return cn(t)>1?t:null;case"MultiPolygon":var e=[];if(A(t,function(t){cn(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Nr(){this.reset()}function jr(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Dr(t){return t>1?_f:t<-1?-_f:Math.asin(t)}function Ar(){}function Fr(t,e){t&&jf.hasOwnProperty(t.type)&&jf[t.type](t,e)}function kr(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Gr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)kr(t[n],e,1);e.polygonEnd()}function Br(t){return[Sf(t[1],t[0]),Dr(t[2])]}function zr(t){var e=t[0],n=t[1],r=If(n);return[r*If(e),r*Rf(e),Rf(n)]}function Ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Vr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Xr(t){var e=Lf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wr(t,e){return[t>vf?t-xf:t<-vf?t+xf:t,e]}function Hr(t,e,n){return(t%=xf)?e||n?Af(Kr(t),Zr(e,n)):Kr(t):e||n?Zr(e,n):Wr}function $r(t){return function(e,n){return[(e+=t)>vf?e-xf:e<-vf?e+xf:e,n]}}function Kr(t){var e=$r(t);return e.invert=$r(-t),e}function Zr(t,e){function n(t,e){var n=If(e),a=If(t)*n,u=Rf(t)*n,c=Rf(e),l=c*r+a*i;return[Sf(u*o-l*s,a*r-c*i),Dr(l*o+u*s)]}var r=If(t),i=Rf(t),o=If(e),s=Rf(e);return n.invert=function(t,e){var n=If(e),a=If(t)*n,u=Rf(t)*n,c=Rf(e),l=c*o-u*s;return[Sf(u*o+c*s,a*r+l*i),Dr(l*r-a*i)]},n}function Jr(t,e){(e=zr(e))[0]-=t,Xr(e);var n=function(t){return t>1?0:t<-1?vf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+xf-yf)%xf}function Qr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function to(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function eo(t){return t.length>1}function no(t,e){return((t=t.x)[0]<0?t[1]-_f-yf:_f-t[1])-((e=e.x)[0]<0?e[1]-_f-yf:_f-e[1])}function io(t){return function(e){var n=new ro;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ro(){}function oo(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Df(n,t.stream(Jf));var s=Jf.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}function so(t){return function(t){function e(t){return[(t=c(t[0]*Ef,t[1]*Ef))[0]*d+s,a-t[1]*d]}function n(t,e){return[(t=o(t,e))[0]*d+s,a-t[1]*d]}function r(){c=Af(u=Hr(x,w,E),o);var t=o(v,_);return s=m-t[0]*d,a=y+t[1]*d,i()}function i(){return f=g=null,e}var o,s,a,u,c,l,h,p,f,g,d=150,m=480,y=250,v=0,_=0,x=0,w=0,E=0,b=null,C=ed,O=null,S=Wf,I=.5,T=od(n,I);return e.stream=function(t){return f&&g===t?f:f=sd(C(u,T(S(g=t))))},e.clipAngle=function(t){return arguments.length?(C=+t?nd(b=t*Ef,6*Ef):(b=null,ed),i()):b*wf},e.clipExtent=function(t){return arguments.length?(S=null==t?(O=l=h=p=null,Wf):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var l=0,h=0;if(null==i||(l=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+a+4)%4)!==h);else c.point(o[0],o[1])}function s(r,i){return Cf(r[0]-t)<yf?i>0?0:3:Cf(r[0]-n)<yf?i>0?2:1:Cf(r[1]-e)<yf?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&w.point(t,e)}function c(o,s){var a=i(o,s);if(h&&p.push([o,s]),_)f=o,g=s,d=a,_=!1,a&&(w.lineStart(),w.point(o,s));else if(a&&v)w.point(o,s);else{var u=[m=Math.max(Yf,Math.min(Vf,m)),y=Math.max(Yf,Math.min(Vf,y))],c=[o=Math.max(Yf,Math.min(Vf,o)),s=Math.max(Yf,Math.min(Vf,s))];Gf(u,c,t,e,n,r)?(v||(w.lineStart(),w.point(u[0],u[1])),w.point(c[0],c[1]),a||w.lineEnd(),x=!1):a&&(w.lineStart(),w.point(o,s),x=!1)}m=o,y=s,v=a}var l,h,p,f,g,d,m,y,v,_,x,w=s,E=kf(),b={point:u,lineStart:function(){b.point=c,h&&h.push(p=[]),_=!0,v=!1,m=y=NaN},lineEnd:function(){l&&(c(f,g),d&&v&&E.rejoin(),l.push(E.result())),b.point=u,v&&w.lineEnd()},polygonStart:function(){w=E,l=[],h=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,s,a=h[n],u=1,c=a.length,l=a[0],p=l[0],f=l[1];u<c;++u)o=p,s=f,p=(l=a[u])[0],f=l[1],s<=r?f>r&&(p-o)*(r-s)>(f-s)*(t-o)&&++e:f<=r&&(p-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=x&&e,i=(l=qf(l)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&zf(l,a,e,o,s),s.polygonEnd()),w=s,l=h=p=null}};return b}}(O=+t[0][0],l=+t[0][1],h=+t[1][0],p=+t[1][1]),i()):null==O?null:[[O,l],[h,p]]},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],r()):[m,y]},e.center=function(t){return arguments.length?(v=t[0]%360*Ef,_=t[1]%360*Ef,r()):[v*wf,_*wf]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Ef,w=t[1]%360*Ef,E=t.length>2?t[2]%360*Ef:0,r()):[x*wf,w*wf,E*wf]},e.precision=function(t){return arguments.length?(T=od(n,I=t*t),i()):Lf(I)},e.fitExtent=function(t,n){return oo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return oo(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-s)/d,(a-t[1])/d))&&[t[0]*wf,t[1]*wf]},r()}}(function(){return t})()}function ao(t,e){return[t,Pf(Mf((_f+e)/2))]}function uo(t,e){return[Pf(Mf((_f+e)/2)),-t]}function co(t,n,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return j(t,function(t){var e=co(t,n,r,i);e&&a.push(e)}),c(a)}var u,l=z(t),h=l[1]>50&&l[3]>50;u=h?{type:s.type,coordinates:lo(s.coordinates,po(s))}:Qe(s);var f,p=(new el).read(u),y=d(m(n,r),"meters"),g=Xh.bufferOp(p,y);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((g=(new nl).write(g)).coordinates))return(f=h?{type:g.type,coordinates:ho(g.coordinates,po(s))}:tn(g)).geometry?f:e(f,o)}function lo(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return lo(t,e)})}function ho(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return ho(t,e)})}function po(t){var e=ce(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return ad().center(e).rotate(n).scale(wo)}function fo(){for(var t=new el,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=df.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new nl).write(e),properties:arguments[0].properties}}function go(t,n){var r=$(t),i=$(n);if($t(bn(i,{precision:4})).coordinates[0].length<4)return null;if($t(bn(r,{precision:4})).coordinates[0].length<4)return null;var o=new el,s=o.read(bn(r)),a=o.read(bn(i)),u=of.intersection(s,a);return u.isEmpty()?null:e((new nl).write(u))}function mo(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var s=function(t,e){return t-e}(e,t);s>=0&&(void 0===i||s<i)&&(i=s,r=n)}),r}(t,e)}function yo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,s=n.mask;if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(Z(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],l=t[2],h=t[3],p=(u+h)/2,f=(a+l)/2,g=2*e/At([a,p],[l,p],n)*(l-a),d=2*e/At([f,u],[f,h],n)*(h-u),m=g/2,y=2*m,v=Math.sqrt(3)/2*d,_=l-a,x=h-u,w=.75*y,E=v,O=(_-y)/(y-m/2),S=Math.floor(O),I=(S*w-m/2-_)/2-m/2+w/2,T=Math.floor((x-v)/v),P=(x-T*v)/2,R=T*v-x>v/2;R&&(P-=v/4);for(var L=[],M=[],N=0;N<6;N++){var j=2*Math.PI/6*N;L.push(Math.cos(j)),M.push(Math.sin(j))}for(var D=[],A=0;A<=S;A++)for(var q=0;q<=T;q++){var F=A%2==1;if(!(0===q&&F||0===q&&R)){var k=A*w+a-I,G=q*E+u+P;if(F&&(G-=v/2),!0===i)(function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*s[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*s[(u+1)%6]]),c.push(t),a.push(o([c],r))}return a})([k,G],g/2,d/2,r,L,M).forEach(function(t){s?go(s,t)&&D.push(t):D.push(t)});else{var B=function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+n*s[u];a.push([c,l])}return a.push(a[0].slice()),o([a],r)}([k,G],g/2,d/2,r,L,M);s?go(s,B)&&D.push(B):D.push(B)}}}return c(D)}function vo(t){if(t.features.length<=1)return t;var e=function(t){var e=Mo(),n=[];return A(t,function(t,e){var r=z(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return A(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},_o),r[i]=!0;;){var o=z(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},_o),t.geojson});a.push(t),t=fo.apply(this,a)}if(0===s.length)break}n.push(t)}),c(n)}function _o(t,e){return t.index===e.index}function bo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],h=t[3],p=e/At([a,u],[l,u],n)*(l-a),f=e/At([a,u],[a,h],n)*(h-u),g=l-a,d=h-u,m=Math.floor(g/p),y=Math.floor(d/f),v=(d-y*f)/2,_=a+(g-m*p)/2,x=0;x<m;x++){for(var w=u+v,E=0;E<y;E++){var O=o([[[_,w],[_,w+f],[_+p,w+f],[_+p,w],[_,w]]],r);i?go(i,O)&&s.push(O):s.push(O),w+=f}_+=p}return c(s)}function xo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/At([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/At([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,h=t[0];h<=t[2];){for(var p=0,f=t[1];f<=t[3];){var g=null,d=null;l%2==0&&p%2==0?(g=o([[[h,f],[h,f+u],[h+a,f],[h,f]]],r),d=o([[[h,f+u],[h+a,f+u],[h+a,f],[h,f+u]]],r)):l%2==0&&p%2==1?(g=o([[[h,f],[h+a,f+u],[h+a,f],[h,f]]],r),d=o([[[h,f],[h,f+u],[h+a,f+u],[h,f]]],r)):p%2==0&&l%2==1?(g=o([[[h,f],[h,f+u],[h+a,f+u],[h,f]]],r),d=o([[[h,f],[h+a,f+u],[h+a,f],[h,f]]],r)):p%2==1&&l%2==1&&(g=o([[[h,f],[h,f+u],[h+a,f],[h,f]]],r),d=o([[[h,f+u],[h+a,f+u],[h+a,f],[h,f+u]]],r)),i?(go(i,g)&&s.push(g),go(i,d)&&s.push(d)):(s.push(g),s.push(d)),f+=u,p++}l++,h+=a}return c(s)}var wo=6371008.8,Eo={meters:wo,metres:wo,millimeters:1e3*wo,millimetres:1e3*wo,centimeters:100*wo,centimetres:100*wo,kilometers:wo/1e3,kilometres:wo/1e3,miles:wo/1609.344,nauticalmiles:wo/1852,inches:39.37*wo,yards:wo/1.0936,feet:3.28084*wo,radians:1,degrees:wo/111325},Co={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/wo,degrees:1/111325},Oo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},So=Object.freeze({earthRadius:wo,factors:Eo,unitsFactors:Co,areaFactors:Oo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:h,multiPolygon:p,geometryCollection:f,round:g,radiansToLength:d,lengthToRadians:m,lengthToDegrees:y,bearingToAzimuth:v,radiansToDegrees:_,degreesToRadians:x,convertLength:w,convertArea:E,isNumber:b,isObject:C,validateBBox:O,validateId:S,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Io=Object.freeze({coordEach:I,coordReduce:T,propEach:P,propReduce:R,featureEach:L,featureReduce:M,coordAll:N,geomEach:j,geomReduce:D,flattenEach:A,flattenReduce:q,segmentEach:F,segmentReduce:k,lineEach:G,lineReduce:B}),To=Object.freeze({getCoord:U,getCoords:V,containsNumber:Y,geojsonType:X,featureOf:W,collectionOf:H,getGeom:$,getGeomType:K,getType:Z}),Po={successCallback:null,verbose:!1},Ro={},Lo=function t(e,n,r,o,i){for(r=r||0,o=o||e.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};o>r;){if(o-r>600){var c=o-r+1,s=n-r+1,a=Math.log(c),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(c-u)/c)*(s-c/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*u/c+l)),Math.min(o,Math.floor(n+(c-s)*u/c+l)),i)}var h=e[n],f=r,p=o;for(it(e,r,n),i(e[o],h)>0&&it(e,r,o);f<p;){for(it(e,f,p),f++,p--;i(e[f],h)<0;)f++;for(;i(e[p],h)>0;)p--}0===i(e[r],h)?it(e,r,p):it(e,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}},Mo=ot;ot.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!dt(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],dt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):ft(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!dt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,dt(t,s)){if(e.leaf||ft(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=gt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!ft(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:ct,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return st(i=gt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=gt([])).leaf=!1,i.height=r;var a,u,c,l,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(mt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(mt(t,a,c=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return st(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,h;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=ht(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=c,l=u<l?u:l,a=s):c===h&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),ut(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=gt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,st(n,this.toBBox),st(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=gt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=at(t,0,r,this.toBBox),o=at(t,r,n,this.toBBox)),a=ht(i)+ht(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ct,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=at(t,0,e,s),u=at(t,n-e,n,s),c=pt(a)+pt(u);for(i=e;i<n-e;i++)o=t.children[i],ut(a,t.leaf?s(o):o),c+=pt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],ut(u,t.leaf?s(o):o),c+=pt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)ut(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var No=function(t,e,n){var r=t*e,i=jo*t,o=i-(i-t),s=t-o,a=jo*e,u=a-(a-e),c=e-u,l=s*c-(r-o*u-s*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},jo=+(Math.pow(2,27)+1),Do=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,l=0,h=Math.abs,p=t[c],f=h(p),g=e[l],d=h(g);f<d?(o=p,(c+=1)<n&&(f=h(p=t[c]))):(o=g,(l+=1)<r&&(d=h(g=e[l]))),c<n&&f<d||l>=r?(i=p,(c+=1)<n&&(f=h(p=t[c]))):(i=g,(l+=1)<r&&(d=h(g=e[l])));for(var m,y,v=i+o,_=v-i,x=o-_,w=x,E=v;c<n&&l<r;)f<d?(i=p,(c+=1)<n&&(f=h(p=t[c]))):(i=g,(l+=1)<r&&(d=h(g=e[l]))),(x=(o=w)-(_=(v=i+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m;for(;c<n;)(x=(o=w)-(_=(v=(i=p)+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m,(c+=1)<n&&(p=t[c]);for(;l<r;)(x=(o=w)-(_=(v=(i=g)+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m,(l+=1)<r&&(g=e[l]);return w&&(a[u++]=w),E&&(a[u++]=E),u||(a[u++]=0),a.length=u,a},Ao=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Fo=function(t,e){var n=t.length;if(1===n){var r=No(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;No(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){No(t[u],e,s);var c=o[1];Ao(c,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],h=o[1],p=l+h,f=h-(p-l);o[1]=p,f&&(i[a++]=f)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},ko=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,l=0,h=Math.abs,p=t[c],f=h(p),g=-e[l],d=h(g);f<d?(o=p,(c+=1)<n&&(f=h(p=t[c]))):(o=g,(l+=1)<r&&(d=h(g=-e[l]))),c<n&&f<d||l>=r?(i=p,(c+=1)<n&&(f=h(p=t[c]))):(i=g,(l+=1)<r&&(d=h(g=-e[l])));for(var m,y,v=i+o,_=v-i,x=o-_,w=x,E=v;c<n&&l<r;)f<d?(i=p,(c+=1)<n&&(f=h(p=t[c]))):(i=g,(l+=1)<r&&(d=h(g=-e[l]))),(x=(o=w)-(_=(v=i+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m;for(;c<n;)(x=(o=w)-(_=(v=(i=p)+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m,(c+=1)<n&&(p=t[c]);for(;l<r;)(x=(o=w)-(_=(v=(i=g)+o)-i))&&(a[u++]=x),w=E-((m=E+v)-(y=m-E))+(v-y),E=m,(l+=1)<r&&(g=-e[l]);return w&&(a[u++]=w),E&&(a[u++]=E),u||(a[u++]=0),a.length=u,a},Go=yt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",r(i(e(t,s))),",",n(s),t[0][s],")"].join(""));return o}function o(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var c=r(n),l=r(o),h="orientation"+t+"Exact",p=["function ",h,"(",a.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Do,No,Fo,ko)}var a=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var u=3.3306690738754716e-16*r;return s>=u||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],g=o*l,d=s*c,m=s*a,y=i*l,v=i*c,_=o*a,x=h*(g-d)+p*(m-y)+f*(v-_),w=7.771561172376103e-16*((Math.abs(g)+Math.abs(d))*Math.abs(h)+(Math.abs(m)+Math.abs(y))*Math.abs(p)+(Math.abs(v)+Math.abs(_))*Math.abs(f));return x>w||-x>w?x:u(t,e,n,r)}];!function(){for(;c.length<=5;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),r=0;r<=5;++r)t.exports[r]=c[r]}()}),Bo=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],c=o.length;c>1&&zo(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&zo(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var l=0,h=(r=0,o.length);r<h;++r)n[l++]=o[r];for(var p=s.length-2;p>0;--p)n[l++]=s[p];return n},zo=Go[3],Uo=vt,qo=vt;vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Uo.default=qo;var Vo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1];u>r!=l>r&&n<(c-a)*(r-u)/(l-u)+a&&(i=!i)}return i},Yo=Go[3],Xo=_t,Wo=_t;Xo.default=Wo;var Ho=function(t){return t},$o=function(t){if(null==t)return Ho;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}},Ko=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Zo=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},i={},o={},s=[],a=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,r,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=a,r=o[a]){delete o[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=o[l.end=n.end]=l}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=a]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s},Jo=function(t){return Bt(t,function(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),s.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Bt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var r={},s=[],a=[];return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&o.push(t)})})}),o=Zo(t,o),(n=o.length)>1)for(var s,a,u=1,c=i(o[0]);u<n;++u)(s=i(o[u]))>c&&(a=o[0],o[0]=o[u],o[u]=a,c=s);return o})}}.apply(this,arguments))},Qo=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,c=0;c<t;++c)s[c]=i;return{set:function(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c]=o;if(++h>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=r,a[c]=o,o},maybeSet:function(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c];if(++h>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=r,a[c]=o,o},get:function(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c];if(++h>=t)break;l=s[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}},ts=function(t,e){return t[0]===e[0]&&t[1]===e[1]},es=new ArrayBuffer(16),ns=new Float64Array(es),is=new Uint32Array(es),rs=function(t){ns[0]=t[0],ns[1]=t[1];var e=is[0]^is[1];return 2147483647&(e=e<<5^e>>7^is[2]^is[3])},os=function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=g[n];i===e&&o===r||i===r&&o===e||(++m,d[n]=1)}else f[n]=e,g[n]=r}}function n(t){return rs(u[t])}function r(t,e){return ts(u[t],u[e])}var i,o,s,a,u=t.coordinates,c=t.lines,l=t.rings,h=function(){for(var t=Qo(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),g=new Int32Array(u.length),d=new Int8Array(u.length),m=0;for(i=0,o=u.length;i<o;++i)p[i]=f[i]=g[i]=-1;for(i=0,o=c.length;i<o;++i){var y=c[i],v=y[0],_=y[1];for(s=h[v],a=h[++v],++m,d[s]=1;++v<=_;)e(i,s,s=a,a=h[v]);++m,d[a]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=l.length;i<o;++i){var x=l[i],w=x[0]+1,E=x[1];for(e(i,h[E-1],s=h[w-1],a=h[w]);++w<=E;)e(i,s,s=a,a=h[w])}p=f=g=null;var b,C=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*m,rs,ts);for(i=0,o=u.length;i<o;++i)d[b=h[i]]&&C.add(u[b]);return C}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],p=h[0],f=p,g=h[1],d=i.has(o[p]);++f<g;)i.has(o[f])&&(d?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,r){zt(t,e,n),zt(t,e,e+r),zt(t,e+r,n)}(o,p,g,g-f),o[g]=o[p],d=!0,f=p));return t},ss=function(t,e){function n(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var l in t)e(t[l]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Ut(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*f),Math.round((t[1]-l)*g)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,h=t.length,p=new Array(h);++a<h;)n=t[a],o=Math.round((n[0]-c)*f),s=Math.round((n[1]-l)*g),o===r&&s===i||(p[u++]=[r=o,i=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&d.hasOwnProperty(t.type)&&d[t.type](t)}var c=e[0],l=e[1],h=e[2],p=e[3],f=h-c?(n-1)/(h-c):1,g=p-l?(n-1)/(p-l):1,d={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var m in t)u(t[m]);return{scale:[1/f,1/g],translate:[c,l]}}(t,o,e),a=function(t){function e(t){var e,n,r,i,o,s,a,u;if(r=f.get(e=c[t[0]]))for(a=0,u=r.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!ts(c[n],c[r]))return!1;return!0}(i=r[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=c[t[1]]))for(a=0,u=o.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!ts(c[n],c[o]))return!1;return!0}(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),g.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var s=i(t),a=i(e),u=0;u<o;++u)if(!ts(c[n+(u+s)%o],c[r+(u+a)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],s=e[1],a=o-n;if(a!==s-r)return!1;for(var u=i(t),l=a-i(e),h=0;h<a;++h)if(!ts(c[n+(h+u)%a],c[s-(h+l)%a]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var s=c[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var o,s,a,u,c=t.coordinates,l=t.lines,h=t.rings,p=l.length+h.length;for(delete t.lines,delete t.rings,a=0,u=l.length;a<u;++a)for(o=l[a];o=o.next;)++p;for(a=0,u=h.length;a<u;++a)for(s=h[a];s=s.next;)++p;var f=Qo(2*p*1.4,rs,ts),g=t.arcs=[];for(a=0,u=l.length;a<u;++a){o=l[a];do{e(o)}while(o=o.next)}for(a=0,u=h.length;a<u;++a)if((s=h[a]).next)do{e(s)}while(s=s.next);else!function(t){var e,o,s,a,u;if(o=f.get(e=c[t[0]]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}if(o=f.get(e=c[t[0]+i(t)]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}o?o.push(t):f.set(e,[t]),g.push(t)}(s);return t}(os(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,c=Qo(1.4*a.arcs.length,Yt,Xt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,c=o[0],l=c[0],h=c[1];++s<u;)r=(c=o[s])[0],i=c[1],r===l&&i===h||(o[a++]=[r-l,i-h],l=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a},as=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};as.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},as.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},as.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var us=pe,cs=pe;pe.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Se(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Se(t,c,l,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,g=r[a+2]*n;h+=Math.abs((t[p]-t[g])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[g+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},pe.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},us.default=cs,Le.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Be(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Be(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Ge(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Be(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,Be(t,s)){if(e.leaf||Ge(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ze([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Ge(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:De,compareMinY:Ae,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Me(i=ze(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=ze([])).leaf=!1,i.height=r;var a,u,c,l,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Ue(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Ue(t,a,c=Math.min(a+p-1,n),h,this.compareMinY),u=a;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return Me(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,h;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=Fe(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<h?(h=c,l=u<l?u:l,a=s):c===h&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),je(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=ze(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Me(n,this.toBBox),Me(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Me(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Ne(t,0,r,this.toBBox),o=Ne(t,r,n,this.toBBox)),a=Fe(i)+Fe(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:De,i=t.leaf?this.compareMinY:Ae;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Ne(t,0,e,s),u=Ne(t,n-e,n,s),c=ke(a)+ke(u);for(i=e;i<n-e;i++)o=t.children[i],je(a,t.leaf?s(o):o),c+=ke(a);for(i=n-e-1;i>=e;i--)o=t.children[i],je(u,t.leaf?s(o):o),c+=ke(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)je(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Me(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ls=Object.freeze({toMercator:Qe,toWgs84:tn}),hs=6378137,ps=function(t){function e(){for(var t=[],e=0;e<g.features.length;e++)-1==g.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<g.features.length;r++)t[e]!=r&&Pt(g.features[t[e]].geometry.coordinates[0][0],g.features[r],{ignoreBoundary:!0})&&cn(g.features[r])<1/0&&(n=r);g.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<g.features.length;t++)if(-1==g.features[t].properties.parent){var e=g.features[t].properties.winding;g.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<g.features.length;n++)if(g.features[n].properties.parent==t){var i=e+g.features[n].properties.winding;g.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];En(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=s.length,h=function(t,e,n){function r(t,n,r,i){var c,g,u=o[t][n],l=o[t][n+1],h=o[r][i],f=o[r][i+1],p=function(t,e,n,r){if(xn(t,n)||xn(t,r)||xn(e,n)||xn(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],c=n[1],l=r[0],h=r[1],p=(i-s)*(c-h)-(o-a)*(u-l);return 0===p?null:[((i*a-o*s)*(u-l)-(i-s)*(u*h-c*l))/p,((i*a-o*s)*(c-h)-(o-a)*(u*h-c*l))/p]}(u,l,h,f);if(null!==p&&(c=l[0]!==u[0]?(p[0]-u[0])/(l[0]-u[0]):(p[1]-u[1])/(l[1]-u[1]),g=f[0]!==h[0]?(p[0]-h[0])/(f[0]-h[0]):(p[1]-h[1])/(f[1]-h[1]),!(c>=1||c<=0||g>=1||g<=0))){var d=p,m=!a[d];m&&(a[d]=!0),e?s.push(e(p,t,n,u,l,c,r,i,h,f,g,m)):s.push(p)}}function i(t,e){var n,r,i,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:n,minY:i,maxX:r,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var h=Mo();h.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)h.search(i(p,f)).forEach(function(t){var e=t.ring,n=t.edge;r(p,f,e,n)});else for(var g=0;g<o.length;g++)for(var d=0;d<o[g].length-1;d++)r(p,f,g,d);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s}(t,function(t,e,n,r,i,o,s,a,u,c,l,h){return[t,e,n,r,i,o,s,a,u,c,l,h]}),p=h.length;if(0==p){var f=[];for(a=0;a<i;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(wn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[a])}));var g=c(f);return e(),n(),g}var d=[],m=[];for(a=0;a<i;a++){d.push([]);for(var y=0;y<t.geometry.coordinates[a].length-1;y++)d[a].push([new fs(t.geometry.coordinates[a][(y+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,y],[a,(y+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),m.push(new ds(t.geometry.coordinates[a][y],[a,(y-1).modulo(t.geometry.coordinates[a].length-1)],[a,y],void 0,void 0,!1,!0))}for(a=0;a<p;a++)d[h[a][1]][h[a][2]].push(new fs(h[a][0],h[a][5],[h[a][1],h[a][2]],[h[a][6],h[a][7]],void 0)),h[a][11]&&m.push(new ds(h[a][0],[h[a][1],h[a][2]],[h[a][6],h[a][7]],void 0,void 0,!0,!0));var v=m.length;for(a=0;a<d.length;a++)for(y=0;y<d[a].length;y++)d[a][y].sort(function(t,e){return t.param<e.param?-1:1});var _=[];for(a=0;a<v;a++)_.push({minX:m[a].coord[0],minY:m[a].coord[1],maxX:m[a].coord[0],maxY:m[a].coord[1],index:a});var x=Mo();for(x.load(_),a=0;a<d.length;a++)for(y=0;y<d[a].length;y++)for(var w=0;w<d[a][y].length;w++){b=w==d[a][y].length-1?d[a][(y+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:d[a][y][w+1].coord;var E=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];d[a][y][w].nxtIsectAlongEdgeIn=E.index}for(a=0;a<d.length;a++)for(y=0;y<d[a].length;y++)for(w=0;w<d[a][y].length;w++){var b=d[a][y][w].coord,C=(E=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;C<l?m[C].nxtIsectAlongRingAndEdge2=d[a][y][w].nxtIsectAlongEdgeIn:En(m[C].ringAndEdge1,d[a][y][w].ringAndEdgeIn)?m[C].nxtIsectAlongRingAndEdge1=d[a][y][w].nxtIsectAlongEdgeIn:m[C].nxtIsectAlongRingAndEdge2=d[a][y][w].nxtIsectAlongEdgeIn}var O=[];for(a=0,y=0;y<i;y++){var S=a;for(w=0;w<t.geometry.coordinates[y].length-1;w++)m[a].coord[0]<m[S].coord[0]&&(S=a),a++;var I=m[S].nxtIsectAlongRingAndEdge2;for(w=0;w<m.length;w++)if(m[w].nxtIsectAlongRingAndEdge1==S||m[w].nxtIsectAlongRingAndEdge2==S){var T=w;break}var P=wn([m[T].coord,m[S].coord,m[I].coord],!0)?1:-1;O.push({isect:S,parent:-1,winding:P})}for(O.sort(function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1}),f=[];O.length>0;){var R=O.pop(),L=R.isect,M=R.parent,N=R.winding,j=f.length,D=[m[L].coord],A=L;if(m[L].ringAndEdge1Walkable)var q=m[L].ringAndEdge1,F=m[L].nxtIsectAlongRingAndEdge1;else q=m[L].ringAndEdge2,F=m[L].nxtIsectAlongRingAndEdge2;for(;!En(m[L].coord,m[F].coord);){D.push(m[F].coord);var k=void 0;for(a=0;a<O.length;a++)if(O[a].isect==F){k=a;break}if(null!=k&&O.splice(k,1),En(q,m[F].ringAndEdge1)){if(q=m[F].ringAndEdge2,m[F].ringAndEdge2Walkable=!1,m[F].ringAndEdge1Walkable){var G={isect:F};wn([m[A].coord,m[F].coord,m[m[F].nxtIsectAlongRingAndEdge2].coord],1==N)?(G.parent=M,G.winding=-N):(G.parent=j,G.winding=N),O.push(G)}A=F,F=m[F].nxtIsectAlongRingAndEdge2}else q=m[F].ringAndEdge1,m[F].ringAndEdge1Walkable=!1,m[F].ringAndEdge2Walkable&&(G={isect:F},wn([m[A].coord,m[F].coord,m[m[F].nxtIsectAlongRingAndEdge1].coord],1==N)?(G.parent=M,G.winding=-N):(G.parent=j,G.winding=N),O.push(G)),A=F,F=m[F].nxtIsectAlongRingAndEdge1}D.push(m[F].coord),f.push(o([D],{index:j,parent:M,winding:N,netWinding:void 0}))}return g=c(f),e(),n(),g},fs=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ds=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var gs=Math.PI/180,ms=180/Math.PI,ys=function(t,e){this.lon=t,this.lat=e,this.x=gs*t,this.y=gs*e};ys.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ys.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ys(e,t)};var vs=function(){this.coords=[],this.length=0};vs.prototype.move_to=function(t){this.length++,this.coords.push(t)};var _s=function(t){this.properties=t||{},this.geometries=[]};_s.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},_s.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var bs=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ys(t.x,t.y),this.end=new ys(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};bs.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=ms*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[ms*Math.atan2(i,r),s]},bs.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,p=360-c,f=1;f<n.length;++f){var g=n[f-1][0],d=n[f][0],m=Math.abs(d-g);m>p&&(d>l&&g<h||g>l&&d<h)?a=!0:m>u&&(u=m)}var y=[];if(a&&u<c){var v=[];y.push(v);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>p){var w=parseFloat(n[_-1][0]),E=parseFloat(n[_-1][1]),b=parseFloat(n[_][0]),C=parseFloat(n[_][1]);if(w>-180&&w<h&&180===b&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){v.push([-180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(w>l&&w<180&&-180===b&&_+1<n.length&&n[_-1][0]>l&&n[_-1][0]<180){v.push([180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(w<h&&b>l){var O=w;w=b,b=O;var S=E;E=C,C=S}if(w>l&&b<h&&(b+=360),w<=180&&b>=180&&w<b){var I=(180-w)/(b-w),T=I*C+(1-I)*E;v.push([n[_-1][0]>l?180:-180,T]),(v=[]).push([n[_-1][0]>l?-180:180,T]),y.push(v)}else v=[],y.push(v);v.push([x,n[_][1]])}else v.push([n[_][0],n[_][1]])}}else{var P=[];y.push(P);for(var R=0;R<n.length;++R)P.push([n[R][0],n[R][1]])}for(var L=new _s(this.properties),M=0;M<y.length;++M){var N=new vs;L.geometries.push(N);for(var j=y[M],D=0;D<j.length;++D)N.move_to(j[D])}return L};var xs=Dn;Dn.polyline=Dn,Dn.polygon=function(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Fn(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Fn(a=t[s],e)&r))!==o&&n.push(An(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n};var ws=Array.prototype.slice,Es={successCallback:null,verbose:!1,polygons:!1},Cs={},Os=64,Ss=16,Is=4,Ts=1,Ps=[],Rs=[],Ls=[],Ms=[],Ns=[],js=[],Ds=[],As=[],Fs=[],ks=[],Gs=[],Bs=[],zs=[],Us=[],qs=[],Vs=[],Ys=[],Xs=[],Ws=[],Hs=[],$s=[],Ks=[],Zs=[],Js=[];Ds[85]=ks[85]=-1,As[85]=Gs[85]=0,Fs[85]=Bs[85]=1,Ws[85]=Ks[85]=1,Hs[85]=Zs[85]=0,$s[85]=Js[85]=1,Ps[85]=Ms[85]=0,Rs[85]=Ns[85]=-1,Ls[85]=qs[85]=0,Vs[85]=zs[85]=0,Ys[85]=Us[85]=1,js[85]=Xs[85]=1,Ks[1]=Ks[169]=0,Zs[1]=Zs[169]=-1,Js[1]=Js[169]=0,zs[1]=zs[169]=-1,Us[1]=Us[169]=0,qs[1]=qs[169]=0,ks[4]=ks[166]=0,Gs[4]=Gs[166]=-1,Bs[4]=Bs[166]=1,Vs[4]=Vs[166]=1,Ys[4]=Ys[166]=0,Xs[4]=Xs[166]=0,Ds[16]=Ds[154]=0,As[16]=As[154]=1,Fs[16]=Fs[154]=1,Ms[16]=Ms[154]=1,Ns[16]=Ns[154]=0,js[16]=js[154]=1,Ws[64]=Ws[106]=0,Hs[64]=Hs[106]=1,$s[64]=$s[106]=0,Ps[64]=Ps[106]=-1,Rs[64]=Rs[106]=0,Ls[64]=Ls[106]=1,Ws[2]=Ws[168]=0,Hs[2]=Hs[168]=-1,$s[2]=$s[168]=1,Ks[2]=Ks[168]=0,Zs[2]=Zs[168]=-1,Js[2]=Js[168]=0,zs[2]=zs[168]=-1,Us[2]=Us[168]=0,qs[2]=qs[168]=0,Vs[2]=Vs[168]=-1,Ys[2]=Ys[168]=0,Xs[2]=Xs[168]=1,Ds[8]=Ds[162]=0,As[8]=As[162]=-1,Fs[8]=Fs[162]=0,ks[8]=ks[162]=0,Gs[8]=Gs[162]=-1,Bs[8]=Bs[162]=1,zs[8]=zs[162]=1,Us[8]=Us[162]=0,qs[8]=qs[162]=1,Vs[8]=Vs[162]=1,Ys[8]=Ys[162]=0,Xs[8]=Xs[162]=0,Ds[32]=Ds[138]=0,As[32]=As[138]=1,Fs[32]=Fs[138]=1,ks[32]=ks[138]=0,Gs[32]=Gs[138]=1,Bs[32]=Bs[138]=0,Ps[32]=Ps[138]=1,Rs[32]=Rs[138]=0,Ls[32]=Ls[138]=0,Ms[32]=Ms[138]=1,Ns[32]=Ns[138]=0,js[32]=js[138]=1,Ks[128]=Ks[42]=0,Zs[128]=Zs[42]=1,Js[128]=Js[42]=1,Ws[128]=Ws[42]=0,Hs[128]=Hs[42]=1,$s[128]=$s[42]=0,Ps[128]=Ps[42]=-1,Rs[128]=Rs[42]=0,Ls[128]=Ls[42]=1,Ms[128]=Ms[42]=-1,Ns[128]=Ns[42]=0,js[128]=js[42]=0,ks[5]=ks[165]=-1,Gs[5]=Gs[165]=0,Bs[5]=Bs[165]=0,Ks[5]=Ks[165]=1,Zs[5]=Zs[165]=0,Js[5]=Js[165]=0,Vs[20]=Vs[150]=0,Ys[20]=Ys[150]=1,Xs[20]=Xs[150]=1,Ms[20]=Ms[150]=0,Ns[20]=Ns[150]=-1,js[20]=js[150]=1,Ds[80]=Ds[90]=-1,As[80]=As[90]=0,Fs[80]=Fs[90]=1,Ws[80]=Ws[90]=1,Hs[80]=Hs[90]=0,$s[80]=$s[90]=1,zs[65]=zs[105]=0,Us[65]=Us[105]=1,qs[65]=qs[105]=0,Ps[65]=Ps[105]=0,Rs[65]=Rs[105]=-1,Ls[65]=Ls[105]=0,Ds[160]=Ds[10]=-1,As[160]=As[10]=0,Fs[160]=Fs[10]=1,ks[160]=ks[10]=-1,Gs[160]=Gs[10]=0,Bs[160]=Bs[10]=0,Ks[160]=Ks[10]=1,Zs[160]=Zs[10]=0,Js[160]=Js[10]=0,Ws[160]=Ws[10]=1,Hs[160]=Hs[10]=0,$s[160]=$s[10]=1,Vs[130]=Vs[40]=0,Ys[130]=Ys[40]=1,Xs[130]=Xs[40]=1,zs[130]=zs[40]=0,Us[130]=Us[40]=1,qs[130]=qs[40]=0,Ps[130]=Ps[40]=0,Rs[130]=Rs[40]=-1,Ls[130]=Ls[40]=0,Ms[130]=Ms[40]=0,Ns[130]=Ns[40]=-1,js[130]=js[40]=1,ks[37]=ks[133]=0,Gs[37]=Gs[133]=1,Bs[37]=Bs[133]=1,Ks[37]=Ks[133]=0,Zs[37]=Zs[133]=1,Js[37]=Js[133]=0,Ps[37]=Ps[133]=-1,Rs[37]=Rs[133]=0,Ls[37]=Ls[133]=0,Ms[37]=Ms[133]=1,Ns[37]=Ns[133]=0,js[37]=js[133]=0,Vs[148]=Vs[22]=-1,Ys[148]=Ys[22]=0,Xs[148]=Xs[22]=0,Ks[148]=Ks[22]=0,Zs[148]=Zs[22]=-1,Js[148]=Js[22]=1,Ws[148]=Ws[22]=0,Hs[148]=Hs[22]=1,$s[148]=$s[22]=1,Ms[148]=Ms[22]=-1,Ns[148]=Ns[22]=0,js[148]=js[22]=1,Ds[82]=Ds[88]=0,As[82]=As[88]=-1,Fs[82]=Fs[88]=1,Vs[82]=Vs[88]=1,Ys[82]=Ys[88]=0,Xs[82]=Xs[88]=1,zs[82]=zs[88]=-1,Us[82]=Us[88]=0,qs[82]=qs[88]=1,Ws[82]=Ws[88]=0,Hs[82]=Hs[88]=-1,$s[82]=$s[88]=0,Ds[73]=Ds[97]=0,As[73]=As[97]=1,Fs[73]=Fs[97]=0,ks[73]=ks[97]=0,Gs[73]=Gs[97]=-1,Bs[73]=Bs[97]=0,zs[73]=zs[97]=1,Us[73]=Us[97]=0,qs[73]=qs[97]=0,Ps[73]=Ps[97]=1,Rs[73]=Rs[97]=0,Ls[73]=Ls[97]=1,Ds[145]=Ds[25]=0,As[145]=As[25]=-1,Fs[145]=Fs[25]=0,zs[145]=zs[25]=1,Us[145]=Us[25]=0,qs[145]=qs[25]=1,Ks[145]=Ks[25]=0,Zs[145]=Zs[25]=1,Js[145]=Js[25]=1,Ms[145]=Ms[25]=-1,Ns[145]=Ns[25]=0,js[145]=js[25]=0,ks[70]=ks[100]=0,Gs[70]=Gs[100]=1,Bs[70]=Bs[100]=0,Vs[70]=Vs[100]=-1,Ys[70]=Ys[100]=0,Xs[70]=Xs[100]=1,Ws[70]=Ws[100]=0,Hs[70]=Hs[100]=-1,$s[70]=$s[100]=1,Ps[70]=Ps[100]=1,Rs[70]=Rs[100]=0,Ls[70]=Ls[100]=0,ks[101]=ks[69]=0,Gs[101]=Gs[69]=1,Bs[101]=Bs[69]=0,Ps[101]=Ps[69]=1,Rs[101]=Rs[69]=0,Ls[101]=Ls[69]=0,Ks[149]=Ks[21]=0,Zs[149]=Zs[21]=1,Js[149]=Js[21]=1,Ms[149]=Ms[21]=-1,Ns[149]=Ns[21]=0,js[149]=js[21]=0,Vs[86]=Vs[84]=-1,Ys[86]=Ys[84]=0,Xs[86]=Xs[84]=1,Ws[86]=Ws[84]=0,Hs[86]=Hs[84]=-1,$s[86]=$s[84]=1,Ds[89]=Ds[81]=0,As[89]=As[81]=-1,Fs[89]=Fs[81]=0,zs[89]=zs[81]=1,Us[89]=Us[81]=0,qs[89]=qs[81]=1,Ds[96]=Ds[74]=0,As[96]=As[74]=1,Fs[96]=Fs[74]=0,ks[96]=ks[74]=-1,Gs[96]=Gs[74]=0,Bs[96]=Bs[74]=1,Ws[96]=Ws[74]=1,Hs[96]=Hs[74]=0,$s[96]=$s[74]=0,Ps[96]=Ps[74]=1,Rs[96]=Rs[74]=0,Ls[96]=Ls[74]=1,Ds[24]=Ds[146]=0,As[24]=As[146]=-1,Fs[24]=Fs[146]=1,Vs[24]=Vs[146]=1,Ys[24]=Ys[146]=0,Xs[24]=Xs[146]=1,zs[24]=zs[146]=0,Us[24]=Us[146]=1,qs[24]=qs[146]=1,Ms[24]=Ms[146]=0,Ns[24]=Ns[146]=-1,js[24]=js[146]=0,ks[6]=ks[164]=-1,Gs[6]=Gs[164]=0,Bs[6]=Bs[164]=1,Vs[6]=Vs[164]=-1,Ys[6]=Ys[164]=0,Xs[6]=Xs[164]=0,Ks[6]=Ks[164]=0,Zs[6]=Zs[164]=-1,Js[6]=Js[164]=1,Ws[6]=Ws[164]=1,Hs[6]=Hs[164]=0,$s[6]=$s[164]=0,zs[129]=zs[41]=0,Us[129]=Us[41]=1,qs[129]=qs[41]=1,Ks[129]=Ks[41]=0,Zs[129]=Zs[41]=1,Js[129]=Js[41]=0,Ps[129]=Ps[41]=-1,Rs[129]=Rs[41]=0,Ls[129]=Ls[41]=0,Ms[129]=Ms[41]=0,Ns[129]=Ns[41]=-1,js[129]=js[41]=0,Vs[66]=Vs[104]=0,Ys[66]=Ys[104]=1,Xs[66]=Xs[104]=0,zs[66]=zs[104]=-1,Us[66]=Us[104]=0,qs[66]=qs[104]=1,Ws[66]=Ws[104]=0,Hs[66]=Hs[104]=-1,$s[66]=$s[104]=0,Ps[66]=Ps[104]=0,Rs[66]=Rs[104]=-1,Ls[66]=Ls[104]=1,Ds[144]=Ds[26]=-1,As[144]=As[26]=0,Fs[144]=Fs[26]=0,Ks[144]=Ks[26]=1,Zs[144]=Zs[26]=0,Js[144]=Js[26]=1,Ws[144]=Ws[26]=0,Hs[144]=Hs[26]=1,$s[144]=$s[26]=1,Ms[144]=Ms[26]=-1,Ns[144]=Ns[26]=0,js[144]=js[26]=1,ks[36]=ks[134]=0,Gs[36]=Gs[134]=1,Bs[36]=Bs[134]=1,Vs[36]=Vs[134]=0,Ys[36]=Ys[134]=1,Xs[36]=Xs[134]=0,Ps[36]=Ps[134]=0,Rs[36]=Rs[134]=-1,Ls[36]=Ls[134]=1,Ms[36]=Ms[134]=1,Ns[36]=Ns[134]=0,js[36]=js[134]=0,Ds[9]=Ds[161]=-1,As[9]=As[161]=0,Fs[9]=Fs[161]=0,ks[9]=ks[161]=0,Gs[9]=Gs[161]=-1,Bs[9]=Bs[161]=0,zs[9]=zs[161]=1,Us[9]=Us[161]=0,qs[9]=qs[161]=0,Ks[9]=Ks[161]=1,Zs[9]=Zs[161]=0,Js[9]=Js[161]=1,Ds[136]=0,As[136]=1,Fs[136]=1,ks[136]=0,Gs[136]=1,Bs[136]=0,Vs[136]=-1,Ys[136]=0,Xs[136]=1,zs[136]=-1,Us[136]=0,qs[136]=0,Ks[136]=0,Zs[136]=-1,Js[136]=0,Ws[136]=0,Hs[136]=-1,$s[136]=1,Ps[136]=1,Rs[136]=0,Ls[136]=0,Ms[136]=1,Ns[136]=0,js[136]=1,Ds[34]=0,As[34]=-1,Fs[34]=0,ks[34]=0,Gs[34]=-1,Bs[34]=1,Vs[34]=1,Ys[34]=0,Xs[34]=0,zs[34]=1,Us[34]=0,qs[34]=1,Ks[34]=0,Zs[34]=1,Js[34]=1,Ws[34]=0,Hs[34]=1,$s[34]=0,Ps[34]=-1,Rs[34]=0,Ls[34]=1,Ms[34]=-1,Ns[34]=0,js[34]=0,Ds[35]=0,As[35]=1,Fs[35]=1,ks[35]=0,Gs[35]=-1,Bs[35]=1,Vs[35]=1,Ys[35]=0,Xs[35]=0,zs[35]=-1,Us[35]=0,qs[35]=0,Ks[35]=0,Zs[35]=-1,Js[35]=0,Ws[35]=0,Hs[35]=1,$s[35]=0,Ps[35]=-1,Rs[35]=0,Ls[35]=1,Ms[35]=1,Ns[35]=0,js[35]=1,Ds[153]=0,As[153]=1,Fs[153]=1,zs[153]=-1,Us[153]=0,qs[153]=0,Ks[153]=0,Zs[153]=-1,Js[153]=0,Ms[153]=1,Ns[153]=0,js[153]=1,ks[102]=0,Gs[102]=-1,Bs[102]=1,Vs[102]=1,Ys[102]=0,Xs[102]=0,Ws[102]=0,Hs[102]=1,$s[102]=0,Ps[102]=-1,Rs[102]=0,Ls[102]=1,Ds[155]=0,As[155]=-1,Fs[155]=0,zs[155]=1,Us[155]=0,qs[155]=1,Ks[155]=0,Zs[155]=1,Js[155]=1,Ms[155]=-1,Ns[155]=0,js[155]=0,ks[103]=0,Gs[103]=1,Bs[103]=0,Vs[103]=-1,Ys[103]=0,Xs[103]=1,Ws[103]=0,Hs[103]=-1,$s[103]=1,Ps[103]=1,Rs[103]=0,Ls[103]=0,Ds[152]=0,As[152]=1,Fs[152]=1,Vs[152]=-1,Ys[152]=0,Xs[152]=1,zs[152]=-1,Us[152]=0,qs[152]=0,Ks[152]=0,Zs[152]=-1,Js[152]=0,Ws[152]=0,Hs[152]=-1,$s[152]=1,Ms[152]=1,Ns[152]=0,js[152]=1,Ds[156]=0,As[156]=-1,Fs[156]=1,Vs[156]=1,Ys[156]=0,Xs[156]=1,zs[156]=-1,Us[156]=0,qs[156]=0,Ks[156]=0,Zs[156]=-1,Js[156]=0,Ws[156]=0,Hs[156]=1,$s[156]=1,Ms[156]=-1,Ns[156]=0,js[156]=1,Ds[137]=0,As[137]=1,Fs[137]=1,ks[137]=0,Gs[137]=1,Bs[137]=0,zs[137]=-1,Us[137]=0,qs[137]=0,Ks[137]=0,Zs[137]=-1,Js[137]=0,Ps[137]=1,Rs[137]=0,Ls[137]=0,Ms[137]=1,Ns[137]=0,js[137]=1,Ds[139]=0,As[139]=1,Fs[139]=1,ks[139]=0,Gs[139]=-1,Bs[139]=0,zs[139]=1,Us[139]=0,qs[139]=0,Ks[139]=0,Zs[139]=1,Js[139]=0,Ps[139]=-1,Rs[139]=0,Ls[139]=0,Ms[139]=1,Ns[139]=0,js[139]=1,Ds[98]=0,As[98]=-1,Fs[98]=0,ks[98]=0,Gs[98]=-1,Bs[98]=1,Vs[98]=1,Ys[98]=0,Xs[98]=0,zs[98]=1,Us[98]=0,qs[98]=1,Ws[98]=0,Hs[98]=1,$s[98]=0,Ps[98]=-1,Rs[98]=0,Ls[98]=1,Ds[99]=0,As[99]=1,Fs[99]=0,ks[99]=0,Gs[99]=-1,Bs[99]=1,Vs[99]=1,Ys[99]=0,Xs[99]=0,zs[99]=-1,Us[99]=0,qs[99]=1,Ws[99]=0,Hs[99]=-1,$s[99]=0,Ps[99]=1,Rs[99]=0,Ls[99]=1,ks[38]=0,Gs[38]=-1,Bs[38]=1,Vs[38]=1,Ys[38]=0,Xs[38]=0,Ks[38]=0,Zs[38]=1,Js[38]=1,Ws[38]=0,Hs[38]=1,$s[38]=0,Ps[38]=-1,Rs[38]=0,Ls[38]=1,Ms[38]=-1,Ns[38]=0,js[38]=0,ks[39]=0,Gs[39]=1,Bs[39]=1,Vs[39]=-1,Ys[39]=0,Xs[39]=0,Ks[39]=0,Zs[39]=-1,Js[39]=1,Ws[39]=0,Hs[39]=1,$s[39]=0,Ps[39]=-1,Rs[39]=0,Ls[39]=1,Ms[39]=1,Ns[39]=0,js[39]=0;var Qs=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ta=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ea=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},na=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},ia=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ra=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},oa=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},sa=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},aa=[],ua=[],ca=[],la=[],ha=[],pa=[],fa=[],da=[];la[1]=ha[1]=18,la[169]=ha[169]=18,ca[4]=ua[4]=12,ca[166]=ua[166]=12,aa[16]=da[16]=4,aa[154]=da[154]=4,pa[64]=fa[64]=22,pa[106]=fa[106]=22,ca[2]=pa[2]=17,la[2]=ha[2]=18,ca[168]=pa[168]=17,la[168]=ha[168]=18,aa[8]=la[8]=9,ua[8]=ca[8]=12,aa[162]=la[162]=9,ua[162]=ca[162]=12,aa[32]=da[32]=4,ua[32]=fa[32]=1,aa[138]=da[138]=4,ua[138]=fa[138]=1,ha[128]=da[128]=21,pa[128]=fa[128]=22,ha[42]=da[42]=21,pa[42]=fa[42]=22,ua[5]=ha[5]=14,ua[165]=ha[165]=14,ca[20]=da[20]=6,ca[150]=da[150]=6,aa[80]=pa[80]=11,aa[90]=pa[90]=11,la[65]=fa[65]=3,la[105]=fa[105]=3,aa[160]=pa[160]=11,ua[160]=ha[160]=14,aa[10]=pa[10]=11,ua[10]=ha[10]=14,ca[130]=da[130]=6,la[130]=fa[130]=3,ca[40]=da[40]=6,la[40]=fa[40]=3,ua[101]=fa[101]=1,ua[69]=fa[69]=1,ha[149]=da[149]=21,ha[21]=da[21]=21,ca[86]=pa[86]=17,ca[84]=pa[84]=17,aa[89]=la[89]=9,aa[81]=la[81]=9,aa[96]=fa[96]=0,ua[96]=pa[96]=15,aa[74]=fa[74]=0,ua[74]=pa[74]=15,aa[24]=ca[24]=8,la[24]=da[24]=7,aa[146]=ca[146]=8,la[146]=da[146]=7,ua[6]=pa[6]=15,ca[6]=ha[6]=16,ua[164]=pa[164]=15,ca[164]=ha[164]=16,la[129]=da[129]=7,ha[129]=fa[129]=20,la[41]=da[41]=7,ha[41]=fa[41]=20,ca[66]=fa[66]=2,la[66]=pa[66]=19,ca[104]=fa[104]=2,la[104]=pa[104]=19,aa[144]=ha[144]=10,pa[144]=da[144]=23,aa[26]=ha[26]=10,pa[26]=da[26]=23,ua[36]=da[36]=5,ca[36]=fa[36]=2,ua[134]=da[134]=5,ca[134]=fa[134]=2,aa[9]=ha[9]=10,ua[9]=la[9]=13,aa[161]=ha[161]=10,ua[161]=la[161]=13,ua[37]=da[37]=5,ha[37]=fa[37]=20,ua[133]=da[133]=5,ha[133]=fa[133]=20,ca[148]=ha[148]=16,pa[148]=da[148]=23,ca[22]=ha[22]=16,pa[22]=da[22]=23,aa[82]=ca[82]=8,la[82]=pa[82]=19,aa[88]=ca[88]=8,la[88]=pa[88]=19,aa[73]=fa[73]=0,ua[73]=la[73]=13,aa[97]=fa[97]=0,ua[97]=la[97]=13,aa[145]=la[145]=9,ha[145]=da[145]=21,aa[25]=la[25]=9,ha[25]=da[25]=21,ua[70]=fa[70]=1,ca[70]=pa[70]=17,ua[100]=fa[100]=1,ca[100]=pa[100]=17,aa[34]=la[34]=9,ua[34]=ca[34]=12,ha[34]=da[34]=21,pa[34]=fa[34]=22,aa[136]=da[136]=4,ua[136]=fa[136]=1,ca[136]=pa[136]=17,la[136]=ha[136]=18,aa[35]=da[35]=4,ua[35]=ca[35]=12,la[35]=ha[35]=18,pa[35]=fa[35]=22,aa[153]=da[153]=4,la[153]=ha[153]=18,ua[102]=ca[102]=12,pa[102]=fa[102]=22,aa[155]=la[155]=9,ha[155]=da[155]=23,ua[103]=fa[103]=1,ca[103]=pa[103]=17,aa[152]=da[152]=4,ca[152]=pa[152]=17,la[152]=ha[152]=18,aa[156]=ca[156]=8,la[156]=ha[156]=18,pa[156]=da[156]=23,aa[137]=da[137]=4,ua[137]=fa[137]=1,la[137]=ha[137]=18,aa[139]=da[139]=4,ua[139]=la[139]=13,ha[139]=fa[139]=20,aa[98]=la[98]=9,ua[98]=ca[98]=12,pa[98]=fa[98]=22,aa[99]=fa[99]=0,ua[99]=ca[99]=12,la[99]=pa[99]=19,ua[38]=ca[38]=12,ha[38]=da[38]=21,pa[38]=fa[38]=22,ua[39]=da[39]=5,ca[39]=ha[39]=16,pa[39]=fa[39]=22;var ga=[];ga[1]=ga[169]=Qs,ga[4]=ga[166]=ta,ga[16]=ga[154]=ea,ga[64]=ga[106]=na,ga[168]=ga[2]=ia,ga[162]=ga[8]=ra,ga[138]=ga[32]=oa,ga[42]=ga[128]=sa,ga[5]=ga[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ga[20]=ga[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ga[80]=ga[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ga[65]=ga[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ga[160]=ga[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ga[130]=ga[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ga[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ga[101]=ga[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ga[149]=ga[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ga[86]=ga[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ga[89]=ga[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ga[96]=ga[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[24]=ga[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ga[6]=ga[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ga[129]=ga[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ga[66]=ga[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[144]=ga[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[36]=ga[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ga[9]=ga[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ga[37]=ga[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ga[148]=ga[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[82]=ga[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ga[73]=ga[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ga[145]=ga[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ga[70]=ga[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[34]=function(t){return[sa(t),ra(t)]},ga[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ga[136]=function(t){return[oa(t),ia(t)]},ga[153]=function(t){return[ea(t),Qs(t)]},ga[102]=function(t){return[ta(t),na(t)]},ga[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ga[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[152]=function(t){return[ea(t),ia(t)]},ga[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[137]=function(t){return[oa(t),Qs(t)]},ga[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ga[98]=function(t){return[ra(t),na(t)]},ga[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[38]=function(t){return[ta(t),sa(t)]},ga[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ma=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ma.buildId=function(t){return t.join(",")},ma.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},ma.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},ma.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ma.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=si(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},ma.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ma.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ma.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var ya=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};ya.prototype.getSymetric=function(){return this.symetric||(this.symetric=new ya(this.to,this.from),this.symetric.symetric=this),this.symetric},ya.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},ya.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},ya.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},ya.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},ya.prototype.compareTo=function(t){return si(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var va=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},_a={length:{configurable:!0}};va.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},va.prototype.get=function(t){return this.edges[t]},_a.length.get=function(){return this.edges.length},va.prototype.forEach=function(t){this.edges.forEach(t)},va.prototype.map=function(t){return this.edges.map(t)},va.prototype.some=function(t){return this.edges.some(t)},va.prototype.isValid=function(){return!0},va.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=si(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},va.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},va.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},va.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=re(this.toPolygon())},va.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var s=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(s,o)&&ai(s,o)){var a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});a&&e.inside(r(a))&&(i&&!ai(n,s)||(i=e))}}),i},va.prototype.inside=function(t){return Pt(t,this.toPolygon())},Object.defineProperties(va.prototype,_a);var ba=function(){this.edges=[],this.nodes={}};ba.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new ba;return A(t,function(t){W(t,"LineString","Graph::fromGeoJson"),T(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},ba.prototype.getNode=function(t){var e=ma.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ma(t)),n},ba.prototype.addEdge=function(t,e){var n=new ya(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},ba.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},ba.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},ba.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},ba.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},ba.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},ba.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},ba.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},ba.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},ba.prototype._findEdgeRing=function(t){var e=t,n=new va;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},ba.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},ba.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var xa=yt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),wa=(xa.shim,yt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),Ea=(wa.supported,wa.unsupported,yt(function(t){function e(t){return null==t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(wa(t))return!!wa(o)&&(t=r.call(t),o=r.call(o),i(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=xa(t),l=xa(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),a=c.length-1;a>=0;a--)if(c[a]!=l[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!i(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}})),Ca=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:vi};Ca.prototype.compare=function(t,e){if(t.type!==e.type||!yi(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=mi(t),i=mi(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},Ca.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Ca.prototype.compareLine=function(t,e,n,r){if(!yi(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Ca.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Ca.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Ca.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},Ca.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Ca.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Ca.prototype.removePseudo=function(t){return t};var Oa=Ca,Sa=yt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ia=yt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ta=yt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Pa=yt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Ta;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ra=yt(function(t){t.exports&&(t.exports={DBSCAN:Sa,KMEANS:Ia,OPTICS:Pa,PriorityQueue:Ta})}),La=(Ra.DBSCAN,Ra.KMEANS,Ra.OPTICS,Ra.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i}),Ma=La,Na=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},ja=La,Da=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,c=r||1e4,l=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ma:Na,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,c=0,l=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var g=n(t[h],r[f]);g<=p&&(p=g)}a[h]=p}for(var d=0;d<i;d++)c+=a[d];for(var m=0;m<i;m++)l[m]={i:m,v:t[m],pr:a[m]/c,cs:0};l.sort(function(t,e){return t.pr-e.pr}),l[0].cs=l[0].pr;for(var y=1;y<i;y++)l[y].cs=l[y-1].cs+l[y].pr;for(var v=Math.random(),_=0;_<i-1&&l[_++].cs<v;);r.push(l[_-1].v)}return r}(t,e):n;else for(var g={};i.length<e;){var d=Math.floor(Math.random()*l);g[d]||(g[d]=!0,i.push(t[d]))}do{bi(e,0,f);for(var m=0;m<l;m++){for(var y=1/0,v=0,_=0;_<e;_++)(a=p?ja(t[m],i[_]):Math.abs(t[m]-i[_]))<=y&&(y=a,v=_);s[m]=v,f[v]++}for(var x=[],w=(o=[],0);w<e;w++)x[w]=p?bi(h,0,x[w]):0,o[w]=i[w];if(p){for(var E=0;E<e;E++)i[E]=[];for(var b=0;b<l;b++)for(var C=x[s[b]],O=t[b],S=0;S<h;S++)C[S]+=O[S];u=!0;for(var I=0;I<e;I++){for(var T=i[I],P=x[I],R=o[I],L=f[I],M=0;M<h;M++)T[M]=P[M]/L||0;if(u)for(var N=0;N<h;N++)if(R[N]!=T[N]){u=!1;break}}}else{for(var j=0;j<l;j++)x[s[j]]+=t[j];for(var D=0;D<e;D++)i[D]=x[D]/f[D]||0;u=!0;for(var A=0;A<e;A++)if(o[A]!=i[A]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:s,centroids:i}},Aa={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Aa.heuristics.manhattan,o=r.closest||!1,s=new Oi(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return wi(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var p=c[l];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),g=p.visited;(!g||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),g?s.rescoreElement(p):s.push(p))}}}return o?wi(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Ei.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Aa.cleanNode(this.nodes[t])},Ei.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Aa.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ei.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ei.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ei.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ci.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ci.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ci.prototype.isWall=function(){return 0===this.weight},Oi.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Fa=function(t){return function(){return t}};Ti.prototype={constructor:Ti,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Mi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ri(this,n),n=(t=n).U),n.C=!1,r.C=!0,Li(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Li(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ri(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Mi(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ri(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Li(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ri(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Li(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ri(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Li(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ka,Ga,Ba,za,Ua,qa=[],Va=[],Ya=1e-6,Xa=1e-12;Ki.prototype={constructor:Ki,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Gi(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a=n.site,u=-1,c=e[i[o-1]],l=c.left===a?c.right:c.left;++u<o;)s=l,l=(c=e[i[u]]).left===a?c.right:c.left,s&&l&&r<s.index&&r<l.index&&Hi(a,s,l)<0&&t.push([a.data,s.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}})}while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};var Wa=Object.freeze({randomPosition:ir,randomPoint:rr,randomPolygon:or,randomLineString:sr}),Ha=Object.freeze({getCluster:ur,clusterEach:cr,clusterReduce:lr,createBins:pr,applyFilter:fr,propertiesContainsFilter:dr,filterProperties:gr});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var $a=function(){};$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a},$a.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Ka=function(){},Za=function(){},Ja={MAX_VALUE:{configurable:!0}};Za.isNaN=function(t){return Number.isNaN(t)},Za.doubleToLongBits=function(t){return t},Za.longBitsToDouble=function(t){return t},Za.isInfinite=function(t){return!Number.isFinite(t)},Ja.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Za,Ja);var Qa=function(){},tu=function(){},eu=function(){},nu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},iu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};nu.prototype.setOrdinate=function(t,e){switch(t){case nu.X:this.x=e;break;case nu.Y:this.y=e;break;case nu.Z:this.z=e;break;default:throw new Ka("Invalid ordinate index: "+t)}},nu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!$a.equalsWithTolerance(this.x,e.x,n)&&!!$a.equalsWithTolerance(this.y,e.y,n)}},nu.prototype.getOrdinate=function(t){switch(t){case nu.X:return this.x;case nu.Y:return this.y;case nu.Z:return this.z}throw new Ka("Invalid ordinate index: "+t)},nu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Za.isNaN(this.z))&&Za.isNaN(t.z)},nu.prototype.equals=function(t){return t instanceof nu&&this.equals2D(t)},nu.prototype.equalInZ=function(t,e){return $a.equalsWithTolerance(this.z,t.z,e)},nu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},nu.prototype.clone=function(){},nu.prototype.copy=function(){return new nu(this)},nu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},nu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},nu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},nu.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+nu.hashCode(this.x))+nu.hashCode(this.y)},nu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},nu.prototype.interfaces_=function(){return[Qa,tu,mr]},nu.prototype.getClass=function(){return nu},nu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Za.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},iu.DimensionalComparator.get=function(){return ru},iu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},iu.NULL_ORDINATE.get=function(){return Za.NaN},iu.X.get=function(){return 0},iu.Y.get=function(){return 1},iu.Z.get=function(){return 2},Object.defineProperties(nu,iu);var ru=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Ka("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};ru.prototype.compare=function(t,e){var n=t,r=e,i=ru.compare(n.x,r.x);if(0!==i)return i;var o=ru.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:ru.compare(n.z,r.z)},ru.prototype.interfaces_=function(){return[eu]},ru.prototype.getClass=function(){return ru},ru.compare=function(t,e){return t<e?-1:t>e?1:Za.isNaN(t)?Za.isNaN(e)?0:-1:Za.isNaN(e)?1:0};var ou=function(){};ou.prototype.create=function(){},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou};var su=function(){},au={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.toLocationSymbol=function(t){switch(t){case su.EXTERIOR:return"e";case su.BOUNDARY:return"b";case su.INTERIOR:return"i";case su.NONE:return"-"}throw new Ka("Unknown location value: "+t)},au.INTERIOR.get=function(){return 0},au.BOUNDARY.get=function(){return 1},au.EXTERIOR.get=function(){return 2},au.NONE.get=function(){return-1},Object.defineProperties(su,au);var uu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},cu=function(){},lu={LOG_10:{configurable:!0}};cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},cu.log10=function(t){var e=Math.log(t);return Za.isInfinite(e)?e:Za.isNaN(e)?e:e/cu.LOG_10},cu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},cu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},cu.wrap=function(t,e){return t<0?e- -t%e:t%e},cu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},cu.average=function(t,e){return(t+e)/2},lu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(cu,lu);var hu=function(t){this.str=t};hu.prototype.append=function(t){this.str+=t},hu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},hu.prototype.toString=function(t){return this.str};var pu=function(t){this.value=t};pu.prototype.intValue=function(){return this.value},pu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},pu.isNaN=function(t){return Number.isNaN(t)};var fu=function(){};fu.isWhitespace=function(t){return t<=32&&t>=0||127===t},fu.toUpperCase=function(t){return t.toUpperCase()};var du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},gu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=du.magnitude(n._hi),i=du.TEN.pow(r);(n=n.divide(i)).gt(du.TEN)?(n=n.divide(du.TEN),r+=1):n.lt(du.ONE)&&(n=n.multiply(du.TEN),r-=1);for(var o=r+1,s=new hu,a=du.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,s.append(h),n=n.subtract(du.valueOf(c)).multiply(du.TEN),l&&n.selfAdd(du.TEN);var p=!0,f=du.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},du.prototype.sqr=function(){return this.multiply(this)},du.prototype.doubleValue=function(){return this._hi+this._lo},du.prototype.subtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},du.prototype.selfSubtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},du.prototype.min=function(t){return this.le(t)?this:t},du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,h=null;return u=this._hi/n,h=(i=(c=du.SPLIT*u)-(i=c-u))*(s=(h=du.SPLIT*n)-(s=h-n))-(l=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,c=(this._hi-l-h+this._lo-u*r)/n,h=u+c,this._hi=h,this._lo=u-h+c,this}},du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},du.prototype.divide=function(){if(arguments[0]instanceof du){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=du.SPLIT*o)-(e=s-o)),u=e*(r=(u=du.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new du(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return Za.isNaN(c)?du.createNaN():du.copy(this).selfDivide(c,0)}},du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},du.prototype.pow=function(t){if(0===t)return du.valueOf(1);var e=new du(this),n=du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},du.prototype.ceil=function(){if(this.isNaN())return du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new du(t,e)},du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},du.prototype.setValue=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},du.prototype.max=function(t){return this.ge(t)?this:t},du.prototype.sqrt=function(){if(this.isZero())return du.valueOf(0);if(this.isNegative())return du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+e,s=i-this._hi,o=i-s,o=e-s+(this._hi-o),a=o+this._lo,r=a+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,p=null,f=null,g=null,d=null,m=null;f=this._hi+u,h=this._lo+c,g=f-(d=f-this._hi),p=h-(m=h-this._lo);var y=(l=f+(d=(g=u-d+(this._hi-g))+h))+(d=(p=c-m+(this._lo-p))+(d+(f-l))),v=d+(l-y);return this._hi=y,this._lo=v,this}},du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=du.SPLIT*this._hi)-this._hi,c=du.SPLIT*n,i=u-i,o=this._hi-i,s=c-n;var l=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},du.prototype.selfSqr=function(){return this.selfMultiply(this)},du.prototype.floor=function(){if(this.isNaN())return du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new du(t,e)},du.prototype.negate=function(){return this.isNaN()?this:new du(-this._hi,-this._lo)},du.prototype.clone=function(){},du.prototype.multiply=function(){if(arguments[0]instanceof du){var t=arguments[0];return t.isNaN()?du.createNaN():du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Za.isNaN(e)?du.createNaN():du.copy(this).selfMultiply(e,0)}},du.prototype.isNaN=function(){return Za.isNaN(this._hi)},du.prototype.intValue=function(){return Math.trunc(this._hi)},du.prototype.toString=function(){var t=du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+du.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},du.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=du.SPLIT*i)-(t=o-i)),n=(a=du.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new du(u,i-u+o)},du.prototype.toSciNotation=function(){if(this.isZero())return du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},du.prototype.abs=function(){return this.isNaN()?du.NaN:this.isNegative()?this.negate():new du(this)},du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},du.prototype.add=function(){if(arguments[0]instanceof du){var t=arguments[0];return du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return du.copy(this).selfAdd(e)}},du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},du.prototype.trunc=function(){return this.isNaN()?du.NaN:this.isPositive()?this.floor():this.ceil()},du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},du.prototype.interfaces_=function(){return[mr,Qa,tu]},du.prototype.getClass=function(){return du},du.sqr=function(t){return du.valueOf(t).selfMultiply(t)},du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new du(e)}},du.sqrt=function(t){return du.valueOf(t).sqrt()},du.parse=function(t){for(var e=0,n=t.length;fu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new du,s=0,a=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,fu.isDigit(c)){var l=c-"0";o.selfMultiply(du.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=pu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var g=du.TEN.pow(f);p=o.divide(g)}else if(f<0){var d=du.TEN.pow(-f);p=o.multiply(d)}return r?p.negate():p},du.createNaN=function(){return new du(Za.NaN,Za.NaN)},du.copy=function(t){return new du(t)},du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},du.stringOfChar=function(t,e){for(var n=new hu,r=0;r<e;r++)n.append(t);return n.toString()},gu.PI.get=function(){return new du(3.141592653589793,1.2246467991473532e-16)},gu.TWO_PI.get=function(){return new du(6.283185307179586,2.4492935982947064e-16)},gu.PI_2.get=function(){return new du(1.5707963267948966,6.123233995736766e-17)},gu.E.get=function(){return new du(2.718281828459045,1.4456468917292502e-16)},gu.NaN.get=function(){return new du(Za.NaN,Za.NaN)},gu.EPS.get=function(){return 1.23259516440783e-32},gu.SPLIT.get=function(){return 134217729},gu.MAX_PRINT_DIGITS.get=function(){return 32},gu.TEN.get=function(){return du.valueOf(10)},gu.ONE.get=function(){return du.valueOf(1)},gu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},gu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(du,gu);var mu=function(){},yu={DP_SAFE_EPSILON:{configurable:!0}};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.orientationIndex=function(t,e,n){var r=mu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=du.valueOf(e.x).selfAdd(-t.x),o=du.valueOf(e.y).selfAdd(-t.y),s=du.valueOf(n.x).selfAdd(-e.x),a=du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},mu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},mu.intersection=function(t,e,n,r){var i=du.valueOf(r.y).selfSubtract(n.y).selfMultiply(du.valueOf(e.x).selfSubtract(t.x)),o=du.valueOf(r.x).selfSubtract(n.x).selfMultiply(du.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=du.valueOf(r.x).selfSubtract(n.x).selfMultiply(du.valueOf(t.y).selfSubtract(n.y)),u=du.valueOf(r.y).selfSubtract(n.y).selfMultiply(du.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=du.valueOf(t.x).selfAdd(du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=du.valueOf(e.x).selfSubtract(t.x).selfMultiply(du.valueOf(t.y).selfSubtract(n.y)),p=du.valueOf(e.y).selfSubtract(t.y).selfMultiply(du.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(s).doubleValue(),g=du.valueOf(n.y).selfAdd(du.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new nu(l,g)},mu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return mu.signum(s);r=i+o}else{if(!(i<0))return mu.signum(s);if(o>=0)return mu.signum(s);r=-i-o}var a=mu.DP_SAFE_EPSILON*r;return s>=a||-s>=a?mu.signum(s):2},mu.signum=function(t){return t>0?1:t<0?-1:0},yu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(mu,yu);var vu=function(){},_u={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};_u.X.get=function(){return 0},_u.Y.get=function(){return 1},_u.Z.get=function(){return 2},_u.M.get=function(){return 3},vu.prototype.setOrdinate=function(t,e,n){},vu.prototype.size=function(){},vu.prototype.getOrdinate=function(t,e){},vu.prototype.getCoordinate=function(){},vu.prototype.getCoordinateCopy=function(t){},vu.prototype.getDimension=function(){},vu.prototype.getX=function(t){},vu.prototype.clone=function(){},vu.prototype.expandEnvelope=function(t){},vu.prototype.copy=function(){},vu.prototype.getY=function(t){},vu.prototype.toCoordinateArray=function(){},vu.prototype.interfaces_=function(){return[tu]},vu.prototype.getClass=function(){return vu},Object.defineProperties(vu,_u);var bu=function(){},xu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bu),wu=function(){};wu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},wu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Eu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],g=arguments[3],d=h.y-p.y,m=p.x-h.x,y=h.x*p.y-p.x*h.y,v=f.y-g.y,_=g.x-f.x,x=f.x*g.y-g.x*f.y;this.x=m*x-_*y,this.y=v*y-d*x,this.w=d*_-v*m}};Eu.prototype.getY=function(){var t=this.y/this.w;if(Za.isNaN(t)||Za.isInfinite(t))throw new xu;return t},Eu.prototype.getX=function(){var t=this.x/this.w;if(Za.isNaN(t)||Za.isInfinite(t))throw new xu;return t},Eu.prototype.getCoordinate=function(){var t=new nu;return t.x=this.getX(),t.y=this.getY(),t},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-a*o,h=(o*c-u*s)/l,p=(a*s-i*c)/l;if(Za.isNaN(h)||Za.isInfinite(h)||Za.isNaN(p)||Za.isInfinite(p))throw new xu;return new nu(h,p)};var Cu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof nu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ou={serialVersionUID:{configurable:!0}};Cu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Cu.prototype.equals=function(t){if(!(t instanceof Cu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Cu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Cu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Cu(e,r,n,i)},Cu.prototype.isNull=function(){return this._maxx<this._minx},Cu.prototype.getMaxX=function(){return this._maxx},Cu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Cu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Cu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof nu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Cu.prototype.getMinY=function(){return this._miny},Cu.prototype.getMinX=function(){return this._minx},Cu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Cu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Cu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Cu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Cu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Cu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Cu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Cu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Cu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Cu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Cu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Cu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof nu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Cu.prototype.centre=function(){return this.isNull()?null:new nu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Cu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Cu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Cu.prototype.getMaxY=function(){return this._maxy},Cu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Cu.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+nu.hashCode(this._minx))+nu.hashCode(this._maxx))+nu.hashCode(this._miny))+nu.hashCode(this._maxy)},Cu.prototype.interfaces_=function(){return[Qa,mr]},Cu.prototype.getClass=function(){return Cu},Cu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u||l<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),c>u||l<a))}},Ou.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Cu,Ou);var Su={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Iu=function(t){this.geometryFactory=t||new $c};Iu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Su.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Su.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Pu[n]&&(e=Pu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Iu.prototype.write=function(t){return this.extractGeometry(t)},Iu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Tu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Tu[e].apply(this,[t])+")"};var Tu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Tu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Tu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Tu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Tu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Tu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Pu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Su.spaces);return this.geometryFactory.createPoint(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Su.trimParens,"$1"),r.push(Pu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Su.spaces),r.push(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Su.spaces),r.push(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Su.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Su.trimParens,"$1"),r.push(Pu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Su.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Su.trimParens,"$1"),n=Pu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Su.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Su.trimParens,"$1"),r.push(Pu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Ru=function(t){this.parser=new Iu(t)};Ru.prototype.write=function(t){return this.parser.write(t)},Ru.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Lu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Mu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Lu),Nu=function(){};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.shouldNeverReachHere=function(){if(0===arguments.length)Nu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Mu("Should never reach here"+(null!==t?": "+t:""))}},Nu.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Nu.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Mu:new Mu(e)},Nu.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],Nu.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Mu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ju=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new nu,this._intPt[1]=new nu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Du={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ju.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ju.prototype.getTopologySummary=function(){var t=new hu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ju.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ju.prototype.getIntersectionNum=function(){return this._result},ju.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ju.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ju.prototype.setPrecisionModel=function(t){this._precisionModel=t},ju.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ju.prototype.getIntersection=function(t){return this._intPt[t]},ju.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ju.prototype.hasIntersection=function(){return this._result!==ju.NO_INTERSECTION},ju.prototype.getEdgeDistance=function(t,e){return ju.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ju.prototype.isCollinear=function(){return this._result===ju.COLLINEAR_INTERSECTION},ju.prototype.toString=function(){return Ru.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ru.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ju.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ju.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ju.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Nu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ju.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Nu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Du.DONT_INTERSECT.get=function(){return 0},Du.DO_INTERSECT.get=function(){return 1},Du.COLLINEAR.get=function(){return 2},Du.NO_INTERSECTION.get=function(){return 0},Du.POINT_INTERSECTION.get=function(){return 1},Du.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ju,Du);var Au=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Cu(this._inputLines[0][0],this._inputLines[0][1]),n=new Cu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Cu.intersects(n,r,e)&&0===Gu.orientationIndex(n,r,e)&&0===Gu.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Eu.intersection(t,n,r,i)}catch(c){if(!(c instanceof xu))throw c;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new nu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=mu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);wu.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&wu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new nu(t),o=new nu(e),s=new nu(n),a=new nu(r),u=new nu;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Cu.intersects(e,n,r),s=Cu.intersects(e,n,i),a=Cu.intersects(r,i,e),u=Cu.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>c?o:c)+(a<h?a:h))/2,g=((s>l?s:l)+(u<p?u:p))/2;i.x=f,i.y=g,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Cu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Gu.orientationIndex(e,n,r),s=Gu.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Gu.orientationIndex(r,i,e),u=Gu.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new nu(r):0===s?this._intPt[0]=new nu(i):0===a?this._intPt[0]=new nu(e):0===u&&(this._intPt[0]=new nu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Gu.distancePointLine(t,n,r),s=Gu.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Gu.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Gu.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(ju),Fu=function(){};Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu},Fu.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Fu.signOfDet2x2(r,i,o,s)},Fu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(r-=s*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(t/n),t-=s*n,(e-=s*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var ku=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};ku.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Fu.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},ku.prototype.isPointInPolygon=function(){return this.getLocation()!==su.EXTERIOR},ku.prototype.getLocation=function(){return this._isPointOnSegment?su.BOUNDARY:this._crossingCount%2==1?su.INTERIOR:su.EXTERIOR},ku.prototype.isOnSegment=function(){return this._isPointOnSegment},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.locatePointInRing=function(){if(arguments[0]instanceof nu&&uu(arguments[1],vu)){for(var t=arguments[0],e=arguments[1],n=new ku(t),r=new nu,i=new nu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof nu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new ku(s),c=1;c<a.length;c++){var l=a[c],h=a[c-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Gu=function(){},Bu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu},Gu.orientationIndex=function(t,e,n){return mu.orientationIndex(t,e,n)},Gu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(uu(arguments[0],vu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new nu,c=new nu,l=new nu;s.getCoordinate(0,c),s.getCoordinate(1,l);var h=c.x;l.x-=h;for(var p=0,f=1;f<a-1;f++)u.y=c.y,c.x=l.x,c.y=l.y,s.getCoordinate(f+1,l),l.x-=h,p+=c.x*(u.y-l.y);return p/2}},Gu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Gu.distancePointLine(t,n,r);if(n.equals(r))return Gu.distancePointLine(r,t,e);var i=!1;if(Cu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?cu.min(Gu.distancePointLine(t,n,r),Gu.distancePointLine(e,n,r),Gu.distancePointLine(n,t,e),Gu.distancePointLine(r,t,e)):0},Gu.isPointInRing=function(t,e){return Gu.locatePointInRing(t,e)!==su.EXTERIOR},Gu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new nu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},Gu.isCCW=function(t){var e=t.length-1;if(e<3)throw new Ka("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=Gu.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},Gu.locatePointInRing=function(t,e){return ku.locatePointInRing(t,e)},Gu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Gu.computeOrientation=function(t,e,n){return Gu.orientationIndex(t,e,n)},Gu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Ka("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Gu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Gu.isOnLine=function(t,e){for(var n=new Au,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Bu.CLOCKWISE.get=function(){return-1},Bu.RIGHT.get=function(){return Gu.CLOCKWISE},Bu.COUNTERCLOCKWISE.get=function(){return 1},Bu.LEFT.get=function(){return Gu.COUNTERCLOCKWISE},Bu.COLLINEAR.get=function(){return 0},Bu.STRAIGHT.get=function(){return Gu.COLLINEAR},Object.defineProperties(Gu,Bu);var zu=function(){};zu.prototype.filter=function(t){},zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu};var Uu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},qu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Uu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION},Uu.prototype.getFactory=function(){return this._factory},Uu.prototype.getGeometryN=function(t){return this},Uu.prototype.getArea=function(){return 0},Uu.prototype.isRectangle=function(){return!1},Uu.prototype.equals=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Uu))return!1;var n=e;return this.equalsExact(n)}},Uu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Uu.prototype.geometryChanged=function(){this.apply(Uu.geometryChangedFilter)},Uu.prototype.geometryChangedAction=function(){this._envelope=null},Uu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Uu.prototype.getLength=function(){return 0},Uu.prototype.getNumGeometries=function(){return 1},Uu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Uu.prototype.getUserData=function(){return this._userData},Uu.prototype.getSRID=function(){return this._SRID},Uu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Uu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION)throw new Ka("This method does not support GeometryCollection arguments")},Uu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Uu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Uu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Uu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Cu(this._envelope)},Uu.prototype.setSRID=function(t){this._SRID=t},Uu.prototype.setUserData=function(t){this._userData=t},Uu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Uu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Uu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Uu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Uu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Uu.SORTINDEX_MULTIPOLYGON},Uu.prototype.interfaces_=function(){return[tu,Qa,mr]},Uu.prototype.getClass=function(){return Uu},Uu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Uu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},qu.serialVersionUID.get=function(){return 0x799ea46522854c00},qu.SORTINDEX_POINT.get=function(){return 0},qu.SORTINDEX_MULTIPOINT.get=function(){return 1},qu.SORTINDEX_LINESTRING.get=function(){return 2},qu.SORTINDEX_LINEARRING.get=function(){return 3},qu.SORTINDEX_MULTILINESTRING.get=function(){return 4},qu.SORTINDEX_POLYGON.get=function(){return 5},qu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},qu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},qu.geometryChangedFilter.get=function(){return Vu},Object.defineProperties(Uu,qu);var Vu=function(){};Vu.interfaces_=function(){return[zu]},Vu.filter=function(t){t.geometryChangedAction()};var Yu=function(){};Yu.prototype.filter=function(t){},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu};var Xu=function(){},Wu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Xu.prototype.isInBoundary=function(t){},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu},Wu.Mod2BoundaryNodeRule.get=function(){return Hu},Wu.EndPointBoundaryNodeRule.get=function(){return $u},Wu.MultiValentEndPointBoundaryNodeRule.get=function(){return Ku},Wu.MonoValentEndPointBoundaryNodeRule.get=function(){return Zu},Wu.MOD2_BOUNDARY_RULE.get=function(){return new Hu},Wu.ENDPOINT_BOUNDARY_RULE.get=function(){return new $u},Wu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ku},Wu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Zu},Wu.OGC_SFS_BOUNDARY_RULE.get=function(){return Xu.MOD2_BOUNDARY_RULE},Object.defineProperties(Xu,Wu);var Hu=function(){};Hu.prototype.isInBoundary=function(t){return t%2==1},Hu.prototype.interfaces_=function(){return[Xu]},Hu.prototype.getClass=function(){return Hu};var $u=function(){};$u.prototype.isInBoundary=function(t){return t>0},$u.prototype.interfaces_=function(){return[Xu]},$u.prototype.getClass=function(){return $u};var Ku=function(){};Ku.prototype.isInBoundary=function(t){return t>1},Ku.prototype.interfaces_=function(){return[Xu]},Ku.prototype.getClass=function(){return Ku};var Zu=function(){};Zu.prototype.isInBoundary=function(t){return 1===t},Zu.prototype.interfaces_=function(){return[Xu]},Zu.prototype.getClass=function(){return Zu};var Ju=function(){};Ju.prototype.add=function(){},Ju.prototype.addAll=function(){},Ju.prototype.isEmpty=function(){},Ju.prototype.iterator=function(){},Ju.prototype.size=function(){},Ju.prototype.toArray=function(){},Ju.prototype.remove=function(){};var Qu=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),tc=function(){};tc.prototype.hasNext=function(){},tc.prototype.next=function(){},tc.prototype.remove=function(){};var ec=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Ju);(yr.prototype=new Error).name="NoSuchElementException";var nc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ju&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Ju]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ic(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Qu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(ec),ic=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new yr;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(tc),rc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof nu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],u);else for(var l=a.length-1;l>=0;l--)this.add(a[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof nu){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var _=m;_!==y;_+=v)this.add(g[_],d);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new nu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(nc),oc=function(){},sc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};sc.ForwardComparator.get=function(){return ac},sc.BidirectionalComparator.get=function(){return uc},sc.coordArrayType.get=function(){return new Array(0).fill(null)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},oc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(oc.indexOf(r,e)<0)return r}return null},oc.scroll=function(t,e){var n=oc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);wu.arraycopy(t,n,r,0,t.length-n),wu.arraycopy(t,0,r,t.length-n,n),wu.arraycopy(r,0,t,0,t.length)},oc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},oc.intersection=function(t,e){for(var n=new rc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},oc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},oc.removeRepeatedPoints=function(t){return oc.hasRepeatedPoints(t)?new rc(t,!1).toCoordinateArray():t},oc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},oc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},oc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new nu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new nu(r[i+u])},oc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},oc.envelope=function(t){for(var e=new Cu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},oc.toCoordinateArray=function(t){return t.toArray(oc.coordArrayType)},oc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},oc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},oc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},oc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},oc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},oc.extract=function(t,e,n){e=cu.clamp(e,0,t.length);var r=(n=cu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(oc,sc);var ac=function(){};ac.prototype.compare=function(t,e){return oc.compare(t,e)},ac.prototype.interfaces_=function(){return[eu]},ac.prototype.getClass=function(){return ac};var uc=function(){};uc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=oc.compare(n,r);return oc.isEqualReversed(n,r)?0:i},uc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=oc.increasingDirection(n),o=oc.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},uc.prototype.interfaces_=function(){return[eu]},uc.prototype.getClass=function(){return uc};var cc=function(){};cc.prototype.get=function(){},cc.prototype.put=function(){},cc.prototype.size=function(){},cc.prototype.values=function(){},cc.prototype.entrySet=function(){};var lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cc);(vr.prototype=new Error).name="OperationNotSupported",(_r.prototype=new Ju).contains=function(){};var hc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ju&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new pc(this)},e}(_r),pc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new yr;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new vr},e}(tc),fc=0;(Sr.prototype=new lc).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Sr.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:fc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:fc,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Sr.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(wr(t)===Cr(wr(wr(t)))){var e=Or(wr(wr(t)));1===xr(e)?(Er(wr(t),fc),Er(e,fc),Er(wr(wr(t)),1),t=wr(wr(t))):(t===Or(wr(t))&&(t=wr(t),this.rotateLeft(t)),Er(wr(t),fc),Er(wr(wr(t)),1),this.rotateRight(wr(wr(t))))}else{var n=Cr(wr(wr(t)));1===xr(n)?(Er(wr(t),fc),Er(n,fc),Er(wr(wr(t)),1),t=wr(wr(t))):(t===Cr(wr(t))&&(t=wr(t),this.rotateRight(t)),Er(wr(t),fc),Er(wr(wr(t)),1),this.rotateLeft(wr(wr(t))))}this.root_.color=fc},Sr.prototype.values=function(){var t=new nc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Sr.successor(e));)t.add(e.value);return t},Sr.prototype.entrySet=function(){var t=new hc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Sr.successor(e));)t.add(e);return t},Sr.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Sr.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Sr.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Sr.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Sr.prototype.size=function(){return this.size_};var dc=function(){};dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},Ir.prototype=new _r,(Tr.prototype=new Ir).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Tr.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Tr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Tr.prototype.remove=function(t){throw new vr},Tr.prototype.size=function(){return this.array_.length},Tr.prototype.isEmpty=function(){return 0===this.array_.length},Tr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Tr.prototype.iterator=function(){return new gc(this)};var gc=function(t){this.treeSet_=t,this.position_=0};gc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new yr;return this.treeSet_.array_[this.position_++]},gc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},gc.prototype.remove=function(){throw new vr};var mc=function(){};mc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},mc.asList=function(t){for(var e=new nc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var yc=function(){},vc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};vc.P.get=function(){return 0},vc.L.get=function(){return 1},vc.A.get=function(){return 2},vc.FALSE.get=function(){return-1},vc.TRUE.get=function(){return-2},vc.DONTCARE.get=function(){return-3},vc.SYM_FALSE.get=function(){return"F"},vc.SYM_TRUE.get=function(){return"T"},vc.SYM_DONTCARE.get=function(){return"*"},vc.SYM_P.get=function(){return"0"},vc.SYM_L.get=function(){return"1"},vc.SYM_A.get=function(){return"2"},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},yc.toDimensionSymbol=function(t){switch(t){case yc.FALSE:return yc.SYM_FALSE;case yc.TRUE:return yc.SYM_TRUE;case yc.DONTCARE:return yc.SYM_DONTCARE;case yc.P:return yc.SYM_P;case yc.L:return yc.SYM_L;case yc.A:return yc.SYM_A}throw new Ka("Unknown dimension value: "+t)},yc.toDimensionValue=function(t){switch(fu.toUpperCase(t)){case yc.SYM_FALSE:return yc.FALSE;case yc.SYM_TRUE:return yc.TRUE;case yc.SYM_DONTCARE:return yc.DONTCARE;case yc.SYM_P:return yc.P;case yc.SYM_L:return yc.L;case yc.SYM_A:return yc.A}throw new Ka("Unknown dimension symbol: "+t)},Object.defineProperties(yc,vc);var _c=function(){};_c.prototype.filter=function(t){},_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c};var bc=function(){};bc.prototype.filter=function(t,e){},bc.prototype.isDone=function(){},bc.prototype.isGeometryChanged=function(){},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var xc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Ka("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Cu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();mc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=yc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=yc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Tr(mc.asList(this._geometries)),n=new Tr(mc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var c=this.getGeometryN(u),l=o.getGeometryN(u),h=c.compareToSameClass(l,i);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(uu(arguments[0],Yu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(uu(arguments[0],bc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(uu(arguments[0],_c)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(uu(arguments[0],zu)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Nu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Uu),wc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ec(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(xc),Ec=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Xu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ec.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ec.prototype.getBoundary=function(){return this._geom instanceof Tc?this.boundaryLineString(this._geom):this._geom instanceof wc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ec.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ec.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ec.prototype.computeBoundaryCoordinates=function(t){var e=new nc;this._endpointMap=new Sr;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return oc.toCoordinateArray(e)},Ec.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Cc,this._endpointMap.put(t,e)),e.count++},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ec.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Ec(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Ec(e,n).getBoundary()}};var Cc=function(){this.count=null};Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Oc=function(){},Sc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc},Oc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Oc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Oc.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Oc.NEWLINE}catch(t){if(!(t instanceof Pr))throw t;Nu.shouldNeverReachHere()}return o}},Oc.split=function(t,e){for(var n=e.length,r=new nc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Oc.toString=function(){if(1===arguments.length){var t=arguments[0];return Oc.SIMPLE_ORDINATE_FORMAT.format(t)}},Oc.spaces=function(t){return Oc.chars(" ",t)},Sc.NEWLINE.get=function(){return wu.getProperty("line.separator")},Sc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Oc,Sc);var Ic=function(){};Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ic.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,vu.X)===t.getOrdinate(e-1,vu.X)&&t.getOrdinate(0,vu.Y)===t.getOrdinate(e-1,vu.Y)},Ic.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||Za.isNaN(s)&&Za.isNaN(a)))return!1}return!0},Ic.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ic.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ic.copy(e,i-1,r,o,1);return r},Ic.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ic.swap(t,r,e-r)},Ic.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ic.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ic.copyCoord(t,e+o,n,r+o)},Ic.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new hu;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Oc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ic.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ic.createClosedRing(t,e,4):e.getOrdinate(0,vu.X)===e.getOrdinate(n-1,vu.X)&&e.getOrdinate(0,vu.Y)===e.getOrdinate(n-1,vu.Y)?e:Ic.createClosedRing(t,e,n+1)},Ic.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ic.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ic.copy(e,0,r,o,1);return r};var Tc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Cu:this._points.expandEnvelope(new Cu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ic.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Gu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ic.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(uu(arguments[0],Yu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(uu(arguments[0],bc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else uu(arguments[0],_c)?arguments[0].filter(this):uu(arguments[0],zu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ec(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Ka("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Uu),Pc=function(){};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Rc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Cu;var t=new Cu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return yc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(uu(arguments[0],Yu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(uu(arguments[0],bc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else uu(arguments[0],_c)?arguments[0].filter(this):uu(arguments[0],zu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Nu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Uu),Lc=function(){};Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc};var Mc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Ka("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Ka("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Gu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Gu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o==(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);mc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);wu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=oc.minCoordinate(e.getCoordinates());oc.scroll(r,i),wu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Gu.isCCW(e.getCoordinates())===n&&oc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),h=0;h<c&&h<l;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),g=p.compareToSameClass(f,i);if(0!==g)return g;h++}return h<c?1:h<l?-1:0}},e.prototype.apply=function(t){if(uu(t,Yu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(uu(t,bc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(uu(t,_c))t.filter(this);else if(uu(t,zu)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Uu),th=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return yc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(xc),Nc=function(t){function e(e,n){e instanceof nu&&n instanceof $c&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return yc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ic.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Ka("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Ka("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Tc),jc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new nc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(xc),Dc=function(t){this._factory=t||null,this._isUserDataCopied=!1},Ac={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Dc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Dc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Dc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof xc?this.editGeometryCollection(t,e):t instanceof Mc?this.editPolygon(t,e):t instanceof Rc?e.edit(t,this._factory):t instanceof Tc?e.edit(t,this._factory):(Nu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Dc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new nc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===th?this._factory.createMultiPoint(r.toArray([])):n.getClass()===wc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===jc?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Dc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new nc,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Dc.GeometryEditorOperation=function(){},Ac.NoOpGeometryOperation.get=function(){return Fc},Ac.CoordinateOperation.get=function(){return kc},Ac.CoordinateSequenceOperation.get=function(){return Gc},Object.defineProperties(Dc,Ac);var Fc=function(){};Fc.prototype.edit=function(t,e){return t},Fc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},Fc.prototype.getClass=function(){return Fc};var kc=function(){};kc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Nc?e.createLinearRing(n):t instanceof Tc?e.createLineString(n):t instanceof Rc?n.length>0?e.createPoint(n[0]):e.createPoint():t},kc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},kc.prototype.getClass=function(){return kc};var Gc=function(){};Gc.prototype.edit=function(t,e){return t instanceof Nc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Tc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Rc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Gc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},Gc.prototype.getClass=function(){return Gc};var Bc=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new nu}else if(uu(arguments[0],vu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new nu}},zc={serialVersionUID:{configurable:!0}};Bc.prototype.setOrdinate=function(t,e,n){switch(e){case vu.X:this._coordinates[t].x=n;break;case vu.Y:this._coordinates[t].y=n;break;case vu.Z:this._coordinates[t].z=n;break;default:throw new Ka("invalid ordinateIndex")}},Bc.prototype.size=function(){return this._coordinates.length},Bc.prototype.getOrdinate=function(t,e){switch(e){case vu.X:return this._coordinates[t].x;case vu.Y:return this._coordinates[t].y;case vu.Z:return this._coordinates[t].z}return Za.NaN},Bc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Bc.prototype.getCoordinateCopy=function(t){return new nu(this._coordinates[t])},Bc.prototype.getDimension=function(){return this._dimension},Bc.prototype.getX=function(t){return this._coordinates[t].x},Bc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Bc(t,this._dimension)},Bc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Bc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Bc(t,this._dimension)},Bc.prototype.toString=function(){if(this._coordinates.length>0){var t=new hu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Bc.prototype.getY=function(t){return this._coordinates[t].y},Bc.prototype.toCoordinateArray=function(){return this._coordinates},Bc.prototype.interfaces_=function(){return[vu,mr]},Bc.prototype.getClass=function(){return Bc},zc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Bc,zc);var Uc=function(){},qc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Uc.prototype.readResolve=function(){return Uc.instance()},Uc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Bc(t)}if(uu(arguments[0],vu)){var e=arguments[0];return new Bc(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Bc(n):new Bc(n,r)}},Uc.prototype.interfaces_=function(){return[ou,mr]},Uc.prototype.getClass=function(){return Uc},Uc.instance=function(){return Uc.instanceObject},qc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},qc.instanceObject.get=function(){return new Uc},Object.defineProperties(Uc,qc);var Vc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new nc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new hc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(cc),Yc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Wc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Xc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Yc.prototype.equals=function(t){if(!(t instanceof Yc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Yc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new pu(n).compareTo(new pu(r))},Yc.prototype.getScale=function(){return this._scale},Yc.prototype.isFloating=function(){return this._modelType===Yc.FLOATING||this._modelType===Yc.FLOATING_SINGLE},Yc.prototype.getType=function(){return this._modelType},Yc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Yc.FLOATING?t="Floating":this._modelType===Yc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Yc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Yc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Za.isNaN(t)?t:this._modelType===Yc.FLOATING_SINGLE?t:this._modelType===Yc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof nu){var e=arguments[0];if(this._modelType===Yc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Yc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Yc.FLOATING?t=16:this._modelType===Yc.FLOATING_SINGLE?t=6:this._modelType===Yc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Yc.prototype.setScale=function(t){this._scale=Math.abs(t)},Yc.prototype.interfaces_=function(){return[mr,Qa]},Yc.prototype.getClass=function(){return Yc},Yc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Xc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Xc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Yc,Xc);var Wc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Hc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Wc.prototype.readResolve=function(){return Wc.nameToTypeMap.get(this._name)},Wc.prototype.toString=function(){return this._name},Wc.prototype.interfaces_=function(){return[mr]},Wc.prototype.getClass=function(){return Wc},Hc.serialVersionUID.get=function(){return-552860263173159e4},Hc.nameToTypeMap.get=function(){return new Vc},Object.defineProperties(Wc,Hc),Yc.Type=Wc,Yc.FIXED=new Wc("FIXED"),Yc.FLOATING=new Wc("FLOATING"),Yc.FLOATING_SINGLE=new Wc("FLOATING SINGLE");var $c=function t(){this._precisionModel=new Yc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?uu(arguments[0],ou)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Yc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Kc={serialVersionUID:{configurable:!0}};$c.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new nu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new nu(t.getMinX(),t.getMinY()),new nu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new nu(t.getMinX(),t.getMinY()),new nu(t.getMinX(),t.getMaxY()),new nu(t.getMaxX(),t.getMaxY()),new nu(t.getMaxX(),t.getMinY()),new nu(t.getMinX(),t.getMinY())]),null)},$c.prototype.createLineString=function(t){return t?t instanceof Array?new Tc(this.getCoordinateSequenceFactory().create(t),this):uu(t,vu)?new Tc(t,this):void 0:new Tc(this.getCoordinateSequenceFactory().create([]),this)},$c.prototype.createMultiLineString=function(){if(0===arguments.length)return new wc(null,this);if(1===arguments.length){var t=arguments[0];return new wc(t,this)}},$c.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection($c.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Mc)return this.createMultiPolygon($c.toPolygonArray(t));if(a instanceof Tc)return this.createMultiLineString($c.toLineStringArray(t));if(a instanceof Rc)return this.createMultiPoint($c.toPointArray(t));Nu.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},$c.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},$c.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new Rc(e,this)}}},$c.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},$c.prototype.createPolygon=function(){if(0===arguments.length)return new Mc(null,null,this);if(1===arguments.length){if(uu(arguments[0],vu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Nc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Mc(r,i,this)}},$c.prototype.getSRID=function(){return this._SRID},$c.prototype.createGeometryCollection=function(){if(0===arguments.length)return new xc(null,this);if(1===arguments.length){var t=arguments[0];return new xc(t,this)}},$c.prototype.createGeometry=function(t){return new Dc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},$c.prototype.getPrecisionModel=function(){return this._precisionModel},$c.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new Nc(e,this)}}},$c.prototype.createMultiPolygon=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},$c.prototype.createMultiPoint=function(){if(0===arguments.length)return new th(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new th(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(uu(arguments[0],vu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ic.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},$c.prototype.interfaces_=function(){return[mr]},$c.prototype.getClass=function(){return $c},$c.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.getDefaultCoordinateSequenceFactory=function(){return Uc.instance()},$c.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},$c.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Kc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties($c,Kc);var Zc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Jc=function(t){this.geometryFactory=t||new $c};Jc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Qc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Zc.indexOf(n)?Qc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Qc[n].apply(this,[e.geometries]):Qc[n].apply(this,[e])},Jc.prototype.write=function(t){var e=t.getGeometryType();if(!tl[e])throw new Error("Geometry is not supported");return tl[e].apply(this,[t])};var Qc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Qc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Qc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new nu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new nu(t[0],t[1]),new nu(t[2],t[1]),new nu(t[2],t[3]),new nu(t[0],t[3]),new nu(t[0],t[1])])},Point:function(t){var e=new nu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Qc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Qc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Qc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Qc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Qc.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Qc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},tl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:tl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tl.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(tl.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tl.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=tl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=tl.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tl.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(tl[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},el=function(t){this.geometryFactory=t||new $c,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Jc(this.geometryFactory)};el.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Yc.FIXED&&this.reducePrecision(e),e},el.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var nl=function(){this.parser=new Jc(this.geometryFactory)};nl.prototype.write=function(t){return this.parser.write(t)};var il=function(){},rl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},il.opposite=function(t){return t===il.LEFT?il.RIGHT:t===il.RIGHT?il.LEFT:t},rl.ON.get=function(){return 0},rl.LEFT.get=function(){return 1},rl.RIGHT.get=function(){return 2},Object.defineProperties(il,rl),(Rr.prototype=new Error).name="EmptyStackException",(Lr.prototype=new ec).add=function(t){return this.array_.push(t),!0},Lr.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Lr.prototype.push=function(t){return this.array_.push(t),t},Lr.prototype.pop=function(t){if(0===this.array_.length)throw new Rr;return this.array_.pop()},Lr.prototype.peek=function(){if(0===this.array_.length)throw new Rr;return this.array_[this.array_.length-1]},Lr.prototype.empty=function(){return 0===this.array_.length},Lr.prototype.isEmpty=function(){return this.empty()},Lr.prototype.search=function(t){return this.array_.indexOf(t)},Lr.prototype.size=function(){return this.array_.length},Lr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var sl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};sl.prototype.getCoordinate=function(){return this._minCoord},sl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},sl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Nu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Gu.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Gu.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Gu.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},sl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=il.LEFT;return n[e].y<n[e+1].y&&(r=il.RIGHT),r},sl.prototype.getEdge=function(){return this._orientedDe},sl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},sl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},sl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Nu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===il.LEFT&&(this._orientedDe=this._minDe.getSym())},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var al=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new nu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Lu),cl=function(){this.array_=[]};cl.prototype.addLast=function(t){this.array_.push(t)},cl.prototype.removeFirst=function(){return this.array_.shift()},cl.prototype.isEmpty=function(){return 0===this.array_.length};var ll=function(){this._finder=null,this._dirEdgeList=new nc,this._nodes=new nc,this._rightMostCoord=null,this._env=null,this._finder=new sl};ll.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},ll.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ll.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new al("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},ll.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(il.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},ll.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ll.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(il.RIGHT)>=1&&e.getDepth(il.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},ll.prototype.computeDepths=function(t){var e=new hc,n=new cl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},ll.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},ll.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Cu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},ll.prototype.addReachable=function(t){var e=new Lr;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},ll.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(il.LEFT,t.getDepth(il.RIGHT)),e.setDepth(il.RIGHT,t.getDepth(il.LEFT))},ll.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},ll.prototype.getNodes=function(){return this._nodes},ll.prototype.getDirectedEdges=function(){return this._dirEdgeList},ll.prototype.interfaces_=function(){return[Qa]},ll.prototype.getClass=function(){return ll};var hl=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[il.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[il.ON]=o,this.location[il.LEFT]=s,this.location[il.RIGHT]=a}};hl.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},hl.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==su.NONE)return!1;return!0},hl.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===su.NONE&&(this.location[e]=t)},hl.prototype.isLine=function(){return 1===this.location.length},hl.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[il.ON]=this.location[il.ON],e[il.LEFT]=su.NONE,e[il.RIGHT]=su.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===su.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},hl.prototype.getLocations=function(){return this.location},hl.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[il.LEFT];this.location[il.LEFT]=this.location[il.RIGHT],this.location[il.RIGHT]=t},hl.prototype.toString=function(){var t=new hu;return this.location.length>1&&t.append(su.toLocationSymbol(this.location[il.LEFT])),t.append(su.toLocationSymbol(this.location[il.ON])),this.location.length>1&&t.append(su.toLocationSymbol(this.location[il.RIGHT])),t.toString()},hl.prototype.setLocations=function(t,e,n){this.location[il.ON]=t,this.location[il.LEFT]=e,this.location[il.RIGHT]=n},hl.prototype.get=function(t){return t<this.location.length?this.location[t]:su.NONE},hl.prototype.isArea=function(){return this.location.length>1},hl.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===su.NONE)return!0;return!1},hl.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(il.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},hl.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(su.NONE)},hl.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},hl.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var pl=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new hl(e),this.elt[1]=new hl(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new hl(n.elt[0]),this.elt[1]=new hl(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new hl(su.NONE),this.elt[1]=new hl(su.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new hl(o,s,a),this.elt[1]=new hl(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new hl(su.NONE,su.NONE,su.NONE),this.elt[1]=new hl(su.NONE,su.NONE,su.NONE),this.elt[u].setLocations(c,l,h)}};pl.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},pl.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},pl.prototype.isNull=function(t){return this.elt[t].isNull()},pl.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},pl.prototype.isLine=function(t){return this.elt[t].isLine()},pl.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new hl(t.elt[e]):this.elt[e].merge(t.elt[e])},pl.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},pl.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(il.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},pl.prototype.toString=function(){var t=new hu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},pl.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},pl.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},pl.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(il.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},pl.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},pl.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},pl.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new hl(this.elt[t].location[0]))},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLineLabel=function(t){for(var e=new pl(su.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var fl=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new nc,this._pts=new nc,this._label=new pl(su.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new nc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};fl.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Gu.isCCW(this._ring.getCoordinates())},fl.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},fl.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new al("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new al("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();Nu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},fl.prototype.getLinearRing=function(){return this._ring},fl.prototype.getCoordinate=function(t){return this._pts.get(t)},fl.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},fl.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},fl.prototype.isHole=function(){return this._isHole},fl.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},fl.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Gu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},fl.prototype.addHole=function(t){this._holes.add(t)},fl.prototype.isShell=function(){return null===this._shell},fl.prototype.getLabel=function(){return this._label},fl.prototype.getEdges=function(){return this._edges},fl.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},fl.prototype.getShell=function(){return this._shell},fl.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,il.RIGHT);if(r===su.NONE)return null;if(this._label.getLocation(n)===su.NONE)return this._label.setLocation(n,r),null}},fl.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},fl.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var gl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fl),ml=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new nc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new gl(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fl),yl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};yl.prototype.setVisited=function(t){this._isVisited=t},yl.prototype.setInResult=function(t){this._isInResult=t},yl.prototype.isCovered=function(){return this._isCovered},yl.prototype.isCoveredSet=function(){return this._isCoveredSet},yl.prototype.setLabel=function(t){this._label=t},yl.prototype.getLabel=function(){return this._label},yl.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},yl.prototype.updateIM=function(t){Nu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},yl.prototype.isInResult=function(){return this._isInResult},yl.prototype.isVisited=function(){return this._isVisited},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var vl=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new pl(0,su.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=su.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==su.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new pl(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof pl)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===su.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=su.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case su.BOUNDARY:n=su.INTERIOR;break;case su.INTERIOR:default:n=su.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yl),_l=function(){this.nodeMap=new Sr,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};_l.prototype.find=function(t){return this.nodeMap.get(t)},_l.prototype.addNode=function(){if(arguments[0]instanceof nu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof vl){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},_l.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},_l.prototype.iterator=function(){return this.nodeMap.values().iterator()},_l.prototype.values=function(){return this.nodeMap.values()},_l.prototype.getBoundaryNodes=function(t){for(var e=new nc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===su.BOUNDARY&&e.add(r)}return e},_l.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var bl=function(){},xl={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.isNorthern=function(t){return t===bl.NE||t===bl.NW},bl.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},bl.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},bl.isInHalfPlane=function(t,e){return e===bl.SE?t===bl.SE||t===bl.SW:t===e||t===e+1},bl.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ka("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?bl.NE:bl.SE:e>=0?bl.NW:bl.SW}if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Ka("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?bl.NE:bl.SE:r.y>=n.y?bl.NW:bl.SW}},xl.NE.get=function(){return 0},xl.NW.get=function(){return 1},xl.SW.get=function(){return 2},xl.SE.get=function(){return 3},Object.defineProperties(bl,xl);var wl=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};wl.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Gu.computeOrientation(t._p0,t._p1,this._p1)},wl.prototype.getDy=function(){return this._dy},wl.prototype.getCoordinate=function(){return this._p0},wl.prototype.setNode=function(t){this._node=t},wl.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},wl.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},wl.prototype.getDirectedCoordinate=function(){return this._p1},wl.prototype.getDx=function(){return this._dx},wl.prototype.getLabel=function(){return this._label},wl.prototype.getEdge=function(){return this._edge},wl.prototype.getQuadrant=function(){return this._quadrant},wl.prototype.getNode=function(){return this._node},wl.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},wl.prototype.computeLabel=function(t){},wl.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=bl.quadrant(this._dx,this._dy),Nu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},wl.prototype.interfaces_=function(){return[Qa]},wl.prototype.getClass=function(){return wl};var El=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new pl(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new al("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,il.LEFT)===su.INTERIOR&&this._label.getLocation(e,il.RIGHT)===su.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[il.LEFT]+"/"+this._depth[il.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,su.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,su.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===il.LEFT&&(r=-1);var i=il.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===su.EXTERIOR&&e===su.INTERIOR?1:t===su.INTERIOR&&e===su.EXTERIOR?-1:0},e}(wl),Cl=function(){};Cl.prototype.createNode=function(t){return new vl(t,null)},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Ol=function(){if(this._edges=new nc,this._nodes=null,this._edgeEndList=new nc,0===arguments.length)this._nodes=new _l(new Cl);else if(1===arguments.length){var t=arguments[0];this._nodes=new _l(t)}};Ol.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ol.prototype.find=function(t){return this._nodes.find(t)},Ol.prototype.addNode=function(){if(arguments[0]instanceof vl){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof nu){var e=arguments[0];return this._nodes.addNode(e)}},Ol.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ol.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ol.prototype.debugPrintln=function(t){wu.out.println(t)},Ol.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===su.BOUNDARY},Ol.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ol.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Gu.computeOrientation(t,e,r)===Gu.COLLINEAR&&bl.quadrant(t,e)===bl.quadrant(n,r)},Ol.prototype.getEdgeEnds=function(){return this._edgeEndList},Ol.prototype.debugPrint=function(t){wu.out.print(t)},Ol.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ol.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ol.prototype.insertEdge=function(t){this._edges.add(t)},Ol.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ol.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new El(n,!0),i=new El(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ol.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ol.prototype.getNodes=function(){return this._nodes.values()},Ol.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Ol.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Sl=function(){this._geometryFactory=null,this._shellList=new nc;var t=arguments[0];this._geometryFactory=t};Sl.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Sl.prototype.computePolygons=function(t){for(var e=new nc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Sl.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new al("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Sl.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new nc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Sl.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Sl.prototype.buildMaximalEdgeRings=function(t){for(var e=new nc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new ml(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Sl.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Sl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Sl.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&Gu.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=u)}return o},Sl.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Nu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Sl.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ol.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new nc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl};var Il=function(){};Il.prototype.getBounds=function(){},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il};var Tl=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Tl.prototype.getItem=function(){return this._item},Tl.prototype.getBounds=function(){return this._bounds},Tl.prototype.interfaces_=function(){return[Il,mr]},Tl.prototype.getClass=function(){return Tl};var Pl=function(){this._size=null,this._items=null,this._size=0,this._items=new nc,this._items.add(null)};Pl.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Pl.prototype.size=function(){return this._size},Pl.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Pl.prototype.clear=function(){this._size=0,this._items.clear()},Pl.prototype.isEmpty=function(){return 0===this._size},Pl.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Rl=function(){};Rl.prototype.visitItem=function(t){},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl};var Ll=function(){};Ll.prototype.insert=function(t,e){},Ll.prototype.remove=function(t,e){},Ll.prototype.query=function(){},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll};var Ml=function(){if(this._childBoundables=new nc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Nl={serialVersionUID:{configurable:!0}};Ml.prototype.getLevel=function(){return this._level},Ml.prototype.size=function(){return this._childBoundables.size()},Ml.prototype.getChildBoundables=function(){return this._childBoundables},Ml.prototype.addChildBoundable=function(t){Nu.isTrue(null===this._bounds),this._childBoundables.add(t)},Ml.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ml.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ml.prototype.interfaces_=function(){return[Il,mr]},Ml.prototype.getClass=function(){return Ml},Nl.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ml,Nl);var jl=function(){};jl.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},jl.min=function(t){return jl.sort(t),t.get(0)},jl.sort=function(t,e){var n=t.toArray();e?mc.sort(n,e):mc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},jl.singletonList=function(t){var e=new nc;return e.add(t),e};var Dl=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Dl.prototype.expandToQueue=function(t,e){var n=Dl.isComposite(this._boundable1),r=Dl.isComposite(this._boundable2);if(n&&r)return Dl.area(this._boundable1)>Dl.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Ka("neither boundable is composite")},Dl.prototype.isLeaves=function(){return!(Dl.isComposite(this._boundable1)||Dl.isComposite(this._boundable2))},Dl.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Dl.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new Dl(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},Dl.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Dl.prototype.getDistance=function(){return this._distance},Dl.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Dl.prototype.interfaces_=function(){return[Qa]},Dl.prototype.getClass=function(){return Dl},Dl.area=function(t){return t.getBounds().getArea()},Dl.isComposite=function(t){return t instanceof Ml};var Al=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new nc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Nu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Fl={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Al.prototype.getNodeCapacity=function(){return this._nodeCapacity},Al.prototype.lastNode=function(t){return t.get(t.size()-1)},Al.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ml?t+=this.size(n):n instanceof Tl&&(t+=1)}return t}},Al.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Tl&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Al.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new nc:t}if(1===arguments.length){for(var e=arguments[0],n=new nc,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ml){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Tl?n.add(i.getItem()):Nu.shouldNeverReachHere()}return n.size()<=0?null:n}},Al.prototype.insert=function(t,e){Nu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Tl(t,e))},Al.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new nc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(Nu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ml?this.boundablesAtLevel(n,s,i):(Nu.isTrue(s instanceof Tl),-1===n&&i.add(s))}return null}},Al.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new nc;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(uu(arguments[2],Rl)&&arguments[0]instanceof Object&&arguments[1]instanceof Ml)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var c=a.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Ml?this.query(i,c,s):c instanceof Tl?s.visitItem(c.getItem()):Nu.shouldNeverReachHere())}else if(uu(arguments[2],ec)&&arguments[0]instanceof Object&&arguments[1]instanceof Ml)for(var l=arguments[0],h=arguments[1],p=arguments[2],f=h.getChildBoundables(),g=0;g<f.size();g++){var d=f.get(g);this.getIntersectsOp().intersects(d.getBounds(),l)&&(d instanceof Ml?this.query(l,d,p):d instanceof Tl?p.add(d.getItem()):Nu.shouldNeverReachHere())}},Al.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Al.prototype.getRoot=function(){return this.build(),this._root},Al.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ml&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},Al.prototype.createHigherLevels=function(t,e){Nu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Al.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ml){var r=this.depth(n);r>t&&(t=r)}}return t+1}},Al.prototype.createParentBoundables=function(t,e){Nu.isTrue(!t.isEmpty());var n=new nc;n.add(this.createNode(e));var r=new nc(t);jl.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Al.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Al.prototype.interfaces_=function(){return[mr]},Al.prototype.getClass=function(){return Al},Al.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Fl.IntersectsOp.get=function(){return kl},Fl.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Fl.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Al,Fl);var kl=function(){},Gl=function(){};Gl.prototype.distance=function(t,e){},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var ol=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Nu.isTrue(t.length>0);for(var n=new nc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Bl(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new nc;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(uu(arguments[2],Rl)&&arguments[0]instanceof Object&&arguments[1]instanceof Ml){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(uu(arguments[2],ec)&&arguments[0]instanceof Object&&arguments[1]instanceof Ml){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Nu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new nc(t);jl.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(uu(arguments[0],Gl)){var t=arguments[0],n=new Dl(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Dl){var r=arguments[0];return this.nearestNeighbour(r,Za.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&uu(arguments[1],Gl)){var i=arguments[0],o=arguments[1],s=new Dl(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof Dl&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=null,l=new Pl;for(l.add(a);!l.isEmpty()&&u>0;){var h=l.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,c=h):h.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],m=new Tl(f,g),y=new Dl(this.getRoot(),m,d);return this.nearestNeighbour(y)[0]}},e.prototype.interfaces_=function(){return[Ll,mr]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Bl},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Al),Bl=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Cu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ml),zl=function(){};zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.relativeSign=function(t,e){return t<e?-1:t>e?1:0},zl.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=zl.relativeSign(e.x,n.x),i=zl.relativeSign(e.y,n.y);switch(t){case 0:return zl.compareValue(r,i);case 1:return zl.compareValue(i,r);case 2:return zl.compareValue(i,-r);case 3:return zl.compareValue(-r,i);case 4:return zl.compareValue(-r,-i);case 5:return zl.compareValue(-i,-r);case 6:return zl.compareValue(-i,r);case 7:return zl.compareValue(r,-i)}return Nu.shouldNeverReachHere("invalid octant value"),0},zl.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ul=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new nu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ul.prototype.getCoordinate=function(){return this.coord},ul.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ul.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:zl.compare(this._segmentOctant,this.coord,e.coord)},ul.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ul.prototype.isInterior=function(){return this._isInterior},ul.prototype.interfaces_=function(){return[Qa]},ul.prototype.getClass=function(){return ul};var Ul=function(){this._nodeMap=new Sr,this._edge=null;var t=arguments[0];this._edge=t};Ul.prototype.getSplitCoordinates=function(){var t=new rc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Ul.prototype.addCollapsedNodes=function(){var t=new nc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Ul.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ul.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new pu(e+1))}},Ul.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new nu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new nu(e.coord))},Ul.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ul.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Ul.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Ul.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new pu(e[0])),r=i}},Ul.prototype.getEdge=function(){return this._edge},Ul.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Ul.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new nu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new nu(e.coord)),new Xl(o,this._edge.getData())},Ul.prototype.add=function(t,e){var n=new ul(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Nu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Ul.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Lu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Lu("bad split edge end point at "+i)},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var ql=function(){};ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Ka("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new Ka("Cannot compute the octant for two identical points "+i);return ql.octant(s,a)}};var Vl=function(){};Vl.prototype.getCoordinates=function(){},Vl.prototype.size=function(){},Vl.prototype.getCoordinate=function(t){},Vl.prototype.isClosed=function(){},Vl.prototype.setData=function(t){},Vl.prototype.getData=function(){},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Yl=function(){};Yl.prototype.addIntersection=function(t,e){},Yl.prototype.interfaces_=function(){return[Vl]},Yl.prototype.getClass=function(){return Yl};var Xl=function(){this._nodeList=new Ul(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Xl.prototype.getCoordinates=function(){return this._pts},Xl.prototype.size=function(){return this._pts.length},Xl.prototype.getCoordinate=function(t){return this._pts[t]},Xl.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xl.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Xl.prototype.setData=function(t){this._data=t},Xl.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ql.octant(t,e)},Xl.prototype.getData=function(){return this._data},Xl.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new nu(n.getIntersection(i));this.addIntersection(o,r)}},Xl.prototype.toString=function(){return Ru.toLineString(new Bc(this._pts))},Xl.prototype.getNodeList=function(){return this._nodeList},Xl.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Xl.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Xl.prototype.interfaces_=function(){return[Yl]},Xl.prototype.getClass=function(){return Xl},Xl.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new nc;return Xl.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var Wl=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new nu,this.p1=new nu;else if(1===arguments.length){var t=arguments[0];this.p0=new nu(t.p0),this.p1=new nu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new nu(e,n),this.p1=new nu(r,i)}},dl={serialVersionUID:{configurable:!0}};Wl.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Wl.prototype.orientationIndex=function(){if(arguments[0]instanceof Wl){var t=arguments[0],e=Gu.orientationIndex(this.p0,this.p1,t.p0),n=Gu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof nu){var r=arguments[0];return Gu.orientationIndex(this.p0,this.p1,r)}},Wl.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Wl.prototype.isVertical=function(){return this.p0.x===this.p1.x},Wl.prototype.equals=function(t){if(!(t instanceof Wl))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Wl.prototype.intersection=function(t){var e=new Au;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Wl.prototype.project=function(){if(arguments[0]instanceof nu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new nu(t);var e=this.projectionFactor(t),n=new nu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Wl){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Wl(s,a)}},Wl.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Wl.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Wl.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Wl.prototype.distancePerpendicular=function(t){return Gu.distancePointLinePerpendicular(t,this.p0,this.p1)},Wl.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Wl.prototype.midPoint=function(){return Wl.midPoint(this.p0,this.p1)},Wl.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?Za.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Wl.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=Za.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Wl.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Wl.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Wl.prototype.getLength=function(){return this.p0.distance(this.p1)},Wl.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Wl.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Wl.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Wl.prototype.lineIntersection=function(t){try{return Eu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof xu))throw t}return null},Wl.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Wl.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new nu(n-u,r+a)},Wl.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Wl.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Za.isNaN(e))&&(e=1),e},Wl.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Wl.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Wl.prototype.distance=function(){if(arguments[0]instanceof Wl){var t=arguments[0];return Gu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof nu){var e=arguments[0];return Gu.distancePointLine(e,this.p0,this.p1)}},Wl.prototype.pointAlong=function(t){var e=new nu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Wl.prototype.hashCode=function(){var t=Za.doubleToLongBits(this.p0.x);t^=31*Za.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Za.doubleToLongBits(this.p1.x);return n^=31*Za.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Wl.prototype.interfaces_=function(){return[Qa,mr]},Wl.prototype.getClass=function(){return Wl},Wl.midPoint=function(t,e){return new nu((t.x+e.x)/2,(t.y+e.y)/2)},dl.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Wl,dl);var Hl=function(){this.tempEnv1=new Cu,this.tempEnv2=new Cu,this._overlapSeg1=new Wl,this._overlapSeg2=new Wl};Hl.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var $l=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};$l.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},$l.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},$l.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},$l.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},$l.prototype.setId=function(t){this._id=t},$l.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},$l.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Cu(t,e)}return this._env},$l.prototype.getEndIndex=function(){return this._end},$l.prototype.getStartIndex=function(){return this._start},$l.prototype.getContext=function(){return this._context},$l.prototype.getId=function(){return this._id},$l.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l};var Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},Kl.getChainStartIndices=function(t){var e=0,n=new nc;n.add(new pu(e));do{var r=Kl.findChainEnd(t,e);n.add(new pu(r)),e=r}while(e<t.length-1);return Kl.toIntArray(n)},Kl.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=bl.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||bl.quadrant(t[i-1],t[i])===r);)i++;return i-1},Kl.getChains=function(){if(1===arguments.length){var t=arguments[0];return Kl.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new nc,i=Kl.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new $l(e,i[o],i[o+1],n);r.add(s)}return r}},Kl.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Zl=function(){};Zl.prototype.computeNodes=function(t){},Zl.prototype.getNodedSubstrings=function(){},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Jl=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Jl.prototype.setSegmentIntersector=function(t){this._segInt=t},Jl.prototype.interfaces_=function(){return[Zl]},Jl.prototype.getClass=function(){return Jl};var Ql=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new nc,this._index=new ol,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Xl.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Kl.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new eh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return eh},Object.defineProperties(e,n),e}(Jl),eh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hl),nh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},ih={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};nh.prototype.getEndCapStyle=function(){return this._endCapStyle},nh.prototype.isSingleSided=function(){return this._isSingleSided},nh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=nh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=nh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==nh.JOIN_ROUND&&(this._quadrantSegments=nh.DEFAULT_QUADRANT_SEGMENTS)},nh.prototype.getJoinStyle=function(){return this._joinStyle},nh.prototype.setJoinStyle=function(t){this._joinStyle=t},nh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},nh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},nh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},nh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},nh.prototype.getMitreLimit=function(){return this._mitreLimit},nh.prototype.setMitreLimit=function(t){this._mitreLimit=t},nh.prototype.setSingleSided=function(t){this._isSingleSided=t},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},nh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},ih.CAP_ROUND.get=function(){return 1},ih.CAP_FLAT.get=function(){return 2},ih.CAP_SQUARE.get=function(){return 3},ih.JOIN_ROUND.get=function(){return 1},ih.JOIN_MITRE.get=function(){return 2},ih.JOIN_BEVEL.get=function(){return 3},ih.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},ih.DEFAULT_MITRE_LIMIT.get=function(){return 5},ih.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(nh,ih);var rh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Gu.COUNTERCLOCKWISE,this._inputLine=t||null},oh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};rh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},rh.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=rh.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},rh.prototype.isShallowConcavity=function(t,e,n,r){return Gu.computeOrientation(t,e,n)===this._angleOrientation&&Gu.distancePointLine(e,t,n)<r},rh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/rh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},rh.prototype.isConcave=function(t,e,n){var r=Gu.computeOrientation(t,e,n)===this._angleOrientation;return r},rh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Gu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},rh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===rh.DELETE;)e++;return e},rh.prototype.isShallow=function(t,e,n,r){return Gu.distancePointLine(e,t,n)<r},rh.prototype.collapseLine=function(){for(var t=new rc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==rh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},rh.simplify=function(t,e){return new rh(t).simplify(e)},oh.INIT.get=function(){return 0},oh.DELETE.get=function(){return 1},oh.KEEP.get=function(){return 1},oh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(rh,oh);var sh=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new nc},ah={COORDINATE_ARRAY_TYPE:{configurable:!0}};sh.prototype.getCoordinates=function(){return this._ptList.toArray(sh.COORDINATE_ARRAY_TYPE)},sh.prototype.setPrecisionModel=function(t){this._precisionModel=t},sh.prototype.addPt=function(t){var e=new nu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},sh.prototype.revere=function(){},sh.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},sh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},sh.prototype.toString=function(){return(new $c).createLineString(this.getCoordinates()).toString()},sh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new nu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},sh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},ah.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(sh,ah);var uh=function(){},ch={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},uh.toDegrees=function(t){return 180*t/Math.PI},uh.normalize=function(t){for(;t>Math.PI;)t-=uh.PI_TIMES_2;for(;t<=-Math.PI;)t+=uh.PI_TIMES_2;return t},uh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},uh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},uh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},uh.interiorAngle=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n);return Math.abs(i-r)},uh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=uh.PI_TIMES_2;t>=uh.PI_TIMES_2&&(t=0)}else{for(;t>=uh.PI_TIMES_2;)t-=uh.PI_TIMES_2;t<0&&(t=0)}return t},uh.angleBetween=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n);return uh.diff(r,i)},uh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},uh.toRadians=function(t){return t*Math.PI/180},uh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?uh.COUNTERCLOCKWISE:n<0?uh.CLOCKWISE:uh.NONE},uh.angleBetweenOriented=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n)-r;return i<=-Math.PI?i+uh.PI_TIMES_2:i>Math.PI?i-uh.PI_TIMES_2:i},ch.PI_TIMES_2.get=function(){return 2*Math.PI},ch.PI_OVER_2.get=function(){return Math.PI/2},ch.PI_OVER_4.get=function(){return Math.PI/4},ch.COUNTERCLOCKWISE.get=function(){return Gu.COUNTERCLOCKWISE},ch.CLOCKWISE.get=function(){return Gu.CLOCKWISE},ch.NONE.get=function(){return Gu.COLLINEAR},Object.defineProperties(uh,ch);var lh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Wl,this._seg1=new Wl,this._offset0=new Wl,this._offset1=new Wl,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Au,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===nh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},hh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};lh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Gu.computeOrientation(this._s0,this._s1,this._s2),r=n===Gu.CLOCKWISE&&this._side===il.LEFT||n===Gu.COUNTERCLOCKWISE&&this._side===il.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},lh.prototype.addLineEndCap=function(t,e){var n=new Wl(t,e),r=new Wl;this.computeOffsetSegment(n,il.LEFT,this._distance,r);var i=new Wl;this.computeOffsetSegment(n,il.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case nh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Gu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case nh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case nh.CAP_SQUARE:var u=new nu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new nu(r.p1.x+u.x,r.p1.y+u.y),l=new nu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},lh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},lh.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Eu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof xu))throw t;o=new nu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},lh.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===Gu.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},lh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*lh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===nh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===nh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},lh.prototype.createSquare=function(t){this._segList.addPt(new nu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new nu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new nu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new nu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},lh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},lh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},lh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},lh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},lh.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=uh.angle(i,this._seg0.p0),s=uh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=uh.normalize(o+s),u=uh.normalize(a+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(s)),h=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),f=new nu(h,p),g=new Wl(i,f),d=g.pointAlongOffset(1,l),m=g.pointAlongOffset(1,-l);this._side===il.LEFT?(this._segList.addPt(d),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(d))},lh.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===il.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},lh.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Gu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new nu;c<s;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},lh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*lh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new nu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new nu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},lh.prototype.createCircle=function(t){var e=new nu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},lh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},lh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new sh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*lh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},lh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===nh.JOIN_BEVEL||this._bufParams.getJoinStyle()===nh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Gu.CLOCKWISE,this._distance))},lh.prototype.closeRing=function(){this._segList.closeRing()},lh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},hh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},hh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},hh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},hh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(lh,hh);var ph=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};ph.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&oc.reverse(o),o},ph.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=rh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],il.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=rh.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],il.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},ph.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===il.RIGHT&&(r=-r);var i=rh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},ph.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=rh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],il.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=rh.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],il.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},ph.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case nh.CAP_ROUND:e.createCircle(t);break;case nh.CAP_SQUARE:e.createSquare(t)}},ph.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},ph.prototype.getBufferParameters=function(){return this._bufParams},ph.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},ph.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return ph.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},ph.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=rh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],il.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=rh.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],il.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},ph.prototype.getSegGen=function(t){return new lh(this._precisionModel,this._bufParams,t)},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},ph.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new nu(t[n]);return e};var fh=function(){this._subgraphs=null,this._seg=new Wl,this._cga=new Gu;var t=arguments[0];this._subgraphs=t},dh={DepthSegment:{configurable:!0}};fh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new nc,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(uu(arguments[2],ec)&&arguments[0]instanceof nu&&arguments[1]instanceof El){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Gu.computeOrientation(this._seg.p0,this._seg.p1,o)===Gu.RIGHT)){var l=s.getDepth(il.LEFT);this._seg.p0.equals(u[c])||(l=s.getDepth(il.RIGHT));var h=new gh(this._seg,l);a.add(h)}}else if(uu(arguments[2],ec)&&arguments[0]instanceof nu&&uu(arguments[1],ec))for(var p=arguments[0],f=arguments[1],g=arguments[2],d=f.iterator();d.hasNext();){var m=d.next();m.isForward()&&this.findStabbedSegments(p,m,g)}},fh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:jl.min(e)._leftDepth},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},dh.DepthSegment.get=function(){return gh},Object.defineProperties(fh,dh);var gh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Wl(t),this._leftDepth=e};gh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},gh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},gh.prototype.toString=function(){return this._upwardSeg.toString()},gh.prototype.interfaces_=function(){return[Qa]},gh.prototype.getClass=function(){return gh};var mh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};mh.prototype.area=function(){return mh.area(this.p0,this.p1,this.p2)},mh.prototype.signedArea=function(){return mh.signedArea(this.p0,this.p1,this.p2)},mh.prototype.interpolateZ=function(t){if(null===t)throw new Ka("Supplied point is null.");return mh.interpolateZ(t,this.p0,this.p1,this.p2)},mh.prototype.longestSideLength=function(){return mh.longestSideLength(this.p0,this.p1,this.p2)},mh.prototype.isAcute=function(){return mh.isAcute(this.p0,this.p1,this.p2)},mh.prototype.circumcentre=function(){return mh.circumcentre(this.p0,this.p1,this.p2)},mh.prototype.area3D=function(){return mh.area3D(this.p0,this.p1,this.p2)},mh.prototype.centroid=function(){return mh.centroid(this.p0,this.p1,this.p2)},mh.prototype.inCentre=function(){return mh.inCentre(this.p0,this.p1,this.p2)},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},mh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},mh.det=function(t,e,n,r){return t*r-e*n},mh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,h=t.x-i,p=t.y-o,f=(c*h-a*p)/l,g=(-u*h+s*p)/l;return e.z+f*(n.z-e.z)+g*(r.z-e.z)},mh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},mh.isAcute=function(t,e,n){return!!uh.isAcute(t,e,n)&&!!uh.isAcute(e,n,t)&&!!uh.isAcute(n,t,e)},mh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*mh.det(o,s,a,u),l=mh.det(s,o*o+s*s,u,a*a+u*u),h=mh.det(o,o*o+s*s,a,a*a+u*u);return new nu(r-l/c,i+h/c)},mh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Eu(t.x+n/2,t.y+r/2,1),o=new Eu(t.x-r+n/2,t.y+n+r/2,1);return new Eu(i,o)},mh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new nu(t.x+i*o,t.y+i*s)},mh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,h=r*a-i*s,p=c*c+l*l+h*h,f=Math.sqrt(p)/2;return f},mh.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new nu(r,i)},mh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new nu(a,u)};var yh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new nc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};yh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,su.EXTERIOR,su.INTERIOR)},yh.prototype.addPolygon=function(t){var e=this._distance,n=il.LEFT;this._distance<0&&(e=-this._distance,n=il.RIGHT);var r=t.getExteriorRing(),i=oc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,su.EXTERIOR,su.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=oc.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,il.opposite(n),su.INTERIOR,su.EXTERIOR)}},yh.prototype.isTriangleErodedCompletely=function(t,e){var n=new mh(t[0],t[1],t[2]),r=n.inCentre();return Gu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},yh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=oc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,su.EXTERIOR,su.INTERIOR)},yh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Xl(t,new pl(0,su.BOUNDARY,e,n));this._curveList.add(r)},yh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},yh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<Nc.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=Nc.MINIMUM_VALID_SIZE&&Gu.isCCW(t)&&(o=i,s=r,n=il.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},yh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Mc?this.addPolygon(t):t instanceof Tc?this.addLineString(t):t instanceof Rc?this.addPoint(t):t instanceof th?this.addCollection(t):t instanceof wc?this.addCollection(t):t instanceof jc?this.addCollection(t):t instanceof xc&&this.addCollection(t)},yh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},yh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var vh=function(){};vh.prototype.locate=function(t){},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var _h=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};_h.prototype.next=function(){if(this._atStart)return this._atStart=!1,_h.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new yr;var t=this._parent.getGeometryN(this._index++);return t instanceof xc?(this._subcollectionIterator=new _h(t),this._subcollectionIterator.next()):t},_h.prototype.remove=function(){throw new Error(this.getClass().getName())},_h.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},_h.prototype.interfaces_=function(){return[tc]},_h.prototype.getClass=function(){return _h},_h.isAtomic=function(t){return!(t instanceof xc)};var bh=function(){this._geom=null;var t=arguments[0];this._geom=t};bh.prototype.locate=function(t){return bh.locate(t,this._geom)},bh.prototype.interfaces_=function(){return[vh]},bh.prototype.getClass=function(){return bh},bh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Gu.isPointInRing(t,e.getCoordinates())},bh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!bh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(bh.isPointInRing(t,i))return!1}return!0},bh.containsPoint=function(t,e){if(e instanceof Mc)return bh.containsPointInPolygon(t,e);if(e instanceof xc)for(var n=new _h(e);n.hasNext();){var r=n.next();if(r!==e&&bh.containsPoint(t,r))return!0}return!1},bh.locate=function(t,e){return e.isEmpty()?su.EXTERIOR:bh.containsPoint(t,e)?su.INTERIOR:su.EXTERIOR};var xh=function(){this._edgeMap=new Sr,this._edgeList=null,this._ptInAreaLocation=[su.NONE,su.NONE]};xh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},xh.prototype.propagateSideLabels=function(t){for(var e=su.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,il.LEFT)!==su.NONE&&(e=r.getLocation(t,il.LEFT))}if(e===su.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,il.ON)===su.NONE&&a.setLocation(t,il.ON,i),a.isArea(t)){var u=a.getLocation(t,il.LEFT),c=a.getLocation(t,il.RIGHT);if(c!==su.NONE){if(c!==i)throw new al("side location conflict",s.getCoordinate());u===su.NONE&&Nu.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Nu.isTrue(a.getLocation(t,il.LEFT)===su.NONE,"found single null side"),a.setLocation(t,il.RIGHT,i),a.setLocation(t,il.LEFT,i)}}},xh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},xh.prototype.print=function(t){wu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},xh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},xh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,il.LEFT);Nu.isTrue(r!==su.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Nu.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,il.LEFT),u=s.getLocation(t,il.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},xh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},xh.prototype.iterator=function(){return this.getEdges().iterator()},xh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new nc(this._edgeMap.values())),this._edgeList},xh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===su.NONE&&(this._ptInAreaLocation[t]=bh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},xh.prototype.toString=function(){var t=new hu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},xh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},xh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===su.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=su.NONE;if(e[u])c=su.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},xh.prototype.getDegree=function(){return this._edgeMap.size()},xh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh};var wh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new al("no outgoing dirEdge found",this.getCoordinate());Nu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return bl.isNorthern(i)&&bl.isNorthern(o)?n:bl.isNorthern(i)||bl.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Nu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){wu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new nc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(il.LEFT),r=t.getDepth(il.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new al("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var c=this._edgeList.get(u);c.setEdgeDepths(il.RIGHT,a),a=c.getDepth(il.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Nu.isTrue(null!==e,"found null for first outgoing dirEdge"),Nu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=su.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=su.INTERIOR;break}if(r.isInResult()){t=su.EXTERIOR;break}}}if(t===su.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===su.INTERIOR):(s.isInResult()&&(i=su.EXTERIOR),a.isInResult()&&(i=su.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new pl(su.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==su.INTERIOR&&o!==su.BOUNDARY||this._label.setLocation(i,su.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xh),Eh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new vl(t,new wh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cl),Ch=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Ch.prototype.compareTo=function(t){var e=t;return Ch.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Ch.prototype.interfaces_=function(){return[Qa]},Ch.prototype.getClass=function(){return Ch},Ch.orientation=function(t){return 1===oc.increasingDirection(t)},Ch.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===s,p=(c+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Oh=function(){this._edges=new nc,this._ocaMap=new Sr};Oh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Oh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Oh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Oh.prototype.iterator=function(){return this._edges.iterator()},Oh.prototype.getEdges=function(){return this._edges},Oh.prototype.get=function(t){return this._edges.get(t)},Oh.prototype.findEqualEdge=function(t){var e=new Ch(t.getCoordinates());return this._ocaMap.get(e)},Oh.prototype.add=function(t){this._edges.add(t);var e=new Ch(t.getCoordinates());this._ocaMap.put(e,t)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Sh=function(){};Sh.prototype.processIntersections=function(t,e,n,r){},Sh.prototype.isDone=function(){},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Ih=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Ih.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Ih.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Ih.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ih.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ih.prototype.getLineIntersector=function(){return this._li},Ih.prototype.hasProperIntersection=function(){return this._hasProper},Ih.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ih.prototype.hasIntersection=function(){return this._hasIntersection},Ih.prototype.isDone=function(){return!1},Ih.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ih.prototype.interfaces_=function(){return[Sh]},Ih.prototype.getClass=function(){return Ih},Ih.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Th=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new nu(t),this.segmentIndex=e,this.dist=n};Th.prototype.getSegmentIndex=function(){return this.segmentIndex},Th.prototype.getCoordinate=function(){return this.coord},Th.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Th.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Th.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Th.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Th.prototype.getDistance=function(){return this.dist},Th.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Th.prototype.interfaces_=function(){return[Qa]},Th.prototype.getClass=function(){return Th};var Ph=function(){this._nodeMap=new Sr,this.edge=null;var t=arguments[0];this.edge=t};Ph.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ph.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ph.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Ph.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Ph.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new nu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new jh(o,new pl(this.edge._label))},Ph.prototype.add=function(t,e,n){var r=new Th(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Ph.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph};var Rh=function(){};Rh.prototype.getChainStartIndices=function(t){var e=0,n=new nc;n.add(new pu(e));do{var r=this.findChainEnd(t,e);n.add(new pu(r)),e=r}while(e<t.length-1);return Rh.toIntArray(n)},Rh.prototype.findChainEnd=function(t,e){for(var n=bl.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&bl.quadrant(t[r-1],t[r])===n;)r++;return r-1},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Lh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Cu,this.env2=new Cu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Rh;this.startIndex=e.getChainStartIndices(this.pts)};Lh.prototype.getCoordinates=function(){return this.pts},Lh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Lh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Lh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),d=Math.trunc((a+u)/2);i<g&&(a<d&&this.computeIntersectsForChain(i,g,s,a,d,c),d<u&&this.computeIntersectsForChain(i,g,s,d,u,c)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,c),d<u&&this.computeIntersectsForChain(g,o,s,d,u,c))}},Lh.prototype.getStartIndexes=function(){return this.startIndex},Lh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Mh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Nh={NULL_VALUE:{configurable:!0}};Mh.prototype.getDepth=function(t,e){return this._depth[t][e]},Mh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Mh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Mh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Mh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Mh.NULL_VALUE}},Mh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Mh.prototype.getDelta=function(t){return this._depth[t][il.RIGHT]-this._depth[t][il.LEFT]},Mh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?su.EXTERIOR:su.INTERIOR},Mh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Mh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==su.EXTERIOR&&r!==su.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Mh.depthAtLocation(r):this._depth[e][n]+=Mh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===su.INTERIOR&&this._depth[i][o]++}},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.depthAtLocation=function(t){return t===su.EXTERIOR?0:t===su.INTERIOR?1:Mh.NULL_VALUE},Nh.NULL_VALUE.get=function(){return-1},Object.defineProperties(Mh,Nh);var jh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Ph(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Mh,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,pl.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Lh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Cu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new nu(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new hu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,il.ON),e.getLocation(1,il.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,il.LEFT),e.getLocation(1,il.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,il.RIGHT),e.getLocation(1,il.RIGHT),2))},e}(yl),Dh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Oh,this._bufParams=t||null};Dh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Dh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new pl(t.getLabel())).flip(),n.merge(r);var i=Dh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Dh.depthDelta(t.getLabel()))},Dh.prototype.buildSubgraphs=function(t,e){for(var n=new nc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new fh(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Dh.prototype.createSubgraphs=function(t){for(var e=new nc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ll;i.create(r),e.add(i)}}return jl.sort(e,jl.reverseOrder()),e},Dh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Dh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ql,n=new Au;return n.setPrecisionModel(t),e.setSegmentIntersector(new Ih(n)),e},Dh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new ph(n,this._bufParams),i=new yh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ol(new Eh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Sl(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},Dh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new jh(i.getCoordinates(),new pl(s));this.insertUniqueEdge(a)}}},Dh.prototype.setNoder=function(t){this._workingNoder=t},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.depthDelta=function(t){var e=t.getLocation(0,il.LEFT),n=t.getLocation(0,il.RIGHT);return e===su.INTERIOR&&n===su.EXTERIOR?1:e===su.EXTERIOR&&n===su.INTERIOR?-1:0},Dh.convertSegStrings=function(t){for(var e=new $c,n=new nc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var rp=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rp.prototype.rescale=function(){if(uu(arguments[0],Ju))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&wu.out.println(n)}},rp.prototype.scale=function(){if(uu(arguments[0],Ju)){for(var t=arguments[0],e=new nc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Xl(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new nu(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return oc.removeRepeatedPoints(o)}},rp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rp.prototype.interfaces_=function(){return[Zl]},rp.prototype.getClass=function(){return rp};var Ah=function(){this._li=new Au,this._segStrings=null;var t=arguments[0];this._segStrings=t},Fh={fact:{configurable:!0}};Ah.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Lu("found endpt/interior pt intersection at index "+o+" :pt "+n)},Ah.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(l===p&&h===f)return null;var g=l.getCoordinates()[h],d=l.getCoordinates()[h+1],m=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(g,d,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,d)||this.hasInteriorIntersection(this._li,m,y)))throw new Lu("found non-noded intersection at "+g+"-"+d+" and "+m+"-"+y)}},Ah.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Ah.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Ah.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Ah.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Lu("found non-noded collapse at "+Ah.fact.createLineString([t,e,n]))},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Fh.fact.get=function(){return new $c},Object.defineProperties(Ah,Fh);var kh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Ka("Scale factor must be non-zero");1!==e&&(this._pt=new nu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new nu,this._p1Scaled=new nu),this.initCorners(this._pt)},Gh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};kh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Nu.isTrue(!(s&&a),"Found bad envelope test"),a},kh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new nu(this._maxx,this._maxy),this._corner[1]=new nu(this._minx,this._maxy),this._corner[2]=new nu(this._minx,this._miny),this._corner[3]=new nu(this._maxx,this._miny)},kh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},kh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},kh.prototype.getCoordinate=function(){return this._originalPt},kh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},kh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=kh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Cu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},kh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},kh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},kh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},Gh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(kh,Gh);var Bh=function(){this.tempEnv1=new Cu,this.selectedSegment=new Wl};Bh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var zh=function(){this._index=null;var t=arguments[0];this._index=t},Uh={HotPixelSnapAction:{configurable:!0}};zh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new qh(e,n,r);return this._index.query(i,{interfaces_:function(){return[Rl]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},Uh.HotPixelSnapAction.get=function(){return qh},Object.defineProperties(zh,Uh);var qh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bh),Vh=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new nc};Vh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Vh.prototype.isDone=function(){return!1},Vh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Vh.prototype.interfaces_=function(){return[Sh]},Vh.prototype.getClass=function(){return Vh};var Yh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Au,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Yh.prototype.checkCorrectness=function(t){var e=Xl.getNodedSubstrings(t),n=new Ah(e);try{n.checkValid()}catch(t){if(!(t instanceof bu))throw t;t.printStackTrace()}},Yh.prototype.getNodedSubstrings=function(){return Xl.getNodedSubstrings(this._nodedSegStrings)},Yh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Yh.prototype.findInteriorIntersections=function(t,e){var n=new Vh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Yh.prototype.computeVertexSnaps=function(){if(uu(arguments[0],Ju))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Xl)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new kh(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Yh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Ql,this._pointSnapper=new zh(this._noder.getIndex()),this.snapRound(t,this._li)},Yh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new kh(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Yh.prototype.interfaces_=function(){return[Zl]},Yh.prototype.getClass=function(){return Yh};var Xh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new nh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Wh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Xh.prototype.bufferFixedPrecision=function(t){var e=new rp(new Yh(new Yc(1)),t.getScale()),n=new Dh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Xh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Xh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof al))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Xh.precisionScaleFactor(this._argGeom,this._distance,n),i=new Yc(r);this.bufferFixedPrecision(i)}},Xh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Yc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Xh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Xh.prototype.bufferOriginalPrecision=function(){try{var t=new Dh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Lu))throw t;this._saveException=t}},Xh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Xh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Xh(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Uu&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Xh(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof nh&&arguments[0]instanceof Uu&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new Xh(s,u).getResultGeometry(a)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],h=arguments[2],p=arguments[3],f=new Xh(c);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(l)}},Xh.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=cu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Wh.CAP_ROUND.get=function(){return nh.CAP_ROUND},Wh.CAP_BUTT.get=function(){return nh.CAP_FLAT},Wh.CAP_FLAT.get=function(){return nh.CAP_FLAT},Wh.CAP_SQUARE.get=function(){return nh.CAP_SQUARE},Wh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Xh,Wh);var Hh=function(){this._pt=[new nu,new nu],this._distance=Za.NaN,this._isNull=!0};Hh.prototype.getCoordinates=function(){return this._pt},Hh.prototype.getCoordinate=function(t){return this._pt[t]},Hh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Hh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Hh.prototype.getDistance=function(){return this._distance},Hh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh};var $h=function(){};$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.computeDistance=function(){if(arguments[2]instanceof Hh&&arguments[0]instanceof Tc&&arguments[1]instanceof nu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Wl,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Hh&&arguments[0]instanceof Mc&&arguments[1]instanceof nu){var a=arguments[0],u=arguments[1],c=arguments[2];$h.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)$h.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Hh&&arguments[0]instanceof Uu&&arguments[1]instanceof nu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Tc)$h.computeDistance(h,p,f);else if(h instanceof Mc)$h.computeDistance(h,p,f);else if(h instanceof xc)for(var g=h,d=0;d<g.getNumGeometries();d++){var m=g.getGeometryN(d);$h.computeDistance(m,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Hh&&arguments[0]instanceof Wl&&arguments[1]instanceof nu){var y=arguments[0],v=arguments[1],_=arguments[2],x=y.closestPoint(v);_.setMinimum(x,v)}};var Kh=function(t){this._maxPtDist=new Hh,this._inputGeom=t||null},Zh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Kh.prototype.computeMaxMidpointDistance=function(t){var e=new Qh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Kh.prototype.computeMaxVertexDistance=function(t){var e=new Jh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Kh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Kh.prototype.getDistancePoints=function(){return this._maxPtDist},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Zh.MaxPointDistanceFilter.get=function(){return Jh},Zh.MaxMidpointDistanceFilter.get=function(){return Qh},Object.defineProperties(Kh,Zh);var Jh=function(t){this._maxPtDist=new Hh,this._minPtDist=new Hh,this._geom=t||null};Jh.prototype.filter=function(t){this._minPtDist.initialize(),$h.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Jh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Jh.prototype.interfaces_=function(){return[Yu]},Jh.prototype.getClass=function(){return Jh};var Qh=function(t){this._maxPtDist=new Hh,this._minPtDist=new Hh,this._geom=t||null};Qh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new nu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),$h.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Qh.prototype.isDone=function(){return!1},Qh.prototype.isGeometryChanged=function(){return!1},Qh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Qh.prototype.interfaces_=function(){return[bc]},Qh.prototype.getClass=function(){return Qh};var tp=function(t){this._comps=t||null};tp.prototype.filter=function(t){t instanceof Mc&&this._comps.add(t)},tp.prototype.interfaces_=function(){return[_c]},tp.prototype.getClass=function(){return tp},tp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return tp.getPolygons(t,new nc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Mc?n.add(e):e instanceof xc&&e.apply(new tp(n)),n}};var ep=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};ep.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Nc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Tc&&this._lines.add(t)},ep.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},ep.prototype.interfaces_=function(){return[zu]},ep.prototype.getClass=function(){return ep},ep.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(ep.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(ep.getLines(e,n))}},ep.getLines=function(){if(1===arguments.length){var t=arguments[0];return ep.getLines(t,!1)}if(2===arguments.length){if(uu(arguments[0],Ju)&&uu(arguments[1],Ju)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();ep.getLines(i,n)}return n}if(arguments[0]instanceof Uu&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new nc;return o.apply(new ep(a,s)),a}if(arguments[0]instanceof Uu&&uu(arguments[1],Ju)){var u=arguments[0],c=arguments[1];return u instanceof Tc?c.add(u):u.apply(new ep(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&uu(arguments[0],Ju)&&uu(arguments[1],Ju)){for(var l=arguments[0],h=arguments[1],p=arguments[2],f=l.iterator();f.hasNext();){var g=f.next();ep.getLines(g,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Uu&&uu(arguments[1],Ju)){var d=arguments[0],m=arguments[1],y=arguments[2];return d.apply(new ep(m,y)),m}}};var np=function(){if(this._boundaryRule=Xu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Ka("Rule must be non-null");this._boundaryRule=t}};np.prototype.locateInternal=function(){if(arguments[0]instanceof nu&&arguments[1]instanceof Mc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return su.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===su.EXTERIOR)return su.EXTERIOR;if(r===su.BOUNDARY)return su.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===su.INTERIOR)return su.EXTERIOR;if(s===su.BOUNDARY)return su.BOUNDARY}return su.INTERIOR}if(arguments[0]instanceof nu&&arguments[1]instanceof Tc){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return su.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?Gu.isOnLine(a,c)?su.INTERIOR:su.EXTERIOR:su.BOUNDARY}if(arguments[0]instanceof nu&&arguments[1]instanceof Rc){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?su.INTERIOR:su.EXTERIOR}},np.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Gu.locatePointInRing(t,e.getCoordinates()):su.EXTERIOR},np.prototype.intersects=function(t,e){return this.locate(t,e)!==su.EXTERIOR},np.prototype.updateLocationInfo=function(t){t===su.INTERIOR&&(this._isIn=!0),t===su.BOUNDARY&&this._numBoundaries++},np.prototype.computeLocation=function(t,e){if(e instanceof Rc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Tc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Mc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof wc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof jc)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof xc)for(var u=new _h(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},np.prototype.locate=function(t,e){return e.isEmpty()?su.EXTERIOR:e instanceof Tc?this.locateInternal(t,e):e instanceof Mc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?su.BOUNDARY:this._numBoundaries>0||this._isIn?su.INTERIOR:su.EXTERIOR)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},op={INSIDE_AREA:{configurable:!0}};ip.prototype.isInsideArea=function(){return this._segIndex===ip.INSIDE_AREA},ip.prototype.getCoordinate=function(){return this._pt},ip.prototype.getGeometryComponent=function(){return this._component},ip.prototype.getSegmentIndex=function(){return this._segIndex},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},op.INSIDE_AREA.get=function(){return-1},Object.defineProperties(ip,op);var sp=function(t){this._pts=t||null};sp.prototype.filter=function(t){t instanceof Rc&&this._pts.add(t)},sp.prototype.interfaces_=function(){return[_c]},sp.prototype.getClass=function(){return sp},sp.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Rc?jl.singletonList(t):sp.getPoints(t,new nc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Rc?n.add(e):e instanceof xc&&e.apply(new sp(n)),n}};var ap=function(){this._locations=null;var t=arguments[0];this._locations=t};ap.prototype.filter=function(t){(t instanceof Rc||t instanceof Tc||t instanceof Mc)&&this._locations.add(new ip(t,0,t.getCoordinate()))},ap.prototype.interfaces_=function(){return[_c]},ap.prototype.getClass=function(){return ap},ap.getLocations=function(t){var e=new nc;return t.apply(new ap(e)),e};var up=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new np,this._minDistanceLocation=null,this._minDistance=Za.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};up.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=tp.getPolygons(this._geom[e]);if(i.size()>0){var o=ap.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&uu(arguments[0],ec)&&uu(arguments[1],ec)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var l=s.get(c),h=0;h<a.size();h++)if(this.computeContainmentDistance(l,a.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ip&&arguments[1]instanceof Mc){var p=arguments[0],f=arguments[1],g=arguments[2],d=p.getCoordinate();if(su.EXTERIOR!==this._ptLocator.locate(d,f))return this._minDistance=0,g[0]=p,g[1]=new ip(f,d),null}},up.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},up.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=ep.getLines(this._geom[0]),n=ep.getLines(this._geom[1]),r=sp.getPoints(this._geom[0]),i=sp.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},up.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},up.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},up.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},up.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Tc&&arguments[1]instanceof Rc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=Gu.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new Wl(r[o],r[o+1]).closestPoint(i);n[0]=new ip(t,o,a),n[1]=new ip(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tc&&arguments[1]instanceof Tc){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=c.getCoordinates(),f=0;f<h.length-1;f++)for(var g=0;g<p.length-1;g++){var d=Gu.distanceLineLine(h[f],h[f+1],p[g],p[g+1]);if(d<this._minDistance){this._minDistance=d;var m=new Wl(h[f],h[f+1]),y=new Wl(p[g],p[g+1]),v=m.closestPoints(y);l[0]=new ip(u,f,v[0]),l[1]=new ip(c,g,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},up.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new ip(i,0,i.getCoordinate()),n[1]=new ip(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},up.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Ka("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},up.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.distance=function(t,e){return new up(t,e).distance()},up.isWithinDistance=function(t,e,n){return new up(t,e,n).distance()<=n},up.nearestPoints=function(t,e){return new up(t,e).nearestPoints()};var cp=function(){this._pt=[new nu,new nu],this._distance=Za.NaN,this._isNull=!0};cp.prototype.getCoordinates=function(){return this._pt},cp.prototype.getCoordinate=function(t){return this._pt[t]},cp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},cp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},cp.prototype.toString=function(){return Ru.toLineString(this._pt[0],this._pt[1])},cp.prototype.getDistance=function(){return this._distance},cp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var lp=function(){};lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.computeDistance=function(){if(arguments[2]instanceof cp&&arguments[0]instanceof Tc&&arguments[1]instanceof nu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Wl,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof cp&&arguments[0]instanceof Mc&&arguments[1]instanceof nu){var a=arguments[0],u=arguments[1],c=arguments[2];lp.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)lp.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof cp&&arguments[0]instanceof Uu&&arguments[1]instanceof nu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Tc)lp.computeDistance(h,p,f);else if(h instanceof Mc)lp.computeDistance(h,p,f);else if(h instanceof xc)for(var g=h,d=0;d<g.getNumGeometries();d++){var m=g.getGeometryN(d);lp.computeDistance(m,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof cp&&arguments[0]instanceof Wl&&arguments[1]instanceof nu){var y=arguments[0],v=arguments[1],_=arguments[2],x=y.closestPoint(v);_.setMinimum(x,v)}};var hp=function(){this._g0=null,this._g1=null,this._ptDist=new cp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},pp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};hp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},hp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Ka("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},hp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},hp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},hp.prototype.computeOrientedDistance=function(t,e,n){var r=new fp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new dp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},hp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new hp(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new hp(n,r);return o.setDensifyFraction(i),o.distance()}},pp.MaxPointDistanceFilter.get=function(){return fp},pp.MaxDensifiedByFractionDistanceFilter.get=function(){return dp},Object.defineProperties(hp,pp);var fp=function(){this._maxPtDist=new cp,this._minPtDist=new cp,this._euclideanDist=new lp,this._geom=null;var t=arguments[0];this._geom=t};fp.prototype.filter=function(t){this._minPtDist.initialize(),lp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},fp.prototype.getMaxPointDistance=function(){return this._maxPtDist},fp.prototype.interfaces_=function(){return[Yu]},fp.prototype.getClass=function(){return fp};var dp=function(){this._maxPtDist=new cp,this._minPtDist=new cp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};dp.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new nu(a,u);this._minPtDist.initialize(),lp.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},dp.prototype.isDone=function(){return!1},dp.prototype.isGeometryChanged=function(){return!1},dp.prototype.getMaxPointDistance=function(){return this._maxPtDist},dp.prototype.interfaces_=function(){return[bc]},dp.prototype.getClass=function(){return dp};var gp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},mp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};gp.prototype.checkMaximumDistance=function(t,e,n){var r=new hp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ru.toLineString(i[0],i[1])+")"}},gp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=gp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),gp.VERBOSE&&wu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},gp.prototype.checkNegativeValid=function(){if(!(this._input instanceof Mc||this._input instanceof jc||this._input instanceof xc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},gp.prototype.getErrorIndicator=function(){return this._errorIndicator},gp.prototype.checkMinimumDistance=function(t,e,n){var r=new up(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ru.toLineString(i[0],i[1])+" )"}},gp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},gp.prototype.getErrorLocation=function(){return this._errorLocation},gp.prototype.getPolygonLines=function(t){for(var e=new nc,n=new ep(e),r=tp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},gp.prototype.getErrorMessage=function(){return this._errMsg},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},mp.VERBOSE.get=function(){return!1},mp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(gp,mp);var yp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},vp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};yp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},yp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*yp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Cu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Cu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},yp.prototype.checkDistance=function(){var t=new gp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},yp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},yp.prototype.checkPolygonal=function(){this._result instanceof Mc||this._result instanceof jc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},yp.prototype.getErrorIndicator=function(){return this._errorIndicator},yp.prototype.getErrorLocation=function(){return this._errorLocation},yp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},yp.prototype.report=function(t){if(!yp.VERBOSE)return null;wu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},yp.prototype.getErrorMessage=function(){return this._errorMsg},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.isValidMsg=function(t,e,n){var r=new yp(t,e,n);return r.isValid()?null:r.getErrorMessage()},yp.isValid=function(t,e,n){return!!new yp(t,e,n).isValid()},vp.VERBOSE.get=function(){return!1},vp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(yp,vp);var _p=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};_p.prototype.getCoordinates=function(){return this._pts},_p.prototype.size=function(){return this._pts.length},_p.prototype.getCoordinate=function(t){return this._pts[t]},_p.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},_p.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ql.octant(this.getCoordinate(t),this.getCoordinate(t+1))},_p.prototype.setData=function(t){this._data=t},_p.prototype.getData=function(){return this._data},_p.prototype.toString=function(){return Ru.toLineString(new Bc(this._pts))},_p.prototype.interfaces_=function(){return[Vl]},_p.prototype.getClass=function(){return _p};var bp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new nc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};bp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},bp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},bp.prototype.getIntersectionSegments=function(){return this._intSegments},bp.prototype.count=function(){return this._intersectionCount},bp.prototype.getIntersections=function(){return this._intersections},bp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},bp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},bp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},bp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},bp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},bp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},bp.prototype.interfaces_=function(){return[Sh]},bp.prototype.getClass=function(){return bp},bp.createAllIntersectionsFinder=function(t){var e=new bp(t);return e.setFindAllIntersections(!0),e},bp.createAnyIntersectionFinder=function(t){return new bp(t)},bp.createIntersectionCounter=function(t){var e=new bp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var xp=function(){this._li=new Au,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};xp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},xp.prototype.getIntersections=function(){return this._segInt.getIntersections()},xp.prototype.isValid=function(){return this.execute(),this._isValid},xp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},xp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new bp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Ql;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},xp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new al(this.getErrorMessage(),this._segInt.getInteriorIntersection())},xp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ru.toLineString(t[0],t[1])+" and "+Ru.toLineString(t[2],t[3])},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.computeIntersections=function(t){var e=new xp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var wp=function t(){this._nv=null;var e=arguments[0];this._nv=new xp(t.toSegmentStrings(e))};wp.prototype.checkValid=function(){this._nv.checkValid()},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.toSegmentStrings=function(t){for(var e=new nc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new _p(r.getCoordinates(),r))}return e},wp.checkValid=function(t){new wp(t).checkValid()};var Ep=function(t){this._mapOp=t};Ep.prototype.map=function(t){for(var e=new nc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection($c.toGeometryArray(e))},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Ep.map=function(t,e){return new Ep(e).map(t)};var Cp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new nc,this._resultLineList=new nc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Cp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Cp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Cp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Cp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!of.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Cp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Cp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Cp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Cp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(Nu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(of.isResultOfOp(r,e)&&e===of.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp};var Op=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new nc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Op.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Op.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==of.INTERSECTION)){var r=n.getLabel();of.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Op.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op};var Sp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Sp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Sp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Nc&&!r.isEmpty()||(n=!1);for(var i=new nc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof Nc||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new nc;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Sp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Sp.prototype.getInputGeometry=function(){return this._inputGeom},Sp.prototype.transformMultiLineString=function(t,e){for(var n=new nc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Sp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Sp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Sp.prototype.transformMultiPoint=function(t,e){for(var n=new nc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Sp.prototype.transformMultiPolygon=function(t,e){for(var n=new nc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Sp.prototype.copy=function(t){return t.copy()},Sp.prototype.transformGeometryCollection=function(t,e){for(var n=new nc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection($c.toGeometryArray(n)):this._factory.buildGeometry(n)},Sp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Rc)return this.transformPoint(t,null);if(t instanceof th)return this.transformMultiPoint(t,null);if(t instanceof Nc)return this.transformLinearRing(t,null);if(t instanceof Tc)return this.transformLineString(t,null);if(t instanceof wc)return this.transformMultiLineString(t,null);if(t instanceof Mc)return this.transformPolygon(t,null);if(t instanceof jc)return this.transformMultiPolygon(t,null);if(t instanceof xc)return this.transformGeometryCollection(t,null);throw new Ka("Unknown Geometry subtype: "+t.getClass().getName())},Sp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Ip=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Wl,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Tc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Ip.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new nu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new nu(o)))}},Ip.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Ip.prototype.snapTo=function(t){var e=new rc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Ip.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new nu(i),!1)}},Ip.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Za.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Ip.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Tp=function(t){this._srcGeom=t||null},Pp={SNAP_PRECISION_FACTOR:{configurable:!0}};Tp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Rp(e,n).transform(this._srcGeom)},Tp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Rp(t,n,!0).transform(this._srcGeom),i=r;return e&&uu(i,Lc)&&(i=r.buffer(0)),i},Tp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Tp.prototype.extractTargetCoordinates=function(t){for(var e=new Tr,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Tp.prototype.computeMinimumSegmentLength=function(t){for(var e=Za.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Tp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Tp(t);r[0]=i.snapTo(e,n);var o=new Tp(e);return r[1]=o.snapTo(r[0],n),r},Tp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Tp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Yc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Tp.computeOverlaySnapTolerance(i),Tp.computeOverlaySnapTolerance(o))}},Tp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Tp.SNAP_PRECISION_FACTOR},Tp.snapToSelf=function(t,e,n){return new Tp(t).snapToSelf(e,n)},Pp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Tp,Pp);var Rp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Ip(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sp),Lp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Lp.prototype.getCommon=function(){return Za.longBitsToDouble(this._commonBits)},Lp.prototype.add=function(t){var e=Za.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Lp.signExpBits(this._commonBits),this._isFirst=!1,null):Lp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Lp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Lp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Lp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Za.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Za.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Lp.signExpBits=function(t){return t>>52},Lp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Lp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Lp.getBit(t,r)!==Lp.getBit(e,r))return n;n++}return 52};var Mp=function(){this._commonCoord=null,this._ccFilter=new jp},Np={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Mp.prototype.addCommonBits=function(t){var e=new Dp(this._commonCoord);t.apply(e),t.geometryChanged()},Mp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new nu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Dp(e);return t.apply(n),t.geometryChanged(),t},Mp.prototype.getCommonCoordinate=function(){return this._commonCoord},Mp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Np.CommonCoordinateFilter.get=function(){return jp},Np.Translater.get=function(){return Dp},Object.defineProperties(Mp,Np);var jp=function(){this._commonBitsX=new Lp,this._commonBitsY=new Lp};jp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},jp.prototype.getCommonCoordinate=function(){return new nu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},jp.prototype.interfaces_=function(){return[Yu]},jp.prototype.getClass=function(){return jp};var Dp=function(){this.trans=null;var t=arguments[0];this.trans=t};Dp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Dp.prototype.isDone=function(){return!1},Dp.prototype.isGeometryChanged=function(){return!0},Dp.prototype.interfaces_=function(){return[bc]},Dp.prototype.getClass=function(){return Dp};var Ap=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Ap.prototype.selfSnap=function(t){return new Tp(t).snapTo(t,this._snapTolerance)},Ap.prototype.removeCommonBits=function(t){this._cbr=new Mp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Ap.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Ap.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=of.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Ap.prototype.checkValid=function(t){t.isValid()||wu.out.println("Snapped geometry is invalid")},Ap.prototype.computeSnapTolerance=function(){this._snapTolerance=Tp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ap.prototype.snap=function(t){var e=this.removeCommonBits(t);return Tp.snap(e[0],e[1],this._snapTolerance)},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.overlayOp=function(t,e,n){return new Ap(t,e).getResultGeometry(n)},Ap.union=function(t,e){return Ap.overlayOp(t,e,of.UNION)},Ap.intersection=function(t,e){return Ap.overlayOp(t,e,of.INTERSECTION)},Ap.symDifference=function(t,e){return Ap.overlayOp(t,e,of.SYMDIFFERENCE)},Ap.difference=function(t,e){return Ap.overlayOp(t,e,of.DIFFERENCE)};var Fp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Fp.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=of.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Lu))throw t;r=t}if(!n)try{e=Ap.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Lu?r:t}return e},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},Fp.overlayOp=function(t,e,n){return new Fp(t,e).getResultGeometry(n)},Fp.union=function(t,e){return Fp.overlayOp(t,e,of.UNION)},Fp.intersection=function(t,e){return Fp.overlayOp(t,e,of.INTERSECTION)},Fp.symDifference=function(t,e){return Fp.overlayOp(t,e,of.SYMDIFFERENCE)},Fp.difference=function(t,e){return Fp.overlayOp(t,e,of.DIFFERENCE)};var kp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};kp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Gp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Bp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Gp.prototype.isDelete=function(){return this._eventType===Gp.DELETE},Gp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Gp.prototype.getObject=function(){return this._obj},Gp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Gp.prototype.getInsertEvent=function(){return this._insertEvent},Gp.prototype.isInsert=function(){return this._eventType===Gp.INSERT},Gp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Gp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Gp.prototype.interfaces_=function(){return[Qa]},Gp.prototype.getClass=function(){return Gp},Bp.INSERT.get=function(){return 1},Bp.DELETE.get=function(){return 2},Object.defineProperties(Gp,Bp);var zp=function(){};zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var Up=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Up.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Up.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Up.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Up.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Up.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Up.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Up.prototype.hasProperIntersection=function(){return this._hasProper},Up.prototype.hasIntersection=function(){return this._hasIntersection},Up.prototype.isDone=function(){return this._isDone},Up.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Up.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Up.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var qp=function(t){function e(){t.call(this),this.events=new nc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){jl.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Up&&uu(arguments[0],ec)&&uu(arguments[1],ec)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&uu(arguments[0],ec)&&arguments[1]instanceof Up){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new kp(n,i),s=new Gp(e,n.getMinX(i),o);this.events.add(s),this.events.add(new Gp(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zp),Vp=function(){this._min=Za.POSITIVE_INFINITY,this._max=Za.NEGATIVE_INFINITY},Yp={NodeComparator:{configurable:!0}};Vp.prototype.getMin=function(){return this._min},Vp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Vp.prototype.getMax=function(){return this._max},Vp.prototype.toString=function(){return Ru.toLineString(new nu(this._min,0),new nu(this._max,0))},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Yp.NodeComparator.get=function(){return Xp},Object.defineProperties(Vp,Yp);var Xp=function(){};Xp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},Xp.prototype.interfaces_=function(){return[eu]},Xp.prototype.getClass=function(){return Xp};var Wp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vp),Hp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vp),$p=function(){this._leaves=new nc,this._root=null,this._level=0};$p.prototype.buildTree=function(){jl.sort(this._leaves,new Vp.NodeComparator);for(var t=this._leaves,e=null,n=new nc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},$p.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Wp(t,e,n))},$p.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},$p.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},$p.prototype.printNode=function(t){wu.out.println(Ru.toLineString(new nu(t._min,this._level),new nu(t._max,this._level)))},$p.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},$p.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Hp(t.get(n),t.get(n+1));e.add(i)}}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var Kp=function(){this._items=new nc};Kp.prototype.visitItem=function(t){this._items.add(t)},Kp.prototype.getItems=function(){return this._items},Kp.prototype.interfaces_=function(){return[Rl]},Kp.prototype.getClass=function(){return Kp};var Zp=function(){this._index=null;var t=arguments[0];if(!uu(t,Lc))throw new Ka("Argument must be Polygonal");this._index=new tf(t)},Jp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Zp.prototype.locate=function(t){var e=new ku(t),n=new Qp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Zp.prototype.interfaces_=function(){return[vh]},Zp.prototype.getClass=function(){return Zp},Jp.SegmentVisitor.get=function(){return Qp},Jp.IntervalIndexedGeometry.get=function(){return tf},Object.defineProperties(Zp,Jp);var Qp=function(){this._counter=null;var t=arguments[0];this._counter=t};Qp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Qp.prototype.interfaces_=function(){return[Rl]},Qp.prototype.getClass=function(){return Qp};var tf=function(){this._index=new $p;var t=arguments[0];this.init(t)};tf.prototype.init=function(t){for(var e=ep.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},tf.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Wl(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},tf.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Kp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf};var ef=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Vc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new np,2===arguments.length){var e=arguments[0],n=arguments[1],r=Xu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;su.NONE,r.getLocation(t,il.ON)===su.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Up(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Nc||this._parentGeom instanceof Mc||this._parentGeom instanceof jc,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Up(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Rc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,su.INTERIOR)}else if(arguments[0]instanceof nu){var e=arguments[0];this.insertPoint(this._argIndex,e,su.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),su.EXTERIOR,su.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,su.INTERIOR,su.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],su.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],su.BOUNDARY)},e.prototype.addLineString=function(t){var e=oc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new jh(e,new pl(this._argIndex,su.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Nu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===su.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=oc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Gu.isCCW(r)&&(i=n,o=e);var s=new jh(r,new pl(this._argIndex,su.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],su.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new pl(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new qp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof jc&&(this._useBoundaryDeterminationRule=!1),e instanceof Mc)this.addPolygon(e);else if(e instanceof Tc)this.addLineString(e);else if(e instanceof Rc)this.addPoint(e);else if(e instanceof th)this.addCollection(e);else if(e instanceof wc)this.addCollection(e);else if(e instanceof jc)this.addCollection(e);else{if(!(e instanceof xc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return uu(this._parentGeom,Lc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Zp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?su.BOUNDARY:su.INTERIOR},e}(Ol),nf=function(){if(this._li=new Au,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ef(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Xu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ef(0,e,r),this._arg[1]=new ef(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ef(0,i,s),this._arg[1]=new ef(1,o,s)}};nf.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},nf.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf};var rf=function(){};rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.map=function(){if(arguments[0]instanceof Uu&&uu(arguments[1],rf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new nc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(uu(arguments[0],Ju)&&uu(arguments[1],rf.MapOp)){for(var o=arguments[0],s=arguments[1],a=new nc,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},rf.MapOp=function(){};var of=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new np,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Oh,this._resultPolyList=new nc,this._resultLineList=new nc,this._resultPointList=new nc,this._graph=new Ol(new Eh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new pl(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new nc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==su.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new nc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new nc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),wp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Sl(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Cp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Op(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,il.RIGHT),i.getLocation(1,il.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Nu.isTrue(!r.isNull(i,il.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,il.LEFT,r.getLocation(i,il.LEFT)),Nu.isTrue(!r.isNull(i,il.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,il.RIGHT,r.getLocation(i,il.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nf);of.overlayOp=function(t,e,n){return new of(t,e).getResultGeometry(n)},of.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return of.createEmptyResult(of.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ep.map(t,{interfaces_:function(){return[rf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Fp.overlayOp(t,e,of.INTERSECTION)},of.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return of.createEmptyResult(of.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Fp.overlayOp(t,e,of.SYMDIFFERENCE)},of.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case of.INTERSECTION:o=Math.min(r,i);break;case of.UNION:o=Math.max(r,i);break;case of.DIFFERENCE:o=r;break;case of.SYMDIFFERENCE:o=Math.max(r,i)}return o},of.createEmptyResult=function(t,e,n,r){var i=null;switch(of.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},of.difference=function(t,e){return t.isEmpty()?of.createEmptyResult(of.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Fp.overlayOp(t,e,of.DIFFERENCE))},of.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return of.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===su.BOUNDARY&&(i=su.INTERIOR),o===su.BOUNDARY&&(o=su.INTERIOR),s){case of.INTERSECTION:return i===su.INTERIOR&&o===su.INTERIOR;case of.UNION:return i===su.INTERIOR||o===su.INTERIOR;case of.DIFFERENCE:return i===su.INTERIOR&&o!==su.INTERIOR;case of.SYMDIFFERENCE:return i===su.INTERIOR&&o!==su.INTERIOR||i!==su.INTERIOR&&o===su.INTERIOR}return!1}},of.INTERSECTION=1,of.UNION=2,of.DIFFERENCE=3,of.SYMDIFFERENCE=4;var sf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new np,this._seg=new Wl;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};sf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},sf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?su.BOUNDARY:this._ptLocator.locate(t,this._g)},sf.prototype.extractLinework=function(t){var e=new af;t.apply(e);var n=e.getLinework(),r=$c.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf};var af=function(){this._linework=null,this._linework=new nc};af.prototype.getLinework=function(){return this._linework},af.prototype.filter=function(t){if(t instanceof Mc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},af.prototype.interfaces_=function(){return[_c]},af.prototype.getClass=function(){return af};var uf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};uf.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},uf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},uf.prototype.getPoints=function(t){for(var e=new nc,n=ep.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},uf.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new nu(c-u,l+a);r.add(h)}if(this._doRight){var p=new nu(c+u,l-a);r.add(p)}},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new nc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new sf(this._geom[0],this._boundaryDistanceTolerance),new sf(this._geom[1],this._boundaryDistanceTolerance),new sf(this._geom[2],this._boundaryDistanceTolerance)]},lf={TOLERANCE:{configurable:!0}};cf.prototype.reportResult=function(t,e,n){wu.out.println("Overlay result invalid - A:"+su.toLocationSymbol(e[0])+" B:"+su.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+su.toLocationSymbol(e[2]))},cf.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},cf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!cf.hasLocation(this._location,su.BOUNDARY)||this.isValidResult(r,this._location)}},cf.prototype.addTestPts=function(t){var e=new uf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},cf.prototype.isValidResult=function(t,e){var n=of.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===su.INTERIOR);return r||this.reportResult(t,e,n),r},cf.prototype.getInvalidLocation=function(){return this._invalidLocation},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},cf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Tp.computeSizeBasedSnapTolerance(t),Tp.computeSizeBasedSnapTolerance(e))},cf.isValid=function(t,e,n,r){return new cf(t,e,r).isValid(n)},lf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(cf,lf);var hf=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};hf.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},hf.prototype.combine=function(){for(var t=new nc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.combine=function(){if(1===arguments.length){var t=arguments[0];return new hf(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new hf(hf.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new hf(hf.createList(r,i,o)).combine()}},hf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},hf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new nc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new nc;return s.add(r),s.add(i),s.add(o),s}};var pf=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new nc)},ff={STRTREE_NODE_CAPACITY:{configurable:!0}};pf.prototype.reduceToGeometries=function(t){for(var e=new nc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;uu(r,ec)?i=this.unionTree(r):r instanceof Uu&&(i=r),e.add(i)}return e},pf.prototype.extractByEnvelope=function(t,e,n){for(var r=new nc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},pf.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return hf.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},pf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ol(pf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},pf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=pf.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(pf.getGeometry(e,n),pf.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},pf.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},pf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},pf.prototype.unionActual=function(t,e){return pf.restrictToPolygons(t.union(e))},pf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},pf.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new nc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),hf.combine(r)},pf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},pf.restrictToPolygons=function(t){if(uu(t,Lc))return t;var e=tp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon($c.toPolygonArray(e))},pf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},pf.union=function(t){return new pf(t).union()},ff.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(pf,ff);var df=function(){};df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return of.createEmptyResult(of.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Fp.overlayOp(t,e,of.UNION)};var gf=function(){return new Nr};Nr.prototype={constructor:Nr,reset:function(){this.s=this.t=0},add:function(t){jr(mf,t,this.t),jr(this,mf.s,this.s),this.s?this.t+=mf.t:this.s=mf.t},valueOf:function(){return this.s}};var mf=new Nr,yf=1e-6,vf=Math.PI,_f=vf/2,bf=vf/4,xf=2*vf,wf=180/vf,Ef=vf/180,Cf=Math.abs,Of=Math.atan,Sf=Math.atan2,If=Math.cos,Tf=Math.exp,Pf=Math.log,Rf=Math.sin,Lf=Math.sqrt,Mf=Math.tan,Nf={Feature:function(t,e){Fr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Fr(n[r].geometry,e)}},jf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){kr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)kr(n[r],e,0)},Polygon:function(t,e){Gr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Gr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Fr(n[r],e)}},Df=function(t,e){t&&Nf.hasOwnProperty(t.type)?Nf[t.type](t,e):Fr(t,e)},Af=(gf(),gf(),gf(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});Wr.invert=Wr;var Ff=function(t){function e(e){return(e=t(e[0]*Ef,e[1]*Ef))[0]*=wf,e[1]*=wf,e}return t=Hr(t[0]*Ef,t[1]*Ef,t.length>2?t[2]*Ef:0),e.invert=function(e){return(e=t.invert(e[0]*Ef,e[1]*Ef))[0]*=wf,e[1]*=wf,e},e},kf=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Ar,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Gf=function(t,e,n,r,i,o){var s,a=t[0],u=t[1],c=0,l=1,h=e[0]-a,p=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<c)return;s<l&&(l=s)}else if(h>0){if(s>l)return;s>c&&(c=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>l)return;s>c&&(c=s)}else if(h>0){if(s<c)return;s<l&&(l=s)}if(s=r-u,p||!(s>0)){if(s/=p,p<0){if(s<c)return;s<l&&(l=s)}else if(p>0){if(s>l)return;s>c&&(c=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>l)return;s>c&&(c=s)}else if(p>0){if(s<c)return;s<l&&(l=s)}return c>0&&(t[0]=a+c*h,t[1]=u+c*p),l<1&&(e[0]=a+l*h,e[1]=u+l*p),!0}}}}},Bf=function(t,e){return Cf(t[0]-e[0])<yf&&Cf(t[1]-e[1])<yf},zf=function(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Bf(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Qr(r,t,null,!0)),u.push(n.o=new Qr(r,null,n,!1)),a.push(n=new Qr(s,t,null,!1)),u.push(n.o=new Qr(s,null,n,!0))}}),a.length){for(u.sort(e),to(a),to(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,l,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},Uf=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},qf=(function(t){1===t.length&&(t=function(t){return function(e,n){return Uf(t(e),n)}}(t))}(Uf),function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}),Vf=1e9,Yf=-Vf,Xf=gf(),Wf=(gf(),function(t){return t}),Hf=(gf(),gf(),1/0),$f=Hf,Kf=-Hf,Zf=Kf,Jf={point:function(t,e){t<Hf&&(Hf=t),t>Kf&&(Kf=t),e<$f&&($f=e),e>Zf&&(Zf=e)},lineStart:Ar,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar,result:function(){var t=[[Hf,$f],[Kf,Zf]];return Kf=Zf=-($f=Hf=1/0),t}},Qf=(gf(),function(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){w.point=a,m.lineStart()}function c(){w.point=s,m.lineEnd()}function l(t,e){d.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),d=[]}function p(){l(d[0][0],d[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),s=v.result(),a=s.length;if(d.pop(),f.push(d),d=null,a)if(1&i){if(n=s[0],(e=n.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&s.push(s.pop().concat(s.shift())),g.push(s.filter(eo))}var f,g,d,m=e(o),y=i.invert(r[0],r[1]),v=kf(),_=e(v),x=!1,w={point:s,lineStart:u,lineEnd:c,polygonStart:function(){w.point=l,w.lineStart=h,w.lineEnd=p,g=[],f=[]},polygonEnd:function(){w.point=s,w.lineStart=u,w.lineEnd=c,g=qf(g);var t=function(t,e){var n=e[0],r=e[1],i=[Rf(n),-If(n),0],o=0,s=0;Xf.reset();for(var a=0,u=t.length;a<u;++a)if(l=(c=t[a]).length)for(var c,l,h=c[l-1],p=h[0],f=h[1]/2+bf,g=Rf(f),d=If(f),m=0;m<l;++m,p=v,g=x,d=w,h=y){var y=c[m],v=y[0],_=y[1]/2+bf,x=Rf(_),w=If(_),E=v-p,b=E>=0?1:-1,C=b*E,O=C>vf,S=g*x;if(Xf.add(Sf(S*b*Rf(C),d*w+S*If(C))),o+=O?E+b*xf:E,O^p>=n^v>=n){var I=qr(zr(h),zr(y));Xr(I);var T=qr(i,I);Xr(T);var P=(O^E>=0?-1:1)*Dr(T[2]);(r>P||r===P&&(I[0]||I[1]))&&(s+=O^E>=0?1:-1)}}return(o<-yf||o<yf&&Xf<-yf)^1&s}(f,y);g.length?(x||(o.polygonStart(),x=!0),zf(g,no,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),g=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return w}}),ed=Qf(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?vf:-vf,u=Cf(o-n);Cf(u-vf)<yf?(t.point(n,r=(r+s)/2>0?_f:-_f),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=vf&&(Cf(n-i)<yf&&(n-=i*yf),Cf(o-a)<yf&&(o-=a*yf),r=function(t,e,n,r){var i,o,s=Rf(t-n);return Cf(s)>yf?Of((Rf(e)*(o=If(r))*Rf(n)-Rf(r)*(i=If(e))*Rf(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*_f,r.point(-vf,i),r.point(0,i),r.point(vf,i),r.point(vf,0),r.point(vf,-i),r.point(0,-i),r.point(-vf,-i),r.point(-vf,0),r.point(-vf,i);else if(Cf(t[0]-e[0])>yf){var o=t[0]<e[0]?vf:-vf;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-vf,-_f]),nd=function(t,e){function n(t,e){return If(t)*If(e)>o}function r(t,e,n){var r=[1,0,0],i=qr(zr(t),zr(e)),s=Ur(i,i),a=i[0],u=s-a*a;if(!u)return!n&&t;var c=o*s/u,l=-o*a/u,h=qr(r,i),p=Yr(r,c);Vr(p,Yr(i,l));var f=h,g=Ur(p,f),d=Ur(f,f),m=g*g-d*(Ur(p,p)-1);if(!(m<0)){var y=Lf(m),v=Yr(f,(-g-y)/d);if(Vr(v,p),v=Br(v),!n)return v;var _,x=t[0],w=e[0],E=t[1],b=e[1];w<x&&(_=x,x=w,w=_);var C=w-x,O=Cf(C-vf)<yf;if(!O&&b<E&&(_=E,E=b,b=_),O||C<yf?O?E+b>0^v[1]<(Cf(v[0]-x)<yf?E:b):E<=v[1]&&v[1]<=b:C>vf^(x<=v[0]&&v[0]<=w)){var S=Yr(f,(-g+y)/d);return Vr(S,p),[v,Br(S)]}}}function i(e,n){var r=s?t:vf-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=If(t),s=o>0,a=Cf(o)>yf;return Qf(n,function(t){var e,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,p){var f,g=[h,p],d=n(h,p),m=s?d?0:i(h,p):d?i(h+(h<0?vf:-vf),p):0;if(!e&&(c=u=d)&&t.lineStart(),d!==u&&(!(f=r(e,g))||Bf(e,f)||Bf(g,f))&&(g[0]+=yf,g[1]+=yf,d=n(g[0],g[1])),d!==u)l=0,d?(t.lineStart(),f=r(g,e),t.point(f[0],f[1])):(f=r(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(a&&e&&s^d){var y;m&o||!(y=r(g,e,!0))||(l=0,s?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!d||e&&Bf(e,g)||t.point(g[0],g[1]),e=g,u=d,o=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=If(e),a=Rf(e),u=r*n;null==i?(i=e+r*xf,o=e-u/2):(i=Jr(s,i),o=Jr(s,o),(r>0?i<o:i>o)&&(i+=r*xf));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Br([s,-a*If(l),-a*Rf(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)},s?[0,-t]:[-vf,t-vf])};ro.prototype={constructor:ro,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var id=16,rd=If(30*Ef),od=function(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,c,l,h,p,f,g,d,m){var y=c-r,v=l-i,_=y*y+v*v;if(_>4*e&&d--){var x=s+p,w=a+f,E=u+g,b=Lf(x*x+w*w+E*E),C=Dr(E/=b),O=Cf(Cf(E)-1)<yf||Cf(o-h)<yf?(o+h)/2:Sf(w,x),S=t(O,C),I=S[0],T=S[1],P=I-r,R=T-i,L=v*P-y*R;(L*L/_>e||Cf((y*P+v*R)/_-.5)>.3||s*p+a*f+u*g<rd)&&(n(r,i,o,s,a,u,I,T,O,x/=b,w/=b,E,d,m),m.point(I,T),n(I,T,O,x,w,E,c,l,h,p,f,g,d,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,E.point=o,e.lineStart()}function o(r,i){var o=zr([r,i]),s=t(r,i);n(y,v,m,_,x,w,y=s[0],v=s[1],m=r,_=o[0],x=o[1],w=o[2],id,e),e.point(y,v)}function s(){E.point=r,e.lineEnd()}function a(){i(),E.point=u,E.lineEnd=c}function u(t,e){o(l=t,e),h=y,p=v,f=_,g=x,d=w,E.point=o}function c(){n(y,v,m,_,x,w,h,p,l,f,g,d,id,e),E.lineEnd=s,s()}var l,h,p,f,g,d,m,y,v,_,x,w,E={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),E.lineStart=a},polygonEnd:function(){e.polygonEnd(),E.lineStart=i}};return E}}(t,e):function(t){return io({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},sd=io({point:function(t,e){this.stream.point(t*Ef,e*Ef)}});ao.invert=function(t,e){return[t,2*Of(Tf(e))-_f]},uo.invert=function(t,e){return[-e,2*Of(Tf(t))-_f]};var ad=function(){var t=function(t){function e(){var e=vf*a(),s=o(Ff(o.rotate()).invert([0,0]));return c(null==l?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===ao?[[Math.max(s[0]-e,l),n],[Math.min(s[0]+e,r),i]]:[[l,Math.max(s[1]-e,n)],[r,Math.min(s[1]+e,i)]])}var n,r,i,o=so(t),s=o.center,a=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}(uo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=ls,t.random=Wa,t.clusters=Ha,t.helpers=So,t.invariant=To,t.meta=Io,t.isolines=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!C(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=V(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return V(t)[0]-V(e)[0]});return r}).sort(function(t,n){return e?V(t[0])[1]-V(n[0])[1]:V(n[0])[1]-V(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}(t,{zProperty:r,flip:!0});return c(function(t,e,n){var r=z(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,p=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach(function(t){I(t,p)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]);u[n]=a;var c=l(J(t,a),u);o.push(c)}return o}(s,e,r,i,o),s,t))},t.convex=Tt,t.pointsWithinPolygon=Lt,t.concave=function(t,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!b(r))throw new Error("maxEdge is invalid");var i=Mt(function(t){var e=[],n={};return L(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),c(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=At(e,i,n),a=At(i,o,n),u=At(e,o,n);return s<=r&&a<=r&&u<=r}),i.features.length<1)return null;var o=Ht(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Mo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=z(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Pt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),I(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ft(t)),j(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;$t(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=te(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return te(t,e,n)});break;case"Polygon":t.coordinates=ee(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return ee(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=ne,t.tag=function(t,e,n,r){return t=Ft(t),e=Ft(e),L(t,function(t){t.properties||(t.properties={}),L(e,function(e){void 0===t.properties[r]&&Pt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=re,t.square=oe,t.circle=ae,t.midpoint=function(t,e){return se(t,At(t,e)/2,ue(t,e))},t.center=ce,t.centerOfMass=function t(e,n){switch(Z(e)){case"Point":return e;case"Polygon":var o=[];I(e,function(t){o.push(t)});var i,c,s,a,u,l,h,f,p=le(e,n),d=p.geometry.coordinates,g=0,m=0,y=0,v=o.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(i=0;i<o.length-1;i++)a=(c=v[i])[0],l=c[1],u=(s=v[i+1])[0],y+=f=a*(h=s[1])-u*l,g+=(a+u)*f,m+=(l+h)*f;if(0===y)return p;var _=1/(.5*y*6);return r([d[0]+_*g,d[1]+_*m],n);default:var x=Tt(e);return x?t(x,n):le(e,n)}},t.centroid=le,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return L(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),c(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=At,t.explode=he,t.bbox=z,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Ie(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Ie(t))}),e},t.bboxPolygon=ie,t.booleanPointInPolygon=Pt,t.nearestPoint=Te,t.nearestPointOnLine=$e,t.nearestPointToLine=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return j(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==Z(e))throw new Error("line must be a LineString");var o=1/0,s=null;return L(t,function(t){var n=on(t,e,{units:r});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=U(t),r=$(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],c=n[1],l=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],g=r[1][1],d=void 0!==s?s:r[1][2],m=r[2][0],y=r[2][1],v=void 0!==a?a:r[2][2];return(v*(u-l)*(c-g)+p*(u-f)*(c-y)+d*(u-m)*(c-h)-d*(u-l)*(c-y)-v*(u-f)*(c-h)-p*(u-m)*(c-g))/((u-l)*(c-g)+(u-f)*(c-y)+(u-m)*(c-h)-(u-l)*(c-y)-(u-f)*(c-h)-(u-m)*(c-g))},t.tin=Mt,t.bearing=ue,t.destination=se,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=function(t,e,n,r,i,o,s,a){var u,c,l,p,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==h.x&&null!==h.y&&h:(p=(n-t)*(c=e-o)-(r-e)*(l=t-i),c=((s-i)*c-(a-o)*l)/u,l=p/u,h.x=t+c*(n-t),h.y=e+c*(r-e),c>=0&&c<=1&&(h.onLine1=!0),l>=0&&l<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(r([s[0],s[1]]))}})}),i},t.pointOnFeature=an,t.area=cn,t.along=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!b(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(e>=o&&s===i.length-1);s++){if(o>=e){var a=e-o;if(a){var u=ue(i[s],i[s-1])-180;return se(i[s],a,u,n)}return r(i[s])}o+=At(i[s],i[s+1],n)}return r(i[i.length-1])},t.length=fn,t.lineSlice=function(t,e,n){var r=V(n);if("LineString"!==Z(n))throw new Error("line must be a LineString");for(var i,o=$e(n,t),s=$e(n,e),u=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),a(u,n.properties)},t.lineSliceAlong=dn,t.pointGrid=_n,t.truncate=bn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return A(t,function(t){e.push(t)}),c(e)},t.lineIntersect=We,t.lineChunk=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return A(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=fn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=dn(t,e*s,e*(s+1),{units:n});r(a)}}(t,e,r,function(t){o.push(t)})}),c(o)},t.unkinkPolygon=function(t){var e=[];return A(t,function(t){"Polygon"===t.geometry.type&&L(ps(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=U(t),e=U(e),r=r||{},i=i||100,o=o||10,new bs({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=Xe,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Z(t),r=Z(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=bn(e,{precision:7});switch(r){case"Point":return On(t,i);case"MultiPoint":return Cn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Cn(t,We(t,i))}},t.lineArc=Tn,t.polygonToLine=Rn,t.lineToPolygon=Mn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=V(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){xs(t,e,s)}),1===s.length?a(s[0],i):l(s,i);case"Polygon":return o(kn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return kn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=qn,t.sector=function(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Vn(n)===Vn(r))return ae(t,e,i);var s=V(t),a=[[s]];return I(Tn(t,e,n,r,i),function(t){a[0].push(t)}),a[0].push(s),o(a)},t.rhumbBearing=Ke,t.rhumbDistance=Je,t.rhumbDestination=Yn,t.polygonTangents=function(t,e){var n,i,o,s=V(t),a=V(e);switch(Z(e)){case"Polygon":n=a[0][0],i=a[0][0],o=Wn(a[0][0],a[0][a[0].length-1],s);var u=Xn(a[0],s,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=a[0][0][0],i=a[0][0][0],o=Wn(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=Xn(t[0],s,o,void 0,n,i);n=e[0],i=e[1]})}return c([r(n),r(i)])},t.rewind=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var i=[];switch(t.type){case"GeometryCollection":return j(t,function(t){$n(t,n)}),t;case"FeatureCollection":return L(t,function(t){L($n(t,n),function(t){i.push(t)})}),c(i)}return $n(t,n)},t.isobands=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},s=n.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!C(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return L(t,function(t){var e=V(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return V(t)[0]-V(e)[0]});return r}).sort(function(t,n){return e?V(t[0])[1]-V(n[0])[1]:V(n[0])[1]-V(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var s=+e[i-1],a=+e[i],u=hr(t,s,a-s),c=function(t){var e=[],n=[];t.forEach(function(t){var r=cn(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(u),l=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var s=o([e[r].lrCoordinates]),a=r+1;a<e.length;a++)if(!e[a].grouped){var u=o([e[a].lrCoordinates]);(function(t,e){for(var n=he(t),r=0;r<n.features.length;r++)if(!Pt(n.features[r],e))return!1;return!0})(u,s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(i)}return n}(c),h={};h.groupedRings=l,h[n]=s+"-"+a,r.push(h)}return r}(a,e,r);return c((u=function(t,e,n){var r=z(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,p=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(u,a,t)).map(function(t,e){if(s[e]&&!C(s[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,s[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=ti,t.transformScale=ei,t.transformTranslate=function(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==s&&void 0!==s||(t=Ft(t)),I(t,function(t){var r=V(Yn(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=Z(t),o=t.properties;switch(i){case"LineString":return oi(t,e,r);case"MultiLineString":var s=[];return A(t,function(t){s.push(oi(t,e,r).geometry.coordinates)}),l(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=ba.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){va.findEdgeRingContaining(t,r)&&r.push(t)}),c(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return A(t,function(t){A(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!ui(e,t);case"Polygon":return!Pt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ui(t,e);case"LineString":return!function(t,e){return We(t,e).features.length>0}(t,e);case"Polygon":return!br(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Pt(e,t);case"LineString":return!br(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Pt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Pt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e),s=V(t),a=V(e);switch(n){case"Point":switch(r){case"Point":return hi(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(hi(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(hi(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return gn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(gn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!gn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(gn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!gn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Pt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=z(t),o=z(e);if(!ci(i,o))return!1;for(;r<e.coordinates.length-1;r++){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1]);if(Pt({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){var n=z(t),r=z(e);if(!ci(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Pt(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Pt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e);switch(n){case"MultiPoint":switch(r){case"LineString":return pi(i,o);case"Polygon":return di(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return pi(o,i);case"LineString":return function(t,e){if(We(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),gi(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return fi(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return di(o,i);case"LineString":return fi(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Hn,t.booleanOverlap=_i,t.booleanPointOnLine=gn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return Z(t)===Z(e)&&new Oa({precision:6}).compare($t(t),$t(e))},t.booleanWithin=mn,t.clone=Ft,t.cleanCoords=$t,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(H(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Ft(t),r=r||3;var o=new Ra.DBSCAN,s=-1;return o.run(N(t),w(e,i),r,At).forEach(function(e){s++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=s,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;H(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Ft(t));var o=N(t),s=o.slice(0,n),a=Da(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),L(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=on,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==xi(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==xi(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Xe($t(t)).features,r=Xe($t(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){var n=v(Ke(t[0],t[1])),r=v(Ke(e[0],e[1]));return n===r}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!b(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var l=U(t),h=U(n);switch(t=r(l),n=r(h),Z(u)){case"FeatureCollection":if(0===u.features.length)return a([l,h]);break;case"Polygon":u=c([e($(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=z(ei(ie(z(p)),1.15));o||(o=At([f[0],f[1]],[f[2],f[1]],i)/100),p.features.pop(),p.features.pop();for(var g=f[0],d=f[1],m=f[2],y=f[3],v=o/At([g,d],[m,d],i)*(m-g),_=o/At([g,d],[g,y],i)*(y-d),x=m-g,w=y-d,E=(x-Math.floor(x/v)*v)/2,O=[],S=[],I=[],T=[],P=1/0,R=1/0,L=y-(w-Math.floor(w/_)*_)/2,M=0;L>=d;){for(var N=[],j=[],D=g+E,A=0;D<=m;){var q=r([D,L]),F=function(t,e){for(var n=0;n<e.features.length;n++)if(Pt(t,e.features[n]))return!0;return!1}(q,u);N.push(F?0:1),j.push(D+"|"+L);var k=At(q,t);!F&&k<P&&(P=k,I={x:A,y:M});var G=At(q,n);!F&&G<R&&(R=G,T={x:A,y:M}),D+=v,A++}S.push(N),O.push(j),L-=_,M++}var B=new Ei(S,{diagonal:!0}),V=B.grid[I.y][I.x],Y=B.grid[T.y][T.x],X=[l];return Aa.search(B,V,Y).forEach(function(t){var e=O[t.x][t.y].split("|");X.push([+e[0],+e[1]])}),X.push(h),$t(a(X))},t.voronoi=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return H(t,"Point","points"),c(function(){function t(t){return new Ki(t.map(function(r,i){var o=[Math.round(e(r,i,t)/Ya)*Ya,Math.round(n(r,i,t)/Ya)*Ya];return o.index=i,o.data=r,o}),r)}var e=Si,n=Ii,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Fa(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Fa(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(li))},t.ellipse=Zi,t.centerMean=Qi,t.centerMedian=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!b(n))throw new Error("counter must be a number");var r=e.weight,i=Qi(t,{weight:e.weight}),o=c([]);return L(t,function(t){o.features.push(le(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},er(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!b(n))throw new Error("steps must be a number");if(!C(i))throw new Error("properties must be a number");var o=N(t).length,s=Qi(t,{weight:r}),a=0,u=0,l=0;L(t,function(t){var e=t.properties[r]||1,n=nr(V(t),V(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e});var h=a-u,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),f=2*l,g=Math.atan((h+p)/f),d=180*g/Math.PI,m=0,y=0,v=0;L(t,function(t){var e=t.properties[r]||1,n=nr(V(t),V(s));m+=Math.pow(n.x*Math.cos(g)-n.y*Math.sin(g),2)*e,y+=Math.pow(n.x*Math.sin(g)+n.y*Math.cos(g),2)*e,v+=e});var _=Math.sqrt(2*m/v),x=Math.sqrt(2*y/v),w=Zi(s,_,x,{units:"degrees",angle:d,steps:n,properties:i}),E=Lt(t,c([w])),O={meanCenterCoordinates:V(s),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*N(E).length/o};return w.properties.standardDeviationalEllipse=O,w},t.difference=function(t,n){var r=$(t),i=$(n),o=t.properties||{};if(r=Mr(r),i=Mr(i),!r)return null;if(!i)return e(r,o);var s=new el,a=s.read(r),u=s.read(i),c=of.difference(a,u);return c.isEmpty()?null:e((new nl).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return j(t,function(t){var n=co(t,e,r,i);n&&o.push(n)}),c(o);case"FeatureCollection":return L(t,function(t){var n=co(t,e,r,i);n&&L(n,function(t){t&&o.push(t)})}),c(o)}return co(t,e,r,i)},t.union=fo,t.intersect=go,t.dissolve=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;H(t,"Polygon","dissolve");var r=Ft(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var s=qe();for(var u in s.load(r),i){var c=i[u],l=!1;if(s.search(c).features.forEach(function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=mo(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&c&&(void 0!==n&&h.properties[n]!==c.properties[n]||_i(c,h)&&function(t,e){var n=a(N(t)),r=a(N(e));return We(n,r).features.length>0}(c,h)&&(i[u]=fo(c,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,s.remove(c,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),l=!0))}}),l){if(!c)continue;c.properties.origIndexPosition=u,s.insert(c),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=yo,t.mask=function(t,e){var n=o([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),r=function(t){var e=[],n=[];return A(t,function(t){var r=t.geometry.coordinates,i=r[0],s=r.slice(1);e.push(o([i])),s.forEach(function(t){n.push(o([t]))})}),[c(e),c(n)]}(t),i=r[0],s=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),A(e,function(t){r.push(t.geometry.coordinates[0])}),A(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,i=vo(i),s=vo(s))},t.squareGrid=bo,t.triangleGrid=xo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(H(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=z(t);switch(r){case"point":case"points":s=_n(a,e,n);break;case"square":case"squares":s=bo(a,e,n);break;case"hex":case"hexes":s=yo(a,e,n);break;case"triangle":case"triangles":s=xo(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return L(s,function(e){var s=0,a=0;L(t,function(t){var u,c=At("point"===r?e:le(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(s=u);var l=1/Math.pow(c,o);a+=l,s+=l*u});var c=Ft(e);c.properties[i]=s/a,u.push(c)}),c(u)},t.pointOnSurface=an,t.polygonToLineString=Rn,t.lineStringToPolygon=Mn,t.inside=Pt,t.within=Lt,t.bezier=ne,t.nearest=Te,t.pointOnLine=$e,t.lineDistance=fn,t.radians2degrees=_,t.degrees2radians=x,t.distanceToDegrees=y,t.distanceToRadians=m,t.radiansToDistance=d,t.bearingToAngle=v,t.convertDistance=w,t.toMercator=Qe,t.toWgs84=tn,t.randomPosition=ir,t.randomPoint=rr,t.randomPolygon=or,t.randomLineString=sr,t.getCluster=ur,t.clusterEach=cr,t.clusterReduce=lr,t.createBins=pr,t.applyFilter=fr,t.propertiesContainsFilter=dr,t.filterProperties=gr,t.earthRadius=wo,t.factors=Eo,t.unitsFactors=Co,t.areaFactors=Oo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=g,t.radiansToLength=d,t.lengthToRadians=m,t.lengthToDegrees=y,t.bearingToAzimuth=v,t.radiansToDegrees=_,t.degreesToRadians=x,t.convertLength=w,t.convertArea=E,t.isNumber=b,t.isObject=C,t.validateBBox=O,t.validateId=S,t.getCoord=U,t.getCoords=V,t.containsNumber=Y,t.geojsonType=X,t.featureOf=W,t.collectionOf=H,t.getGeom=$,t.getGeomType=K,t.getType=Z,t.coordEach=I,t.coordReduce=T,t.propEach=P,t.propReduce=R,t.featureEach=L,t.featureReduce=M,t.coordAll=N,t.geomEach=j,t.geomReduce=D,t.flattenEach=A,t.flattenReduce=q,t.segmentEach=F,t.segmentReduce=k,t.lineEach=G,t.lineReduce=B,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.r(e);var r=n(162);n.d(e,"Circle",function(){return r.a});var o=n(141);n.d(e,"Geometry",function(){return o.a});var c=n(88);n.d(e,"LineString",function(){return c.a});var l=n(142);n.d(e,"MultiLineString",function(){return l.a});var h=n(106);n.d(e,"MultiPoint",function(){return h.a});var f=n(146);n.d(e,"MultiPolygon",function(){return f.a});var d=n(47);n.d(e,"Point",function(){return d.a});var m=n(38);n.d(e,"Polygon",function(){return m.b})},function(t,e,n){var r=n(549);e.Processor=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(23))&&"object"==typeof r&&"default"in r?r.default:r;function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h="undefined"!=typeof window;function f(t,e){return e.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{})}var d={},m={},y={},v=new(o.extend({data:function(){return{transports:d,targets:m,sources:y,trackInstances:h}},methods:{open:function(t){if(h){var e=t.to,n=t.from,r=t.passengers,l=t.order,f=void 0===l?1/0:l;if(e&&n&&r){var d,m={to:e,from:n,passengers:(d=r,Array.isArray(d)||"object"===c(d)?Object.freeze(d):d),order:f};-1===Object.keys(this.transports).indexOf(e)&&o.set(this.transports,e,[]);var y,v=this.$_getTransportIndex(m),_=this.transports[e].slice(0);-1===v?_.push(m):_[v]=m,this.transports[e]=(y=function(a,b){return a.order-b.order},_.map(function(t,e){return[e,t]}).sort(function(a,b){return y(a[1],b[1])||a[0]-b[0]}).map(function(t){return t[1]}))}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.to,r=t.from;if(n&&r&&this.transports[n])if(e)this.transports[n]=[];else{var o=this.$_getTransportIndex(t);if(o>=0){var c=this.transports[n].slice(0);c.splice(o,1),this.transports[n]=c}}},registerTarget:function(t,e,n){h&&(this.trackInstances&&!n&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(source,t,e){h&&(this.trackInstances&&!e&&this.sources[source]&&console.warn("[portal-vue]: source ".concat(source," already exists")),this.$set(this.sources,source,Object.freeze([t])))},unregisterSource:function(source){this.$delete(this.sources,source)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,n=t.from;for(var i in this.transports[e])if(this.transports[e][i].from===n)return+i;return-1}}}))(d),_=1,x=o.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(_++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick(function(){v.registerSource(t.name,t)})},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){v.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};v.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"==typeof t?t(this.slotProps):t},sendUpdate:function(){var t=this.normalizeSlots();if(t){var e={from:this.name,to:this.to,passengers:l(t),order:this.order};v.open(e)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],n=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(n,[this.normalizeOwnChildren(e)]):this.slim?t():t(n,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),w=o.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:v.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick(function(){v.registerTarget(t.name,t)})},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){v.unregisterTarget(e),v.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick(function(){t.firstRender=!1})},beforeDestroy:function(){v.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce(function(t,n){var r=n.passengers[0],o="function"==typeof r?r(e):n.passengers;return t.concat(o)},[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),n=this.children(),r=this.transition||this.tag;return e?n[0]:this.slim&&!r?t():t(r,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},n)}}),E=0,C=["disabled","name","order","slim","slotProps","tag","to"],O=["multiple","transition"],S=o.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(E++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(v.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=v.targets[e.name];else{var n=e.append;if(n){var r="string"==typeof n?n:"DIV",o=document.createElement(r);t.appendChild(o),t=o}var c=f(this.$props,O);c.slim=this.targetSlim,c.tag=this.targetTag,c.slotProps=this.targetSlotProps,c.name=this.to,this.portalTarget=new w({el:t,parent:this.$parent||this,propsData:c})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=f(this.$props,C);return t(x,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var content=this.$scopedSlots.manual({to:this.to});return Array.isArray(content)&&(content=content[0]),content||t()}});var I={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.portalName||"Portal",x),t.component(e.portalTargetName||"PortalTarget",w),t.component(e.MountingPortalName||"MountingPortal",S)}};e.default=I,e.Portal=x,e.PortalTarget=w,e.MountingPortal=S,e.Wormhole=v},,function(t,e,n){"use strict";var r=function(t){return G(["text","password","search","email","tel","url","textarea","number"],t.type)},o=function(t){return G(["radio","checkbox"],t.type)},c=function(t,e){return t.getAttribute("data-vv-"+e)},l=function(t){return"isNaN"in Number?Number.isNaN(t):t==t},h=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.every(function(t){return null==t})},f=function(t,e){if(t instanceof RegExp&&e instanceof RegExp)return f(t.source,e.source)&&f(t.flags,e.flags);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!f(t[i],e[i]))return!1;return!0}return E(t)&&E(e)?Object.keys(t).every(function(n){return f(t[n],e[n])})&&Object.keys(e).every(function(n){return f(t[n],e[n])}):!(!l(t)||!l(e))||t===e},d=function(t){return h(t)?null:"FORM"===t.tagName?t:h(t.form)?h(t.parentNode)?null:d(t.parentNode):t.form},m=function(path,t,e){if(void 0===e&&(e=void 0),!path||!t)return e;var n=t;return path.split(".").every(function(t){return t in n?(n=n[t],!0):(n=e,!1)}),n},y=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n={cancelled:!1}),0===e?t:function(){for(var o=[],c=arguments.length;c--;)o[c]=arguments[c];clearTimeout(r),(r=setTimeout(function(){r=null,n.cancelled||t.apply(void 0,o)},e))||t.apply(void 0,o)};var r},v=function(t,e){return e?t?("string"==typeof e&&(e=_(e)),P({},e,_(t))):_(e):_(t)},_=function(t){return t?E(t)?Object.keys(t).reduce(function(e,n){var r=[];return r=!0===t[n]?[]:Array.isArray(t[n])?t[n]:E(t[n])?t[n]:[t[n]],!1!==t[n]&&(e[n]=r),e},{}):"string"!=typeof t?(x("rules must be either a string or an object."),{}):t.split("|").reduce(function(t,e){var n=function(t){var e=[],n=t.split(":")[0];return G(t,":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}}(e);return n.name?(t[n.name]=n.params,t):t},{}):{}},x=function(t){console.warn("[vee-validate] "+t)},w=function(t){return new Error("[vee-validate] "+t)},E=function(t){return null!==t&&t&&"object"==typeof t&&!Array.isArray(t)},C=function(t){return"function"==typeof t},O=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},S=function(t,e,n){if(t&&e){if(!Array.isArray(e))return n?function(t,e){t.classList?t.classList.add(e):O(t,e)||(t.className+=" "+e)}(t,e):void function(t,e){if(t.classList)t.classList.remove(e);else if(O(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}(t,e);e.forEach(function(e){return S(t,e,n)})}},I=function(t){if(C(Array.from))return Array.from(t);for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},T=function(t){if(Array.isArray(t))return[].concat(t);var e=I(t);return B(e)?[t]:e},P=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(C(Object.assign))return Object.assign.apply(Object,[t].concat(e));if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return e.forEach(function(t){null!=t&&Object.keys(t).forEach(function(e){r[e]=t[e]})}),r},R=0,L="{id}",M=function(t,e){for(var n=Array.isArray(t)?t:I(t),i=0;i<n.length;i++)if(e(n[i]))return i;return-1},N=function(t,e){var n=Array.isArray(t)?t:I(t),r=M(n,e);return-1===r?void 0:n[r]},j=function(t){if(!t)return!1;var e=t.componentOptions.tag;return/^(keep-alive|transition|transition-group)$/.test(e)},D=function(input){if("number"==typeof input)return input;if("string"==typeof input)return parseInt(input);var map={};for(var element in input)map[element]=parseInt(input[element]);return map},A=function(t,source){return E(t)&&E(source)?(Object.keys(source).forEach(function(e){var n,r;if(E(source[e]))return t[e]||P(t,((n={})[e]={},n)),void A(t[e],source[e]);P(t,((r={})[e]=source[e],r))}),t):t},F=function(t,e){if(t.required&&(e=v("required",e)),r(t))return"email"===t.type&&(e=v("email"+(t.multiple?":multiple":""),e)),t.pattern&&(e=v({regex:t.pattern},e)),t.maxLength>=0&&t.maxLength<524288&&(e=v("max:"+t.maxLength,e)),t.minLength>0&&(e=v("min:"+t.minLength,e)),"number"===t.type&&(e=v("decimal",e),""!==t.min&&(e=v("min_value:"+t.min,e)),""!==t.max&&(e=v("max_value:"+t.max,e))),e;if(function(t){return G(["date","week","month","datetime-local","time"],t.type)}(t)){var n=t.step&&Number(t.step)<60?"HH:mm:ss":"HH:mm";if("date"===t.type)return v("date_format:yyyy-MM-dd",e);if("datetime-local"===t.type)return v("date_format:yyyy-MM-ddT"+n,e);if("month"===t.type)return v("date_format:yyyy-MM",e);if("week"===t.type)return v("date_format:yyyy-[W]WW",e);if("time"===t.type)return v("date_format:"+n,e)}return e},k=function(t){return C(Object.values)?Object.values(t):Object.keys(t).map(function(e){return t[e]})},G=function(t,e){return-1!==t.indexOf(e)},B=function(t){return Array.isArray(t)&&0===t.length},z=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,writable:!0,value:n})},U="en",V=function(t){void 0===t&&(t={}),this.container={},this.merge(t)},Y={locale:{configurable:!0}};Y.locale.get=function(){return U},Y.locale.set=function(t){U=t||"en"},V.prototype.hasLocale=function(t){return!!this.container[t]},V.prototype.setDateFormat=function(t,e){this.container[t]||(this.container[t]={}),this.container[t].dateFormat=e},V.prototype.getDateFormat=function(t){return this.container[t]&&this.container[t].dateFormat?this.container[t].dateFormat:null},V.prototype.getMessage=function(t,e,data){var n=null;return n=this.hasMessage(t,e)?this.container[t].messages[e]:this._getDefaultMessage(t),C(n)?n.apply(void 0,data):n},V.prototype.getFieldMessage=function(t,e,n,data){if(!this.hasLocale(t))return this.getMessage(t,n,data);var r=this.container[t].custom&&this.container[t].custom[e];if(!r||!r[n])return this.getMessage(t,n,data);var o=r[n];return C(o)?o.apply(void 0,data):o},V.prototype._getDefaultMessage=function(t){return this.hasMessage(t,"_default")?this.container[t].messages._default:this.container.en.messages._default},V.prototype.getAttribute=function(t,e,n){return void 0===n&&(n=""),this.hasAttribute(t,e)?this.container[t].attributes[e]:n},V.prototype.hasMessage=function(t,e){return!!(this.hasLocale(t)&&this.container[t].messages&&this.container[t].messages[e])},V.prototype.hasAttribute=function(t,e){return!!(this.hasLocale(t)&&this.container[t].attributes&&this.container[t].attributes[e])},V.prototype.merge=function(t){A(this.container,t)},V.prototype.setMessage=function(t,e,n){this.hasLocale(t)||(this.container[t]={messages:{},attributes:{}}),this.container[t].messages[e]=n},V.prototype.setAttribute=function(t,e,n){this.hasLocale(t)||(this.container[t]={messages:{},attributes:{}}),this.container[t].attributes[e]=n},Object.defineProperties(V.prototype,Y);var X={default:new V({en:{messages:{},attributes:{},custom:{}}})},W="default",H=function(){};H._checkDriverName=function(t){if(!t)throw w("you must provide a name to the dictionary driver")},H.setDriver=function(t,e){void 0===e&&(e=null),this._checkDriverName(t),e&&(X[t]=e),W=t},H.getDriver=function(){return X[W]};var $=function t(e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.vmId=n||null,this.items=e&&e instanceof t?e.items:[]};$.prototype["function"==typeof Symbol?Symbol.iterator:"@@iterator"]=function(){var t=this,e=0;return{next:function(){return{value:t.items[e++],done:e>t.items.length}}}},$.prototype.add=function(t){var e;(e=this.items).push.apply(e,this._normalizeError(t))},$.prototype._normalizeError=function(t){var e=this;return Array.isArray(t)?t.map(function(t){return t.scope=h(t.scope)?null:t.scope,t.vmId=h(t.vmId)?e.vmId||null:t.vmId,t}):(t.scope=h(t.scope)?null:t.scope,t.vmId=h(t.vmId)?this.vmId||null:t.vmId,[t])},$.prototype.regenerate=function(){this.items.forEach(function(i){i.msg=C(i.regenerate)?i.regenerate():i.msg})},$.prototype.update=function(t,e){var n=N(this.items,function(i){return i.id===t});if(n){var r=this.items.indexOf(n);this.items.splice(r,1),n.scope=e.scope,this.items.push(n)}},$.prototype.all=function(t){var e=this;return this.items.filter(function(n){var r=!0,o=!0;return h(t)||(r=n.scope===t),h(e.vmId)||(o=n.vmId===e.vmId),o&&r}).map(function(t){return t.msg})},$.prototype.any=function(t){var e=this;return!!this.items.filter(function(n){var r=!0,o=!0;return h(t)||(r=n.scope===t),h(e.vmId)||(o=n.vmId===e.vmId),o&&r}).length},$.prototype.clear=function(t){var e=this,n=h(this.vmId)?function(){return!0}:function(i){return i.vmId===e.vmId};h(t)&&(t=null);for(var i=0;i<this.items.length;++i)n(this.items[i])&&this.items[i].scope===t&&(this.items.splice(i,1),--i)},$.prototype.collect=function(t,e,map){var n=this;void 0===map&&(map=!0);var r=!h(t)&&!t.includes("*"),o=function(t){var e=t.reduce(function(t,e){return h(n.vmId)||e.vmId===n.vmId?(t[e.field]||(t[e.field]=[]),t[e.field].push(map?e.msg:e),t):t},{});return r?k(e)[0]||[]:e};if(h(t))return o(this.items);var c=h(e)?String(t):e+"."+t,l=this._makeCandidateFilters(c),f=l.isPrimary,d=l.isAlt,m=this.items.reduce(function(t,e){return f(e)&&t.primary.push(e),d(e)&&t.alt.push(e),t},{primary:[],alt:[]});return o(m=m.primary.length?m.primary:m.alt)},$.prototype.count=function(){var t=this;return this.vmId?this.items.filter(function(e){return e.vmId===t.vmId}).length:this.items.length},$.prototype.firstById=function(t){var e=N(this.items,function(i){return i.id===t});return e?e.msg:void 0},$.prototype.first=function(t,e){void 0===e&&(e=null);var n=h(e)?t:e+"."+t,r=this._match(n);return r&&r.msg},$.prototype.firstRule=function(t,e){var n=this.collect(t,e,!1);return n.length&&n[0].rule||void 0},$.prototype.has=function(t,e){return void 0===e&&(e=null),!!this.first(t,e)},$.prototype.firstByRule=function(t,e,n){void 0===n&&(n=null);var r=this.collect(t,n,!1).filter(function(t){return t.rule===e})[0];return r&&r.msg||void 0},$.prototype.firstNot=function(t,e,n){void 0===e&&(e="required"),void 0===n&&(n=null);var r=this.collect(t,n,!1).filter(function(t){return t.rule!==e})[0];return r&&r.msg||void 0},$.prototype.removeById=function(t){var e=function(e){return e.id===t};Array.isArray(t)&&(e=function(e){return-1!==t.indexOf(e.id)});for(var i=0;i<this.items.length;++i)e(this.items[i])&&(this.items.splice(i,1),--i)},$.prototype.remove=function(t,e,n){if(!h(t))for(var r,o=h(e)?String(t):e+"."+t,c=this._makeCandidateFilters(o),l=c.isPrimary,f=c.isAlt,d=function(t){return l(t)||f(t)},i=0;i<this.items.length;++i)r=this.items[i],(h(n)?d(r):d(r)&&r.vmId===n)&&(this.items.splice(i,1),--i)},$.prototype._makeCandidateFilters=function(t){var e=this,n=function(){return!0},r=function(){return!0},o=function(){return!0},c=function(){return!0},l=function(t){var e=null;if(G(t,":")&&(e=t.split(":").pop(),t=t.replace(":"+e,"")),"#"===t[0])return{id:t.slice(1),rule:e,name:null,scope:null};var n=null,r=t;if(G(t,".")){var o=t.split(".");n=o[0],r=o.slice(1).join(".")}return{id:null,scope:n,name:r,rule:e}}(t),f=l.id,d=l.rule,m=l.scope,y=l.name;if(d&&(n=function(t){return t.rule===d}),f)return{isPrimary:function(t){return n(t)&&function(t){return f===t.id}},isAlt:function(){return!1}};r=h(m)?function(t){return h(t.scope)}:function(t){return t.scope===m},h(y)||"*"===y||(o=function(t){return t.field===y}),h(this.vmId)||(c=function(t){return t.vmId===e.vmId});return{isPrimary:function(t){return c(t)&&o(t)&&n(t)&&r(t)},isAlt:function(t){return c(t)&&n(t)&&t.field===m+"."+y}}},$.prototype._match=function(t){if(!h(t)){var e=this._makeCandidateFilters(t),n=e.isPrimary,r=e.isAlt;return this.items.reduce(function(t,e,o,c){var l=o===c.length-1;return t.primary?l?t.primary:t:(n(e)&&(t.primary=e),r(e)&&(t.alt=e),l?t.primary||t.alt:t)},{})}};var K=P({},{locale:"en",delay:0,errorBagName:"errors",dictionary:null,fieldsBagName:"fields",classes:!1,classNames:null,events:"input",inject:!0,fastExit:!0,aria:!0,validity:!1,mode:"aggressive",useConstraintAttrs:!0,i18n:null,i18nRootKey:"validation"}),Z=function(t){var e=m("$options.$_veeValidate",t,{});return P({},K,e)},J=function(){return K},Q=function(t){K=P({},K,t)};function tt(t){return t.data?t.data.model?t.data.model:!!t.data.directives&&N(t.data.directives,function(t){return"model"===t.name}):null}function et(t){return tt(t)?[t]:function(t){return Array.isArray(t)?t:Array.isArray(t.children)?t.children:t.componentOptions&&Array.isArray(t.componentOptions.children)?t.componentOptions.children:[]}(t).reduce(function(t,e){var n=et(e);return n.length&&t.push.apply(t,n),t},[])}function nt(t){return t.componentOptions?t.componentOptions.Ctor.options.model:null}function it(t,e,n){if(C(t[e])){var r=t[e];t[e]=[r]}Array.isArray(t[e])?t[e].push(n):h(t[e])&&(t[e]=[n])}function ot(t,e,n){t.componentOptions?function(t,e,n){t.componentOptions.listeners||(t.componentOptions.listeners={}),it(t.componentOptions.listeners,e,n)}(t,e,n):function(t,e,n){h(t.data.on)&&(t.data.on={}),it(t.data.on,e,n)}(t,e,n)}function st(t,e){return t.componentOptions?(nt(t)||{event:"input"}).event:e&&e.modifiers&&e.modifiers.lazy||"select"===t.tag?"change":t.data.attrs&&r({type:t.data.attrs.type||"text"})?"input":"change"}var at=function(){};at.generate=function(t,e,n){var r=at.resolveModel(e,n),o=Z(n.context);return{name:at.resolveName(t,n),el:t,listen:!e.modifiers.disable,bails:!!e.modifiers.bails||!0!==e.modifiers.continues&&void 0,scope:at.resolveScope(t,e,n),vm:n.context,expression:e.value,component:n.componentInstance,classes:o.classes,classNames:o.classNames,getter:at.resolveGetter(t,n,r),events:at.resolveEvents(t,n)||o.events,model:r,delay:at.resolveDelay(t,n,o),rules:at.resolveRules(t,e,n),immediate:!!e.modifiers.initial||!!e.modifiers.immediate,persist:!!e.modifiers.persist,validity:o.validity&&!n.componentInstance,aria:o.aria&&!n.componentInstance,initialValue:at.resolveInitialValue(n)}},at.getCtorConfig=function(t){return t.componentInstance?m("componentInstance.$options.$_veeValidate",t):null},at.resolveRules=function(t,e,n){var r="";if(e.value||e&&e.expression||(r=c(t,"rules")),e.value&&G(["string","object"],typeof e.value.rules)?r=e.value.rules:e.value&&(r=e.value),n.componentInstance)return r;var o=_(r);return J().useConstraintAttrs?P({},F(t,{}),o):o},at.resolveInitialValue=function(t){var e=t.data.model||N(t.data.directives,function(t){return"model"===t.name});return e&&e.value},at.resolveDelay=function(t,e,n){var r=c(t,"delay"),o=n&&"delay"in n?n.delay:0;return!r&&e.componentInstance&&e.componentInstance.$attrs&&(r=e.componentInstance.$attrs["data-vv-delay"]),E(o)?(h(r)||(o.input=r),D(o)):D(r||o)},at.resolveEvents=function(t,e){var n=c(t,"validate-on");if(!n&&e.componentInstance&&e.componentInstance.$attrs&&(n=e.componentInstance.$attrs["data-vv-validate-on"]),!n&&e.componentInstance){var r=at.getCtorConfig(e);n=r&&r.events}if(!n&&J().events&&(n=J().events),n&&e.componentInstance&&G(n,"input")){var o=(e.componentInstance.$options.model||{event:"input"}).event;if(!o)return n;n=n.replace("input",o)}return n},at.resolveScope=function(t,e,n){void 0===n&&(n={});var r=null;return n.componentInstance&&h(r)&&(r=n.componentInstance.$attrs&&n.componentInstance.$attrs["data-vv-scope"]),h(r)?function(t){var e=c(t,"scope");if(h(e)){var form=d(t);form&&(e=c(form,"scope"))}return h(e)?null:e}(t):r},at.resolveModel=function(t,e){if(t.arg)return{expression:t.arg};var n=tt(e);if(!n)return null;var path,r,o,c,l=!/[^\w.$]/.test(n.expression)&&(path=n.expression,r=e.context,o=r,c=null,path.split(".").reduce(function(t,e){return null==o||"object"!=typeof o?t&&!1:e in o?(o=o[e],c=null===c?e:c+"."+e,t&&!0):t&&!1},!0)),h=!(!n.modifiers||!n.modifiers.lazy);return l?{expression:n.expression,lazy:h}:{expression:null,lazy:h}},at.resolveName=function(t,e){var n=c(t,"name");if(!n&&!e.componentInstance)return t.name;if(!n&&e.componentInstance&&e.componentInstance.$attrs&&(n=e.componentInstance.$attrs["data-vv-name"]||e.componentInstance.$attrs.name),!n&&e.componentInstance){var r=at.getCtorConfig(e);return r&&C(r.name)?r.name.bind(e.componentInstance)():e.componentInstance.name}return n},at.resolveGetter=function(t,e,n){if(n&&n.expression)return function(){return m(n.expression,e.context)};if(e.componentInstance){var path=c(t,"value-path")||e.componentInstance.$attrs&&e.componentInstance.$attrs["data-vv-value-path"];if(path)return function(){return m(path,e.componentInstance)};var r=at.getCtorConfig(e);if(r&&C(r.value)){var o=r.value.bind(e.componentInstance);return function(){return o()}}var l=(e.componentInstance.$options.model||{prop:"value"}).prop;return function(){return e.componentInstance[l]}}switch(t.type){case"checkbox":return function(){var e=document.querySelectorAll('input[name="'+t.name+'"]');if((e=I(e).filter(function(t){return t.checked})).length)return e.map(function(t){return t.value})};case"radio":return function(){var e=document.querySelectorAll('input[name="'+t.name+'"]'),n=N(e,function(t){return t.checked});return n&&n.value};case"file":return function(e){return I(t.files)};case"select-multiple":return function(){return I(t.options).filter(function(t){return t.selected}).map(function(t){return t.value})};default:return function(){return t&&t.value}}};var ut={},ct=function(){},lt={rules:{configurable:!0}};ct.add=function(t,e){var n=e.validate,r=e.options,o=e.paramNames;ut[t]={validate:n,options:r,paramNames:o}},lt.rules.get=function(){return ut},ct.has=function(t){return!!ut[t]},ct.isImmediate=function(t){return!(!ut[t]||!ut[t].options.immediate)},ct.isRequireRule=function(t){return!(!ut[t]||!ut[t].options.computesRequired)},ct.isTargetRule=function(t){return!(!ut[t]||!ut[t].options.hasTarget)},ct.remove=function(t){delete ut[t]},ct.getParamNames=function(t){return ut[t]&&ut[t].paramNames},ct.getOptions=function(t){return ut[t]&&ut[t].options},ct.getValidatorMethod=function(t){return ut[t]?ut[t].validate:null},Object.defineProperties(ct,lt);var ht=function(t){return"undefined"!=typeof Event&&C(Event)&&t instanceof Event||t&&t.srcElement},pt=function(t){return t?"string"==typeof t?t.split("|"):t:[]},ft=!0,gt=function(t,e,n){t.addEventListener(e,n,!!ft&&{passive:!0})},mt={targetOf:null,immediate:!1,persist:!1,scope:null,listen:!0,name:null,rules:{},vm:null,classes:!1,validity:!0,aria:!0,events:"input|blur",delay:0,classNames:{touched:"touched",untouched:"untouched",valid:"valid",invalid:"invalid",pristine:"pristine",dirty:"dirty"}},yt=function(t){void 0===t&&(t={}),this.id=(R>=9999&&(R=0,L=L.replace("{id}","_{id}")),R++,L.replace("{id}",String(R))),this.el=t.el,this.updated=!1,this.vmId=t.vmId,z(this,"dependencies",[]),z(this,"watchers",[]),z(this,"events",[]),this.delay=0,this.rules={},this.forceRequired=!1,this._cacheId(t),this.classNames=P({},mt.classNames),t=P({},mt,t),this._delay=h(t.delay)?0:t.delay,this.validity=t.validity,this.aria=t.aria,this.flags=t.flags||{untouched:!0,touched:!1,dirty:!1,pristine:!0,valid:null,invalid:null,validated:!1,pending:!1,required:!1,changed:!1},z(this,"vm",t.vm),z(this,"componentInstance",t.component),this.ctorConfig=this.componentInstance?m("$options.$_veeValidate",this.componentInstance):void 0,this.update(t),this.initialValue=this.value,this.updated=!1},vt={validator:{configurable:!0},isRequired:{configurable:!0},isDisabled:{configurable:!0},alias:{configurable:!0},value:{configurable:!0},bails:{configurable:!0},rejectsFalse:{configurable:!0}};vt.validator.get=function(){return this.vm&&this.vm.$validator?this.vm.$validator:{validate:function(){}}},vt.isRequired.get=function(){return!!this.rules.required||this.forceRequired},vt.isDisabled.get=function(){return!(!this.el||!this.el.disabled)},vt.alias.get=function(){if(this._alias)return this._alias;var t=null;return this.ctorConfig&&this.ctorConfig.alias&&(t=C(this.ctorConfig.alias)?this.ctorConfig.alias.call(this.componentInstance):this.ctorConfig.alias),!t&&this.el&&(t=c(this.el,"as")),!t&&this.componentInstance?this.componentInstance.$attrs&&this.componentInstance.$attrs["data-vv-as"]:t},vt.value.get=function(){if(C(this.getter))return this.getter()},vt.bails.get=function(){return this._bails},vt.rejectsFalse.get=function(){return this.componentInstance&&this.ctorConfig?!!this.ctorConfig.rejectsFalse:!!this.el&&"checkbox"===this.el.type},yt.prototype.matches=function(t){var e=this;return!t||(t.id?this.id===t.id:!!(h(t.vmId)?function(){return!0}:function(t){return t===e.vmId})(t.vmId)&&(void 0===t.name&&void 0===t.scope||(void 0===t.scope?this.name===t.name:void 0===t.name?this.scope===t.scope:t.name===this.name&&t.scope===this.scope)))},yt.prototype._cacheId=function(t){this.el&&!t.targetOf&&(this.el._veeValidateId=this.id)},yt.prototype.waitFor=function(t){this._waitingFor=t},yt.prototype.isWaitingFor=function(t){return this._waitingFor===t},yt.prototype.update=function(t){var e,n,r;this.targetOf=t.targetOf||null,this.immediate=t.immediate||this.immediate||!1,this.persist=t.persist||this.persist||!1,!h(t.scope)&&t.scope!==this.scope&&C(this.validator.update)&&this.validator.update(this.id,{scope:t.scope}),this.scope=h(t.scope)?h(this.scope)?null:this.scope:t.scope,this.name=(h(t.name)?t.name:String(t.name))||this.name||null,this.rules=void 0!==t.rules?_(t.rules):this.rules,this._bails=void 0!==t.bails?t.bails:this._bails,this.model=t.model||this.model,this.listen=void 0!==t.listen?t.listen:this.listen,this.classes=!(!t.classes&&!this.classes)&&!this.componentInstance,this.classNames=E(t.classNames)?A(this.classNames,t.classNames):this.classNames,this.getter=C(t.getter)?t.getter:this.getter,this._alias=t.alias||this._alias,this.events=t.events?pt(t.events):this.events,this.delay=(e=this.events,n=t.delay||this.delay,r=this._delay,"number"==typeof n?e.reduce(function(t,e){return t[e]=n,t},{}):e.reduce(function(t,e){return"object"==typeof n&&e in n?(t[e]=n[e],t):"number"==typeof r?(t[e]=r,t):(t[e]=r&&r[e]||0,t)},{})),this.updateDependencies(),this.addActionListeners(),void 0!==t.rules&&(this.flags.required=this.isRequired),this.flags.validated&&void 0!==t.rules&&this.updated&&this.validator.validate("#"+this.id),this.updated=!0,this.addValueListeners(),this.el&&(this.updateClasses(),this.updateAriaAttrs())},yt.prototype.reset=function(){var t=this;this._cancellationToken&&(this._cancellationToken.cancelled=!0,delete this._cancellationToken);var e={untouched:!0,touched:!1,dirty:!1,pristine:!0,valid:null,invalid:null,validated:!1,pending:!1,required:!1,changed:!1};Object.keys(this.flags).filter(function(t){return"required"!==t}).forEach(function(n){t.flags[n]=e[n]}),this.initialValue=this.value,this.flags.changed=!1,this.addValueListeners(),this.addActionListeners(),this.updateClasses(!0),this.updateAriaAttrs(),this.updateCustomValidity()},yt.prototype.setFlags=function(t){var e=this,n={pristine:"dirty",dirty:"pristine",valid:"invalid",invalid:"valid",touched:"untouched",untouched:"touched"};Object.keys(t).forEach(function(r){e.flags[r]=t[r],n[r]&&void 0===t[n[r]]&&(e.flags[n[r]]=!t[r])}),void 0===t.untouched&&void 0===t.touched&&void 0===t.dirty&&void 0===t.pristine||this.addActionListeners(),this.updateClasses(),this.updateAriaAttrs(),this.updateCustomValidity()},yt.prototype.updateDependencies=function(){var t=this;this.dependencies.forEach(function(t){return t.field.destroy()}),this.dependencies=[];var e=Object.keys(this.rules).reduce(function(e,n){return ct.isTargetRule(n)&&e.push({selector:t.rules[n][0],name:n}),e},[]);e.length&&this.vm&&this.vm.$el&&e.forEach(function(e){var n=e.selector,r=e.name,o=t.vm.$refs[n],c=Array.isArray(o)?o[0]:o;if(c){var l={vm:t.vm,classes:t.classes,classNames:t.classNames,delay:t.delay,scope:t.scope,events:t.events.join("|"),immediate:t.immediate,targetOf:t.id};C(c.$watch)?(l.component=c,l.el=c.$el,l.getter=at.resolveGetter(c.$el,c.$vnode)):(l.el=c,l.getter=at.resolveGetter(c,{})),t.dependencies.push({name:r,field:new yt(l)})}})},yt.prototype.unwatch=function(t){if(void 0===t&&(t=null),!t)return this.watchers.forEach(function(t){return t.unwatch()}),void(this.watchers=[]);this.watchers.filter(function(e){return t.test(e.tag)}).forEach(function(t){return t.unwatch()}),this.watchers=this.watchers.filter(function(e){return!t.test(e.tag)})},yt.prototype.updateClasses=function(t){var e=this;if(void 0===t&&(t=!1),this.classes&&!this.isDisabled){var n=function(n){S(n,e.classNames.dirty,e.flags.dirty),S(n,e.classNames.pristine,e.flags.pristine),S(n,e.classNames.touched,e.flags.touched),S(n,e.classNames.untouched,e.flags.untouched),t&&(S(n,e.classNames.valid,!1),S(n,e.classNames.invalid,!1)),!h(e.flags.valid)&&e.flags.validated&&S(n,e.classNames.valid,e.flags.valid),!h(e.flags.invalid)&&e.flags.validated&&S(n,e.classNames.invalid,e.flags.invalid)};if(o(this.el)){var r=document.querySelectorAll('input[name="'+this.el.name+'"]');I(r).forEach(n)}else n(this.el)}},yt.prototype.addActionListeners=function(){var t=this;if(this.unwatch(/class/),this.el){var e=function(){t.flags.touched=!0,t.flags.untouched=!1,t.classes&&(S(t.el,t.classNames.touched,!0),S(t.el,t.classNames.untouched,!1)),t.unwatch(/^class_blur$/)},n=r(this.el)?"input":"change",c=function(){t.flags.dirty=!0,t.flags.pristine=!1,t.classes&&(S(t.el,t.classNames.pristine,!1),S(t.el,t.classNames.dirty,!0)),t.unwatch(/^class_input$/)};if(this.componentInstance&&C(this.componentInstance.$once))return this.componentInstance.$once("input",c),this.componentInstance.$once("blur",e),this.watchers.push({tag:"class_input",unwatch:function(){t.componentInstance.$off("input",c)}}),void this.watchers.push({tag:"class_blur",unwatch:function(){t.componentInstance.$off("blur",e)}});if(this.el){gt(this.el,n,c);var l=o(this.el)?"change":"blur";gt(this.el,l,e),this.watchers.push({tag:"class_input",unwatch:function(){t.el.removeEventListener(n,c)}}),this.watchers.push({tag:"class_blur",unwatch:function(){t.el.removeEventListener(l,e)}})}}},yt.prototype.checkValueChanged=function(){return(null!==this.initialValue||""!==this.value||!r(this.el))&&this.value!==this.initialValue},yt.prototype._determineInputEvent=function(){return this.componentInstance?this.componentInstance.$options.model&&this.componentInstance.$options.model.event||"input":this.model&&this.model.lazy?"change":r(this.el)?"input":"change"},yt.prototype._determineEventList=function(t){var e=this;return!this.events.length||this.componentInstance||r(this.el)?[].concat(this.events).map(function(t){return"input"===t&&e.model&&e.model.lazy?"change":t}):this.events.map(function(e){return"input"===e?t:e})},yt.prototype.addValueListeners=function(){var t=this;if(this.unwatch(/^input_.+/),this.listen&&this.el){var e={cancelled:!1},n=this.targetOf?function(){var e=t.validator._resolveField("#"+t.targetOf);e&&e.flags.validated&&t.validator.validate("#"+t.targetOf)}:function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];(0===n.length||ht(n[0]))&&(n[0]=t.value),t.flags.pending=!0,t._cancellationToken=e,t.validator.validate("#"+t.id,n[0])},r=this._determineInputEvent(),o=this._determineEventList(r);if(this.model&&G(o,r)){var c=null,l=this.model.expression;if(this.model.expression&&(c=this.vm,l=this.model.expression),!l&&this.componentInstance&&this.componentInstance.$options.model&&(c=this.componentInstance,l=this.componentInstance.$options.model.prop||"value"),c&&l){var h=y(n,this.delay[r],e),f=c.$watch(l,h);this.watchers.push({tag:"input_model",unwatch:function(){t.vm.$nextTick(function(){f()})}}),o=o.filter(function(t){return t!==r})}}o.forEach(function(r){var o=y(n,t.delay[r],e);t._addComponentEventListener(r,o),t._addHTMLEventListener(r,o)})}},yt.prototype._addComponentEventListener=function(t,e){var n=this;this.componentInstance&&(this.componentInstance.$on(t,e),this.watchers.push({tag:"input_vue",unwatch:function(){n.componentInstance.$off(t,e)}}))},yt.prototype._addHTMLEventListener=function(t,e){var n=this;if(this.el&&!this.componentInstance){var r=function(r){gt(r,t,e),n.watchers.push({tag:"input_native",unwatch:function(){r.removeEventListener(t,e)}})};if(r(this.el),o(this.el)){var c=document.querySelectorAll('input[name="'+this.el.name+'"]');I(c).forEach(function(t){t._veeValidateId&&t!==n.el||r(t)})}}},yt.prototype.updateAriaAttrs=function(){var t=this;if(this.aria&&this.el&&C(this.el.setAttribute)){var e=function(e){e.setAttribute("aria-required",t.isRequired?"true":"false"),e.setAttribute("aria-invalid",t.flags.invalid?"true":"false")};if(o(this.el)){var n=document.querySelectorAll('input[name="'+this.el.name+'"]');I(n).forEach(e)}else e(this.el)}},yt.prototype.updateCustomValidity=function(){this.validity&&this.el&&C(this.el.setCustomValidity)&&this.validator.errors&&this.el.setCustomValidity(this.flags.valid?"":this.validator.errors.firstById(this.id)||"")},yt.prototype.destroy=function(){this._cancellationToken&&(this._cancellationToken.cancelled=!0),this.unwatch(),this.dependencies.forEach(function(t){return t.field.destroy()}),this.dependencies=[]},Object.defineProperties(yt.prototype,vt);var _t=function(t){void 0===t&&(t=[]),this.items=t||[],this.itemsById=this.items.reduce(function(t,e){return t[e.id]=e,t},{})},bt={length:{configurable:!0}};_t.prototype["function"==typeof Symbol?Symbol.iterator:"@@iterator"]=function(){var t=this,e=0;return{next:function(){return{value:t.items[e++],done:e>t.items.length}}}},bt.length.get=function(){return this.items.length},_t.prototype.find=function(t){return N(this.items,function(e){return e.matches(t)})},_t.prototype.findById=function(t){return this.itemsById[t]||null},_t.prototype.filter=function(t){return Array.isArray(t)?this.items.filter(function(e){return t.some(function(t){return e.matches(t)})}):this.items.filter(function(e){return e.matches(t)})},_t.prototype.map=function(t){return this.items.map(t)},_t.prototype.remove=function(t){var e=null;if(!(e=t instanceof yt?t:this.find(t)))return null;var n=this.items.indexOf(e);return this.items.splice(n,1),delete this.itemsById[e.id],e},_t.prototype.push=function(t){if(!(t instanceof yt))throw w("FieldBag only accepts instances of Field that has an id defined.");if(!t.id)throw w("Field id must be defined.");if(this.findById(t.id))throw w("Field with id "+t.id+" is already added.");this.items.push(t),this.itemsById[t.id]=t},Object.defineProperties(_t.prototype,bt);var xt=function(base,t){this.id=t._uid,this._base=base,this._paused=!1,this.errors=new $(base.errors,this.id)},wt={flags:{configurable:!0},rules:{configurable:!0},fields:{configurable:!0},dictionary:{configurable:!0},locale:{configurable:!0}};wt.flags.get=function(){var t=this;return this._base.fields.items.filter(function(e){return e.vmId===t.id}).reduce(function(t,e){return e.scope&&(t["$"+e.scope]||(t["$"+e.scope]={}),t["$"+e.scope][e.name]=e.flags),t[e.name]=e.flags,t},{})},wt.rules.get=function(){return this._base.rules},wt.fields.get=function(){return new _t(this._base.fields.filter({vmId:this.id}))},wt.dictionary.get=function(){return this._base.dictionary},wt.locale.get=function(){return this._base.locale},wt.locale.set=function(t){this._base.locale=t},xt.prototype.localize=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base).localize.apply(t,e)},xt.prototype.update=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base).update.apply(t,e)},xt.prototype.attach=function(t){var e=P({},t,{vmId:this.id});return this._base.attach(e)},xt.prototype.pause=function(){this._paused=!0},xt.prototype.resume=function(){this._paused=!1},xt.prototype.remove=function(t){return this._base.remove(t)},xt.prototype.detach=function(t,e){return this._base.detach(t,e,this.id)},xt.prototype.extend=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base).extend.apply(t,e)},xt.prototype.validate=function(t,e,n){return void 0===n&&(n={}),this._paused?Promise.resolve(!0):this._base.validate(t,e,P({},{vmId:this.id},n||{}))},xt.prototype.verify=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base).verify.apply(t,e)},xt.prototype.validateAll=function(t,e){return void 0===e&&(e={}),this._paused?Promise.resolve(!0):this._base.validateAll(t,P({},{vmId:this.id},e||{}))},xt.prototype.validateScopes=function(t){return void 0===t&&(t={}),this._paused?Promise.resolve(!0):this._base.validateScopes(P({},{vmId:this.id},t||{}))},xt.prototype.destroy=function(){delete this.id,delete this._base},xt.prototype.reset=function(t){return this._base.reset(Object.assign({},t||{},{vmId:this.id}))},xt.prototype.flag=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base).flag.apply(t,e.concat([this.id]))},xt.prototype._resolveField=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=this._base)._resolveField.apply(t,e)},Object.defineProperties(xt.prototype,wt);var Et=null,Ct=function(){return Et},Ot={provide:function(){return this.$validator&&!j(this.$vnode)?{$validator:this.$validator}:{}},beforeCreate:function(){if(!j(this.$vnode)&&!1!==this.$options.$__veeInject){this.$parent||Q(this.$options.$_veeValidate||{});var t=Z(this);(!this.$parent||this.$options.$_veeValidate&&/new/.test(this.$options.$_veeValidate.validator))&&(this.$validator=new xt(Ct(),this));var e,n=(e=this.$options.inject,!(!E(e)||!e.$validator));if(this.$validator||!t.inject||n||(this.$validator=new xt(Ct(),this)),n||this.$validator){if(!n&&this.$validator)this.$options._base.util.defineReactive(this.$validator,"errors",this.$validator.errors);this.$options.computed||(this.$options.computed={}),this.$options.computed[t.errorBagName||"errors"]=function(){return this.$validator.errors},this.$options.computed[t.fieldsBagName||"fields"]=function(){return this.$validator.fields.items.reduce(function(t,e){return e.scope?(t["$"+e.scope]||(t["$"+e.scope]={}),t["$"+e.scope][e.name]=e.flags,t):(t[e.name]=e.flags,t)},{})}}}},beforeDestroy:function(){this.$validator&&this._uid===this.$validator.id&&this.$validator.errors.clear()}};function St(t,e){return e&&e.$validator?e.$validator.fields.findById(t._veeValidateId):null}var It={bind:function(t,e,n){var r=n.context.$validator;if(r){var o=at.generate(t,e,n);r.attach(o)}},inserted:function(t,e,n){var r=St(t,n.context),o=at.resolveScope(t,e,n);r&&o!==r.scope&&(r.update({scope:o}),r.updated=!1)},update:function(t,e,n){var r=St(t,n.context);if(!(!r||r.updated&&f(e.value,e.oldValue))){var o=at.resolveScope(t,e,n),c=at.resolveRules(t,e,n);r.update({scope:o,rules:c})}},unbind:function(t,e,n){var r=n.context,o=St(t,r);o&&r.$validator.detach(o)}},Tt=function(t,e,n){void 0===e&&(e={fastExit:!0}),void 0===n&&(n=null),this.errors=new $,this.fields=new _t,this._createFields(t),this.paused=!1,this.fastExit=!!h(e&&e.fastExit)||e.fastExit,this.$vee=n||{_vm:{$nextTick:function(t){return C(t)?t():Promise.resolve()},$emit:function(){},$off:function(){}}}},Pt={rules:{configurable:!0},dictionary:{configurable:!0},flags:{configurable:!0},locale:{configurable:!0}},Rt={rules:{configurable:!0},dictionary:{configurable:!0},locale:{configurable:!0}};Rt.rules.get=function(){return ct.rules},Pt.rules.get=function(){return ct.rules},Pt.dictionary.get=function(){return H.getDriver()},Rt.dictionary.get=function(){return H.getDriver()},Pt.flags.get=function(){return this.fields.items.reduce(function(t,e){var n;return e.scope?(t["$"+e.scope]=((n={})[e.name]=e.flags,n),t):(t[e.name]=e.flags,t)},{})},Pt.locale.get=function(){return Tt.locale},Pt.locale.set=function(t){Tt.locale=t},Rt.locale.get=function(){return H.getDriver().locale},Rt.locale.set=function(t){var e=t!==H.getDriver().locale;H.getDriver().locale=t,e&&Tt.$vee&&Tt.$vee._vm&&Tt.$vee._vm.$emit("localeChanged")},Tt.create=function(t,e){return new Tt(t,e)},Tt.extend=function(t,e,n){void 0===n&&(n={}),Tt._guardExtend(t,e);var r=e.options||{};Tt._merge(t,{validator:e,paramNames:n&&n.paramNames||e.paramNames,options:P({hasTarget:!1,immediate:!0},r,n||{})})},Tt.remove=function(t){ct.remove(t)},Tt.prototype.localize=function(t,e){Tt.localize(t,e)},Tt.localize=function(t,e){var n;if(E(t))H.getDriver().merge(t);else{if(e){var r=t||e.name;e=P({},e),H.getDriver().merge(((n={})[r]=e,n))}t&&(Tt.locale=t)}},Tt.prototype.attach=function(t){var e=this,n={name:t.name,scope:t.scope,persist:!0},r=t.persist?this.fields.find(n):null;r&&(t.flags=r.flags,r.destroy(),this.fields.remove(r));var o=t.initialValue,c=new yt(t);return this.fields.push(c),c.immediate?this.$vee._vm.$nextTick(function(){return e.validate("#"+c.id,o||c.value,{vmId:t.vmId})}):this._validate(c,o||c.value,{initial:!0}).then(function(t){c.flags.valid=t.valid,c.flags.invalid=!t.valid}),c},Tt.prototype.flag=function(t,e,n){void 0===n&&(n=null);var r=this._resolveField(t,void 0,n);r&&e&&r.setFlags(e)},Tt.prototype.detach=function(t,e,n){var r=C(t.destroy)?t:this._resolveField(t,e,n);r&&(r.persist||(r.destroy(),this.errors.remove(r.name,r.scope,r.vmId),this.fields.remove(r)))},Tt.prototype.extend=function(t,e,n){void 0===n&&(n={}),Tt.extend(t,e,n)},Tt.prototype.reset=function(t){var e=this;return this.$vee._vm.$nextTick().then(function(){return e.$vee._vm.$nextTick()}).then(function(){e.fields.filter(t).forEach(function(n){n.waitFor(null),n.reset(),e.errors.remove(n.name,n.scope,t&&t.vmId)})})},Tt.prototype.update=function(t,e){var n=e.scope;this._resolveField("#"+t)&&this.errors.update(t,{scope:n})},Tt.prototype.remove=function(t){Tt.remove(t)},Tt.prototype.validate=function(t,e,n){var r=this;void 0===n&&(n={});var o=n.silent,c=n.vmId;if(this.paused)return Promise.resolve(!0);if(h(t))return this.validateScopes({silent:o,vmId:c});if("*"===t)return this.validateAll(void 0,{silent:o,vmId:c});if(/^(.+)\.\*$/.test(t)){var l=t.match(/^(.+)\.\*$/)[1];return this.validateAll(l)}var f=this._resolveField(t);if(!f)return this._handleFieldNotFound(t);o||(f.flags.pending=!0),void 0===e&&(e=f.value);var d=this._validate(f,e);return f.waitFor(d),d.then(function(t){return!o&&f.isWaitingFor(d)&&(f.waitFor(null),r._handleValidationResults([t],c)),t.valid})},Tt.prototype.pause=function(){return this.paused=!0,this},Tt.prototype.resume=function(){return this.paused=!1,this},Tt.prototype.validateAll=function(t,e){var n=this;void 0===e&&(e={});var r=e.silent,o=e.vmId;if(this.paused)return Promise.resolve(!0);var c=null,l=!1;return"string"==typeof t?c={scope:t,vmId:o}:E(t)?(c=Object.keys(t).map(function(t){return{name:t,vmId:o,scope:null}}),l=!0):c=Array.isArray(t)?t.map(function(t){return"object"==typeof t?Object.assign({vmId:o},t):{name:t,vmId:o}}):{scope:null,vmId:o},Promise.all(this.fields.filter(c).map(function(e){return n._validate(e,l?t[e.name]:e.value)})).then(function(t){return r||n._handleValidationResults(t,o),t.every(function(t){return t.valid})})},Tt.prototype.validateScopes=function(t){var e=this;void 0===t&&(t={});var n=t.silent,r=t.vmId;return this.paused?Promise.resolve(!0):Promise.all(this.fields.filter({vmId:r}).map(function(t){return e._validate(t,t.value)})).then(function(t){return n||e._handleValidationResults(t,r),t.every(function(t){return t.valid})})},Tt.prototype.verify=function(t,e,n){void 0===n&&(n={});var r={name:n&&n.name||"{field}",rules:_(e),bails:m("bails",n,!0),forceRequired:!1,get isRequired(){return!!this.rules.required||this.forceRequired}},o=Object.keys(r.rules).filter(ct.isTargetRule);return o.length&&n&&E(n.values)&&(r.dependencies=o.map(function(t){var e=r.rules[t][0];return{name:t,field:{value:n.values[e]}}})),this._validate(r,t).then(function(t){var e=[],n={};return t.errors.forEach(function(t){e.push(t.msg),n[t.rule]=t.msg}),{valid:t.valid,errors:e,failedRules:n}})},Tt.prototype.destroy=function(){this.$vee._vm.$off("localeChanged")},Tt.prototype._createFields=function(t){var e=this;t&&Object.keys(t).forEach(function(n){var r=P({},{name:n,rules:t[n]});e.attach(r)})},Tt.prototype._getDateFormat=function(t){var e=null;return t.date_format&&Array.isArray(t.date_format)&&(e=t.date_format[0]),e||H.getDriver().getDateFormat(this.locale)},Tt.prototype._formatErrorMessage=function(t,e,data,n){void 0===data&&(data={}),void 0===n&&(n=null);var r=this._getFieldDisplayName(t),o=this._getLocalizedParams(e,n);return H.getDriver().getFieldMessage(this.locale,t.name,e.name,[r,o,data])},Tt.prototype._convertParamObjectToArray=function(t,e){if(Array.isArray(t))return t;var n=ct.getParamNames(e);return n&&E(t)?n.reduce(function(e,n){return n in t&&e.push(t[n]),e},[]):t},Tt.prototype._getLocalizedParams=function(t,e){void 0===e&&(e=null);var n=this._convertParamObjectToArray(t.params,t.name);return t.options.hasTarget&&n&&n[0]?[e||H.getDriver().getAttribute(this.locale,n[0],n[0])].concat(n.slice(1)):n},Tt.prototype._getFieldDisplayName=function(t){return t.alias||H.getDriver().getAttribute(this.locale,t.name,t.name)},Tt.prototype._convertParamArrayToObj=function(t,e){var n=ct.getParamNames(e);if(!n)return t;if(E(t)){if(n.some(function(e){return-1!==Object.keys(t).indexOf(e)}))return t;t=[t]}return t.reduce(function(t,e,r){return t[n[r]]=e,t},{})},Tt.prototype._test=function(t,e,n){var r=this,o=ct.getValidatorMethod(n.name),c=Array.isArray(n.params)?I(n.params):n.params;c||(c=[]);var l=null;if(!o||"function"!=typeof o)return Promise.reject(w("No such validator '"+n.name+"' exists."));if(n.options.hasTarget&&t.dependencies){var h=N(t.dependencies,function(t){return t.name===n.name});h&&(l=h.field.alias,c=[h.field.value].concat(c.slice(1)))}else"required"===n.name&&t.rejectsFalse&&(c=c.length?c:[!0]);if(n.options.isDate){var f=this._getDateFormat(t.rules);"date_format"!==n.name&&c.push(f)}var d=o(e,this._convertParamArrayToObj(c,n.name));return C(d.then)?d.then(function(e){var o=!0,data={};return Array.isArray(e)?o=e.every(function(t){return E(t)?t.valid:t}):(o=E(e)?e.valid:e,data=e.data),{valid:o,data:d.data,errors:o?[]:[r._createFieldError(t,n,data,l)]}}):(E(d)||(d={valid:d,data:{}}),{valid:d.valid,data:d.data,errors:d.valid?[]:[this._createFieldError(t,n,d.data,l)]})},Tt._merge=function(t,e){var n=e.validator,r=e.options,o=e.paramNames,c=C(n)?n:n.validate;n.getMessage&&H.getDriver().setMessage(Tt.locale,t,n.getMessage),ct.add(t,{validate:c,options:r,paramNames:o})},Tt._guardExtend=function(t,e){if(!C(e)&&!C(e.validate))throw w("Extension Error: The validator '"+t+"' must be a function or have a 'validate' method.")},Tt.prototype._createFieldError=function(t,e,data,n){var r=this;return{id:t.id,vmId:t.vmId,field:t.name,msg:this._formatErrorMessage(t,e,data,n),rule:e.name,scope:t.scope,regenerate:function(){return r._formatErrorMessage(t,e,data,n)}}},Tt.prototype._resolveField=function(t,e,n){if("#"===t[0])return this.fields.findById(t.slice(1));if(!h(e))return this.fields.find({name:t,scope:e,vmId:n});if(G(t,".")){var r=t.split("."),o=r[0],c=r.slice(1),l=this.fields.find({name:c.join("."),scope:o,vmId:n});if(l)return l}return this.fields.find({name:t,scope:null,vmId:n})},Tt.prototype._handleFieldNotFound=function(t,e){var n=h(e)?t:(h(e)?"":e+".")+t;return Promise.reject(w('Validating a non-existent field: "'+n+'". Use "attach()" first.'))},Tt.prototype._handleValidationResults=function(t,e){var n=this,r=t.map(function(t){return{id:t.id}});this.errors.removeById(r.map(function(t){return t.id})),t.forEach(function(t){n.errors.remove(t.field,t.scope,e)});var o=t.reduce(function(t,e){return t.push.apply(t,e.errors),t},[]);this.errors.add(o),this.fields.filter(r).forEach(function(e){var n=N(t,function(t){return t.id===e.id});e.setFlags({pending:!1,valid:n.valid,validated:!0})})},Tt.prototype._shouldSkip=function(t,e){return!1!==t.bails&&(!(!t.isDisabled||!J().useConstraintAttrs)||!t.isRequired&&(h(e)||""===e||B(e)))},Tt.prototype._shouldBail=function(t){return void 0!==t.bails?t.bails:this.fastExit},Tt.prototype._validate=function(t,e,n){var r=this;void 0===n&&(n={});var o=n.initial,c=Object.keys(t.rules).filter(ct.isRequireRule);if(t.forceRequired=!1,c.forEach(function(n){var o=ct.getOptions(n),c=r._test(t,e,{name:n,params:t.rules[n],options:o});if(C(c.then))throw w("Require rules cannot be async");if(!E(c))throw w("Require rules has to return an object (see docs)");!0===c.data.required&&(t.forceRequired=!0)}),this._shouldSkip(t,e))return Promise.resolve({valid:!0,id:t.id,field:t.name,scope:t.scope,errors:[]});var l=[],h=[],f=!1;return C(t.checkValueChanged)&&(t.flags.changed=t.checkValueChanged()),Object.keys(t.rules).filter(function(t){return!o||!ct.has(t)||ct.isImmediate(t)}).some(function(n){var o=ct.getOptions(n),c=r._test(t,e,{name:n,params:t.rules[n],options:o});return C(c.then)?l.push(c):!c.valid&&r._shouldBail(t)?(h.push.apply(h,c.errors),f=!0):l.push(new Promise(function(t){return t(c)})),f}),f?Promise.resolve({valid:!1,errors:h,id:t.id,field:t.name,scope:t.scope}):Promise.all(l).then(function(e){return e.reduce(function(t,e){var n;return e.valid||(n=t.errors).push.apply(n,e.errors),t.valid=t.valid&&e.valid,t},{valid:!0,errors:h,id:t.id,field:t.name,scope:t.scope})})},Object.defineProperties(Tt.prototype,Pt),Object.defineProperties(Tt,Rt);var Lt=function(t){return E(t)?Object.keys(t).reduce(function(e,n){return e[n]=Lt(t[n]),e},{}):C(t)?t("{0}",["{1}","{2}","{3}"]):t},Mt=function(t,e){this.i18n=t,this.rootKey=e},Nt={locale:{configurable:!0}};Nt.locale.get=function(){return this.i18n.locale},Nt.locale.set=function(t){x("Cannot set locale from the validator when using vue-i18n, use i18n.locale setter instead")},Mt.prototype.getDateFormat=function(t){return this.i18n.getDateTimeFormat(t||this.locale)},Mt.prototype.setDateFormat=function(t,e){this.i18n.setDateTimeFormat(t||this.locale,e)},Mt.prototype.getMessage=function(t,e,data){var path=this.rootKey+".messages."+e,n=data;return Array.isArray(data)&&(n=[].concat.apply([],data)),this.i18n.te(path)?this.i18n.t(path,n):this.i18n.te(path,this.i18n.fallbackLocale)?this.i18n.t(path,this.i18n.fallbackLocale,n):this.i18n.t(this.rootKey+".messages._default",n)},Mt.prototype.getAttribute=function(t,e,n){void 0===n&&(n="");var path=this.rootKey+".attributes."+e;return this.i18n.te(path)?this.i18n.t(path):n},Mt.prototype.getFieldMessage=function(t,e,n,data){var path=this.rootKey+".custom."+e+"."+n;return this.i18n.te(path)?this.i18n.t(path,data):this.getMessage(t,n,data)},Mt.prototype.merge=function(t){var e=this;Object.keys(t).forEach(function(n){var r,o=A({},m(n+"."+e.rootKey,e.i18n.messages,{})),c=A(o,function(t){var e={};return t.messages&&(e.messages=Lt(t.messages)),t.custom&&(e.custom=Lt(t.custom)),t.attributes&&(e.attributes=t.attributes),h(t.dateFormat)||(e.dateFormat=t.dateFormat),e}(t[n]));e.i18n.mergeLocaleMessage(n,((r={})[e.rootKey]=c,r)),c.dateFormat&&e.i18n.setDateTimeFormat(n,c.dateFormat)})},Mt.prototype.setMessage=function(t,e,n){var r,o;this.merge(((o={})[t]={messages:(r={},r[e]=n,r)},o))},Mt.prototype.setAttribute=function(t,e,n){var r,o;this.merge(((o={})[t]={attributes:(r={},r[e]=n,r)},o))},Object.defineProperties(Mt.prototype,Nt);var jt,Dt,At,Ft={aggressive:function(){return{on:["input"]}},eager:function(t){return t.errors.length?{on:["input"]}:{on:["change","blur"]}},passive:function(){return{on:[]}},lazy:function(){return{on:["change"]}}},kt=function(t,e){var n;this.configure(t),At=this,e&&(jt=e),this._validator=(n=new Tt(null,{fastExit:t&&t.fastExit},this),Et=n,n),this._initVM(this.config),this._initI18n(this.config)},Gt={i18nDriver:{configurable:!0},config:{configurable:!0}},Bt={i18nDriver:{configurable:!0},config:{configurable:!0}};kt.setI18nDriver=function(t,e){H.setDriver(t,e)},kt.configure=function(t){Q(t)},kt.setMode=function(t,e){if(Q({mode:t}),e){if(!C(e))throw new Error("A mode implementation must be a function");Ft[t]=e}},kt.use=function(t,e){return void 0===e&&(e={}),C(t)?At?void t({Validator:Tt,ErrorBag:$,Rules:Tt.rules},e):(Dt||(Dt=[]),void Dt.push({plugin:t,options:e})):x("The plugin must be a callable function")},kt.install=function(t,e){jt&&t===jt||(jt=t,At=new kt(e),Tt.$vee=At,function(){try{var t=Object.defineProperty({},"passive",{get:function(){ft=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){ft=!1}}(),jt.mixin(Ot),jt.directive("validate",It),Dt&&(Dt.forEach(function(t){var e=t.plugin,n=t.options;kt.use(e,n)}),Dt=null))},Gt.i18nDriver.get=function(){return H.getDriver()},Bt.i18nDriver.get=function(){return H.getDriver()},Gt.config.get=function(){return J()},Bt.config.get=function(){return J()},kt.prototype._initVM=function(t){var e=this;this._vm=new jt({data:function(){return{errors:e._validator.errors,fields:e._validator.fields}}})},kt.prototype._initI18n=function(t){var e=this,n=t.dictionary,r=t.i18n,o=t.i18nRootKey,c=t.locale,l=function(){n&&e.i18nDriver.merge(n),e._validator.errors.regenerate()};r?(kt.setI18nDriver("i18n",new Mt(r,o)),r._vm.$watch("locale",l)):"undefined"!=typeof window&&this._vm.$on("localeChanged",l),n&&this.i18nDriver.merge(n),c&&!r&&this._validator.localize(c)},kt.prototype.configure=function(t){Q(t)},Object.defineProperties(kt.prototype,Gt),Object.defineProperties(kt,Bt),kt.mixin=Ot,kt.directive=It,kt.Validator=Tt,kt.ErrorBag=$;var zt,Ut={name:"en",messages:{_default:function(t){return"The "+t+" value is not valid."},after:function(t,e){var n=e[0];return"The "+t+" must be after "+(e[1]?"or equal to ":"")+n+"."},alpha:function(t){return"The "+t+" field may only contain alphabetic characters."},alpha_dash:function(t){return"The "+t+" field may contain alpha-numeric characters as well as dashes and underscores."},alpha_num:function(t){return"The "+t+" field may only contain alpha-numeric characters."},alpha_spaces:function(t){return"The "+t+" field may only contain alphabetic characters as well as spaces."},before:function(t,e){var n=e[0];return"The "+t+" must be before "+(e[1]?"or equal to ":"")+n+"."},between:function(t,e){return"The "+t+" field must be between "+e[0]+" and "+e[1]+"."},confirmed:function(t){return"The "+t+" confirmation does not match."},credit_card:function(t){return"The "+t+" field is invalid."},date_between:function(t,e){return"The "+t+" must be between "+e[0]+" and "+e[1]+"."},date_format:function(t,e){return"The "+t+" must be in the format "+e[0]+"."},decimal:function(t,e){void 0===e&&(e=[]);var n=e[0];return void 0===n&&(n="*"),"The "+t+" field must be numeric and may contain "+(n&&"*"!==n?n:"")+" decimal points."},digits:function(t,e){return"The "+t+" field must be numeric and exactly contain "+e[0]+" digits."},dimensions:function(t,e){return"The "+t+" field must be "+e[0]+" pixels by "+e[1]+" pixels."},email:function(t){return"The "+t+" field must be a valid email."},excluded:function(t){return"The "+t+" field must be a valid value."},ext:function(t){return"The "+t+" field must be a valid file."},image:function(t){return"The "+t+" field must be an image."},included:function(t){return"The "+t+" field must be a valid value."},integer:function(t){return"The "+t+" field must be an integer."},ip:function(t){return"The "+t+" field must be a valid ip address."},ip_or_fqdn:function(t){return"The "+t+" field must be a valid ip address or FQDN."},length:function(t,e){var n=e[0],r=e[1];return r?"The "+t+" length must be between "+n+" and "+r+".":"The "+t+" length must be "+n+"."},max:function(t,e){return"The "+t+" field may not be greater than "+e[0]+" characters."},max_value:function(t,e){return"The "+t+" field must be "+e[0]+" or less."},mimes:function(t){return"The "+t+" field must have a valid file type."},min:function(t,e){return"The "+t+" field must be at least "+e[0]+" characters."},min_value:function(t,e){return"The "+t+" field must be "+e[0]+" or more."},numeric:function(t){return"The "+t+" field may only contain numeric characters."},regex:function(t){return"The "+t+" field format is invalid."},required:function(t){return"The "+t+" field is required."},required_if:function(t,e){return"The "+t+" field is required when the "+e[0]+" field has this value."},size:function(t,e){return"The "+t+" size must be less than "+function(t){var i=0==(t=1024*Number(t))?0:Math.floor(Math.log(t)/Math.log(1024));return 1*(t/Math.pow(1024,i)).toFixed(2)+" "+["Byte","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}(e[0])+"."},url:function(t){return"The "+t+" field is not a valid URL."}},attributes:{}};function qt(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}"undefined"!=typeof VeeValidate&&VeeValidate.Validator.localize(((zt={})[Ut.name]=Ut,zt));var Vt=6e4;function Yt(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var r=e.getTime()%Vt;return n*Vt+r}var Xt=36e5,Wt=6e4,Ht=2,$t={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Kt(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===t)return new Date(NaN);var n=e||{},r=null==n.additionalDigits?Ht:qt(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))return new Date(t.getTime());if("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))return new Date(t);if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var o=function(t){var e,n={},r=t.split($t.dateTimeDelimeter);$t.plainTime.test(r[0])?(n.date=null,e=r[0]):(n.date=r[0],e=r[1],$t.timeZoneDelimeter.test(n.date)&&(n.date=t.split($t.timeZoneDelimeter)[0],e=t.substr(n.date.length,t.length)));if(e){var o=$t.timezone.exec(e);o?(n.time=e.replace(o[1],""),n.timezone=o[1]):n.time=e}return n}(t),c=function(t,e){var n,r=$t.YYY[e],o=$t.YYYYY[e];if(n=$t.YYYY.exec(t)||o.exec(t)){var c=n[1];return{year:parseInt(c,10),restDateString:t.slice(c.length)}}if(n=$t.YY.exec(t)||r.exec(t)){var l=n[1];return{year:100*parseInt(l,10),restDateString:t.slice(l.length)}}return{year:null}}(o.date,r),l=c.year,h=function(t,e){if(null===e)return null;var n,r,o,c;if(0===t.length)return(r=new Date(0)).setUTCFullYear(e),r;if(n=$t.MM.exec(t))return r=new Date(0),o=parseInt(n[1],10)-1,ee(e,o)?(r.setUTCFullYear(e,o),r):new Date(NaN);if(n=$t.DDD.exec(t)){r=new Date(0);var l=parseInt(n[1],10);return function(t,e){if(e<1)return!1;var n=te(t);if(n&&e>366)return!1;if(!n&&e>365)return!1;return!0}(e,l)?(r.setUTCFullYear(e,0,l),r):new Date(NaN)}if(n=$t.MMDD.exec(t)){r=new Date(0),o=parseInt(n[1],10)-1;var h=parseInt(n[2],10);return ee(e,o,h)?(r.setUTCFullYear(e,o,h),r):new Date(NaN)}if(n=$t.Www.exec(t))return c=parseInt(n[1],10)-1,ne(e,c)?Zt(e,c):new Date(NaN);if(n=$t.WwwD.exec(t)){c=parseInt(n[1],10)-1;var f=parseInt(n[2],10)-1;return ne(e,c,f)?Zt(e,c,f):new Date(NaN)}return null}(c.restDateString,l);if(isNaN(h))return new Date(NaN);if(h){var f,d=h.getTime(),time=0;if(o.time&&(time=function(t){var e,n,r;if(e=$t.HH.exec(t))return ie(n=parseFloat(e[1].replace(",",".")))?n%24*Xt:NaN;if(e=$t.HHMM.exec(t))return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),ie(n,r)?n%24*Xt+r*Wt:NaN;if(e=$t.HHMMSS.exec(t)){n=parseInt(e[1],10),r=parseInt(e[2],10);var o=parseFloat(e[3].replace(",","."));return ie(n,r,o)?n%24*Xt+r*Wt+1e3*o:NaN}return null}(o.time),isNaN(time)))return new Date(NaN);if(o.timezone){if(f=function(t){var e,n,r;if(e=$t.timezoneZ.exec(t))return 0;if(e=$t.timezoneHH.exec(t))return re(r=parseInt(e[2],10))?(n=r*Xt,"+"===e[1]?-n:n):NaN;if(e=$t.timezoneHHMM.exec(t)){r=parseInt(e[2],10);var o=parseInt(e[3],10);return re(r,o)?(n=r*Xt+o*Wt,"+"===e[1]?-n:n):NaN}return 0}(o.timezone),isNaN(f))return new Date(NaN)}else f=Yt(new Date(d+time)),f=Yt(new Date(d+time+f));return new Date(d+time+f)}return new Date(NaN)}function Zt(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var o=7*e+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}var Jt=[31,28,31,30,31,30,31,31,30,31,30,31],Qt=[31,29,31,30,31,30,31,31,30,31,30,31];function te(t){return t%400==0||t%4==0&&t%100!=0}function ee(t,e,n){if(e<0||e>11)return!1;if(null!=n){if(n<1)return!1;var r=te(t);if(r&&n>Qt[e])return!1;if(!r&&n>Jt[e])return!1}return!0}function ne(t,e,n){return!(e<0||e>52)&&(null==n||!(n<0||n>6))}function ie(t,e,n){return(null==t||!(t<0||t>=25))&&((null==e||!(e<0||e>=60))&&(null==n||!(n<0||n>=60)))}function re(t,e){return null==e||!(e<0||e>59)}function oe(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e);return!isNaN(n)}var se={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ae(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var ue={date:ae({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ae({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ae({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function le(t){return function(e,n){var r=n||{},o=r.width?String(r.width):t.defaultWidth;return("formatting"===(r.context?String(r.context):"standalone")&&t.formattingValues?t.formattingValues[o]||t.formattingValues[t.defaultFormattingWidth]:t.values[o]||t.values[t.defaultWidth])[t.argumentCallback?t.argumentCallback(e):e]}}function he(t){return function(e,n){var r=String(e),o=n||{},c=o.width,l=c&&t.matchPatterns[c]||t.matchPatterns[t.defaultMatchWidth],h=r.match(l);if(!h)return null;var f,d=h[0],m=c&&t.parsePatterns[c]||t.parsePatterns[t.defaultParseWidth];return f="[object Array]"===Object.prototype.toString.call(m)?m.findIndex(function(pattern){return pattern.test(r)}):function(object,t){for(var e in object)if(object.hasOwnProperty(e)&&t(object[e]))return e}(m,function(pattern){return pattern.test(r)}),f=t.valueCallback?t.valueCallback(f):f,{value:f=o.valueCallback?o.valueCallback(f):f,rest:r.slice(d.length)}}}var pe,fe={formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof se[t]?se[t]:1===e?se[t].one:se[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:ue,formatRelative:function(t,e,n,r){return ce[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:le({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:le({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:le({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:le({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:le({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaulFormattingWidth:"wide"})},match:{ordinalNumber:(pe={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},o=n.match(pe.matchPattern);if(!o)return null;var c=o[0],l=n.match(pe.parsePattern);if(!l)return null;var h=pe.valueCallback?pe.valueCallback(l[0]):l[0];return{value:h=r.valueCallback?r.valueCallback(h):h,rest:n.slice(c.length)}}),era:he({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:he({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:he({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:he({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:he({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},de=864e5;function ge(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=n.getUTCDay(),o=(r<1?7:0)+r-1;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function me(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=n.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(r+1,0,4),o.setUTCHours(0,0,0,0);var c=ge(o,e),l=new Date(0);l.setUTCFullYear(r,0,4),l.setUTCHours(0,0,0,0);var h=ge(l,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}var ye=6048e5;function ve(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=ge(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=me(t,e),r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),ge(r,e)}(n,e).getTime();return Math.round(r/ye)+1}function _e(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,c=null==o?0:qt(o),l=null==n.weekStartsOn?c:qt(n.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Kt(t,n),f=h.getUTCDay(),d=(f<l?7:0)+f-l;return h.setUTCDate(h.getUTCDate()-d),h.setUTCHours(0,0,0,0),h}function be(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=n.getUTCFullYear(),o=e||{},c=o.locale,l=c&&c.options&&c.options.firstWeekContainsDate,h=null==l?1:qt(l),f=null==o.firstWeekContainsDate?h:qt(o.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(r+1,0,f),d.setUTCHours(0,0,0,0);var m=_e(d,e),y=new Date(0);y.setUTCFullYear(r,0,f),y.setUTCHours(0,0,0,0);var v=_e(y,e);return n.getTime()>=m.getTime()?r+1:n.getTime()>=v.getTime()?r:r-1}var xe=6048e5;function we(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=_e(n,e).getTime()-function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,c=null==o?1:qt(o),l=null==n.firstWeekContainsDate?c:qt(n.firstWeekContainsDate),h=be(t,e),f=new Date(0);return f.setUTCFullYear(h,0,l),f.setUTCHours(0,0,0,0),_e(f,e)}(n,e).getTime();return Math.round(r/xe)+1}var Ee="midnight",Ce="noon",Oe="morning",Se="afternoon",Ie="evening",Te="night",Pe={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n,r){var o=t.getUTCFullYear(),c=o>0?o:1-o;return"yy"===e?Re(c%100,2):"yo"===e?n.ordinalNumber(c,{unit:"year"}):Re(c,e.length)},Y:function(t,e,n,r){var o=be(t,r),c=o>0?o:1-o;return"YY"===e?Re(c%100,2):"Yo"===e?n.ordinalNumber(c,{unit:"year"}):Re(c,e.length)},R:function(t,e,n,r){return Re(me(t,r),e.length)},u:function(t,e,n,r){return Re(t.getUTCFullYear(),e.length)},Q:function(t,e,n,r){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return Re(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,e,n,r){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return Re(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,e,n,r){var o=t.getUTCMonth();switch(e){case"M":return String(o+1);case"MM":return Re(o+1,2);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,e,n,r){var o=t.getUTCMonth();switch(e){case"L":return String(o+1);case"LL":return Re(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var o=we(t,r);return"wo"===e?n.ordinalNumber(o,{unit:"week"}):Re(o,e.length)},I:function(t,e,n,r){var o=ve(t,r);return"Io"===e?n.ordinalNumber(o,{unit:"week"}):Re(o,e.length)},d:function(t,e,n,r){var o=t.getUTCDate();return"do"===e?n.ordinalNumber(o,{unit:"date"}):Re(o,e.length)},D:function(t,e,n,r){var o=function(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Kt(t,e),r=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var o=r-n.getTime();return Math.floor(o/de)+1}(t,r);return"Do"===e?n.ordinalNumber(o,{unit:"dayOfYear"}):Re(o,e.length)},E:function(t,e,n,r){var o=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var o=t.getUTCDay(),c=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return Re(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var o=t.getUTCDay(),c=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return Re(c,e.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n,r){var o=t.getUTCDay(),c=0===o?7:o;switch(e){case"i":return String(c);case"ii":return Re(c,e.length);case"io":return n.ordinalNumber(c,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,o=t.getUTCHours();switch(r=12===o?Ce:0===o?Ee:o/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,o=t.getUTCHours();switch(r=o>=17?Ie:o>=12?Se:o>=4?Oe:Te,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n,r){var o=t.getUTCHours()%12;return 0===o&&(o=12),"ho"===e?n.ordinalNumber(o,{unit:"hour"}):Re(o,e.length)},H:function(t,e,n,r){var o=t.getUTCHours();return"Ho"===e?n.ordinalNumber(o,{unit:"hour"}):Re(o,e.length)},K:function(t,e,n,r){var o=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(o,{unit:"hour"}):Re(o,e.length)},k:function(t,e,n,r){var o=t.getUTCHours();return 0===o&&(o=24),"ko"===e?n.ordinalNumber(o,{unit:"hour"}):Re(o,e.length)},m:function(t,e,n,r){var o=t.getUTCMinutes();return"mo"===e?n.ordinalNumber(o,{unit:"minute"}):Re(o,e.length)},s:function(t,e,n,r){var o=t.getUTCSeconds();return"so"===e?n.ordinalNumber(o,{unit:"second"}):Re(o,e.length)},S:function(t,e,n,r){var o=e.length,c=t.getUTCMilliseconds();return Re(Math.floor(c*Math.pow(10,o-3)),o)},X:function(t,e,n,r){var o=(r._originalDate||t).getTimezoneOffset();if(0===o)return"Z";switch(e){case"X":return Me(o);case"XXXX":case"XX":return Le(o);case"XXXXX":case"XXX":default:return Le(o,":")}},x:function(t,e,n,r){var o=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return Me(o);case"xxxx":case"xx":return Le(o);case"xxxxx":case"xxx":default:return Le(o,":")}},O:function(t,e,n,r){var o=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ne(o,":");case"OOOO":default:return"GMT"+Le(o,":")}},z:function(t,e,n,r){var o=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ne(o,":");case"zzzz":default:return"GMT"+Le(o,":")}},t:function(t,e,n,r){var o=r._originalDate||t;return Re(Math.floor(o.getTime()/1e3),e.length)},T:function(t,e,n,r){return Re((r._originalDate||t).getTime(),e.length)}};function Re(t,e){for(var n=t<0?"-":"",output=Math.abs(t).toString();output.length<e;)output="0"+output;return n+output}function Le(t,e){var n=e||"",r=t>0?"-":"+",o=Math.abs(t);return r+Re(Math.floor(o/60),2)+n+Re(o%60,2)}function Me(t,e){return t%60==0?(t>0?"-":"+")+Re(Math.abs(t)/60,2):Le(t,e)}function Ne(t,e){var n=t>0?"-":"+",r=Math.abs(t),o=Math.floor(r/60),c=r%60;if(0===c)return n+String(o);var l=e||"";return n+String(o)+l+Re(c,2)}function je(pattern,t,e){switch(pattern){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function De(pattern,t,e){switch(pattern){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var Ae={p:De,P:function(pattern,t,e){var n,r=pattern.match(/(P+)(p+)?/),o=r[1],c=r[2];if(!c)return je(pattern,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",je(o,t)).replace("{{time}}",De(c,t))}};function Fe(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n).getTime(),o=qt(e);return new Date(r+o)}(t,-qt(e),n)}var ke=["D","DD","YY","YYYY"];function Ge(t){return-1!==ke.indexOf(t)}function Be(t){throw new RangeError("`options.awareOfUnicodeTokens` must be set to `true` to use `"+t+"` token; see: https://git.io/fxCyr")}var ze=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qe=/^'(.*?)'?$/,Ve=/''/g;function Ye(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(e),o=n||{},c=o.locale||fe,l=c.options&&c.options.firstWeekContainsDate,h=null==l?1:qt(l),f=null==o.firstWeekContainsDate?h:qt(o.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=c.options&&c.options.weekStartsOn,m=null==d?0:qt(d),y=null==o.weekStartsOn?m:qt(o.weekStartsOn);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!c.localize)throw new RangeError("locale must contain localize property");if(!c.formatLong)throw new RangeError("locale must contain formatLong property");var v=Kt(t,o);if(!oe(v,o))return"Invalid Date";var _=Fe(v,Yt(v),o),x={firstWeekContainsDate:f,weekStartsOn:y,locale:c,_originalDate:v};return r.match(Ue).map(function(t){var e=t[0];return"p"===e||"P"===e?(0,Ae[e])(t,c.formatLong,x):t}).join("").match(ze).map(function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return t.match(qe)[1].replace(Ve,"'");var n=Pe[e];return n?(!o.awareOfUnicodeTokens&&Ge(t)&&Be(t),n(_,t,c.localize,x)):t}).join("")}function Xe(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n),o=Kt(e,n);return r.getTime()>o.getTime()}function We(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n),o=Kt(e,n);return r.getTime()<o.getTime()}function He(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n),o=Kt(e,n);return r.getTime()===o.getTime()}function $e(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},o=r.locale,c=o&&o.options&&o.options.weekStartsOn,l=null==c?0:qt(c),h=null==r.weekStartsOn?l:qt(r.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Kt(t,n),d=qt(e),m=((d%7+7)%7<h?7:0)+d-f.getUTCDay();return f.setUTCDate(f.getUTCDate()+m),f}var Ke=36e5,Ze=6e4,Je=1e3,Qe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},tn=/^([+-])(\d{2})(\d{2})?|Z/,en=/^([+-])(\d{2})(\d{2})|Z/,nn=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,rn=/^([+-])(\d{2}):(\d{2})|Z/,on=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function sn(pattern,t,e){var n=t.match(pattern);if(!n)return null;var r=parseInt(n[0],10);return{value:e?e(r):r,rest:t.slice(n[0].length)}}function an(pattern,t){var e=t.match(pattern);if(!e)return null;if("Z"===e[0])return{value:0,rest:t.slice(1)};var n="+"===e[1]?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,c=e[5]?parseInt(e[5],10):0;return{value:n*(r*Ke+o*Ze+c*Je),rest:t.slice(e[0].length)}}function un(t,e){return sn(Qe.anyDigitsSigned,t,e)}function cn(t,e,n){switch(t){case 1:return sn(Qe.singleDigit,e,n);case 2:return sn(Qe.twoDigits,e,n);case 3:return sn(Qe.threeDigits,e,n);case 4:return sn(Qe.fourDigits,e,n);default:return sn(new RegExp("^\\d{1,"+t+"}"),e,n)}}function ln(t,e,n){switch(t){case 1:return sn(Qe.singleDigitSigned,e,n);case 2:return sn(Qe.twoDigitsSigned,e,n);case 3:return sn(Qe.threeDigitsSigned,e,n);case 4:return sn(Qe.fourDigitsSigned,e,n);default:return sn(new RegExp("^-?\\d{1,"+t+"}"),e,n)}}function hn(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function pn(t,e){var n,r=e>0,o=r?e:1-e;if(o<=50)n=t||100;else{var c=o+50;n=t+100*Math.floor(c/100)-(t>=c%100?100:0)}return r?n:1-n}var fn=[31,28,31,30,31,30,31,31,30,31,30,31],dn=[31,29,31,30,31,30,31,31,30,31,30,31];function gn(t){return t%400==0||t%4==0&&t%100!=0}var mn={G:{priority:140,parse:function(t,e,n,r){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}},set:function(t,e,n){return t.setUTCFullYear(1===e?10:-9,0,1),t.setUTCHours(0,0,0,0),t}},y:{priority:130,parse:function(t,e,n,r){var o=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return cn(4,t,o);case"yo":return n.ordinalNumber(t,{unit:"year",valueCallback:o});default:return cn(e.length,t,o)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n){var r=be(t,n);if(e.isTwoDigitYear){var o=pn(e.year,r);return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t}var c=r>0?e.year:1-e.year;return t.setUTCFullYear(c,0,1),t.setUTCHours(0,0,0,0),t}},Y:{priority:130,parse:function(t,e,n,r){var o=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return cn(4,t,o);case"Yo":return n.ordinalNumber(t,{unit:"year",valueCallback:o});default:return cn(e.length,t,o)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n){var r=t.getUTCFullYear();if(e.isTwoDigitYear){var o=pn(e.year,r);return t.setUTCFullYear(o,0,n.firstWeekContainsDate),t.setUTCHours(0,0,0,0),_e(t,n)}var c=r>0?e.year:1-e.year;return t.setUTCFullYear(c,0,n.firstWeekContainsDate),t.setUTCHours(0,0,0,0),_e(t,n)}},R:{priority:130,parse:function(t,e,n,r){return ln("R"===e?4:e.length,t)},set:function(t,e,n){var r=new Date(0);return r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0),ge(r)}},u:{priority:130,parse:function(t,e,n,r){return ln("u"===e?4:e.length,t)},set:function(t,e,n){return t.setUTCFullYear(e,0,1),t.setUTCHours(0,0,0,0),t}},Q:{priority:120,parse:function(t,e,n,r){switch(e){case"Q":case"QQ":return cn(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n){return t.setUTCMonth(3*(e-1),1),t.setUTCHours(0,0,0,0),t}},q:{priority:120,parse:function(t,e,n,r){switch(e){case"q":case"qq":return cn(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n){return t.setUTCMonth(3*(e-1),1),t.setUTCHours(0,0,0,0),t}},M:{priority:110,parse:function(t,e,n,r){var o=function(t){return t-1};switch(e){case"M":return sn(Qe.month,t,o);case"MM":return cn(2,t,o);case"Mo":return n.ordinalNumber(t,{unit:"month",valueCallback:o});case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n){return t.setUTCMonth(e,1),t.setUTCHours(0,0,0,0),t}},L:{priority:110,parse:function(t,e,n,r){var o=function(t){return t-1};switch(e){case"L":return sn(Qe.month,t,o);case"LL":return cn(2,t,o);case"Lo":return n.ordinalNumber(t,{unit:"month",valueCallback:o});case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n){return t.setUTCMonth(e,1),t.setUTCHours(0,0,0,0),t}},w:{priority:100,parse:function(t,e,n,r){switch(e){case"w":return sn(Qe.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n){return _e(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n),o=qt(e),c=we(r,n)-o;return r.setUTCDate(r.getUTCDate()-7*c),r}(t,e,n),n)}},I:{priority:100,parse:function(t,e,n,r){switch(e){case"I":return sn(Qe.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n){return ge(function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Kt(t,n),o=qt(e),c=ve(r,n)-o;return r.setUTCDate(r.getUTCDate()-7*c),r}(t,e,n),n)}},d:{priority:90,parse:function(t,e,n,r){switch(e){case"d":return sn(Qe.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return cn(e.length,t)}},validate:function(t,e,n){var r=gn(t.getUTCFullYear()),o=t.getUTCMonth();return r?e>=1&&e<=dn[o]:e>=1&&e<=fn[o]},set:function(t,e,n){return t.setUTCDate(e),t.setUTCHours(0,0,0,0),t}},D:{priority:90,parse:function(t,e,n,r){switch(e){case"D":case"DD":return sn(Qe.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return cn(e.length,t)}},validate:function(t,e,n){return gn(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,n){return t.setUTCMonth(0,e),t.setUTCHours(0,0,0,0),t}},E:{priority:90,parse:function(t,e,n,r){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n){return(t=$e(t,e,n)).setUTCHours(0,0,0,0),t}},e:{priority:90,parse:function(t,e,n,r){var o=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return cn(e.length,t,o);case"eo":return n.ordinalNumber(t,{unit:"day",valueCallback:o});case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n){return(t=$e(t,e,n)).setUTCHours(0,0,0,0),t}},c:{priority:90,parse:function(t,e,n,r){var o=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return cn(e.length,t,o);case"co":return n.ordinalNumber(t,{unit:"day",valueCallback:o});case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n){return(t=$e(t,e,n)).setUTCHours(0,0,0,0),t}},i:{priority:90,parse:function(t,e,n,r){var o=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return cn(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return n.day(t,{width:"abbreviated",context:"formatting",valueCallback:o})||n.day(t,{width:"short",context:"formatting",valueCallback:o})||n.day(t,{width:"narrow",context:"formatting",valueCallback:o});case"iiiii":return n.day(t,{width:"narrow",context:"formatting",valueCallback:o});case"iiiiii":return n.day(t,{width:"short",context:"formatting",valueCallback:o})||n.day(t,{width:"narrow",context:"formatting",valueCallback:o});case"iiii":default:return n.day(t,{width:"wide",context:"formatting",valueCallback:o})||n.day(t,{width:"abbreviated",context:"formatting",valueCallback:o})||n.day(t,{width:"short",context:"formatting",valueCallback:o})||n.day(t,{width:"narrow",context:"formatting",valueCallback:o})}},validate:function(t,e,n){return e>=1&&e<=7},set:function(t,e,n){return(t=function(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=qt(e);r%7==0&&(r-=7);var o=Kt(t,n),c=((r%7+7)%7<1?7:0)+r-o.getUTCDay();return o.setUTCDate(o.getUTCDate()+c),o}(t,e,n)).setUTCHours(0,0,0,0),t}},a:{priority:80,parse:function(t,e,n,r){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n){return t.setUTCHours(hn(e),0,0,0),t}},b:{priority:80,parse:function(t,e,n,r){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n){return t.setUTCHours(hn(e),0,0,0),t}},B:{priority:80,parse:function(t,e,n,r){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n){return t.setUTCHours(hn(e),0,0,0),t}},h:{priority:70,parse:function(t,e,n,r){switch(e){case"h":return sn(Qe.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=12},set:function(t,e,n){var r=t.getUTCHours()>=12;return r&&e<12?t.setUTCHours(e+12,0,0,0):r||12!==e?t.setUTCHours(e,0,0,0):t.setUTCHours(0,0,0,0),t}},H:{priority:70,parse:function(t,e,n,r){switch(e){case"H":return sn(Qe.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=23},set:function(t,e,n){return t.setUTCHours(e,0,0,0),t}},K:{priority:70,parse:function(t,e,n,r){switch(e){case"K":return sn(Qe.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n){return t.getUTCHours()>=12&&e<12?t.setUTCHours(e+12,0,0,0):t.setUTCHours(e,0,0,0),t}},k:{priority:70,parse:function(t,e,n,r){switch(e){case"k":return sn(Qe.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=24},set:function(t,e,n){var r=e<=24?e%24:e;return t.setUTCHours(r,0,0,0),t}},m:{priority:60,parse:function(t,e,n,r){switch(e){case"m":return sn(Qe.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n){return t.setUTCMinutes(e,0,0),t}},s:{priority:50,parse:function(t,e,n,r){switch(e){case"s":return sn(Qe.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return cn(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n){return t.setUTCSeconds(e,0),t}},S:{priority:40,parse:function(t,e,n,r){return cn(e.length,t,function(t){return Math.floor(t*Math.pow(10,3-e.length))})},set:function(t,e,n){return t.setUTCMilliseconds(e),t}},X:{priority:20,parse:function(t,e,n,r){switch(e){case"X":return an(tn,t);case"XX":return an(en,t);case"XXXX":return an(nn,t);case"XXXXX":return an(on,t);case"XXX":default:return an(rn,t)}},set:function(t,e,n){return new Date(t.getTime()-e)}},x:{priority:20,parse:function(t,e,n,r){switch(e){case"x":return an(tn,t);case"xx":return an(en,t);case"xxxx":return an(nn,t);case"xxxxx":return an(on,t);case"xxx":default:return an(rn,t)}},set:function(t,e,n){return new Date(t.getTime()-e)}},t:{priority:10,parse:function(t,e,n,r){return un(t)},set:function(t,e,n){return new Date(1e3*e)}},T:{priority:10,parse:function(t,e,n,r){return un(t)},set:function(t,e,n){return new Date(e)}}},yn=20,vn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_n=/^'(.*?)'?$/,bn=/''/g,xn=/\S/;function wn(t){var e=new Date(0);return e.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),e.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e}function En(t,e){if("string"!=typeof t)return oe(t)?t:null;var n=function(t,e,n,r){if(arguments.length<3)throw new TypeError("3 arguments required, but only "+arguments.length+" present");var o=String(t),c=String(e),l=r||{},h=l.locale||fe;if(!h.match)throw new RangeError("locale must contain match property");var f=h.options&&h.options.firstWeekContainsDate,d=null==f?1:qt(f),m=null==l.firstWeekContainsDate?d:qt(l.firstWeekContainsDate);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=h.options&&h.options.weekStartsOn,v=null==y?0:qt(y),_=null==l.weekStartsOn?v:qt(l.weekStartsOn);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===c)return""===o?Kt(n,l):new Date(NaN);var i,x={firstWeekContainsDate:m,weekStartsOn:_,locale:h},w=[{priority:yn,set:wn,index:0}],E=c.match(vn);for(i=0;i<E.length;i++){var C=E[i];!l.awareOfUnicodeTokens&&Ge(C)&&Be(C);var O=C[0],S=mn[O];if(S){var I=S.parse(o,C,h.match,x);if(!I)return new Date(NaN);w.push({priority:S.priority,set:S.set,validate:S.validate,value:I.value,index:w.length}),o=I.rest}else{if("''"===C?C="'":"'"===O&&(C=C.match(_n)[1].replace(bn,"'")),0!==o.indexOf(C))return new Date(NaN);o=o.slice(C.length)}}if(o.length>0&&xn.test(o))return new Date(NaN);var T=w.map(function(t){return t.priority}).sort(function(a,b){return b-a}).filter(function(t,e,n){return n.indexOf(t)===e}).map(function(t){return w.filter(function(e){return e.priority===t}).reverse()}).map(function(t){return t[0]}),P=Kt(n,l);if(isNaN(P))return new Date(NaN);var R=Fe(P,Yt(P));for(i=0;i<T.length;i++){var L=T[i];if(L.validate&&!L.validate(R,L.value,x))return new Date(NaN);R=L.set(R,L.value,x)}return R}(t,e,new Date);return oe(n)&&Ye(n,e)===t?n:null}var Cn={validate:function(t,e){void 0===e&&(e={});var n=e.targetValue,r=e.inclusion;void 0===r&&(r=!1);var o=e.format;return void 0===o&&(o=r,r=!1),t=En(t,o),n=En(n,o),!(!t||!n)&&(Xe(t,n)||r&&He(t,n))},options:{hasTarget:!0,isDate:!0},paramNames:["targetValue","inclusion","format"]},On={en:/^[A-Z]*$/i,cs:/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,da:/^[A-ZÆØÅ]*$/i,de:/^[A-ZÄÖÜß]*$/i,es:/^[A-ZÁÉÍÑÓÚÜ]*$/i,fr:/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,it:/^[A-Z\xC0-\xFF]*$/i,lt:/^[A-ZĄČĘĖĮŠŲŪŽ]*$/i,nl:/^[A-ZÉËÏÓÖÜ]*$/i,hu:/^[A-ZÁÉÍÓÖŐÚÜŰ]*$/i,pl:/^[A-ZĄĆĘŚŁŃÓŻŹ]*$/i,pt:/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,ru:/^[А-ЯЁ]*$/i,sk:/^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,sr:/^[A-ZČĆŽŠĐ]*$/i,sv:/^[A-ZÅÄÖ]*$/i,tr:/^[A-ZÇĞİıÖŞÜ]*$/i,uk:/^[А-ЩЬЮЯЄІЇҐ]*$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,az:/^[A-ZÇƏĞİıÖŞÜ]*$/i},Sn={en:/^[A-Z\s]*$/i,cs:/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ\s]*$/i,da:/^[A-ZÆØÅ\s]*$/i,de:/^[A-ZÄÖÜß\s]*$/i,es:/^[A-ZÁÉÍÑÓÚÜ\s]*$/i,fr:/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ\s]*$/i,it:/^[A-Z\xC0-\xFF\s]*$/i,lt:/^[A-ZĄČĘĖĮŠŲŪŽ\s]*$/i,nl:/^[A-ZÉËÏÓÖÜ\s]*$/i,hu:/^[A-ZÁÉÍÓÖŐÚÜŰ\s]*$/i,pl:/^[A-ZĄĆĘŚŁŃÓŻŹ\s]*$/i,pt:/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ\s]*$/i,ru:/^[А-ЯЁ\s]*$/i,sk:/^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ\s]*$/i,sr:/^[A-ZČĆŽŠĐ\s]*$/i,sv:/^[A-ZÅÄÖ\s]*$/i,tr:/^[A-ZÇĞİıÖŞÜ\s]*$/i,uk:/^[А-ЩЬЮЯЄІЇҐ\s]*$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ\s]*$/,az:/^[A-ZÇƏĞİıÖŞÜ\s]*$/i},In={en:/^[0-9A-Z]*$/i,cs:/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,da:/^[0-9A-ZÆØÅ]$/i,de:/^[0-9A-ZÄÖÜß]*$/i,es:/^[0-9A-ZÁÉÍÑÓÚÜ]*$/i,fr:/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,it:/^[0-9A-Z\xC0-\xFF]*$/i,lt:/^[0-9A-ZĄČĘĖĮŠŲŪŽ]*$/i,hu:/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]*$/i,nl:/^[0-9A-ZÉËÏÓÖÜ]*$/i,pl:/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]*$/i,pt:/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,ru:/^[0-9А-ЯЁ]*$/i,sk:/^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,sr:/^[0-9A-ZČĆŽŠĐ]*$/i,sv:/^[0-9A-ZÅÄÖ]*$/i,tr:/^[0-9A-ZÇĞİıÖŞÜ]*$/i,uk:/^[0-9А-ЩЬЮЯЄІЇҐ]*$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,az:/^[0-9A-ZÇƏĞİıÖŞÜ]*$/i},Tn={en:/^[0-9A-Z_-]*$/i,cs:/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ_-]*$/i,da:/^[0-9A-ZÆØÅ_-]*$/i,de:/^[0-9A-ZÄÖÜß_-]*$/i,es:/^[0-9A-ZÁÉÍÑÓÚÜ_-]*$/i,fr:/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ_-]*$/i,it:/^[0-9A-Z\xC0-\xFF_-]*$/i,lt:/^[0-9A-ZĄČĘĖĮŠŲŪŽ_-]*$/i,nl:/^[0-9A-ZÉËÏÓÖÜ_-]*$/i,hu:/^[0-9A-ZÁÉÍÓÖŐÚÜŰ_-]*$/i,pl:/^[0-9A-ZĄĆĘŚŁŃÓŻŹ_-]*$/i,pt:/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ_-]*$/i,ru:/^[0-9А-ЯЁ_-]*$/i,sk:/^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ_-]*$/i,sr:/^[0-9A-ZČĆŽŠĐ_-]*$/i,sv:/^[0-9A-ZÅÄÖ_-]*$/i,tr:/^[0-9A-ZÇĞİıÖŞÜ_-]*$/i,uk:/^[0-9А-ЩЬЮЯЄІЇҐ_-]*$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ_-]*$/,az:/^[0-9A-ZÇƏĞİıÖŞÜ_-]*$/i},Pn=function(t,e){void 0===e&&(e={});var n=e.locale;return Array.isArray(t)?t.every(function(t){return Pn(t,[n])}):n?(On[n]||On.en).test(t):Object.keys(On).some(function(e){return On[e].test(t)})},Rn={validate:Pn,paramNames:["locale"]},Ln=function(t,e){void 0===e&&(e={});var n=e.locale;return Array.isArray(t)?t.every(function(t){return Ln(t,[n])}):n?(Tn[n]||Tn.en).test(t):Object.keys(Tn).some(function(e){return Tn[e].test(t)})},Mn={validate:Ln,paramNames:["locale"]},Nn=function(t,e){void 0===e&&(e={});var n=e.locale;return Array.isArray(t)?t.every(function(t){return Nn(t,[n])}):n?(In[n]||In.en).test(t):Object.keys(In).some(function(e){return In[e].test(t)})},jn={validate:Nn,paramNames:["locale"]},Dn=function(t,e){void 0===e&&(e={});var n=e.locale;return Array.isArray(t)?t.every(function(t){return Dn(t,[n])}):n?(Sn[n]||Sn.en).test(t):Object.keys(Sn).some(function(e){return Sn[e].test(t)})},An={validate:Dn,paramNames:["locale"]},Fn={validate:function(t,e){void 0===e&&(e={});var n=e.targetValue,r=e.inclusion;void 0===r&&(r=!1);var o=e.format;return void 0===o&&(o=r,r=!1),t=En(t,o),n=En(n,o),!(!t||!n)&&(We(t,n)||r&&He(t,n))},options:{hasTarget:!0,isDate:!0},paramNames:["targetValue","inclusion","format"]},kn=function(t,e){void 0===e&&(e={});var n=e.min,r=e.max;return Array.isArray(t)?t.every(function(t){return kn(t,{min:n,max:r})}):Number(n)<=t&&Number(r)>=t},Gn={validate:kn,paramNames:["min","max"]},Bn={validate:function(t,e){var n=e.targetValue;return String(t)===String(n)},options:{hasTarget:!0},paramNames:["targetValue"]};function zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Un(t,e){return t(e={exports:{}},e.exports),e.exports}var qn=Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(input){if(!("string"==typeof input||input instanceof String)){var t=void 0;throw t=null===input?"null":"object"===(t=void 0===input?"undefined":n(input))&&input.constructor&&input.constructor.hasOwnProperty("name")?input.constructor.name:"a "+t,new TypeError("Expected string but received "+t+".")}},t.exports=e.default});zn(qn);var Vn=zn(Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,r.default)(t);var e=t.replace(/[- ]+/g,"");if(!o.test(e))return!1;for(var n=0,c=void 0,l=void 0,h=void 0,i=e.length-1;i>=0;i--)c=e.substring(i,i+1),l=parseInt(c,10),n+=h&&(l*=2)>=10?l%10+1:l,h=!h;return!(n%10!=0||!e)};var n,r=(n=qn)&&n.__esModule?n:{default:n};var o=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;t.exports=e.default})),Yn={validate:function(t){return Vn(String(t))}},Xn={validate:function(t,e){void 0===e&&(e={});var n=e.min,r=e.max,o=e.inclusivity;void 0===o&&(o="()");var c=e.format;void 0===c&&(c=o,o="()");var l=En(String(n),c),h=En(String(r),c),f=En(String(t),c);return!!(l&&h&&f)&&("()"===o?Xe(f,l)&&We(f,h):"(]"===o?Xe(f,l)&&(He(f,h)||We(f,h)):"[)"===o?We(f,h)&&(He(f,l)||Xe(f,l)):He(f,h)||He(f,l)||We(f,h)&&Xe(f,l))},options:{isDate:!0},paramNames:["min","max","inclusivity","format"]},Wn={validate:function(t,e){return!!En(t,e.format)},options:{isDate:!0},paramNames:["format"]},Hn=function(t,e){void 0===e&&(e={});var n=e.decimals;void 0===n&&(n="*");var r=e.separator;if(void 0===r&&(r="."),h(t)||""===t)return!1;if(Array.isArray(t))return t.every(function(t){return Hn(t,{decimals:n,separator:r})});if(0===Number(n))return/^-?\d*$/.test(t);if(!new RegExp("^[-+]?\\d*(\\"+r+"\\d"+("*"===n?"+":"{1,"+n+"}")+")?([eE]{1}[-]?\\d+)?$").test(t))return!1;var o=parseFloat(t);return o==o},$n={validate:Hn,paramNames:["decimals","separator"]},Kn=function(t,e){var n=e[0];if(Array.isArray(t))return t.every(function(t){return Kn(t,[n])});var r=String(t);return/^[0-9]*$/.test(r)&&r.length===Number(n)},Zn={validate:Kn},Jn=/\.(jpg|svg|jpeg|png|bmp|gif)$/i,Qn={validate:function(t,e){var n=e[0],r=e[1],o=T(t).filter(function(t){return Jn.test(t.name)});return 0!==o.length&&Promise.all(o.map(function(image){return function(t,e,n){var r=window.URL||window.webkitURL;return new Promise(function(o){var image=new Image;image.onerror=function(){return o({valid:!1})},image.onload=function(){return o({valid:image.width===Number(e)&&image.height===Number(n)})},image.src=r.createObjectURL(t)})}(image,n,r)}))}},ti=Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t},t.exports=e.default});zn(ti);var ei=Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){(0,o.default)(t);var r=void 0,c=void 0;"object"===(void 0===e?"undefined":n(e))?(r=e.min||0,c=e.max):(r=arguments[1],c=arguments[2]);var l=encodeURI(t).split(/%..|./).length-1;return l>=r&&(void 0===c||l<=c)};var r,o=(r=qn)&&r.__esModule?r:{default:r};t.exports=e.default});zn(ei);var ni=Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,n.default)(t),(e=(0,r.default)(e,c)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));for(var o=t.split("."),i=0;i<o.length;i++)if(o[i].length>63)return!1;if(e.require_tld){var l=o.pop();if(!o.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(l))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(l))return!1}for(var h,f=0;f<o.length;f++){if(h=o[f],e.allow_underscores&&(h=h.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(h))return!1;if(/[\uff01-\uff5e]/.test(h))return!1;if("-"===h[0]||"-"===h[h.length-1])return!1}return!0};var n=o(qn),r=o(ti);function o(t){return t&&t.__esModule?t:{default:t}}var c={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};t.exports=e.default}),ii=zn(ni),ri=Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,r.default)(e);n=String(n);if(!n)return t(e,4)||t(e,6);if("4"===n){if(!o.test(e))return!1;var l=e.split(".").sort(function(a,b){return a-b});return l[3]<=255}if("6"===n){var h=e.split(":"),f=!1,d=t(h[h.length-1],4),m=d?7:8;if(h.length>m)return!1;if("::"===e)return!0;"::"===e.substr(0,2)?(h.shift(),h.shift(),f=!0):"::"===e.substr(e.length-2)&&(h.pop(),h.pop(),f=!0);for(var i=0;i<h.length;++i)if(""===h[i]&&i>0&&i<h.length-1){if(f)return!1;f=!0}else if(d&&i===h.length-1);else if(!c.test(h[i]))return!1;return f?h.length>=1:h.length===m}return!1};var n,r=(n=qn)&&n.__esModule?n:{default:n};var o=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,c=/^[0-9A-F]{1,4}$/i;t.exports=e.default}),oi=zn(ri),si=zn(Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,n.default)(t),(e=(0,r.default)(e,f)).require_display_name||e.allow_display_name){var h=t.match(d);if(h)t=h[1];else if(e.require_display_name)return!1}var w=t.split("@"),E=w.pop(),C=w.join("@"),O=E.toLowerCase();if(e.domain_specific_validation&&("gmail.com"===O||"googlemail.com"===O)){var S=(C=C.toLowerCase()).split("+")[0];if(!(0,o.default)(S.replace(".",""),{min:6,max:30}))return!1;for(var I=S.split("."),i=0;i<I.length;i++)if(!y.test(I[i]))return!1}if(!(0,o.default)(C,{max:64})||!(0,o.default)(E,{max:254}))return!1;if(!(0,c.default)(E,{require_tld:e.require_tld})){if(!e.allow_ip_domain)return!1;if(!(0,l.default)(E)){if(!E.startsWith("[")||!E.endsWith("]"))return!1;var T=E.substr(1,E.length-2);if(0===T.length||!(0,l.default)(T))return!1}}if('"'===C[0])return C=C.slice(1,C.length-1),e.allow_utf8_local_part?x.test(C):v.test(C);for(var pattern=e.allow_utf8_local_part?_:m,P=C.split("."),R=0;R<P.length;R++)if(!pattern.test(P[R]))return!1;return!0};var n=h(qn),r=h(ti),o=h(ei),c=h(ni),l=h(ri);function h(t){return t&&t.__esModule?t:{default:t}}var f={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,y=/^[a-z\d]+$/,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,_=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,x=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=e.default}));var ai={validate:function(t,e){void 0===e&&(e={});var n=e.multiple;void 0===n&&(n=!1);var r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}(e,["multiple"]);n&&!Array.isArray(t)&&(t=String(t).split(",").map(function(t){return t.trim()}));var o=P({},r);return Array.isArray(t)?t.every(function(t){return si(String(t),o)}):si(String(t),o)}},ui=function(t,e){return Array.isArray(t)?t.every(function(t){return ui(t,e)}):I(e).some(function(e){return e==t})},ci={validate:ui},hi={validate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return!ui.apply(void 0,t)}},pi={validate:function(t,e){var n=new RegExp(".("+e.join("|")+")$","i");return T(t).every(function(t){return n.test(t.name)})}},image={validate:function(t){return(Array.isArray(t)?t:[t]).every(function(t){return/\.(jpg|svg|jpeg|png|bmp|gif)$/i.test(t.name)})}},fi={validate:function(t){return Array.isArray(t)?t.every(function(t){return/^-?[0-9]+$/.test(String(t))}):/^-?[0-9]+$/.test(String(t))}},di={validate:function(t,e){void 0===e&&(e={});var n=e.version;return void 0===n&&(n=4),h(t)&&(t=""),Array.isArray(t)?t.every(function(t){return oi(t,n)}):oi(t,n)},paramNames:["version"]},gi={validate:function(t){return h(t)&&(t=""),Array.isArray(t)?t.every(function(t){return oi(t,"")||ii(t)}):oi(t,"")||ii(t)}},mi={validate:function(t,e){return void 0===e&&(e=[]),t===e[0]}},yi={validate:function(t,e){return void 0===e&&(e=[]),t!==e[0]}},vi={validate:function(t,e){var n=e[0],r=e[1];return void 0===r&&(r=void 0),!h(t)&&(n=Number(n),"number"==typeof t&&(t=String(t)),t.length||(t=I(t)),function(t,e,n){return void 0===n?t.length===e:(n=Number(n),t.length>=e&&t.length<=n)}(t,n,r))}},_i=function(t,e){var n=e[0];return h(t)?n>=0:Array.isArray(t)?t.every(function(t){return _i(t,[n])}):String(t).length<=n},bi={validate:_i},xi=function(t,e){var n=e[0];return!h(t)&&""!==t&&(Array.isArray(t)?t.length>0&&t.every(function(t){return xi(t,[n])}):Number(t)<=n)},wi={validate:xi},Ei={validate:function(t,e){var n=new RegExp(e.join("|").replace("*",".+")+"$","i");return T(t).every(function(t){return n.test(t.type)})}},Ci=function(t,e){var n=e[0];return!h(t)&&(Array.isArray(t)?t.every(function(t){return Ci(t,[n])}):String(t).length>=n)},Oi={validate:Ci},Si=function(t,e){var n=e[0];return!h(t)&&""!==t&&(Array.isArray(t)?t.length>0&&t.every(function(t){return Si(t,[n])}):Number(t)>=n)},Ii={validate:Si},Ti=/^[٠١٢٣٤٥٦٧٨٩]+$/,Pi=/^[0-9]+$/,Ri={validate:function(t){var e=function(t){var e=String(t);return Pi.test(e)||Ti.test(e)};return Array.isArray(t)?t.every(e):e(t)}},Li=function(t,e){var n=e.expression;return"string"==typeof n&&(n=new RegExp(n)),Array.isArray(t)?t.every(function(t){return Li(t,{expression:n})}):n.test(String(t))},Mi={validate:Li,paramNames:["expression"]},Ni={validate:function(t,e){void 0===e&&(e=[]);var n=e[0];return void 0===n&&(n=!1),!(h(t)||B(t)||!1===t&&n||!String(t).trim().length)}},ji={validate:function(t,e){void 0===e&&(e=[]);var n=e[0],r=e.slice(1).includes(String(n).trim());if(!r)return{valid:!0,data:{required:r}};var o=B(t)||[!1,null,void 0].includes(t);return{valid:!(o=o||!String(t).trim().length),data:{required:r}}},options:{hasTarget:!0,computesRequired:!0}},Di={validate:function(t,e){var n=e[0];if(isNaN(n))return!1;var r=1024*Number(n);return T(t).every(function(t){return t.size<=r})}},Ai=zn(Un(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,n.default)(t),!t||t.length>=2083||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;e=(0,c.default)(e,h);var l=void 0,m=void 0,y=void 0,v=void 0,_=void 0,x=void 0,w=void 0,E=void 0;if(w=t.split("#"),t=w.shift(),w=t.split("?"),t=w.shift(),(w=t.split("://")).length>1){if(l=w.shift().toLowerCase(),e.require_valid_protocol&&-1===e.protocols.indexOf(l))return!1}else{if(e.require_protocol)return!1;if("//"===t.substr(0,2)){if(!e.allow_protocol_relative_urls)return!1;w[0]=t.substr(2)}}if(""===(t=w.join("://")))return!1;if(w=t.split("/"),""===(t=w.shift())&&!e.require_host)return!0;if((w=t.split("@")).length>1&&(m=w.shift()).indexOf(":")>=0&&m.split(":").length>2)return!1;v=w.join("@"),x=null,E=null;var C=v.match(f);C?(y="",E=C[1],x=C[2]||null):(w=v.split(":"),y=w.shift(),w.length&&(x=w.join(":")));if(null!==x&&(_=parseInt(x,10),!/^[0-9]+$/.test(x)||_<=0||_>65535))return!1;if(!((0,o.default)(y)||(0,r.default)(y,e)||E&&(0,o.default)(E,6)))return!1;if(y=y||E,e.host_whitelist&&!d(y,e.host_whitelist))return!1;if(e.host_blacklist&&d(y,e.host_blacklist))return!1;return!0};var n=l(qn),r=l(ni),o=l(ri),c=l(ti);function l(t){return t&&t.__esModule?t:{default:t}}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},f=/^\[([^\]]+)\](?::([0-9]+))?$/;function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(t===n||(r=n,"[object RegExp]"===Object.prototype.toString.call(r)&&n.test(t)))return!0}var r;return!1}t.exports=e.default})),Fi={validate:function(t,e){void 0===e&&(e={}),h(t)&&(t="");var n=P({},e);return Array.isArray(t)?t.every(function(t){return Ai(t,n)}):Ai(t,n)}},ki=Object.freeze({after:Cn,alpha_dash:Mn,alpha_num:jn,alpha_spaces:An,alpha:Rn,before:Fn,between:Gn,confirmed:Bn,credit_card:Yn,date_between:Xn,date_format:Wn,decimal:$n,digits:Zn,dimensions:Qn,email:ai,ext:pi,image:image,included:ci,integer:fi,length:vi,ip:di,ip_or_fqdn:gi,is_not:yi,is:mi,max:bi,max_value:wi,mimes:Ei,min:Oi,min_value:Ii,excluded:hi,numeric:Ri,regex:Mi,required:Ni,required_if:ji,size:Di,url:Fi}),Gi=function(t,e){var n={pristine:function(t,e){return t&&e},dirty:function(t,e){return t||e},touched:function(t,e){return t||e},untouched:function(t,e){return t&&e},valid:function(t,e){return t&&e},invalid:function(t,e){return t||e},pending:function(t,e){return t||e},required:function(t,e){return t||e},validated:function(t,e){return t&&e}};return Object.keys(n).reduce(function(r,o){return r[o]=n[o](t[o],e[o]),r},{})},Bi=function(t,e){return void 0===e&&(e=!0),Object.keys(t).reduce(function(n,r){if(!n)return n=P({},t[r]);var o=0===r.indexOf("$");return e&&o?Gi(Bi(t[r]),n):!e&&o?n:n=Gi(n,t[r])},null)},zi=null,Ui=0;function qi(t){return{errors:t.messages,flags:t.flags,classes:t.classes,valid:t.isValid,failedRules:t.failedRules,reset:function(){return t.reset()},validate:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t.validate.apply(t,e)},aria:{"aria-invalid":t.flags.invalid?"true":"false","aria-required":t.isRequired?"true":"false"}}}function Vi(t){return(C(t.mode)?t.mode:Ft[t.mode])({errors:t.messages,value:t.value,flags:t.flags})}function Yi(t){this.initialized||(this.initialValue=t.value);var e=function(t,e){return!(t._ignoreImmediate||!t.immediate)||t.value!==e.value||!!t._needsValidation||!t.initialized&&void 0===e.value}(this,t);this._needsValidation=!1,this.value=t.value,this._ignoreImmediate=!0,e&&this.validateSilent().then(this.immediate||this.flags.validated?this.applyResult:function(t){return t})}function Xi(t){var e=t.$veeHandler,n=Vi(t);return e&&t.$veeDebounce===t.debounce||(e=y(function(){t.$nextTick(function(){var e=t.validateSilent();t._pendingValidation=e,e.then(function(n){e===t._pendingValidation&&(t.applyResult(n),t._pendingValidation=null)})})},n.debounce||t.debounce),t.$veeHandler=e,t.$veeDebounce=t.debounce),{onInput:function(e){t.syncValue(e),t.setFlags({dirty:!0,pristine:!1})},onBlur:function(){t.setFlags({touched:!0,untouched:!1})},onValidate:e}}var Wi={$__veeInject:!1,inject:{$_veeObserver:{from:"$_veeObserver",default:function(){return this.$vnode.context.$_veeObserver||(this.$vnode.context.$_veeObserver={refs:{},subscribe:function(t){this.refs[t.vid]=t},unsubscribe:function(t){delete this.refs[t.vid]}}),this.$vnode.context.$_veeObserver}}},props:{vid:{type:[String,Number],default:function(){return"_vee_"+ ++Ui}},name:{type:String,default:null},mode:{type:[String,Function],default:function(){return J().mode}},events:{type:Array,validate:function(){return!0},default:function(){var t=J().events;return"string"==typeof t?t.split("|"):t}},rules:{type:[Object,String],default:null},immediate:{type:Boolean,default:!1},persist:{type:Boolean,default:!1},bails:{type:Boolean,default:function(){return J().fastExit}},debounce:{type:Number,default:function(){return J().delay||0}},tag:{type:String,default:"span"}},watch:{rules:{deep:!0,handler:function(t,e){this._needsValidation=!f(t,e)}}},data:function(){return{messages:[],value:void 0,initialized:!1,initialValue:void 0,flags:{untouched:!0,touched:!1,dirty:!1,pristine:!0,valid:null,invalid:null,validated:!1,pending:!1,required:!1,changed:!1},failedRules:{},forceRequired:!1,isDeactivated:!1,id:null}},computed:{isValid:function(){return this.flags.valid},fieldDeps:function(){var t=this,e=_(this.rules),n=this.$_veeObserver.refs;return Object.keys(e).filter(ct.isTargetRule).map(function(r){var o=e[r][0],c="$__"+o;return!C(t[c])&&n[o]&&(t[c]=n[o].$watch("value",function(){t.flags.validated&&(t._needsValidation=!0,t.validate())})),o})},normalizedEvents:function(){var t=this,e=Vi(this).on;return pt(e||this.events||[]).map(function(e){return"input"===e?t._inputEventName:e})},isRequired:function(){var t=_(this.rules),e=this.forceRequired,n=t.required||e;return this.flags.required=n,n},classes:function(){var t=this,e=J().classNames;return Object.keys(this.flags).reduce(function(n,r){var o=e&&e[r]||r;return h(t.flags[r])?n:(o&&(n[o]=t.flags[r]),n)},{})}},render:function(t){var e=this;this.registerField();var n=qi(this),slot=this.$scopedSlots.default;if(!C(slot))return t(this.tag,this.$slots.default);var r=slot(n);return et(r).forEach(function(input){(function(t){var e=tt(t);this._inputEventName=this._inputEventName||st(t,e),Yi.call(this,e);var n=Xi(this),r=n.onInput,o=n.onBlur,c=n.onValidate;ot(t,this._inputEventName,r),ot(t,"blur",o),this.normalizedEvents.forEach(function(e){ot(t,e,c)}),this.initialized=!0}).call(e,input)}),t(this.tag,r)},beforeDestroy:function(){this.$_veeObserver.unsubscribe(this)},activated:function(){this.$_veeObserver.subscribe(this),this.isDeactivated=!1},deactivated:function(){this.$_veeObserver.unsubscribe(this),this.isDeactivated=!0},methods:{setFlags:function(t){var e=this;Object.keys(t).forEach(function(n){e.flags[n]=t[n]})},syncValue:function(t){var e=function(t){return ht(t)?"file"===t.target.type?I(t.target.files):t.target.value:t}(t);this.value=e,this.flags.changed=this.initialValue!==e},reset:function(){this.messages=[],this._pendingValidation=null,this.initialValue=this.value;var t={untouched:!0,touched:!1,dirty:!1,pristine:!0,valid:null,invalid:null,validated:!1,pending:!1,required:!1,changed:!1};this.setFlags(t)},validate:function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e.length>0&&this.syncValue(e[0]),this.validateSilent().then(function(e){return t.applyResult(e),e})},validateSilent:function(){var t,e,n=this;return this.setFlags({pending:!0}),zi.verify(this.value,this.rules,{name:this.name,values:(t=this,e=t.$_veeObserver.refs,t.fieldDeps.reduce(function(t,n){return e[n]?(t[n]=e[n].value,t):t},{})),bails:this.bails}).then(function(t){return n.setFlags({pending:!1}),n.isRequired||n.setFlags({valid:t.valid,invalid:!t.valid}),t})},applyResult:function(t){var e=t.errors,n=t.failedRules;this.messages=e,this.failedRules=P({},n),this.setFlags({valid:!e.length,changed:this.value!==this.initialValue,invalid:!!e.length,validated:!0})},registerField:function(){zi||(zi=Ct()||new Tt(null,{fastExit:J().fastExit})),function(t){h(t.id)&&t.id===t.vid&&(t.id=Ui,Ui++);var e=t.id,n=t.vid;t.isDeactivated||e===n&&t.$_veeObserver.refs[e]||(e!==n&&t.$_veeObserver.refs[e]===t&&t.$_veeObserver.unsubscribe(t),t.$_veeObserver.subscribe(t),t.id=n)}(this)}}},Hi={pristine:"every",dirty:"some",touched:"some",untouched:"every",valid:"every",invalid:"some",pending:"some",validated:"every"};var $i=0,Ki={name:"ValidationObserver",provide:function(){return{$_veeObserver:this}},inject:{$_veeObserver:{from:"$_veeObserver",default:function(){return this.$vnode.context.$_veeObserver?this.$vnode.context.$_veeObserver:null}}},props:{tag:{type:String,default:"span"}},data:function(){return{vid:"obs_"+$i++,refs:{},observers:[]}},computed:{ctx:function(){var t=this,e={errors:{},validate:function(e){var n=t.validate(e);return{then:function(t){n.then(function(e){return e&&C(t)?Promise.resolve(t()):Promise.resolve(e)})}}},reset:function(){return t.reset()}};return k(this.refs).concat(this.observers).reduce(function(t,e){return Object.keys(Hi).forEach(function(n){var r,o,c=e.flags||e.ctx;n in t?t[n]=(r=t[n],o=c[n],[r,o][Hi[n]](function(t){return t})):t[n]=c[n]}),t.errors[e.vid]=e.messages||k(e.ctx.errors).reduce(function(t,e){return t.concat(e)},[]),t},e)}},created:function(){this.$_veeObserver&&this.$_veeObserver.subscribe(this,"observer")},activated:function(){this.$_veeObserver&&this.$_veeObserver.subscribe(this,"observer")},deactivated:function(){this.$_veeObserver&&this.$_veeObserver.unsubscribe(this,"observer")},beforeDestroy:function(){this.$_veeObserver&&this.$_veeObserver.unsubscribe(this,"observer")},render:function(t){var e=this.$scopedSlots.default;return this._persistedStore=this._persistedStore||{},C(e)?t(this.tag,{on:this.$listeners,attrs:this.$attrs},e(this.ctx)):t(this.tag,this.$slots.default)},methods:{subscribe:function(t,e){var n;void 0===e&&(e="provider"),"observer"!==e?(this.refs=Object.assign({},this.refs,((n={})[t.vid]=t,n)),t.persist&&this._persistedStore[t.vid]&&this.restoreProviderState(t)):this.observers.push(t)},unsubscribe:function(t,e){var n=t.vid;void 0===e&&(e="provider"),"provider"===e&&this.removeProvider(n);var r=M(this.observers,function(t){return t.vid===n});-1!==r&&this.observers.splice(r,1)},validate:function(t){void 0===t&&(t={silent:!1});var e=t.silent;return Promise.all(k(this.refs).map(function(t){return t[e?"validateSilent":"validate"]().then(function(t){return t.valid})}).concat(this.observers.map(function(t){return t.validate({silent:e})}))).then(function(t){return t.every(function(t){return t})})},reset:function(){return k(this.refs).concat(this.observers).forEach(function(t){return t.reset()})},restoreProviderState:function(t){var e=this._persistedStore[t.vid];t.setFlags(e.flags),t.applyResult(e),delete this._persistedStore[t.vid]},removeProvider:function(t){var e=this.refs[t];e&&e.persist&&(this._persistedStore[t]={flags:e.flags,errors:e.messages,failedRules:e.failedRules}),this.$delete(this.refs,t)}}};Object.keys(ki).forEach(function(t){Tt.extend(t,ki[t].validate,P({},ki[t].options,{paramNames:ki[t].paramNames}))}),Tt.localize({en:Ut});kt.version="2.2.7",kt.mapFields=function(t){if(!t)return function(){return Bi(this.$validator.flags)};var e=function(t){return Array.isArray(t)?t.reduce(function(t,e){return G(e,".")?t[e.split(".")[1]]=e:t[e]=e,t},{}):t}(t);return Object.keys(e).reduce(function(t,n){var r=e[n];return t[n]=function(){if(this.$validator.flags[r])return this.$validator.flags[r];if("*"===e[n])return Bi(this.$validator.flags,!1);if(r.indexOf(".")<=0)return{};var t=r.split("."),o=t[0],c=t.slice(1);return o=this.$validator.flags["$"+o],"*"===(c=c.join("."))&&o?Bi(o):o&&o[c]?o[c]:{}},t},{})},kt.ValidationProvider=Wi,kt.ValidationObserver=Ki,kt.withValidation=function(component,t){void 0===t&&(t=null);var e=C(component)?component.options:component;e.$__veeInject=!1;var n={name:(e.name||"AnonymousHoc")+"WithValidation",props:P({},Wi.props),data:Wi.data,computed:P({},Wi.computed),methods:P({},Wi.methods),$__veeInject:!1,beforeDestroy:Wi.beforeDestroy,inject:Wi.inject};t||(t=function(t){return t});var r=e.model&&e.model.event||"input";return n.render=function(n){var o;this.registerField();var c=qi(this),l=P({},this.$listeners),h=tt(this.$vnode);this._inputEventName=this._inputEventName||st(this.$vnode,h),Yi.call(this,h);var f=Xi(this),d=f.onInput,m=f.onBlur,y=f.onValidate;it(l,r,d),it(l,"blur",m),this.normalizedEvents.forEach(function(t,e){it(l,t,y)});var v,_,x=(nt(this.$vnode)||{prop:"value"}).prop,w=P({},this.$attrs,((o={})[x]=h.value,o),t(c));return n(e,{attrs:this.$attrs,props:w,on:l},(v=this.$slots,_=this.$vnode.context,Object.keys(v).reduce(function(t,e){return v[e].forEach(function(t){t.context||(v[e].context=_,t.data||(t.data={}),t.data.slot=e)}),t.concat(v[e])},[])))},n},e.a=kt},function(t,e,n){"use strict";var r=n(324),o=n.n(r);function c(t){var e=Object.keys(t),n=e.map(function(e){return t[e]}),r=[0].concat(function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}(n.slice(0,-1)));return r.reduce(function(t,n,c){var l=Object.assign({minWidth:n},c<e.length-1?{maxWidth:r[c+1]-1}:{}),h=o()(l);return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e[c],h))},{})}function l(t){return"[object Array]"===Object.prototype.toString.call(t)}var component={props:{mq:{required:!0,type:[String,Array]}},computed:{plusModifier:function(){return!l(this.mq)&&"+"===this.mq.slice(-1)},activeBreakpoints:function(){var t=Object.keys(this.$mqAvailableBreakpoints),e=this.plusModifier?this.mq.slice(0,-1):l(this.mq)?this.mq:[this.mq];return this.plusModifier?function(t,e){var n=t.findIndex(function(b){return b===e});return t.slice(n)}(t,e):e}},render:function(t,e){return this.activeBreakpoints.includes(this.$mq)?t("div",this.$slots.default):t()}},h={sm:450,md:1250,lg:1/0},f={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.breakpoints,r=void 0===n?h:n,o=e.defaultBreakpoint,l=void 0===o?"sm":o,f=!1,d=new t({data:function(){return{currentBreakpoint:l}}});t.filter("mq",function(t,e){return function(t,e,n){return function n(r){if(void 0!==e[r])return e[r];var o=t.findIndex(function(b){return b===r}),c=-1!==o||0!==o?t[o-1]:null;return c?void 0!==e[c]?e[c]:n(c):e[o]}(n)}(Object.keys(r),e,t)}),t.mixin({computed:{$mq:function(){return d.currentBreakpoint}},created:function(){this.$isServer&&(d.currentBreakpoint=l)},mounted:function(){if(!f){var t=c(r),e=function(e){!function(t,e){var n=window.matchMedia(t),r=function(t){t.matches&&e()};n.addListener(r),r(n)}(t[e],function(){d.currentBreakpoint=e})};for(var n in t)e(n);f=!0}}}),t.prototype.$mqAvailableBreakpoints=r,t.component("MqLayout",component)}};e.a=f},function(t,e,n){var r=n(607),o=function(t){var e="",n=Object.keys(t);return n.forEach(function(o,c){var l=t[o];(function(t){return/[height|width]$/.test(t)})(o=r(o))&&"number"==typeof l&&(l+="px"),e+=!0===l?o:!1===l?"not "+o:"("+o+": "+l+")",c<n.length-1&&(e+=" and ")}),e};t.exports=function(t){var e="";return"string"==typeof t?t:t instanceof Array?(t.forEach(function(q,n){e+=o(q),n<t.length-1&&(e+=", ")}),e):o(t)}},function(t,e,n){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=66)}([function(t,e,i){"use strict";function n(t,e,i,n,r,o,a,s){var c=typeof(t=t||{}).default;"object"!==c&&"function"!==c||(t=t.default);var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId=o),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=u):r&&(u=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),u)if(l.functional){l._injectStyles=u;var h=l.render;l.render=function(t,e){return u.call(e),h(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:l}}i.d(e,"a",function(){return n})},function(t,e,i){var n,r,o;r=[e,i(5),i(6),i(2)],void 0===(o="function"==typeof(n=function(e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(i),a=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var c={mount:function(){var t=this.graphics,e=this.graphicsContainer;o.default.call(this,t,n.Events["entity-events"]),e&&e.setGraphics(t)},unload:function(){var t=this.graphicsContainer;t&&t.setGraphics(void 0)}};e.default={mixins:[a.default],props:{},computed:{},watch:{},methods:c,stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;Object.defineProperties(this,{graphics:{enumerable:!0,get:function(){return t.cesiumObject}},graphicsContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.graphicsContainer}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(74),i(75)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[o.default,r.default],methods:{load:function(){return r.default.methods.load.call(this)},getServices:function(){return r.default.methods.getServices.call(this)},reload:function(){return r.default.methods.reload.call(this)},unload:function(){throw new Error("Not implemented method")}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(70)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=void 0,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return"object"!==o(i[i.length-1])&&(t=i.pop()),i.slice(1).reduce(function(e,i,n){return(0,r.default)(e,i,t)},i[0])};var n,r=(n=i)&&n.__esModule?n:{default:n},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(5),i(6),i(2)],void 0===(o="function"==typeof(n=function(e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(i),a=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var c={mount:function(){var t=this.imageryProvider,e=this.providerContainer;o.default.call(this,t,n.Events["imagery-layer-events"]),e&&e.setProvider(t)},unload:function(){var t=this.providerContainer;t&&t.setProvider(void 0)}};e.default={mixins:[a.default],props:{},computed:{},watch:{changeProps:{handler:function(){this.reload()},deep:!0}},methods:c,stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;Object.defineProperties(this,{imageryProvider:{enumerable:!0,get:function(){return t.cesiumObject}},providerContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.providerContainer}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(6),i(63)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=this,o=e||i.Events[(0,n.toKebabCase)(this.$options._componentTag)];o&&o.forEach(function(e){if(t[e]){var i="on"===e.slice(0,2),n=i?e.slice(2):e,o=r.$listeners[n];o&&t[e].addEventListener(o.fns)}})},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events={"cesium-viewer":["selectedEntityChanged","trackedEntityChanged"],"cesium-3dtileset":["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],"imagery-layer-events":["errorEvent"],"entity-events":["definitionChanged"],"viewer-mouse-events":["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],"viewer-children-events":[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]}]}})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s={mount:function(){var t=this,e=this.viewer,i=this.primitive;i.readyPromise.then(function(e){var i=t.$listeners.readyPromise;i&&t.$emit("readyPromise",e)}).otherwise(function(t){throw new Cesium.DeveloperError(t)}),e&&e.scene.primitives.add(i)},unload:function(){var t=this.viewer,e=this.primitive;t&&t.scene.primitives.remove(e)},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get primitive(){return t.primitive},get geometryInstancesContainer(){return t}})}};e.default={mixins:[r.default],props:{},computed:{},watch:{},methods:s,stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{primitive:{enumerable:!0,get:function(){return t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){(function(n){var r,o,a,s;s=function(e,i,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=f(i),l=f(o),h=f(a);function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"cesium-viewer",mixins:[l.default],props:{cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:Boolean,default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Object,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Object,imageryProvider:Object,terrainProvider:Object,skyBox:Object,skyAtmosphere:Object,fullscreenElement:{type:Element|String},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:Object,orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:String,creditViewport:String,dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},navigation:{type:Boolean,default:!1},logo:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:function(){return{position:{longitude:105,latitude:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0}}}},watch:{selectionIndicator:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer;if(!e.defined(i.selectionIndicator)||i.selectionIndicator.isDestroyed()||t){if(!e.defined(i.selectionIndicator)||i.selectionIndicator.isDestroyed()){var r=document.createElement("div");r.className="cesium-viewer-selectionIndicatorContainer",n.appendChild(r);var o=new e.SelectionIndicator(r,i.scene);i._selectionIndicator=o}}else{i.selectionIndicator.destroy(),i._selectionIndicator=void 0;var a=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-selectionIndicatorContainer");n.removeChild(a)}},infoBox:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer;if(!e.defined(i.infoBox)||i.infoBox.isDestroyed()||t){if(!e.defined(i.infoBox)||i.infoBox.isDestroyed()){var r=document.createElement("div");r.className="cesium-viewer-infoBoxContainer",n.appendChild(r);var o=new e.InfoBox(r),a=o.viewModel;i._eventHelper.add(a.cameraClicked,i._onInfoBoxCameraClicked,i),i._eventHelper.add(a.closeClicked,i._onInfoBoxClockClicked,i),i._infoBox=o,i._forceResize=!0,i.resize()}}else{i.infoBox.destroy(),i._infoBox=void 0;var c=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-infoBoxContainer");n.removeChild(c)}},geocoder:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.geocoder)||i.geocoder.isDestroyed()||t){if(!e.defined(i.geocoder)||i.geocoder.isDestroyed()){var a=document.createElement("div");a.className="cesium-viewer-geocoderContainer",o.appendChild(a);var c=new e.Geocoder({container:a,geocoderServices:e.defined(this.geocoder)?e.isArray(this.geocoder)?this.geocoder:[this.geocoder]:void 0,scene:i.scene,viewer:i});i._eventHelper.add(c.viewModel.search.beforeExecute,i._clearObjects,i),i._geocoder=c,n(o,a)}}else{i.geocoder.destroy(),i._geocoder=void 0;var u=(0,s.getDocumentByClassName)(o.children,"cesium-viewer-geocoderContainer");o.removeChild(u)}},homeButton:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.homeButton)||i.homeButton.isDestroyed()||t){if(!e.defined(i.homeButton)||i.homeButton.isDestroyed()){var a=new e.HomeButton(o,i.scene);e.defined(i.geocoder)&&i._eventHelper.add(a.viewModel.command.afterExecute,function(){var t=i.geocoder.viewModel;t.searchText="",t.isSearchInProgress&&t.search()}),i._eventHelper.add(a.viewModel.command.beforeExecute,i._clearTrackedObject,i),i._homeButton=a,n(o,a)}}else i.homeButton.destroy(),i._homeButton=void 0},sceneModePicker:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.sceneModePicker)||i.sceneModePicker.isDestroyed()||t){if(!e.defined(i.sceneModePicker)||i.sceneModePicker.isDestroyed()){if(!0===this.sceneModePicker&&this.scene3DOnly)throw new e.DeveloperError("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!this.scene3DOnly&&!0===this.sceneModePicker){var a=new e.SceneModePicker(o,i.scene);i._sceneModePicker=a,n(o,a)}}}else i.sceneModePicker.destroy(),i._sceneModePicker=void 0},projectionPicker:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.projectionPicker)||i.projectionPicker.isDestroyed()||t){if(!e.defined(i.projectionPicker)||i.projectionPicker.isDestroyed()){var a=new e.ProjectionPicker(o,i.scene);i._projectionPicker=a,n(o,a)}}else i.projectionPicker.destroy(),i._projectionPicker=void 0},baseLayerPicker:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.baseLayerPicker)||i.baseLayerPicker.isDestroyed()||t){if(!e.defined(i.baseLayerPicker)||i.baseLayerPicker.isDestroyed()){var a=!(e.defined(i.globe)&&!1===this.globe||e.defined(i.baseLayerPicker)&&!1===this.baseLayerPicker);if(a&&e.defined(this.imageryProvider))throw new e.DeveloperError("options.imageryProvider is not available when using the BaseLayerPicker widget.\nEither specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!a&&e.defined(this.selectedImageryProviderViewModel))throw new e.DeveloperError("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\nEither specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(a&&e.defined(this.terrainProvider))throw new e.DeveloperError("options.terrainProvider is not available when using the BaseLayerPicker widget.\nEither specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!a&&e.defined(this.selectedTerrainProviderViewModel))throw new e.DeveloperError("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\nEither specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(a){i.imageryLayers.removeAll();var c=e.defaultValue(this.imageryProviderViewModels,e.createDefaultImageryProviderViewModels()),u=e.defaultValue(this.terrainProviderViewModels,e.createDefaultTerrainProviderViewModels()),l=new e.BaseLayerPicker(o,{globe:i.scene.globe,imageryProviderViewModels:c,selectedImageryProviderViewModel:c[0],terrainProviderViewModels:u,selectedTerrainProviderViewModel:u[0]}),h=o.getElementsByClassName("cesium-baseLayerPicker-dropDown")[0];i._baseLayerPickerDropDown=h,i._baseLayerPicker=l,n(o,l)}}}else i.imageryLayers.removeAll(),i.baseLayerPicker.destroy(),i._baseLayerPicker=void 0,e.defined(e.SuperMapImageryProvider)?i.imageryLayers.add(new e.ImageryLayer(new e.SingleTileImageryProvider({url:e.buildModuleUrl("Assets/Textures/GlobalBkLayer.jpg")}))):i.imageryLayers.addImageryProvider(e.createTileMapServiceImageryProvider({url:e.buildModuleUrl("Assets/Textures/NaturalEarthII")}))},navigationHelpButton:function(t){var e=this.Cesium,i=this.viewer,n=this.resizeToolbar,r=this.viewerContainer,o=(0,s.getDocumentByClassName)(r.children,"cesium-viewer-toolbar");if(!e.defined(i.navigationHelpButton)||i.navigationHelpButton.isDestroyed()||t){if(!e.defined(i.navigationHelpButton)||i.navigationHelpButton.isDestroyed()){var a=!0;try{if(e.defined(window.localStorage)){var c=window.localStorage.getItem("cesium-hasSeenNavHelp");e.defined(c)&&Boolean(c)?a=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(t){}var u=new e.NavigationHelpButton({container:o,instructionsInitiallyVisible:e.defaultValue(this.navigationInstructionsInitiallyVisible,a)});i._navigationHelpButton=u,n(o,u)}}else i.navigationHelpButton.destroy(),i._navigationHelpButton=void 0},animation:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer;if(!e.defined(i.animation)||i.animation.isDestroyed()||t){if(!e.defined(i.animation)||i.animation.isDestroyed()){var r=document.createElement("div");r.className="cesium-viewer-animationContainer",this.viewerContainer.appendChild(r);var o=new e.Animation(r,new e.AnimationViewModel(i.clockViewModel));i._animation=o,i._forceResize=!0,i.resize()}}else{i.animation.destroy();var a=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-animationContainer");n.removeChild(a),i._animation=void 0,i._forceResize=!0,i.resize()}},timeline:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer,r=this.onTimelineScrubfunction;if(!e.defined(i.timeline)||i.timeline.isDestroyed()||t){if(!e.defined(i.timeline)||i.timeline.isDestroyed()){var o=document.createElement("div");o.className="cesium-viewer-timelineContainer",n.appendChild(o);var a=new e.Timeline(o,i.clock);a.addEventListener("settime",r,!1),a.zoomTo(i.clock.startTime,i.clock.stopTime),i._timeline=a,i._forceResize=!0,i.resize()}}else{i.timeline.destroy(),i._timeline=void 0;var c=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-timelineContainer");n.removeChild(c),i._forceResize=!0,i.resize()}},fullscreenButton:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer;if(!e.defined(i.fullscreenButton)||i.fullscreenButton.isDestroyed()||t){if(!e.defined(i.fullscreenButton)||i.fullscreenButton.isDestroyed()){var r=document.createElement("div");r.className="cesium-viewer-fullscreenContainer",n.appendChild(r);var o=new e.FullscreenButton(r,this.$refs.viewer);i._fullscreenButton=o,i._forceResize=!0,i.resize()}}else{i.fullscreenButton.destroy(),i._fullscreenButton=void 0;var a=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-fullscreenContainer");n.removeChild(a),i._forceResize=!0,i.resize()}},fullscreenElement:function(t){var e=this.Cesium,i=this.viewer;e.defined(i.fullscreenButton)&&e.defined(t)&&(this.viewer.fullscreenButton.viewModel.fullscreenElement=t)},vrButton:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer,r=this.enableVRUI;if(!e.defined(i.vrButton)||i.vrButton.isDestroyed()||t){if(!e.defined(i.vrButton)||i.vrButton.isDestroyed()){var o=document.createElement("div");o.className="cesium-viewer-vrContainer",n.appendChild(o);var a=new e.VRButton(o,i.scene,n),c=a.viewModel._command;a.viewModel._command=function(t){c(),r(i,t.isVRMode)},i._vrButton=a,i._forceResize=!0,i.resize()}}else{i.vrButton.destroy(),i._vrButton=void 0;var u=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-vrContainer");n.removeChild(u),i._forceResize=!0,i.resize()}},useDefaultRenderLoop:function(t){this.viewer.useDefaultRenderLoop=t},navigation:function(t){var e=this.Cesium,i=this.viewer,n=this.viewerContainer;if(e.defined(i.navigation)&&!t){i.navigation.viewModel.eventHelper.removeAll(),e.destroyObject(i.navigation.viewModel),i._navigation=void 0;var r=(0,s.getDocumentByClassName)(n.children,"cesium-viewer-navigationContainer");n.removeChild(r)}else if(!e.defined(i.navigation)){var o=document.createElement("div");o.className="cesium-viewer-navigationContainer",n.appendChild(o);var a=new e.Navigation({container:o,viewer:i,scene:i.scene});i._navigation=a,i._forceResize=!0,i.resize()}},sceneMode:function(t){var e=this.Cesium,i=this.viewer;e.SceneMode.COLUMBUS_VIEW!==t&&e.SceneMode.MORPHING!==t&&e.SceneMode.SCENE2D!==t&&e.SceneMode.SCENE3D!==t||(i.scene.mode=t)},shouldAnimate:function(t){this.viewer.clock.shouldAnimate=t},terrainExaggeration:function(t){this.viewer.scene._terrainExaggeration=t},shadows:function(t){this.viewer.scene.shadowMap.enabled=t},terrainProvider:function(t){this.viewer.terrainProvider=t},camera:{handler:function(t){var e=this.Cesium;this.viewer.camera.setView({destination:e.Cartesian3.fromDegrees(t.position.longitude,t.position.latitude,t.position.height),orientation:{heading:e.Math.toRadians(t.heading),pitch:e.Math.toRadians(t.pitch),roll:e.Math.toRadians(t.roll)}})},deep:!0},imageryProvider:function(t,e){var i=this.Cesium,n=this.viewer;if(i.defined(t)){for(var r=0;r<n.imageryLayers.length;r++)n.imageryLayers[r].imageryProvider===e&&n.imageryLayers.remove(n.imageryLayers[r]);n.imageryLayers.addImageryProvider(t)}}},methods:{onTimelineScrubfunction:function(t){var e=t.clock;e.currentTime=t.timeJulian,e.shouldAnimate=!1},resizeToolbar:function(t,e){Array.prototype.slice.call(t.children).forEach(function(t){switch(t.className){case"cesium-viewer-geocoderContainer":t.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":t.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":t.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":t.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":t.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":t.customIndex=6}});var i=[];Array.prototype.slice.call(t.children).forEach(function(t){i.push(t)}),i.sort(function(t,e){return t.customIndex-e.customIndex});for(var n=0;n<i.length;n++)t.appendChild(i[n])},enableVRUI:function(t,e){var i=this.Cesium,n=t._geocoder,r=t._homeButton,o=t._sceneModePicker,a=t._projectionPicker,s=t._baseLayerPicker,c=t._animation,u=t._timeline,l=t._fullscreenButton,h=t._infoBox,f=t._selectionIndicator,d=e?"hidden":"visible";if(i.defined(n)&&(n.container.style.visibility=d),i.defined(r)&&(r.container.style.visibility=d),i.defined(o)&&(o.container.style.visibility=d),i.defined(a)&&(a.container.style.visibility=d),i.defined(s)&&(s.container.style.visibility=d),i.defined(c)&&(c.container.style.visibility=d),i.defined(u)&&(u.container.style.visibility=d),i.defined(l)&&l.viewModel.isFullscreenEnabled&&(l.container.style.visibility=d),i.defined(h)&&(h.container.style.visibility=d),i.defined(f)&&(f.container.style.visibility=d),t._container){var p=e||!i.defined(l)?0:l.container.clientWidth;t._vrButton.container.style.right=p+"px",t.forceResize()}},init:function(t){var e=this;if(!this.viewer){var i=this.$refs.viewer;if(!t.defined(t.SuperMapImageryProvider)){var n=void 0;n=this._Cesium?this._Cesium().accessToken:this.accessToken,t.Ion.defaultAccessToken=n}var o=this.animation,a=this.baseLayerPicker,c=this.fullscreenButton,l=this.vrButton,h=this.geocoder,f=this.homeButton,d=this.infoBox,p=this.sceneModePicker,m=this.selectionIndicator,y=this.timeline,g=this.navigationHelpButton,v=this.navigationInstructionsInitiallyVisible,b=this.scene3DOnly,_=this.shouldAnimate,x=this.clockViewModel,w=this.selectedImageryProviderViewModel,E=this.imageryProviderViewModels,C=this.selectedTerrainProviderViewModel,O=this.terrainProviderViewModels,S=this.imageryProvider,I=this.terrainProvider,T=this.skyBox,P=this.skyAtmosphere,R=this.fullscreenElement,L=this.useDefaultRenderLoop,M=this.targetFrameRate,N=this.showRenderLoopErrors,j=this.automaticallyTrackDataSourceClocks,D=this.contextOptions,A=this.sceneMode,F=this.mapProjection,k=this.globe,G=this.orderIndependentTranslucency,B=this.creditContainer,z=this.creditViewport,U=this.dataSources,V=this.terrainExaggeration,Y=this.shadows,X=this.terrainShadows,W=this.mapMode2D,q=this.projectionPicker,H=this.requestRenderMode,$=this.maximumRenderTimeChange,K=this.navigation,Z={animation:o,baseLayerPicker:a,fullscreenButton:c,vrButton:l,geocoder:h,homeButton:f,infoBox:d,sceneModePicker:p,selectionIndicator:m,timeline:y,navigationHelpButton:g,navigationInstructionsInitiallyVisible:v,scene3DOnly:b,shouldAnimate:_,clockViewModel:x,selectedImageryProviderViewModel:w,imageryProviderViewModels:E,selectedTerrainProviderViewModel:C,terrainProviderViewModels:O,imageryProvider:this.isEmptyObj(S)?t.createTileMapServiceImageryProvider({url:t.buildModuleUrl("Assets/Textures/NaturalEarthII")}):S,terrainProvider:I,skyBox:T,skyAtmosphere:P,fullscreenElement:this.isEmptyObj(R)?this.$refs.viewer:R,useDefaultRenderLoop:L,targetFrameRate:M,showRenderLoopErrors:N,automaticallyTrackDataSourceClocks:j,contextOptions:D,sceneMode:A,mapProjection:F,globe:k,orderIndependentTranslucency:G,creditContainer:B,creditViewport:z,dataSources:U,terrainExaggeration:V,shadows:Y,terrainShadows:X,mapMode2D:W,projectionPicker:q,requestRenderMode:H,maximumRenderTimeChange:$,navigation:K};this.removeNullItem(Z);var J=new t.Viewer(i,Z);this.viewer=J,u.default.call(this,J),r.Events["viewer-children-events"].forEach(function(t){u.default.call(e,J[t.name],t.events)});var Q=new t.ScreenSpaceEventHandler(J.canvas);if(r.Events["viewer-mouse-events"].forEach(function(i){var n=e.$listeners[i];n&&Q.setInputAction(n.fns,t.ScreenSpaceEventType[i])}),t.defined(this.camera)&&J.camera.setView({destination:t.Cartesian3.fromDegrees(this.camera.position.longitude,this.camera.position.latitude,this.camera.position.height),orientation:{heading:t.Math.toRadians(this.camera.heading),pitch:t.Math.toRadians(this.camera.pitch),roll:t.Math.toRadians(this.camera.roll)}}),this.viewerContainer=(0,s.getDocumentByClassName)(this.$refs.viewer.children,"cesium-viewer"),t.defined(t.SuperMapImageryProvider)&&!this.logo){var tt=J.scene.frameState.creditDisplay;tt.container.removeChild(tt._imageContainer)}this.logo||(J.cesiumWidget.creditContainer.style.display="none"),this.$emit("ready",{Cesium:t,viewer:J})}},initViewer:function(t){this.Cesium=t,this.init(t)},getCesiumScript:function(){if(n.Cesium)return n.Cesium._preloader?n.Cesium._preloader:Promise.resolve(n.Cesium);var t=this.cesiumPath?this.cesiumPath:this._Cesium().cesiumPath;return n.Cesium={},n.Cesium._preloader=new Promise(function(e,i){n._initCesium=function(){e(n.Cesium),n.Cesium._preloader=null,n._initCesium=null};var r=c.dirname(t),o=document.createElement("link");o.rel="stylesheet",n.document.head.appendChild(o),o.href=r+"/Widgets/widgets.css";var a=document.createElement("script");n.document.body.appendChild(a),a.src=t,a.onload=function(){if(n._initCesium(),n.Cesium.SuperMapImageryProvider){var t=document.createElement("script");n.document.body.appendChild(t),t.src=r+"/Workers/zlib.min.js"}}}),n.Cesium._preloader},reset:function(){var t=this.getCesiumScript,e=this.initViewer;t().then(e)},getServices:function(){var t=this;return(0,h.default)({},{get Cesium(){return t.Cesium},get viewer(){return t.viewer}})}},mounted:function(){this.reset()},destroyed:function(){if(n.Cesium){var t=document.getElementsByTagName("script"),e=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;c.src.indexOf("/Cesium.js")>-1&&e.push(c),n.Cesium.SuperMapImageryProvider&&c.src.indexOf("/Workers/zlib.min.js")>-1&&e.push(c)}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}e.forEach(function(t){document.getElementsByTagName("body")[0].removeChild(t)});var u=document.getElementsByTagName("link"),l=!0,h=!1,f=void 0;try{for(var d,p=u[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;m.href.indexOf("Widgets/widgets.css")>-1&&document.getElementsByTagName("head")[0].removeChild(m)}}catch(t){h=!0,f=t}finally{try{!l&&p.return&&p.return()}finally{if(h)throw f}}n.Cesium=null}},data:function(){return{viewer:null,viewerContainer:null}}},t.exports=e.default},o=[e,i(5),i(6),i(64),i(3),i(63),i(71)],void 0===(a="function"==typeof(r=s)?r.apply(e,o):r)||(t.exports=a)}).call(this,i(69))},function(t,e,i){var n,r,o;r=[e,i(3),i(2)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"imagery-layer",mixins:[o.default],props:{imageryProvider:Object,rectangle:Object,alpha:{type:Number,default:1},brightness:{type:Number,default:1},contrast:{type:Number,default:1},hue:{type:Number,default:0},saturation:{type:Number,default:1},gamma:{type:Number,default:1},splitDirection:Number,minificationFilter:Object,magnificationFilter:Object,show:{type:Boolean,default:!0},maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,cutoutRectangle:Object},watch:{rectangle:function(){this.reload()},alpha:function(t){this.imageryLayer.alpha=t},brightness:function(t){this.imageryLayer.brightness=t},contrast:function(t){this.imageryLayer.contrast=t},hue:function(t){this.imageryLayer.hue=t},saturation:function(t){this.imageryLayer.saturation=t},gamma:function(t){this.imageryLayer.gamma=t},splitDirection:function(t){this.imageryLayer.splitDirection=t},minificationFilter:function(){this.reload()},magnificationFilter:function(){this.reload()},show:function(t){this.imageryLayer.show=t},minimumTerrainLevel:function(t){this.imageryLayer.minimumTerrainLevel=t},maximumTerrainLevel:function(t){this.imageryLayer.maximumTerrainLevel=t},cutoutRectangle:function(t){this.imageryLayer.cutoutRectangle=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.rectangle,i=this.alpha,n=this.brightness,r=this.contrast,o=this.hue,a=this.saturation,s=this.gamma,c=this.splitDirection,u=this.minificationFilter,l=this.magnificationFilter,h=this.show,f=this.minimumTerrainLevel,d=this.maximumTerrainLevel,p=this.cutoutRectangle,m={rectangle:e,alpha:i,brightness:n,contrast:r,hue:o,saturation:a,gamma:s,splitDirection:c,minificationFilter:u,magnificationFilter:l,show:h,minimumTerrainLevel:f,maximumTerrainLevel:d,cutoutRectangle:p};return this.removeNullItem(m),new t.ImageryLayer(this.provider||{},m)},mount:function(){var t=this.viewer,e=this.imageryLayer;t.imageryLayers.add(e)},unload:function(){var t=this.viewer,e=this.imageryLayer;t.imageryLayers.remove(e)},refresh:function(){this.unload(),this.originInstance=this.createCesiumObject(),this.mount()},setProvider:function(t){if(t!==this._provider){this._provider=t,this.refresh();var e=this.$listeners["update:imageryProvider"];e&&this.$emit("update:imageryProvider",t)}},getServices:function(){var t=this;return(0,r.default)(o.default.methods.getServices.call(this),{get imageryLayer(){return t.imageryLayer},get providerContainer(){return t}})}},stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;this._provider=void 0,Object.defineProperties(this,{imageryLayer:{enumerable:!0,get:function(){return t.cesiumObject}},provider:{enumerable:!0,get:function(){return t.imageryProvider||t._provider}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"arcgis-mapserver-imagery-provider",mixins:[r.default],props:{url:String,token:String,tileDiscardPolicy:Object,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},layers:String,enablePickFeatures:{type:Boolean,default:!0},rectangle:Object,tilingScheme:Object,ellipsoid:Object,tileWidth:{type:Number,default:256},tileHeight:{type:Number,default:256},minimumLevel:Number,maximumLevel:Number},computed:{changeProps:function(){var t=this.url,e=this.token,i=this.tileDiscardPolicy,n=this.usePreCachedTilesIfAvailable,r=this.layers,o=this.enablePickFeatures,a=this.rectangle,s=this.tilingScheme,c=this.ellipsoid,u=this.tileWidth,l=this.tileHeight,h=this.minimumLevel,f=this.maximumLevel;return{url:t,token:e,tileDiscardPolicy:i,usePreCachedTilesIfAvailable:n,layers:r,enablePickFeatures:o,rectangle:a,tilingScheme:s,ellipsoid:c,tileWidth:u,tileHeight:l,minimumLevel:h,maximumLevel:f}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.token,n=this.tileDiscardPolicy,r=this.usePreCachedTilesIfAvailable,o=this.layers,a=this.enablePickFeatures,s=this.rectangle,c=this.tilingScheme,u=this.ellipsoid,l=this.tileWidth,h=this.tileHeight,f=this.minimumLevel,d=this.maximumLevel,p={url:e,token:i,tileDiscardPolicy:n,usePreCachedTilesIfAvailable:r,layers:o,enablePickFeatures:a,rectangle:s instanceof t.Rectangle||this.isEmptyObj(s)?s:t.Rectangle.fromDegrees(s.west,s.south,s.east,s.north),tilingScheme:c,ellipsoid:u,tileWidth:l,tileHeight:h,minimumLevel:f,maximumLevel:d};return this.removeNullItem(p),new t.ArcGisMapServerImageryProvider(p)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"bingmaps-imagery-provider",mixins:[r.default],props:{url:String,bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:String,ellipsoid:Object,tileDiscardPolicy:Object},computed:{changeProps:function(){var t=this.url,e=this.bmKey,i=this.tileProtocol,n=this.mapStyle,r=this.culture,o=this.ellipsoid,a=this.tileDiscardPolicy;return{url:t,bmKey:e,tileProtocol:i,mapStyle:n,culture:r,ellipsoid:o,tileDiscardPolicy:a}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.bmKey,n=this.tileProtocol,r=this.mapStyle,o=this.culture,a=this.ellipsoid,s=this.tileDiscardPolicy,c={url:e,key:i,tileProtocol:n,mapStyle:r,culture:o,ellipsoid:a,tileDiscardPolicy:s};return this.removeNullItem(c),new t.BingMapsImageryProvider(c)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"mapbox-imagery-provider",mixins:[r.default],props:{url:String,mapId:String,accessToken:String,format:{type:String,default:"png"},ellipsoid:Object,minimumLevel:Number,maximumLevel:Number,rectangle:Object,credit:String},computed:{changeProps:function(){var t=this.url,e=this.mapId,i=this.accessToken,n=this.format,r=this.ellipsoid,o=this.minimumLevel,a=this.maximumLevel,s=this.rectangle,c=this.credit;return{url:t,mapId:e,accessToken:i,format:n,ellipsoid:r,minimumLevel:o,maximumLevel:a,rectangle:s,credit:c}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.mapId,n=this.accessToken,r=this.format,o=this.ellipsoid,a=this.minimumLevel,s=this.maximumLevel,c=this.rectangle,u=this.credit,l={url:e,mapId:i,accessToken:n,format:r,ellipsoid:o,minimumLevel:a,maximumLevel:s,rectangle:c instanceof t.Rectangle||this.isEmptyObj(c)?c:t.Rectangle.fromDegrees(c.west,c.south,c.east,c.north),credit:u};return this.removeNullItem(l),new t.MapboxImageryProvider(l)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"openstreetmap-imagery-provider",mixins:[r.default],props:{url:{type:String,default:"https://a.tile.openstreetmap.org"},fileExtension:{type:String,default:"png"},rectangle:Object,minimumLevel:Number,maximumLevel:Number,ellipsoid:Object,credit:{type:String,default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}},computed:{changeProps:function(){var t=this.url,e=this.fileExtension,i=this.rectangle,n=this.minimumLevel,r=this.maximumLevel,o=this.ellipsoid,a=this.credit;return{url:t,fileExtension:e,rectangle:i,minimumLevel:n,maximumLevel:r,ellipsoid:o,credit:a}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.fileExtension,n=this.rectangle,r=this.minimumLevel,o=this.maximumLevel,a=this.ellipsoid,s=this.credit,c={url:e,fileExtension:i,rectangle:n instanceof t.Rectangle||this.isEmptyObj(n)?n:t.Rectangle.fromDegrees(n.west,n.south,n.east,n.north),minimumLevel:r,maximumLevel:o,ellipsoid:a,credit:s};return this.removeNullItem(c),new t.createOpenStreetMapImageryProvider(c)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"singletile-imagery-provider",mixins:[r.default],props:{url:{type:String,default:"https://a.tile.openstreetmap.org"},rectangle:Object,credit:String,ellipsoid:Object},computed:{changeProps:function(){var t=this.url,e=this.rectangle,i=this.credit,n=this.ellipsoid;return{url:t,rectangle:e,credit:i,ellipsoid:n}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.rectangle,n=this.credit,r=this.ellipsoid,o={url:e,rectangle:i instanceof t.Rectangle||this.isEmptyObj(i)?i:t.Rectangle.fromDegrees(i.west,i.south,i.east,i.north),credit:n,ellipsoid:r};return this.removeNullItem(o),new t.SingleTileImageryProvider(o)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"urltemplate-imagery-provider",mixins:[r.default],props:{url:String,pickFeaturesUrl:String,urlSchemeZeroPadding:Object,subdomains:String,credit:String,minimumLevel:{type:Number,default:0},maximumLevel:Number,rectangle:Object,tilingScheme:Object,ellipsoid:Object,tileWidth:{type:Number,default:256},tileHeight:{type:Number,default:256},hasAlphaChannel:{type:Boolean,default:!0},getFeatureInfoFormats:Array,enablePickFeatures:{type:Boolean,default:!0},customTags:Object},computed:{changeProps:function(){var t=this.url,e=this.pickFeaturesUrl,i=this.urlSchemeZeroPadding,n=this.subdomains,r=this.credit,o=this.minimumLevel,a=this.maximumLevel,s=this.rectangle,c=this.tilingScheme,u=this.ellipsoid,l=this.tileWidth,h=this.tileHeight,f=this.hasAlphaChannel,d=this.getFeatureInfoFormats,p=this.customTags,m=this.enablePickFeatures;return{url:t,pickFeaturesUrl:e,urlSchemeZeroPadding:i,subdomains:n,credit:r,minimumLevel:o,maximumLevel:a,rectangle:s,tilingScheme:c,ellipsoid:u,tileWidth:l,tileHeight:h,hasAlphaChannel:f,getFeatureInfoFormats:d,customTags:p,enablePickFeatures:m}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.pickFeaturesUrl,n=this.urlSchemeZeroPadding,r=this.subdomains,o=this.credit,a=this.minimumLevel,s=this.maximumLevel,c=this.rectangle,u=this.tilingScheme,l=this.ellipsoid,h=this.tileWidth,f=this.tileHeight,d=this.hasAlphaChannel,p=this.getFeatureInfoFormats,m=this.customTags,y=this.enablePickFeatures,g={url:e,pickFeaturesUrl:i,urlSchemeZeroPadding:n,subdomains:r,credit:o,minimumLevel:a,maximumLevel:s,rectangle:c instanceof t.Rectangle||this.isEmptyObj(c)?c:t.Rectangle.fromDegrees(c.west,c.south,c.east,c.north),tilingScheme:u,ellipsoid:l,tileWidth:h,tileHeight:f,hasAlphaChannel:d,getFeatureInfoFormats:p,customTags:m,enablePickFeatures:y};return this.removeNullItem(g),new t.UrlTemplateImageryProvider(g)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"wms-imagery-provider",mixins:[r.default],props:{url:String,format:{type:String,default:"image/jpeg"},layers:String,parameters:Object,getFeatureInfoParameters:Object,enablePickFeatures:{type:Boolean,default:!0},getFeatureInfoFormats:Array,rectangle:Object,tilingScheme:Object,ellipsoid:Object,tileWidth:{type:Number,default:256},tileHeight:{type:Number,default:256},minimumLevel:{type:Number,default:0},maximumLevel:Number,crs:String,srs:String,credit:String,subdomains:String|Array,clock:Object,times:Object,token:String},computed:{changeProps:function(){var t=this.url,e=this.layers,i=this.parameters,n=this.getFeatureInfoParameters,r=this.enablePickFeatures,o=this.getFeatureInfoFormats,a=this.rectangle,s=this.tilingScheme,c=this.ellipsoid,u=this.tileWidth,l=this.tileHeight,h=this.minimumLevel,f=this.maximumLevel,d=this.crs,p=this.srs,m=this.credit,y=this.subdomains,g=this.clock,v=this.times,b=this.token;return{url:t,layers:e,parameters:i,getFeatureInfoParameters:n,enablePickFeatures:r,getFeatureInfoFormats:o,rectangle:a,tilingScheme:s,ellipsoid:c,tileWidth:u,tileHeight:l,minimumLevel:h,maximumLevel:f,crs:d,srs:p,credit:m,subdomains:y,clock:g,times:v,token:b}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.layers,n=this.parameters,r=this.getFeatureInfoParameters,o=this.enablePickFeatures,a=this.getFeatureInfoFormats,s=this.rectangle,c=this.tilingScheme,u=this.ellipsoid,l=this.tileWidth,h=this.tileHeight,f=this.minimumLevel,d=this.maximumLevel,p=this.crs,m=this.srs,y=this.credit,g=this.subdomains,v=this.clock,b=this.times,_=this.token,x={url:e,layers:i,parameters:n,getFeatureInfoParameters:r,enablePickFeatures:o,getFeatureInfoFormats:a,rectangle:s instanceof t.Rectangle||this.isEmptyObj(s)?s:t.Rectangle.fromDegrees(s.west,s.south,s.east,s.north),tilingScheme:c,ellipsoid:u,tileWidth:l,tileHeight:h,minimumLevel:f,maximumLevel:d,crs:p,srs:m,credit:y,subdomains:g,clock:v,times:b,token:_};return this.removeNullItem(x),new t.WebMapServiceImageryProvider(x)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"wmts-imagery-provider",mixins:[r.default],props:{url:String,format:{type:String,default:"image/jpeg"},layer:String,wmtsStyle:String,tileMatrixSetID:String,tileMatrixLabels:Array,clock:Object,times:Object,dimensions:Object,tileWidth:{type:Number,default:256},tileHeight:{type:Number,default:256},tilingScheme:Object,rectangle:Object,minimumLevel:{type:Number,default:0},maximumLevel:Number,ellipsoid:Object,credit:String,subdomains:{type:String|Array,default:"abc"},token:String},computed:{changeProps:function(){var t=this.url,e=this.format,i=this.layer,n=this.wmtsStyle,r=this.tileMatrixSetID,o=this.tileMatrixLabels,a=this.clock,s=this.times,c=this.dimensions,u=this.tileWidth,l=this.tileHeight,h=this.tilingScheme,f=this.rectangle,d=this.minimumLevel,p=this.maximumLevel,m=this.ellipsoid,y=this.credit,g=this.subdomains,v=this.token;return{url:t,format:e,layer:i,wmtsStyle:n,tileMatrixSetID:r,tileMatrixLabels:o,clock:a,times:s,dimensions:c,tileWidth:u,tileHeight:l,tilingScheme:h,rectangle:f,minimumLevel:d,maximumLevel:p,ellipsoid:m,credit:y,subdomains:g,token:v}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.format,n=this.layer,r=this.wmtsStyle,o=this.tileMatrixSetID,a=this.tileMatrixLabels,s=this.clock,c=this.times,u=this.dimensions,l=this.tileWidth,h=this.tileHeight,f=this.tilingScheme,d=this.rectangle,p=this.minimumLevel,m=this.maximumLevel,y=this.ellipsoid,g=this.credit,v=this.subdomains,b=this.token,_={url:t.defined(b)?e+"&tk="+b:e,format:i,layer:n,style:r,tileMatrixSetID:o,tileMatrixLabels:a,clock:s,times:c,dimensions:u,tileWidth:l,tileHeight:h,tilingScheme:f,rectangle:d instanceof t.Rectangle||this.isEmptyObj(d)?d:t.Rectangle.fromDegrees(d.west,d.south,d.east,d.north),minimumLevel:p,maximumLevel:m,ellipsoid:y,credit:g,subdomains:v};return this.removeNullItem(_),new t.WebMapTileServiceImageryProvider(_)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(4)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"supermap-imagery-provider",mixins:[r.default],props:{url:String,name:String,minimumLevel:{type:Number,default:0},maximumLevel:{type:Number,default:20},credit:{type:String,default:"MapQuest, SuperMap iServer Imagery"}},computed:{changeProps:function(){var t=this.url,e=this.name,i=this.minimumLevel,n=this.maximumLevel,r=this.credit;return{url:t,name:e,minimumLevel:i,maximumLevel:n,credit:r}}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.name,n=this.minimumLevel,r=this.maximumLevel,o=this.credit;if(!t.defined(t.SuperMapImageryProvider))throw new t.DeveloperError("Your Cesium Package is not included SuperMapImageryProvider!");var a={url:e,name:i,minimumLevel:n,maximumLevel:r,credit:o};return this.removeNullItem(a),new t.SuperMapImageryProvider(a)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"cesium-terrain-provider",mixins:[r.default],props:{url:String,requestVertexNormals:Boolean,requestWaterMask:Boolean,requestMetadata:Boolean,ellipsoid:Object,credit:String|Object},watch:{url:function(){this.reload()},requestVertexNormals:function(t){this.terrainProvider.requestVertexNormals=t},requestWaterMask:function(t){this.terrainProvider.requestWaterMask=t},requestMetadata:function(t){this.terrainProvider.requestMetadata=t},ellipsoid:function(){this.reload()},credit:function(){this.reload()}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.requestVertexNormals,n=this.requestWaterMask,r=this.requestMetadata,o=this.ellipsoid,a=this.credit,s={url:e,requestVertexNormals:i,requestWaterMask:n,requestMetadata:r,ellipsoid:o,credit:a};return this.removeNullItem(s),s.url?new t.CesiumTerrainProvider(s):t.createWorldTerrain({requestVertexNormals:i,requestWaterMask:n})},mount:function(){var t=this.viewer,e=this.terrainProvider;t.terrainProvider=e},unload:function(){var t=this.Cesium,e=this.viewer;e.terrainProvider=new t.EllipsoidTerrainProvider}},created:function(){var t=this;Object.defineProperties(this,{terrainProvider:{enumerable:!0,get:function(){return t.cesiumObject}}})},stubVNode:{empty:function(){return this.$options.name}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(3),i(2),i(5),i(6)],void 0===(o="function"==typeof(n=function(e,i,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(i),s=u(n),c=u(r);function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"entity",mixins:[s.default],props:{id:String,name:String,availability:Object,show:{type:Boolean,default:!0},description:String,position:Object,orientation:Object,viewFrom:Object,parent:Object,billboard:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,box:Object,label:Object,model:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object},watch:{id:function(t){this.entity.id=t},name:function(t){this.entity.name=t},availability:function(t){this.entity.availability=t},show:function(t){this.entity.show=t},description:function(t){this.entity.description=t},position:function(t){this.entity.position=t},orientation:function(t){this.entity.orientation=t},viewFrom:function(t){this.entity.viewFrom=t},parent:function(t){this.entity.viewFrom=t},billboard:function(t){this.entity.billboard=t},corridor:function(t){this.entity.corridor=t},cylinder:function(t){this.entity.cylinder=t},ellipse:function(t){this.entity.ellipse=t},ellipsoid:function(t){this.entity.ellipsoid=t},box:function(t){this.entity.box=t},label:function(t){this.entity.label=t},model:function(t){this.entity.model=t},path:function(t){this.entity.path=t},plane:function(t){this.entity.plane=t},point:function(t){this.entity.point=t},polygon:function(t){this.entity.polygon=t},polyline:function(t){this.entity.polyline=t},properties:function(t){this.entity.properties=t},polylineVolume:function(t){this.entity.polylineVolume=t},rectangle:function(t){this.entity.rectangle=t},wall:function(t){this.entity.wall=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.id,i=this.name,n=this.availability,r=this.description,o=this.show,a=this.position,s=this.orientation,c=this.viewFrom,u=this.parent,l=this.billboard,h=this.corridor,f=this.cylinder,d=this.ellipse,p=this.ellipsoid,m=this.box,y=this.label,g=this.model,v=this.path,b=this.plane,_=this.point,x=this.polygon,w=this.polyline,E=this.properties,C=this.polylineVolume,O=this.rectangle,S=this.wall,I={id:e,name:i,availability:n,description:r,show:o,position:a instanceof t.Cartesian3||this.isEmptyObj(a)?a:t.Cartesian3.fromDegrees(a.x,a.y,a.z),orientation:s,viewFrom:c,parent:u,billboard:l,corridor:h,cylinder:f,ellipse:d,ellipsoid:p,box:m,label:y,model:g,path:v,plane:b,point:_,polygon:x,polyline:w,properties:E,polylineVolume:C,rectangle:O,wall:S};this.removeNullItem(I);var T=new t.Entity(I);return T},mount:function(){var t=this.viewer,e=this.entity;c.default.call(this,e,o.Events["entity-events"]),t.entities.add(e)},unload:function(){var t=this.viewer,e=this.entity;t.entities.remove(e)},setGraphics:function(t){if(t instanceof Cesium.BillboardGraphics){var e=this.$listeners["update:billboard"];e?this.$emit("update:billboard",t):this.entity.billboard=t}else if(t instanceof Cesium.BoxGraphics){var i=this.$listeners["update:box"];i?this.$emit("update:box",t):this.entity.box=t}else if(t instanceof Cesium.CorridorGraphics){var n=this.$listeners["update:corridor"];n?this.$emit("update:corridor",t):this.entity.corridor=t}else if(t instanceof Cesium.CylinderGraphics){var r=this.$listeners["update:cylinder"];r?this.$emit("update:cylinder",t):this.entity.cylinder=t}else if(t instanceof Cesium.EllipseGraphics){var o=this.$listeners["update:ellipse"];o?this.$emit("update:ellipse",t):this.entity.ellipse=t}else if(t instanceof Cesium.EllipsoidGraphics){var a=this.$listeners["update:ellipsoid"];a?this.$emit("update:ellipsoid",t):this.entity.ellipsoid=t}else if(t instanceof Cesium.LabelGraphics){var s=this.$listeners["update:label"];s?this.$emit("update:label",t):this.entity.label=t}else if(t instanceof Cesium.ModelGraphics){var c=this.$listeners["update:model"];c?this.$emit("update:model",t):this.entity.model=t}else if(t instanceof Cesium.PathGraphics){var u=this.$listeners["update:path"];u?this.$emit("update:path",t):this.entity.path=t}else if(t instanceof Cesium.PlaneGraphics){var l=this.$listeners["update:plane"];l?this.$emit("update:plane",t):this.entity.plane=t}else if(t instanceof Cesium.PointGraphics){var h=this.$listeners["update:point"];h?this.$emit("update:point",t):this.entity.point=t}else if(t instanceof Cesium.PolygonGraphics){var f=this.$listeners["update:polygon"];f?this.$emit("update:polygon",t):this.entity.polygon=t}else if(t instanceof Cesium.PolylineGraphics){var d=this.$listeners["update:polyline"];d?this.$emit("update:polyline",t):this.entity.polyline=t}else if(t instanceof Cesium.PolylineVolumeGraphics){var p=this.$listeners["update:polylineVolume"];p?this.$emit("update:polylineVolume",t):this.entity.polylineVolume=t}else if(t instanceof Cesium.RectangleGraphics){var m=this.$listeners["update:rectangle"];m?this.$emit("update:rectangle",t):this.entity.rectangle=t}else if(t instanceof Cesium.WallGraphics){var y=this.$listeners["update:wall"];y?this.$emit("update:wall",t):this.entity.wall=t}},getServices:function(){var t=this;return(0,a.default)(s.default.methods.getServices.call(this),{get entity(){return t.entity},get graphicsContainer(){return t}})}},stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{entity:{enumerable:!0,get:function(){return t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"billboard-graphics",mixins:[r.default],props:{image:[String,Object],show:{type:Boolean,default:!0},scale:{type:Number,default:1},horizontalOrigin:{type:Number,default:0},verticalOrigin:{type:Number,default:0},eyeOffset:Object,pixelOffset:Object,rotation:{type:[Number,Object],default:0},alignedAxis:Object,width:Number,height:Number,color:Object,scaleByDistance:Object,translucencyByDistance:Object,pixelOffsetScaleByDistance:Object,imageSubRegion:Object,sizeInMeters:Boolean,heightReference:Number,distanceDisplayCondition:Object,disableDepthTestDistance:[Object,Number]},watch:{image:function(t){this.graphics.image=t},show:function(t){this.graphics.show=t},scale:function(t){this.graphics.scale=t},horizontalOrigin:function(t){this.graphics.horizontalOrigin=t},verticalOrigin:function(t){this.graphics.verticalOrigin=t},eyeOffset:function(t){this.graphics.eyeOffset=t},pixelOffset:function(t){this.graphics.pixelOffset=t},rotation:function(t){this.graphics.rotation=t},alignedAxis:function(t){this.graphics.alignedAxis=t},width:function(t){this.graphics.width=t},height:function(t){this.graphics.height=t},color:function(t){this.graphics.color=t},scaleByDistance:function(t){this.graphics.scaleByDistance=t},translucencyByDistance:function(t){this.graphics.translucencyByDistance=t},pixelOffsetScaleByDistance:function(t){this.graphics.pixelOffsetScaleByDistance=t},imageSubRegion:function(t){this.graphics.imageSubRegion=t},sizeInMeters:function(t){this.graphics.sizeInMeters=t},heightReference:function(t){this.graphics.heightReference=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},disableDepthTestDistance:function(t){this.graphics.disableDepthTestDistance=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.image,i=this.show,n=this.scale,r=this.horizontalOrigin,o=this.verticalOrigin,a=this.eyeOffset,s=this.pixelOffset,c=this.rotation,u=this.alignedAxis,l=this.width,h=this.height,f=this.color,d=this.scaleByDistance,p=this.translucencyByDistance,m=this.pixelOffsetScaleByDistance,y=this.imageSubRegion,g=this.sizeInMeters,v=this.heightReference,b=this.distanceDisplayCondition,_=this.disableDepthTestDistance,x={image:e,show:i,scale:n,horizontalOrigin:r,verticalOrigin:o,eyeOffset:a,pixelOffset:s,rotation:c,alignedAxis:u,width:l,height:h,color:f,scaleByDistance:d,translucencyByDistance:p,pixelOffsetScaleByDistance:m,imageSubRegion:y,sizeInMeters:g,heightReference:v,distanceDisplayCondition:b,disableDepthTestDistance:_};this.removeNullItem(x);var w=new t.BillboardGraphics(x);return w}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"box-graphics",mixins:[r.default],props:{heightReference:Number,dimensions:Object,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},shadows:{type:Number,default:0},distanceDisplayCondition:Object},watch:{heightReference:function(t){this.graphics.heightReference=t},dimensions:function(t){this.graphics.dimensions=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.rotation=t},shadows:function(t){this.graphics.alignedAxis=t},distanceDisplayCondition:function(t){this.graphics.width=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.heightReference,i=this.dimensions,n=this.show,r=this.fill,o=this.material,a=this.outline,s=this.outlineColor,c=this.outlineWidth,u=this.shadows,l=this.distanceDisplayCondition,h={heightReference:e,dimensions:i,show:n,fill:r,material:o,outline:a,outlineColor:s,outlineWidth:c,shadows:u,distanceDisplayCondition:l};this.removeNullItem(h);var f=new t.BoxGraphics(h);return f}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"corridor-graphics",mixins:[r.default],props:{positions:Array,width:Number,cornerType:{type:Number,default:0},height:{type:Number,default:0},heightReference:Number,extrudedHeight:Number,extrudedHeightReference:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},granularity:{type:Number,default:Math.PI/180},shadows:{type:Number,default:0},distanceDisplayCondition:Object,classificationType:{type:Number,default:2},zIndex:Number},watch:{positions:function(t){this.graphics.positions=t},width:function(t){this.graphics.width=t},cornerType:function(t){this.graphics.cornerType=t},height:function(t){this.graphics.height=t},heightReference:function(t){this.graphics.heightReference=t},extrudedHeight:function(t){this.graphics.extrudedHeight=t},extrudedHeightReference:function(t){this.graphics.extrudedHeightReference=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},classificationType:function(t){this.graphics.classificationType=t},zIndex:function(t){this.graphics.zIndex=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.positions,i=this.width,n=this.cornerType,r=this.height,o=this.heightReference,a=this.extrudedHeight,s=this.extrudedHeightReference,c=this.show,u=this.fill,l=this.material,h=this.outline,f=this.outlineColor,d=this.outlineWidth,p=this.granularity,m=this.shadows,y=this.distanceDisplayCondition,g=this.classificationType,v=this.zIndex,b={positions:e,width:i,cornerType:n,height:r,heightReference:o,extrudedHeight:a,extrudedHeightReference:s,show:c,fill:u,material:l,outline:h,outlineColor:f,outlineWidth:d,granularity:p,shadows:m,distanceDisplayCondition:y,classificationType:g,zIndex:v};this.removeNullItem(b);var _=new t.CorridorGraphics(b);return _}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"cylinder-graphics",mixins:[r.default],props:{heightReference:Number,length:Number,topRadius:Number,bottomRadius:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},numberOfVerticalLines:{type:Number,default:16},slices:{type:Number,default:128},shadows:{type:Number,default:0},distanceDisplayCondition:Object},watch:{heightReference:function(t){this.graphics.heightReference=t},length:function(t){this.graphics.length=t},topRadius:function(t){this.graphics.topRadius=t},bottomRadius:function(t){this.graphics.bottomRadius=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},numberOfVerticalLines:function(t){this.graphics.numberOfVerticalLines=t},slices:function(t){this.graphics.slices=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.heightReference,i=this.length,n=this.topRadius,r=this.bottomRadius,o=this.show,a=this.fill,s=this.material,c=this.outline,u=this.outlineColor,l=this.outlineWidth,h=this.numberOfVerticalLines,f=this.slices,d=this.shadows,p=this.distanceDisplayCondition,m={heightReference:e,length:i,topRadius:n,bottomRadius:r,show:o,fill:a,material:s,outline:c,outlineColor:u,outlineWidth:l,numberOfVerticalLines:h,slices:f,shadows:d,distanceDisplayCondition:p};this.removeNullItem(m);var y=new t.CylinderGraphics(m);return y}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"ellipse-graphics",mixins:[r.default],props:{semiMajorAxis:Number,semiMinorAxis:Number,height:{type:Number,default:0},heightReference:Number,extrudedHeight:Number,extrudedHeightReference:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},numberOfVerticalLines:{type:Number,default:16},rotation:{type:[Number,Object],default:0},stRotation:{type:[Number,Object],default:0},granularity:{type:Number,default:Math.PI/180},shadows:{type:Number,default:0},distanceDisplayCondition:Object,classificationType:{type:Number,default:2},zIndex:{type:Number,default:0}},watch:{semiMajorAxis:function(t){this.graphics.semiMajorAxis=t},semiMinorAxis:function(t){this.graphics.semiMinorAxis=t},height:function(t){this.graphics.height=t},heightReference:function(t){this.graphics.heightReference=t},extrudedHeight:function(t){this.graphics.extrudedHeight=t},extrudedHeightReference:function(t){this.graphics.extrudedHeightReference=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},numberOfVerticalLines:function(t){this.graphics.numberOfVerticalLines=t},rotation:function(t){this.graphics.rotation=t},stRotation:function(t){this.graphics.stRotation=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},classificationType:function(t){this.graphics.classificationType=t},zIndex:function(t){this.graphics.zIndex=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.semiMajorAxis,i=this.semiMinorAxis,n=this.height,r=this.heightReference,o=this.extrudedHeight,a=this.extrudedHeightReference,s=this.show,c=this.fill,u=this.material,l=this.outline,h=this.outlineColor,f=this.outlineWidth,d=this.numberOfVerticalLines,p=this.rotation,m=this.stRotation,y=this.granularity,g=this.shadows,v=this.distanceDisplayCondition,b=this.classificationType,_=this.zIndex,x={semiMajorAxis:e,semiMinorAxis:i,height:n,heightReference:r,extrudedHeight:o,extrudedHeightReference:a,show:s,fill:c,material:u,outline:l,outlineColor:h,outlineWidth:f,numberOfVerticalLines:d,rotation:p,stRotation:m,granularity:y,shadows:g,distanceDisplayCondition:v,classificationType:b,zIndex:_};this.removeNullItem(x);var w=new t.EllipseGraphics(x);return w}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"ellipsoid-graphics",mixins:[r.default],props:{heightReference:Number,radii:Object,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},subdivisions:{type:Number,default:128},stackPartitions:{type:Number,default:64},slicePartitions:{type:Number,default:64},shadows:{type:Number,default:0},distanceDisplayCondition:Object},watch:{heightReference:function(t){this.graphics.heightReference=t},radii:function(t){this.graphics.radii=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},subdivisions:function(t){this.graphics.subdivisions=t},stackPartitions:function(t){this.graphics.stackPartitions=t},slicePartitions:function(t){this.graphics.slicePartitions=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.heightReference,i=this.radii,n=this.show,r=this.fill,o=this.material,a=this.outline,s=this.outlineColor,c=this.outlineWidth,u=this.subdivisions,l=this.stackPartitions,h=this.slicePartitions,f=this.shadows,d=this.distanceDisplayCondition,p={heightReference:e,radii:i,show:n,fill:r,material:o,outline:a,outlineColor:s,outlineWidth:c,subdivisions:u,stackPartitions:l,slicePartitions:h,shadows:f,distanceDisplayCondition:d};this.removeNullItem(p);var m=new t.EllipsoidGraphics(p);return m}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"label-graphics",mixins:[r.default],props:{text:String,font:{type:String,default:"30px sans-serif"},labelStyle:{type:Number,default:0},fillColor:Object,outlineColor:Object,outlineWidth:{type:Number,default:1},show:{type:Boolean,default:!0},showBackground:{type:Boolean,default:!1},backgroundColor:Object,backgroundPadding:Object,scale:{type:Number,default:1},horizontalOrigin:{type:Number,default:0},verticalOrigin:{type:Number,default:0},eyeOffset:Object,pixelOffset:Object,translucencyByDistance:Object,pixelOffsetScaleByDistance:Object,scaleByDistance:Object,heightReference:{type:Number,default:0},distanceDisplayCondition:Object,disableDepthTestDistance:[Object,Number]},watch:{text:function(t){this.graphics.text=t},font:function(t){this.graphics.font=t},labelStyle:function(t){this.graphics.style=t},fillColor:function(t){this.graphics.fillColor=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},show:function(t){this.graphics.show=t},showBackground:function(t){this.graphics.showBackground=t},backgroundColor:function(t){this.graphics.backgroundColor=t},backgroundPadding:function(t){this.graphics.backgroundPadding=t},scale:function(t){this.graphics.scale=t},horizontalOrigin:function(t){this.graphics.horizontalOrigin=t},verticalOrigin:function(t){this.graphics.verticalOrigin=t},eyeOffset:function(t){this.graphics.eyeOffset=t},pixelOffset:function(t){this.graphics.pixelOffset=t},translucencyByDistance:function(t){this.graphics.translucencyByDistance=t},pixelOffsetScaleByDistance:function(t){this.graphics.pixelOffsetScaleByDistance=t},scaleByDistance:function(t){this.graphics.scaleByDistance=t},heightReference:function(t){this.graphics.heightReference=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},disableDepthTestDistance:function(t){this.graphics.disableDepthTestDistance=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.text,i=this.font,n=this.labelStyle,r=this.fillColor,o=this.outlineColor,a=this.outlineWidth,s=this.show,c=this.showBackground,u=this.backgroundColor,l=this.backgroundPadding,h=this.scale,f=this.horizontalOrigin,d=this.verticalOrigin,p=this.eyeOffset,m=this.pixelOffset,y=this.translucencyByDistance,g=this.pixelOffsetScaleByDistance,v=this.scaleByDistance,b=this.heightReference,_=this.distanceDisplayCondition,x=this.disableDepthTestDistance,w={text:e,font:i,labelStyle:n,fillColor:r,outlineColor:o,outlineWidth:a,show:s,showBackground:c,backgroundColor:u,backgroundPadding:l,scale:h,horizontalOrigin:f,verticalOrigin:d,eyeOffset:p,pixelOffset:m,translucencyByDistance:y,pixelOffsetScaleByDistance:g,scaleByDistance:v,heightReference:b,distanceDisplayCondition:_,disableDepthTestDistance:x};return this.removeNullItem(w),new t.LabelGraphics(w)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"model-graphics",mixins:[r.default],props:{uri:String,show:{type:Boolean,default:!0},scale:{type:Number,default:1},minimumPixelSize:{type:Number,default:0},maximumScale:Number,incrementallyLoadTextures:{type:Boolean,default:!0},runAnimations:{type:Boolean,default:!0},clampAnimations:{type:Boolean,default:!0},nodeTransformations:Object,shadows:{type:Number,default:1},heightReference:{type:Number,default:0},distanceDisplayCondition:Object,silhouetteColor:Object,silhouetteSize:{type:Number,default:0},color:Object,colorBlendMode:{type:Number,default:0},colorBlendAmount:{type:Number,default:.5},clippingPlanes:Object,imageBasedLightingFactor:Object,lightColor:Object},watch:{uri:function(t){this.graphics.uri=t},show:function(t){this.graphics.show=t},scale:function(t){this.graphics.scale=t},minimumPixelSize:function(t){this.graphics.minimumPixelSize=t},maximumScale:function(t){this.graphics.maximumScale=t},incrementallyLoadTextures:function(t){this.graphics.incrementallyLoadTextures=t},runAnimations:function(t){this.graphics.runAnimations=t},clampAnimations:function(t){this.graphics.clampAnimations=t},nodeTransformations:function(t){this.graphics.nodeTransformations=t},shadows:function(t){this.graphics.shadows=t},heightReference:function(t){this.graphics.heightReference=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},silhouetteColor:function(t){this.graphics.silhouetteColor=t},silhouetteSize:function(t){this.graphics.silhouetteSize=t},color:function(t){this.graphics.color=t},colorBlendMode:function(t){this.graphics.colorBlendMode=t},colorBlendAmount:function(t){this.graphics.colorBlendAmount=t},clippingPlanes:function(t){this.graphics.clippingPlanes=t},imageBasedLightingFactor:function(t){this.graphics.imageBasedLightingFactor=t},lightColor:function(t){this.graphics.lightColor=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.uri,i=this.show,n=this.scale,r=this.minimumPixelSize,o=this.maximumScale,a=this.incrementallyLoadTextures,s=this.runAnimations,c=this.clampAnimations,u=this.nodeTransformations,l=this.shadows,h=this.heightReference,f=this.distanceDisplayCondition,d=this.silhouetteColor,p=this.silhouetteSize,m=this.color,y=this.colorBlendMode,g=this.colorBlendAmount,v=this.clippingPlanes,b=this.imageBasedLightingFactor,_=this.lightColor,x={uri:e,show:i,scale:n,minimumPixelSize:r,maximumScale:o,incrementallyLoadTextures:a,runAnimations:s,clampAnimations:c,nodeTransformations:u,shadows:l,heightReference:h,distanceDisplayCondition:f,silhouetteColor:d,silhouetteSize:p,color:m,colorBlendMode:y,colorBlendAmount:g,clippingPlanes:v,imageBasedLightingFactor:b,lightColor:_};this.removeNullItem(x);var w=new t.ModelGraphics(x);return w}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"path-graphics",mixins:[r.default],props:{leadTime:Number,trailTime:Number,show:{type:Boolean,default:!0},width:{type:Number,default:1},material:[Object,String],resolution:{type:Number,default:60},distanceDisplayCondition:Object},watch:{leadTime:function(t){this.graphics.leadTime=t},trailTime:function(t){this.graphics.trailTime=t},show:function(t){this.graphics.show=t},width:function(t){this.graphics.width=t},material:function(t){this.graphics.material=t},resolution:function(t){this.graphics.resolution=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.leadTime,i=this.trailTime,n=this.show,r=this.width,o=this.material,a=this.resolution,s=this.distanceDisplayCondition,c={leadTime:e,trailTime:i,show:n,width:r,material:o,resolution:a,distanceDisplayCondition:s};this.removeNullItem(c);var u=new t.PathGraphics(c);return u}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"plane-graphics",mixins:[r.default],props:{plane:Object,dimensions:Object,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,shadows:{type:Number,default:0},distanceDisplayCondition:Object},watch:{plane:function(t){this.graphics.plane=t},dimensions:function(t){this.graphics.dimensions=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.plane,i=this.dimensions,n=this.show,r=this.fill,o=this.material,a=this.outline,s=this.outlineColor,c=this.outlineWidth,u=this.shadows,l=this.distanceDisplayCondition,h={plane:e,dimensions:i,show:n,fill:r,material:o,outline:a,outlineColor:s,outlineWidth:c,shadows:u,distanceDisplayCondition:l};this.removeNullItem(h);var f=new t.PlaneGraphics(h);return f}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"point-graphics",mixins:[r.default],props:{color:Object,pixelSize:{type:Number,default:1},outlineColor:Object,outlineWidth:Number,show:{type:Boolean,default:!0},scaleByDistance:Object,heightReference:Number,distanceDisplayCondition:Object,disableDepthTestDistance:[Object,Number]},watch:{color:function(t){this.graphics.color=t},pixelSize:function(t){this.graphics.pixelSize=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},show:function(t){this.graphics.show=t},scaleByDistance:function(t){this.graphics.scaleByDistance=t},translucencyByDistance:function(t){this.graphics.translucencyByDistance=t},heightReference:function(t){this.graphics.heightReference=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},disableDepthTestDistance:function(t){this.graphics.disableDepthTestDistance=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.color,i=this.pixelSize,n=this.outlineColor,r=this.outlineWidth,o=this.show,a=this.scaleByDistance,s=this.translucencyByDistance,c=this.heightReference,u=this.distanceDisplayCondition,l=this.disableDepthTestDistance,h={color:e,pixelSize:i,outlineColor:n,outlineWidth:r,show:o,scaleByDistance:a,translucencyByDistance:s,heightReference:c,distanceDisplayCondition:u,disableDepthTestDistance:l};this.removeNullItem(h);var f=new t.PointGraphics(h);return f}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"polygon-graphics",mixins:[r.default],props:{hierarchy:[Array,Object],height:Number,heightReference:Number,extrudedHeight:Number,extrudedHeightReference:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:Object,outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},stRotation:{type:[Number,Object],default:0},granularity:{type:Number,default:Math.PI/180},perPositionHeight:{type:Boolean,default:!1},closeTop:{type:Boolean,default:!0},closeBottom:{type:Boolean,default:!0},shadows:{type:Number,default:0},distanceDisplayCondition:Object,zIndex:Number},watch:{hierarchy:function(){},height:function(t){this.graphics.height=t},heightReference:function(t){this.graphics.heightReference=t},extrudedHeight:function(t){this.graphics.extrudedHeight=t},extrudedHeightReference:function(t){this.graphics.extrudedHeightReference=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},stRotation:function(t){this.graphics.stRotation=t},granularity:function(t){this.graphics.granularity=t},perPositionHeight:function(t){this.graphics.perPositionHeight=t},closeTop:function(t){this.graphics.closeTop=t},closeBottom:function(t){this.graphics.closeBottom=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},zIndex:function(t){this.graphics.zIndex=t}},methods:{createCesiumObject:function(){var t=this,e=this.Cesium,i=this.hierarchy,n=this.height,r=this.heightReference,o=this.extrudedHeight,a=this.extrudedHeightReference,s=this.show,c=this.fill,u=this.material,l=this.outline,h=this.outlineColor,f=this.outlineWidth,d=this.stRotation,p=this.granularity,m=this.perPositionHeight,y=this.closeTop,g=this.closeBottom,v=this.shadows,b=this.distanceDisplayCondition,_=this.zIndex,x={hierarchy:i,height:n,heightReference:r,extrudedHeight:o,extrudedHeightReference:a,show:s,fill:c,material:u,outline:l,outlineColor:h,outlineWidth:f,stRotation:d,granularity:p,perPositionHeight:m,closeTop:y,closeBottom:g,shadows:v,distanceDisplayCondition:b,zIndex:_};this.removeNullItem(x);var w=new e.PolygonGraphics(x);return w.hierarchy=new e.CallbackProperty(function(){return t.hierarchy},!1),w}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"polyline-graphics",mixins:[r.default],props:{positions:Array,arcType:{type:Number,default:1},clampToGround:{type:Boolean,default:!1},width:{type:Number,default:1},show:{type:Boolean,default:!0},material:Object,depthFailMaterial:Object,granularity:{type:Number,default:Math.PI/180},shadows:Number,distanceDisplayCondition:Object,zIndex:Number},watch:{positions:function(){},arcType:function(t){this.graphics.arcType=t},clampToGround:function(t){this.graphics.clampToGround=t},width:function(t){this.graphics.width=t},show:function(t){this.graphics.show=t},material:function(t){this.graphics.material=t},depthFailMaterial:function(t){this.graphics.depthFailMaterial=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},zIndex:function(t){this.graphics.zIndex=t}},methods:{createCesiumObject:function(){var t=this,e=this.Cesium,i=this.positions,n=this.arcType,r=this.clampToGround,o=this.width,a=this.show,s=this.material,c=this.depthFailMaterial,u=this.granularity,l=this.shadows,h=this.distanceDisplayCondition,f=this.zIndex,d={positions:i,arcType:n,clampToGround:r,width:o,show:a,material:s,depthFailMaterial:c,granularity:u,shadows:l,distanceDisplayCondition:h,zIndex:f};this.removeNullItem(d);var p=new e.PolylineGraphics(d);return p.positions=new e.CallbackProperty(function(){return t.positions},!1),p}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"polyline-volume-graphics",mixins:[r.default],props:{positions:Array,shape:Array,cornerType:{type:Number,default:0},extrudedHeight:Number,extrudedHeightReference:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},granularity:{type:Number,default:Math.PI/180},shadows:{type:Number,default:0},distanceDisplayCondition:Number},watch:{positions:function(t){this.graphics.positions=t},shape:function(t){this.graphics.shape=t},cornerType:function(t){this.graphics.cornerType=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.positions,i=this.shape,n=this.cornerType,r=this.show,o=this.fill,a=this.material,s=this.outline,c=this.outlineColor,u=this.outlineWidth,l=this.granularity,h=this.shadows,f=this.distanceDisplayCondition,d={positions:e,shape:i,cornerType:n,show:r,fill:o,material:a,outline:s,outlineColor:c,outlineWidth:u,granularity:l,shadows:h,distanceDisplayCondition:f};this.removeNullItem(d);var p=new t.PolylineVolumeGraphics(d);return p}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"rectangle-graphics",mixins:[r.default],props:{coordinates:Object,height:Number,heightReference:Number,extrudedHeight:Number,extrudedHeightReference:Number,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},rotation:{type:[Number,Object],default:0},stRotation:{type:[Number,Object],default:0},granularity:{type:Number,default:Math.PI/180},shadows:Number,distanceDisplayCondition:Number,classificationType:Number,zIndex:Number},watch:{coordinates:function(t){this.graphics.coordinates=t instanceof Cesium.Rectangle?t:Cesium.Rectangle.fromDegrees(t.west,t.south,t.east,t.north)},height:function(t){this.graphics.height=t},heightReference:function(t){this.graphics.heightReference=t},extrudedHeight:function(t){this.graphics.extrudedHeight=t},extrudedHeightReference:function(t){this.graphics.extrudedHeightReference=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},rotation:function(t){this.graphics.rotation=t},stRotation:function(t){this.graphics.stRotation=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t},classificationType:function(t){this.graphics.classificationType=t},zIndex:function(t){this.graphics.zIndex=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.coordinates,i=this.height,n=this.heightReference,r=this.extrudedHeight,o=this.extrudedHeightReference,a=this.show,s=this.fill,c=this.material,u=this.outline,l=this.outlineColor,h=this.outlineWidth,f=this.rotation,d=this.stRotation,p=this.granularity,m=this.shadows,y=this.distanceDisplayCondition,g=this.classificationType,v=this.zIndex,b={coordinates:e instanceof t.Rectangle||this.isEmptyObj(e)?e:t.Rectangle.fromDegrees(e.west,e.south,e.east,e.north),height:i,heightReference:n,extrudedHeight:r,extrudedHeightReference:o,show:a,fill:s,material:c,outline:u,outlineColor:l,outlineWidth:h,rotation:f,stRotation:d,granularity:p,shadows:m,distanceDisplayCondition:y,classificationType:g,zIndex:v};return this.removeNullItem(b),new t.RectangleGraphics(b)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(1)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"wall-graphics",mixins:[r.default],props:{positions:Array,maximumHeights:Array,minimumHeights:Array,show:{type:Boolean,default:!0},fill:{type:Boolean,default:!0},material:[Object,String],outline:{type:Boolean,default:!1},outlineColor:Object,outlineWidth:{type:Number,default:1},granularity:{type:Number,default:Math.PI/180},shadows:{type:Number,default:0},distanceDisplayCondition:Number},watch:{positions:function(t){this.graphics.positions=t},maximumHeights:function(t){this.graphics.maximumHeights=t},minimumHeights:function(t){this.graphics.minimumHeights=t},show:function(t){this.graphics.show=t},fill:function(t){this.graphics.fill=t},material:function(t){this.graphics.material=t},outline:function(t){this.graphics.outline=t},outlineColor:function(t){this.graphics.outlineColor=t},outlineWidth:function(t){this.graphics.outlineWidth=t},granularity:function(t){this.graphics.granularity=t},shadows:function(t){this.graphics.shadows=t},distanceDisplayCondition:function(t){this.graphics.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.positions,i=this.maximumHeights,n=this.minimumHeights,r=this.show,o=this.fill,a=this.material,s=this.outline,c=this.outlineColor,u=this.outlineWidth,l=this.granularity,h=this.shadows,f=this.distanceDisplayCondition,d={positions:e,maximumHeights:i,minimumHeights:n,show:r,fill:o,material:a,outline:s,outlineColor:c,outlineWidth:u,granularity:l,shadows:h,distanceDisplayCondition:f};this.removeNullItem(d);var p=new t.WallGraphics(d);return p}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(7)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"primitive",mixins:[r.default],props:{geometryInstances:Array|Object,appearance:Object,show:{type:Boolean,default:!0},modelMatrix:Object,vertexCacheOptimize:{type:Boolean,default:!1},interleave:{type:Boolean,default:!1},compressVertices:{type:Boolean,default:!0},releaseGeometryInstances:{type:Boolean,default:!0},allowPicking:{type:Boolean,default:!0},cull:{type:Boolean,default:!0},asynchronous:{type:Boolean,default:!0},debugShowBoundingVolume:{type:Boolean,default:!1},shadows:{type:Number,default:0}},watch:{geometryInstances:function(t){this.primitive.geometryInstances=t},appearance:function(t){this.primitive.appearance=t},show:function(t){this.primitive.show=t},modelMatrix:function(t){this.primitive.modelMatrix=t},vertexCacheOptimize:function(t){this.primitive.vertexCacheOptimize=t},interleave:function(t){this.primitive.interleave=t},compressVertices:function(t){this.primitive.compressVertices=t},releaseGeometryInstances:function(t){this.primitive.releaseGeometryInstances=t},allowPicking:function(t){this.primitive.allowPicking=t},cull:function(t){this.primitive.cull=t},asynchronous:function(t){this.primitive.asynchronous=t},debugShowBoundingVolume:function(t){this.primitive.debugShowBoundingVolume=t},shadows:function(t){this.primitive.shadows=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.geometryInstances,i=this.appearance,n=this.show,r=this.modelMatrix,o=this.vertexCacheOptimize,a=this.interleave,s=this.compressVertices,c=this.releaseGeometryInstances,u=this.allowPicking,l=this.cull,h=this.asynchronous,f=this.debugShowBoundingVolume,d=this.shadows,p={geometryInstances:e,appearance:i,show:n,modelMatrix:r,vertexCacheOptimize:o,interleave:a,compressVertices:s,releaseGeometryInstances:c,allowPicking:u,cull:l,asynchronous:h,debugShowBoundingVolume:f,shadows:d};return this.removeNullItem(p),new t.Primitive(p)},setGeometryInstances:function(t){var e=this.$listeners["update:geometryInstances"];e?this.$emit("update:geometryInstances",t):this.primitive.geometryInstances=t}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(7)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"ground-primitive",mixins:[r.default],props:{geometryInstances:Array|Object,appearance:Object,show:{type:Boolean,default:!0},vertexCacheOptimize:{type:Boolean,default:!1},interleave:{type:Boolean,default:!1},compressVertices:{type:Boolean,default:!0},releaseGeometryInstances:{type:Boolean,default:!0},allowPicking:{type:Boolean,default:!0},asynchronous:{type:Boolean,default:!0},classificationType:Number,debugShowBoundingVolume:{type:Boolean,default:!1},debugShowShadowVolume:{type:Boolean,default:!1}},watch:{geometryInstances:function(t){this.primitive.geometryInstances=t},appearance:function(t){this.primitive.appearance=t},show:function(t){this.primitive.show=t},vertexCacheOptimize:function(t){this.primitive.vertexCacheOptimize=t},interleave:function(t){this.primitive.interleave=t},compressVertices:function(t){this.primitive.compressVertices=t},releaseGeometryInstances:function(t){this.primitive.releaseGeometryInstances=t},allowPicking:function(t){this.primitive.allowPicking=t},asynchronous:function(t){this.primitive.asynchronous=t},classificationType:function(t){this.primitive.classificationType=t},debugShowBoundingVolume:function(t){this.primitive.debugShowBoundingVolume=t},debugShowShadowVolume:function(t){this.primitive.debugShowShadowVolume=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.geometryInstances,i=this.appearance,n=this.show,r=this.vertexCacheOptimize,o=this.interleave,a=this.compressVertices,s=this.releaseGeometryInstances,c=this.allowPicking,u=this.asynchronous,l=this.classificationType,h=this.debugShowBoundingVolume,f=this.debugShowShadowVolume,d={geometryInstances:e,appearance:t.defaultValue(i,new t.MaterialAppearance),show:n,vertexCacheOptimize:r,interleave:o,compressVertices:a,releaseGeometryInstances:s,allowPicking:c,asynchronous:u,classificationType:l,debugShowBoundingVolume:h,debugShowShadowVolume:f};return this.removeNullItem(d),new t.GroundPrimitive(d)},setGeometryInstances:function(t){var e=this.$listeners["update:geometryInstances"];e?this.$emit("update:geometryInstances",t):this.primitive.geometryInstances=t}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"geometry-instance",mixins:[r.default],props:{geometry:Object,modelMatrix:Object,id:Object,attributes:Object},watch:{geometry:function(t){this.geometryInstance.geometry=t},modelMatrix:function(t){this.geometryInstance.modelMatrix=t},id:function(t){this.geometryInstance.id=t},attributes:function(t){this.geometryInstance.attributes=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.geometry,i=this.modelMatrix,n=this.id,r=this.attributes,o={geometry:t.defaultValue(e,new t.Geometry({attributes:new t.GeometryAttributes})),modelMatrix:i,id:n,attributes:r};return this.removeNullItem(o),new t.GeometryInstance(o)},mount:function(){var t=this.geometryInstance,e=this.geometryInstancesContainer;e&&e.setGeometryInstances(t)},unload:function(){var t=this.geometryInstancesContainer;t&&t.setGeometryInstances(void 0)},setGeometry:function(t){var e=this.$listeners["update:geometry"];e?this.$emit("update:geometry",t):this.geometryInstance.geometry=t},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get geometryInstance(){return t.geometryInstance},get geometryContainer(){return t}})}},stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{geometryInstance:{enumerable:!0,get:function(){return t.cesiumObject}},geometryInstancesContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.geometryInstancesContainer}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(108)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"rectangle-geometry",mixins:[r.default],props:{rectangle:Object,vertexFormat:Object,ellipsoid:Object,granularity:{type:Number,default:Math.PI/180},height:Number,rotation:Number,stRotation:Number,extrudedHeight:Number},watch:{rectangle:{handler:function(t){this.geometryContainer.geometryInstancesContainer.reload()},deep:!0},vertexFormat:function(t){this.geometry.vertexFormat=t},ellipsoid:function(t){},granularity:function(t){},height:function(t){},rotation:function(t){},stRotation:function(t){},extrudedHeight:function(t){}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.rectangle,i=this.vertexFormat,n=this.ellipsoid,r=this.granularity,o=this.height,a=this.rotation,s=this.stRotation,c=this.extrudedHeight,u={rectangle:e instanceof t.Rectangle||this.isEmptyObj(e)?e:t.Rectangle.fromDegrees(e.west,e.south,e.east,e.north),vertexFormat:i,ellipsoid:n,granularity:r,height:o,rotation:a,stRotation:s,extrudedHeight:c};return this.removeNullItem(u),new t.RectangleGeometry(u)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(54)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"point-collection",mixins:[r.default],props:{modelMatrix:Object,debugShowBoundingVolume:{type:Boolean,default:!1},blendOption:Number},watch:{modelMatrix:function(){this.reload()},debugShowBoundingVolume:function(t){this.originInstance.debugShowBoundingVolume=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.modelMatrix,i=this.debugShowBoundingVolume,n=this.blendOption,r={modelMatrix:e,debugShowBoundingVolume:i,blendOption:n};this.removeNullItem(r);var o=new t.PointPrimitiveCollection(r);return o}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(54)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"polyline-collection",mixins:[r.default],props:{modelMatrix:Object,debugShowBoundingVolume:{type:Boolean,default:!1}},watch:{modelMatrix:function(){this.reload()},debugShowBoundingVolume:function(t){this.originInstance.debugShowBoundingVolume=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.modelMatrix,i=this.debugShowBoundingVolume,n={modelMatrix:e,debugShowBoundingVolume:i};this.removeNullItem(n);var r=new t.PolylineCollection(n);return r}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(54)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"label-collection",mixins:[r.default],props:{modelMatrix:Object,debugShowBoundingVolume:{type:Boolean,default:!1},scene:Object,blendOption:Number},watch:{modelMatrix:function(){this.reload()},debugShowBoundingVolume:function(t){this.originInstance.debugShowBoundingVolume=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.modelMatrix,i=this.debugShowBoundingVolume,n=this.scene,r=this.blendOption,o={modelMatrix:e,debugShowBoundingVolume:i,scene:n,blendOption:r};this.removeNullItem(o);var a=new t.LabelCollection(o);return a}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(55)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"point-primitive",mixins:[r.default],props:{color:Object,disableDepthTestDistance:[Object,Number],distanceDisplayCondition:Object,id:null,outlineColor:Object,outlineWidth:{type:Number,default:1},pixelSize:Number,position:Object,scaleByDistance:Object,show:{type:Boolean,default:!0},translucencyByDistance:Object},watch:{color:function(t){this.originInstance.color=t},disableDepthTestDistance:function(t){this.originInstance.disableDepthTestDistance=t},distanceDisplayCondition:function(t){this.originInstance.distanceDisplayCondition=t},id:function(t){this.originInstance.id=t},outlineColor:function(t){this.originInstance.outlineColor=t},outlineWidth:function(t){this.originInstance.outlineWidth=t},pixelSize:function(t){this.originInstance.pixelSize=t},position:function(t){this.originInstance.position=t},scaleByDistance:function(t){this.originInstance.scaleByDistance=t},show:function(t){this.originInstance.show=t},translucencyByDistance:function(t){this.originInstance.translucencyByDistance=t}},methods:{createCesiumObject:function(){var t=this.primitiveCollection,e=this.color,i=this.disableDepthTestDistance,n=this.distanceDisplayCondition,r=this.id,o=this.outlineColor,a=this.outlineWidth,s=this.pixelSize,c=this.position,u=this.scaleByDistance,l=this.show,h=this.translucencyByDistance,f={color:e,disableDepthTestDistance:i,distanceDisplayCondition:n,id:r,outlineColor:o,outlineWidth:a,pixelSize:s,position:c,scaleByDistance:u,show:l,translucencyByDistance:h};return this.removeNullItem(f),t.add(f)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(55)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"polyline-primitive",mixins:[r.default],props:{show:{type:Boolean,default:!0},width:{type:Number,default:1},loop:{type:Boolean,default:!1},material:Object,positions:Array,id:Object,distanceDisplayCondition:Object},watch:{show:function(t){this.primitive.val=t},width:function(t){this.primitive.width=t},loop:function(t){this.primitive.loop=t},material:function(t){this.primitive.material=t},positions:function(t){this.primitive.positions=t},id:function(t){this.primitive.id=t},distanceDisplayCondition:function(t){this.primitive.distanceDisplayCondition=t}},methods:{createCesiumObject:function(){var t=this.primitiveCollection,e=this.show,i=this.width,n=this.loop,r=this.material,o=this.positions,a=this.id,s=this.distanceDisplayCondition,c={show:e,width:i,loop:n,material:r,positions:o,id:a,distanceDisplayCondition:s};return this.removeNullItem(c),t.add(c)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(55)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"label-primitive",mixins:[r.default],props:{backgroundColor:Object,backgroundPadding:Object,disableDepthTestDistance:[Object,Number],distanceDisplayCondition:Object,eyeOffset:Object,fillColor:Object,font:{type:String,default:"30px sans-serif"},heightReference:{type:Number,default:0},horizontalOrigin:{type:Number,default:1},id:null,outlineColor:Object,outlineWidth:{type:Number,default:1},pixelOffset:Object,pixelOffsetScaleByDistance:Object,position:Object,scale:Number,scaleByDistance:Object,show:{type:Boolean,default:!0},showBackground:{type:Boolean,default:!1},labelStyle:{type:Number,default:2},text:String,translucencyByDistance:Object,verticalOrigin:{type:Number,default:2}},watch:{backgroundColor:function(t){this.primitive.backgroundColor=t},backgroundPadding:function(t){this.primitive.backgroundPadding=t},disableDepthTestDistance:function(t){this.primitive.disableDepthTestDistance=t},distanceDisplayCondition:function(t){this.primitive.distanceDisplayCondition=t},eyeOffset:function(t){this.primitive.eyeOffset=t},fillColor:function(t){this.primitive.fillColor=t},font:function(t){this.primitive.font=t},heightReference:function(t){this.primitive.heightReference=t},horizontalOrigin:function(t){this.primitive.horizontalOrigin=t},id:function(t){this.primitive.id=t},outlineColor:function(t){this.primitive.outlineColor=t},outlineWidth:function(t){this.primitive.outlineWidth=t},pixelOffset:function(t){this.primitive.pixelOffset=t},pixelOffsetScaleByDistance:function(t){this.primitive.pixelOffsetScaleByDistance=t},position:function(t){this.primitive.position=t},scale:function(t){this.primitive.scale=t},scaleByDistance:function(t){this.primitive.scaleByDistance=t},show:function(t){this.primitive.show=t},showBackground:function(t){this.primitive.showBackground=t},labelStyle:function(t){this.primitive.labelStyle=t},text:function(t){this.primitive.text=t},translucencyByDistance:function(t){this.primitive.translucencyByDistance=t},verticalOrigin:function(t){this.primitive.verticalOrigin=t}},methods:{createCesiumObject:function(){var t=this.primitiveCollection,e=this.backgroundColor,i=this.backgroundPadding,n=this.disableDepthTestDistance,r=this.distanceDisplayCondition,o=this.eyeOffset,a=this.fillColor,s=this.font,c=this.heightReference,u=this.horizontalOrigin,l=this.id,h=this.outlineColor,f=this.outlineWidth,d=this.pixelOffset,p=this.pixelOffsetScaleByDistance,m=this.position,y=this.scale,g=this.scaleByDistance,v=this.show,b=this.showBackground,_=this.labelStyle,x=this.text,w=this.translucencyByDistance,E=this.verticalOrigin,C={backgroundColor:e,backgroundPadding:i,disableDepthTestDistance:n,distanceDisplayCondition:r,eyeOffset:o,fillColor:a,font:s,heightReference:c,horizontalOrigin:u,id:l,outlineColor:h,outlineWidth:f,pixelOffset:d,pixelOffsetScaleByDistance:p,position:m,scale:y,scaleByDistance:g,show:v,showBackground:b,labelStyle:_,text:x,translucencyByDistance:w,verticalOrigin:E};return this.removeNullItem(C),t.add(C)}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(5),i(7)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"cesium-3dtileset",render:function(t){},mixins:[o.default],props:{url:String,show:{type:Boolean,default:!0},modelMatrix:Object,shadows:{type:Number,default:1},maximumScreenSpaceError:{type:Number,default:16},maximumMemoryUsage:{type:Number,default:512},cullWithChildrenBounds:{type:Boolean,default:!0},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},skipLevelOfDetail:{type:Boolean,default:!0},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},clippingPlanes:Object,classificationType:Object,ellipsoid:Object,pointCloudShading:Object,imageBasedLightingFactor:Object,lightColor:Object,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},debugWireframe:{type:Boolean,default:!1},debugShowBoundingVolume:{type:Boolean,default:!1},debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1}},watch:{url:function(){this.reload()},show:function(){this.reload()},modelMatrix:function(){this.reload()},shadows:function(){this.reload()},maximumScreenSpaceError:function(){this.reload()},maximumMemoryUsage:function(){this.reload()},cullWithChildrenBounds:function(){this.reload()},dynamicScreenSpaceError:function(){this.reload()},dynamicScreenSpaceErrorDensity:function(){this.reload()},dynamicScreenSpaceErrorFactor:function(){this.reload()},dynamicScreenSpaceErrorHeightFalloff:function(){this.reload()},skipLevelOfDetail:function(){this.reload()},baseScreenSpaceError:function(){this.reload()},skipScreenSpaceErrorFactor:function(){this.reload()},skipLevels:function(){this.reload()},immediatelyLoadDesiredLevelOfDetail:function(){this.reload()},loadSiblings:function(){this.reload()},clippingPlanes:function(){this.reload()},classificationType:function(){this.reload()},ellipsoid:function(){this.reload()},pointCloudShading:function(){this.reload()},imageBasedLightingFactor:function(){this.reload()},lightColor:function(){this.reload()},debugFreezeFrame:function(){this.reload()},debugColorizeTiles:function(){this.reload()},debugWireframe:function(){this.reload()},debugShowBoundingVolume:function(){this.reload()},debugShowContentBoundingVolume:function(){this.reload()},debugShowViewerRequestVolume:function(){this.reload()},debugShowGeometricError:function(){this.reload()},debugShowRenderingStatistics:function(){this.reload()},debugShowMemoryUsage:function(){this.reload()},debugShowUrl:function(){this.reload()}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.show,n=this.modelMatrix,o=this.shadows,a=this.maximumScreenSpaceError,s=this.maximumMemoryUsage,c=this.cullWithChildrenBounds,u=this.dynamicScreenSpaceError,l=this.dynamicScreenSpaceErrorDensity,h=this.dynamicScreenSpaceErrorFactor,f=this.dynamicScreenSpaceErrorHeightFalloff,d=this.skipLevelOfDetail,p=this.baseScreenSpaceError,m=this.skipScreenSpaceErrorFactor,y=this.skipLevels,g=this.immediatelyLoadDesiredLevelOfDetail,v=this.loadSiblings,b=this.clippingPlanes,_=this.classificationType,x=this.ellipsoid,w=this.pointCloudShading,E=this.imageBasedLightingFactor,C=this.lightColor,O=this.debugFreezeFrame,S=this.debugColorizeTiles,I=this.debugWireframe,T=this.debugShowBoundingVolume,P=this.debugShowContentBoundingVolume,R=this.debugShowViewerRequestVolume,L=this.debugShowGeometricError,M=this.debugShowRenderingStatistics,N=this.debugShowMemoryUsage,j=this.debugShowUrl,D={url:e,show:i,modelMatrix:n,shadows:o,maximumScreenSpaceError:a,maximumMemoryUsage:s,cullWithChildrenBounds:c,dynamicScreenSpaceError:u,dynamicScreenSpaceErrorDensity:l,dynamicScreenSpaceErrorFactor:h,dynamicScreenSpaceErrorHeightFalloff:f,skipLevelOfDetail:d,baseScreenSpaceError:p,skipScreenSpaceErrorFactor:m,skipLevels:y,immediatelyLoadDesiredLevelOfDetail:g,loadSiblings:v,clippingPlanes:b,classificationType:_,ellipsoid:x,pointCloudShading:w,imageBasedLightingFactor:E,lightColor:C,debugFreezeFrame:O,debugColorizeTiles:S,debugWireframe:I,debugShowBoundingVolume:T,debugShowContentBoundingVolume:P,debugShowViewerRequestVolume:R,debugShowGeometricError:L,debugShowRenderingStatistics:M,debugShowMemoryUsage:N,debugShowUrl:j};this.removeNullItem(D);var A=new t.Cesium3DTileset(D);return r.default.call(this,A),A}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(7)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"model-primitive",mixins:[r.default],props:{url:String,basePath:String,show:{type:Boolean,default:!0},modelMatrix:Object,scale:{type:Number,default:1},minimumPixelSize:{type:Number,default:0},maximumScale:Number,id:null,allowPicking:{type:Boolean,default:!0},incrementallyLoadTextures:{type:Boolean,default:!0},asynchronous:{type:Boolean,default:!0},clampAnimations:{type:Boolean,default:!0},shadows:{type:Number,default:1},debugShowBoundingVolume:{type:Boolean,default:!1},debugWireframe:{type:Boolean,default:!1},heightReference:Object,scene:Object,distanceDisplayCondition:Object,color:Object,colorBlendMode:{type:Number,default:0},colorBlendAmount:{type:Number,default:.5},silhouetteColor:Object,silhouetteSize:{type:Number,default:0},clippingPlanes:Object,dequantizeInShader:{type:Boolean,default:!0}},watch:{url:function(t){this.reload()},basePath:function(t){this.reload()},show:function(t){this.originInstance.show=t},modelMatrix:function(t){this.originInstance.modelMatrix=t},scale:function(t){this.originInstance.scale=t},minimumPixelSize:function(t){this.originInstance.minimumPixelSize=t},maximumScale:function(t){this.originInstance.maximumScale=t},id:function(t){this.originInstance.id=t},allowPicking:function(t){this.originInstance.allowPicking=t},incrementallyLoadTextures:function(t){this.originInstance.incrementallyLoadTextures=t},asynchronous:function(t){this.originInstance.asynchronous=t},clampAnimations:function(t){this.originInstance.clampAnimations=t},shadows:function(t){this.originInstance.shadows=t},debugShowBoundingVolume:function(t){this.originInstance.debugShowBoundingVolume=t},debugWireframe:function(t){this.originInstance.debugWireframe=t},heightReference:function(t){this.originInstance.heightReference=t},scene:function(t){this.reload()},distanceDisplayCondition:function(t){this.originInstance.distanceDisplayCondition=t},color:function(t){this.originInstance.color=t},colorBlendMode:function(t){this.originInstance.colorBlendMode=t},colorBlendAmount:function(t){this.originInstance.colorBlendAmount=t},silhouetteColor:function(t){this.originInstance.silhouetteColor=t},silhouetteSize:function(t){this.originInstance.silhouetteSize=t},clippingPlanes:function(t){this.originInstance.clippingPlanes=t},dequantizeInShader:function(t){this.originInstance.dequantizeInShader=t}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.url,i=this.basePath,n=this.show,r=this.modelMatrix,o=this.scale,a=this.minimumPixelSize,s=this.maximumScale,c=this.id,u=this.allowPicking,l=this.incrementallyLoadTextures,h=this.asynchronous,f=this.clampAnimations,d=this.shadows,p=this.debugShowBoundingVolume,m=this.debugWireframe,y=this.heightReference,g=this.scene,v=this.distanceDisplayCondition,b=this.color,_=this.colorBlendMode,x=this.colorBlendAmount,w=this.silhouetteColor,E=this.silhouetteSize,C=this.clippingPlanes,O=this.dequantizeInShader,S={url:e,basePath:i,show:n,modelMatrix:r,scale:o,minimumPixelSize:a,maximumScale:s,id:c,allowPicking:u,incrementallyLoadTextures:l,asynchronous:h,clampAnimations:f,shadows:d,debugShowBoundingVolume:p,debugWireframe:m,heightReference:y,scene:g,distanceDisplayCondition:v,color:b,colorBlendMode:_,colorBlendAmount:x,silhouetteColor:w,silhouetteSize:E,clippingPlanes:C,dequantizeInShader:O};this.removeNullItem(S);var I=t.Model.fromGltf(S);return I}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(56)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"measure-distance",mixins:[r.default],data:function(){return{measuring:!1,polylines:[],font:"100 20px SimSun",mode:1}},watch:{measuring:function(t){var e=this.polylines,i=e[e.length-1];if(t||!i||i.positions.length){if(t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.$parent.$slots.default||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;!c.componentOptions||"measure-height"!==c.componentOptions.tag&&"measure-area"!==c.componentOptions.tag||(c.child.measuring=!1)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}e.length&&e.push({positions:[],distances:[],distance:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})})}}else this.polylines.pop();this.$emit("activeEvt",{type:"distanceMeasuring",isActive:t})}},methods:{LEFT_CLICK:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines;!n.length&&n.push({positions:[],distances:[],distance:0,materialLine:new e.Material({fabric:{type:"Color",uniforms:{color:new e.Color(.3176470588235294,1,0,1)}}})});var r=i.scene.pickPosition(t.position);if(e.defined(r)){var o=n[n.length-1];o.positions.push(r);var a=o.distance;o.distances.push(a)}}},MOUSE_MOVE:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines;if(n.length){var r=n[n.length-1];if(r.positions.length){var o=i.scene.pickPosition(t.endPosition);if(e.defined(o)){r.positions.length>=2&&(r.positions.pop(),r.distances.pop()),r.positions.push(o);var a=this.getDistance(r.positions);r.distances.push(a),r.distance=a}}}}},RIGHT_CLICK:function(t){if(this.measuring){var e=this.viewer,i=this.polylines,n=this.mode;if(i.length){var r=i[i.length-1];if(0!==r.positions.length){var o=e.scene.pickPosition(t.position);Cesium.defined(o)&&(0===n?i.length&&i.push({positions:[],distances:[],distance:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})}):this.measuring=!1)}}}},getDistance:function(t){for(var e=this.Cesium,i=0,n=0;n<t.length-1;n++){var r=e.Cartesian3.distance(t[n],t[n+1]);i+=r}return i},clear:function(){this.polylines=[]}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(119),i(56)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"measure-area",mixins:[o.default],data:function(){return{polygon:{},measuring:!1,polylines:[],font:"100 20px SimSun",mode:1}},props:{perPositionHeight:{type:Boolean,default:!0}},watch:{measuring:function(t){var e=this.polylines,i=e[e.length-1];if(t||!i||i.positions.length){if(t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.$parent.$slots.default||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;!c.componentOptions||"measure-height"!==c.componentOptions.tag&&"measure-distance"!==c.componentOptions.tag||(c.child.measuring=!1)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}e.length&&e.push({positions:[],area:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})})}}else this.polylines.pop();var u=this.$listeners.activeEvt;u&&this.$emit("activeEvt",{type:"areaMeasuring",isActive:t})}},methods:{LEFT_CLICK:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines;!n.length&&n.push({positions:[],area:0,materialLine:new e.Material({fabric:{type:"Color",uniforms:{color:new e.Color(.3176470588235294,1,0,1)}}})});var r=i.scene.pickPosition(t.position);if(e.defined(r)){var o=n[n.length-1];o.positions.push(r)}}},MOUSE_MOVE:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines;if(n.length){var r=n[n.length-1];if(r.positions.length){var o=i.scene.pickPosition(t.endPosition);e.defined(o)&&(r.positions.length>=2&&r.positions.pop(),r.positions.push(o),r.area=this.getArea(r.positions))}}}},RIGHT_CLICK:function(t){if(this.measuring){var e=this.viewer,i=this.polylines,n=this.mode;if(i.length){var r=i[i.length-1];if(0!==r.positions.length){var o=e.scene.pickPosition(t.position);Cesium.defined(o)&&(0===n?i.length&&i.push({positions:[],area:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})}):this.measuring=!1)}}}},getArea:function(t){for(var e=this.Cesium,i=[],n=0,o=t.length;n<o;n++){var a=e.Cartographic.fromCartesian(t[n]),s=e.Math.toDegrees(a.longitude).toFixed(6),c=e.Math.toDegrees(a.latitude).toFixed(6);i.push({x:s,y:c})}var u=[],l=[];u.push(l);for(var h=0,f=i.length;h<f;h++)l.push([i[h].x,i[h].y]);var d={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:u}},{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[0,0],[0,0],[0,0],[0,0],[0,0]]]}}]};return(0,r.default)(d)},clear:function(){this.distance=0,this.polylines=[],this.labels=[]}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(56)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n};e.default={name:"measure-height",mixins:[r.default],data:function(){return{measuring:!1,startPoint:void 0,polylines:[],labels:[],font:"100 20px SimSun",mode:1}},watch:{measuring:function(t){var e=this.polylines,i=e[e.length-1];if(t||!i||i.positions.length){if(t){var n=!0,r=!1,o=void 0;try{for(var a,s=(this.$parent.$slots.default||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;!c.componentOptions||"measure-distance"!==c.componentOptions.tag&&"measure-area"!==c.componentOptions.tag||(c.child.measuring=!1)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}e.length&&e.push({positions:[],distanceH:0,height:0,distanceS:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})})}}else this.polylines.pop();this.$emit("activeEvt",{type:"heightMeasuring",isActive:t})}},methods:{LEFT_CLICK:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines;!n.length&&n.push({positions:[],distanceH:0,height:0,distanceS:0,materialLine:new e.Material({fabric:{type:"Color",uniforms:{color:new e.Color(.3176470588235294,1,0,1)}}})});var r=i.scene.pickPosition(t.position);if(e.defined(r)){var o=n[n.length-1];0===o.positions.length&&(o.positions.push(r),this.startPoint=r)}}},MOUSE_MOVE:function(t){if(this.measuring){var e=this.Cesium,i=this.viewer,n=this.polylines,r=this.labels;if(n.length){var o=n[n.length-1];if(o.positions.length){var a=i.scene.pickPosition(t.endPosition);if(e.defined(a)){var s=a,c={};e.Cartesian3.normalize(this.startPoint,c);var u=new e.Plane(c,-e.Cartesian3.distance(this.startPoint,new e.Cartesian3(0,0,0))),l={};o.height=e.Plane.getPointDistance(u,s);var h={},f={},d={};if(o.height>=0)e.Plane.projectPointOntoPlane(u,s,l),e.Cartesian3.midpoint(s,l,h),e.Cartesian3.midpoint(this.startPoint,l,f),o.distanceH=e.Cartesian3.distance(this.startPoint,l);else{e.Cartesian3.normalize(s,{});var p=new e.Plane(c,-e.Cartesian3.distance(s,new e.Cartesian3(0,0,0)));e.Plane.projectPointOntoPlane(p,this.startPoint,l),e.Cartesian3.midpoint(this.startPoint,l,h),e.Cartesian3.midpoint(s,l,f),o.distanceH=e.Cartesian3.distance(s,l)}o.distanceS=e.Cartesian3.distance(this.startPoint,s),e.Cartesian3.midpoint(this.startPoint,s,d),o.height=Math.abs(o.height),1!==o.positions.length&&(o.positions.pop(),o.positions.pop(),r.pop(),r.pop(),r.pop()),o.positions.push(s),o.positions.push(l);var m=o.height>1e3?(o.height/1e3).toFixed(2)+"km":o.height.toFixed(2)+"m";r.push({text:"垂直高度:"+m,position:h});var y=o.distanceH>1e3?(o.distanceH/1e3).toFixed(2)+"km":o.distanceH.toFixed(2)+"m";r.push({text:"水平距离:"+y,position:f});var g=o.distanceS>1e3?(o.distanceS/1e3).toFixed(2)+"km":o.distanceS.toFixed(2)+"m";r.push({text:"空间距离:"+g,position:d})}}}}},RIGHT_CLICK:function(t){if(this.measuring){var e=this.viewer,i=this.polylines,n=this.mode;if(i.length){var r=e.scene.pickPosition(t.position);Cesium.defined(r)&&(0===n?i.length&&i.push({positions:[],distanceH:0,height:0,distanceS:0,materialLine:new Cesium.Material({fabric:{type:"Color",uniforms:{color:new Cesium.Color(.3176470588235294,1,0,1)}}})}):this.measuring=!1)}}},getDistance:function(t){for(var e=this.Cesium,i=0,n=0;n<t.length-1;n++){var r=e.Cartesian3.distance(t[n],t[n+1]);i+=r}return i},clear:function(){this.distance=0,this.polylines=[],this.labels=[]}}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(3),i(2),i(122)],void 0===(o="function"==typeof(n=function(e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(i),a=s(n);function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"cesium-heatmap",data:function(){return{defaultOptions:{useEntitiesIfAvailable:!0,minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"}},material:null,appearance:null,geometry:null,coordinates:{west:0,south:0,east:0,north:0},layerUrl:""}},mixins:[a.default],props:{type:{type:Number,default:0},bounds:Object,options:Object,min:Number,max:Number,data:Array,show:{type:Boolean,default:!0}},computed:{changeProps:function(){var t=this.bounds,e=this.options,i=this.min,n=this.max,r=this.data;return{bounds:t,options:e,min:i,max:n,data:r}}},watch:{changeProps:{handler:function(t,e){if(JSON.stringify(t)!==JSON.stringify(e)){var i=this._heatmapInstance;JSON.stringify(t.bounds)!==JSON.stringify(e.bounds)&&this.setBounds(t.bounds),t.min!==e.min&&i.setDataMin(t.min),t.max!==e.max&&i.setDataMin(t.max),JSON.stringify(t.options)!==JSON.stringify(e.options)&&i.configure(t.options),JSON.stringify(t.data)!==JSON.stringify(e.data)&&this.setWGS84Data(t.min,t.max,t.data),this.material=new Cesium.ImageMaterialProperty({image:i._renderer.canvas}),this.layerUrl=i.getDataURL(),this.appearance=new Cesium.MaterialAppearance({material:new Cesium.Material({fabric:{type:"Image",uniforms:{image:this.layerUrl}}})})}},deep:!0}},methods:{createCesiumObject:function(){var t=this.Cesium,e=this.bounds,i=this.options,n=this.min,o=this.max,a=this.data,s=this.defaultOptions;this._WMP=new t.WebMercatorProjection,this._id=this.getID(),i.gradient=i.gradient?i.gradient:s.gradient,i.maxOpacity=i.maxOpacity?i.maxOpacity:s.maxOpacity,i.minOpacity=i.minOpacity?i.minOpacity:s.minOpacity,i.blur=i.blur?i.blur:s.blur,this.setBounds(e),this._container=this.getContainer(this.width,this.height,this._id),this.options.container=this._container,this._heatmapInstance=r.create(this.options),this._container.children[0].setAttribute("id",this._id+"-hm"),this.setWGS84Data(n,o,a)&&(this.material=new t.ImageMaterialProperty({image:this._heatmapInstance._renderer.canvas}),this.layerUrl=this._heatmapInstance.getDataURL(),this.appearance=new t.MaterialAppearance({material:new t.Material({fabric:{type:"Image",uniforms:{image:this.layerUrl}}})}))},setBounds:function(t){var e=this.options,i=this.defaultOptions;this._mBounds=this.wgs84ToMercatorBounds(t),this.setWidthAndHeight(this._mBounds),e.radius=Math.round(e.radius?e.radius:this.width>this.height?this.width/i.radiusFactor:this.height/i.radiusFactor),this._spacing=e.radius*i.spacingFactor,this._xoffset=this._mBounds.west,this._yoffset=this._mBounds.south,this.width=Math.round(this.width+2*this._spacing),this.height=Math.round(this.height+2*this._spacing),this._mBounds.west-=this._spacing*this._factor,this._mBounds.east+=this._spacing*this._factor,this._mBounds.south-=this._spacing*this._factor,this._mBounds.north+=this._spacing*this._factor,this._bounds=this.mercatorToWgs84Bounds(this._mBounds),this.coordinates=this._bounds},mount:function(){},unload:function(){document.body.removeChild(this._container),this.$refs[this.type]&&this.$refs[this.type].unload()},setWidthAndHeight:function(t){var e=this.defaultOptions;this.width=t.east>0&&t.west<0?t.east+Math.abs(t.west):Math.abs(t.east-t.west),this.height=t.north>0&&t.south<0?t.north+Math.abs(t.south):Math.abs(t.north-t.south),this._factor=1,this.width>this.height&&this.width>e.maxCanvasSize?(this._factor=this.width/e.maxCanvasSize,this.height/this._factor<e.minCanvasSize&&(this._factor=this.height/e.minCanvasSize)):this.height>this.width&&this.height>e.maxCanvasSize?(this._factor=this.height/e.maxCanvasSize,this.width/this._factor<e.minCanvasSize&&(this._factor=this.width/e.minCanvasSize)):this.width<this.height&&this.width<e.minCanvasSize?(this._factor=this.width/e.minCanvasSize,this.height/this._factor>e.maxCanvasSize&&(this._factor=this.height/e.maxCanvasSize)):this.height<this.width&&this.height<e.minCanvasSize&&(this._factor=this.height/e.minCanvasSize,this.width/this._factor>e.maxCanvasSize&&(this._factor=this.width/e.maxCanvasSize)),this.width=this.width/this._factor,this.height=this.height/this._factor},getContainer:function(t,e,i){var n=document.createElement("div");return i&&n.setAttribute("id",i),n.setAttribute("style","width: "+t+"px; height: "+e+"px; margin: 0px; display: none;"),document.body.appendChild(n),n},getID:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<(t||8);n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},wgs84ToMercator:function(t){var e=this._WMP.project(Cesium.Cartographic.fromDegrees(t.x,t.y));return{x:e.x,y:e.y}},wgs84ToMercatorBounds:function(t){var e=this._WMP.project(Cesium.Cartographic.fromDegrees(t.west,t.south)),i=this._WMP.project(Cesium.Cartographic.fromDegrees(t.east,t.north));return{north:i.y,east:i.x,south:e.y,west:e.x}},mercatorToWgs84:function(t){var e=this._WMP.unproject(new Cesium.Cartesian3(t.x,t.y));return{x:e.longitude,y:e.latitude}},mercatorToWgs84Bounds:function(t){var e=this._WMP.unproject(new Cesium.Cartesian3(t.west,t.south)),i=this._WMP.unproject(new Cesium.Cartesian3(t.east,t.north));return{north:this.rad2deg(i.latitude),east:this.rad2deg(i.longitude),south:this.rad2deg(e.latitude),west:this.rad2deg(e.longitude)}},deg2rad:function(t){var e=t*(Math.PI/180);return e},rad2deg:function(t){var e=t/(Math.PI/180);return e},setData:function(t,e,i){return!!(i&&i.length>0&&null!==t&&!1!==t&&null!==e&&!1!==e)&&(this._heatmapInstance.setData({min:t,max:e,data:i}),!0)},setWGS84Data:function(t,e,i){if(i&&i.length>0&&null!==t&&!1!==t&&null!==e&&!1!==e){for(var n=[],r=0;r<i.length;r++){var o=i[r],a=this.wgs84PointToHeatmapPoint(o);(o.value||0===o.value)&&(a.value=o.value),n.push(a)}return this.setData(t,e,n)}return!1},wgs84PointToHeatmapPoint:function(t){return this.mercatorPointToHeatmapPoint(this.wgs84ToMercator(t))},mercatorPointToHeatmapPoint:function(t){var e={};return e.x=Math.round((t.x-this._xoffset)/this._factor+this._spacing),e.y=Math.round((t.y-this._yoffset)/this._factor+this._spacing),e.y=this.height-e.y,e},getServices:function(){var t=this;return(0,o.default)(a.default.methods.getServices.call(this),{get heatMap(){return t.heatMap},get heatMapContainer(){return t}})}},stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{heatMapInstance:{enumerable:!0,get:function(){return t.$services&&t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(124)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"cesium-windmap",data:function(){return{}},mixins:[r.default],props:{data:Object,particleSystemOptions:{type:Object,default:function(){return{particlesTextureSize:128,maxParticles:16384,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:4,lineWidth:4}}}},watch:{data:function(t){this.reload()},particleSystemOptions:{handler:function(t){this.windMap.particleSystem.applyParticleSystemOptions(t)},deep:!0}},methods:{createCesiumObject:function(){var t=this.viewer,e=this.particleSystemOptions;if(!this.isEmptyObj(this.data)){var i=new o.default(t,this.data,e);return i}return null},mount:function(){},unload:function(){this.isEmptyObj(this.windMap)||this.windMap.destroy()}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;Object.defineProperties(this,{windMap:{enumerable:!0,get:function(){return t.$services&&t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s={mount:function(){var t=this.viewer,e=this.primitiveCollection;t&&t.scene.primitives.add(e)},unload:function(){var t=this.viewer,e=this.primitiveCollection;t&&t.scene.primitives.remove(e)},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get primitiveCollection(){return t.primitiveCollection}})}};e.default={mixins:[r.default],props:{},computed:{},watch:{},methods:s,stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{primitiveCollection:{enumerable:!0,get:function(){return t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s={mount:function(){},unload:function(){var t=this.primitive,e=this.primitiveCollection;e.remove(t)},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get primitive(){return t.primitive}})}};e.default={mixins:[r.default],props:{},computed:{},watch:{},methods:s,stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;Object.defineProperties(this,{primitive:{enumerable:!0,get:function(){return t.cesiumObject}},primitiveCollection:{enumerable:!0,get:function(){return t.$services&&t.$services.primitiveCollection}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s={createCesiumObject:function(){this.Cesium=this.$parent.Cesium,this.viewer=this.$parent.viewer;var t=this.Cesium,e=this.viewer;this.outlineColorLabel=t.Color.fromCssColorString("rgb(0,0,255)"),this.colorPoint=t.Color.fromCssColorString("rgb(255,229,0)"),this.materialPolygon=t.Color.fromCssColorString("rgba(255,165,0,0.25)"),this.disableDepthTestDistance=Number.POSITIVE_INFINITY,this.pixelOffset=new t.Cartesian2(10,-10);var i=new t.ScreenSpaceEventHandler(e.canvas);i.setInputAction(this.LEFT_CLICK,t.ScreenSpaceEventType.LEFT_CLICK),i.setInputAction(this.MOUSE_MOVE,t.ScreenSpaceEventType.MOUSE_MOVE),i.setInputAction(this.RIGHT_CLICK,t.ScreenSpaceEventType.RIGHT_CLICK)},mount:function(){},unload:function(){},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get primitiveCollection(){return t.primitiveCollection}})}};e.default={mixins:[r.default],props:{},computed:{},watch:{},methods:s,stubVNode:{attrs:function(){return{class:this.$options.name}}},created:function(){var t=this;Object.defineProperties(this,{primitiveCollection:{enumerable:!0,get:function(){return t.cesiumObject}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=null,{getFullscreenQuad:function(){return Cesium.defined(i)||(i=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})),i},createTexture:function(t,e){if(Cesium.defined(e)){var i={};i.arrayBufferView=e,t.source=i}return new Cesium.Texture(t)},createFramebuffer:function(t,e,i){return new Cesium.Framebuffer({context:t,colorTextures:[e],depthTexture:i})},createRawRenderState:function(t){var e={viewport:t.viewport,depthTest:t.depthTest,depthMask:t.depthMask,blending:t.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,e)},viewRectangleToLonLatRange:function(t){var e,i,n={},r=Cesium.Math.mod(t.west,Cesium.Math.TWO_PI),o=Cesium.Math.mod(t.east,Cesium.Math.TWO_PI),a=t.width;a>Cesium.Math.THREE_PI_OVER_TWO?(e=0,i=Cesium.Math.TWO_PI):o-r<a?(e=r,i=r+a):(e=r,i=o),n.lon={min:Cesium.Math.toDegrees(e),max:Cesium.Math.toDegrees(i)};var s=t.south,c=t.north,u=t.height,l=u>Cesium.Math.PI/12?u/2:0,h=Cesium.Math.clampToLatitudeRange(s-l),f=Cesium.Math.clampToLatitudeRange(c+l);return h<-Cesium.Math.PI_OVER_THREE&&(h=-Cesium.Math.PI_OVER_TWO),f>Cesium.Math.PI_OVER_THREE&&(f=Cesium.Math.PI_OVER_TWO),n.lat={min:Cesium.Math.toDegrees(h),max:Cesium.Math.toDegrees(f)},n}});e.default=n,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"viewer",staticStyle:{width:"100%",height:"100%"},attrs:{id:"cesiumContainer"}},[this._t("default")],2)},r=[]},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticStyle:{display:"none !important"}},[i("polyline-collection",t._l(t.polylines,function(t,e){return i("polyline-primitive",{key:e,attrs:{positions:t.positions,material:t.materialLine,width:2}})})),t._v(" "),i("point-collection",[t._l(t.polylines,function(e,n){return[t._l(e.positions,function(e,r){return[i("point-primitive",{key:"point"+n+"position"+r,attrs:{position:e,color:t.colorPoint,pixelSize:8}})]})]})],2),t._v(" "),i("label-collection",[t._l(t.polylines,function(e,n){return[t._l(e.positions,function(r,o){return[0!==e.distances[o]?i("label-primitive",{key:"label"+n+"position"+o,attrs:{position:r,font:t.font,outlineColor:t.outlineColorLabel,text:"距离:"+(e.distances[o]>1e3?(e.distances[o]/1e3).toFixed(2)+"km":e.distances[o].toFixed(2)+"m"),showBackground:"",disableDepthTestDistance:t.disableDepthTestDistance,pixelOffset:t.pixelOffset}}):t._e()]})]})],2)],1)},r=[]},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticStyle:{display:"none"}},[i("polyline-collection",t._l(t.polylines,function(t,e){return i("polyline-primitive",{key:e,attrs:{positions:t.positions,material:t.materialLine,width:2,loop:!0}})})),t._v(" "),i("point-collection",[t._l(t.polylines,function(e,n){return[t._l(e.positions,function(e,r){return[i("point-primitive",{key:"point"+n+"position"+r,attrs:{position:e,color:t.colorPoint,pixelSize:8}})]})]})],2),t._v(" "),i("label-collection",[t._l(t.polylines,function(e,n){return[i("label-primitive",{key:"label"+n,attrs:{position:e.positions[e.positions.length-1],pixelOffset:t.pixelOffset,text:"面积:"+(e.area>1e6?(e.area/1e6).toFixed(2)+"km²":e.area.toFixed(2)+"㎡"),font:t.font,outlineColor:t.outlineColorLabel,showBackground:"",disableDepthTestDistance:t.disableDepthTestDistance}})]})],2),t._v(" "),t._l(t.polylines,function(e,n){return i("entity",{key:n,ref:"entity"+n,refInFor:!0,attrs:{polygon:e.polygon},on:{"update:polygon":function(i){t.$set(e,"polygon",i)}}},[i("polygon-graphics",{attrs:{hierarchy:e.positions,perPositionHeight:t.perPositionHeight,material:t.materialPolygon}})],1)})],2)},r=[]},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticStyle:{display:"none !important"}},[i("polyline-collection",t._l(t.polylines,function(t,e){return i("polyline-primitive",{key:e,attrs:{positions:t.positions,material:t.materialLine,width:2,loop:!0}})})),t._v(" "),i("point-collection",[t._l(t.polylines,function(e,n){return[t._l(e.positions,function(e,r){return[i("point-primitive",{key:"point"+n+"position"+r,attrs:{position:e,color:t.colorPoint,pixelSize:8}})]})]})],2),t._v(" "),i("label-collection",t._l(t.labels,function(e,n){return i("label-primitive",{key:"label"+n,attrs:{position:e.position,text:e.text,font:t.font,outlineColor:t.outlineColorLabel,disableDepthTestDistance:t.disableDepthTestDistance}})}))],1)},r=[]},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticStyle:{display:"none !important"}},[1===t.type?i("entity",{ref:"entity",attrs:{show:t.show}},[i("rectangle-graphics",{attrs:{coordinates:t.coordinates,material:t.material}})],1):0===t.type?i("ground-primitive",{ref:"primitive",attrs:{show:t.show,appearance:t.appearance}},[i("geometry-instance",{attrs:{geometry:t.geometry},on:{"update:geometry":function(e){t.geometry=e}}},[i("rectangle-geometry",{attrs:{rectangle:t.coordinates}})],1)],1):2===t.type?i("imagery-layer",{ref:"layer",attrs:{show:t.show}},[i("singletile-imagery-provider",{attrs:{url:t.layerUrl,rectangle:t.coordinates}})],1):t._e()],1)},r=[]},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(t){return"function"==typeof t},t.checkType=function(t){return Object.prototype.toString.call(t).slice(8,-1)},t.toKebabCase=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^-/,"")},t.getDocumentByClassName=function(t,e){var i=void 0,n={};try{Array.prototype.slice.call(t).forEach(function(t){if(t.className===e)throw i=t,n})}catch(t){if(t!==n)throw t}return i}})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(3)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={inject:{$services:"services"},provide:function(){return t={},e="services",i=this.getServices(),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t;var t,e,i},methods:{getServices:function(){return(0,r.default)({},this.$services||{})},isEmptyObj:function(t){for(var e in t)return!1;return!0},processArray:function(t){for(var e=t.length-1;e>=0;e--)"object"===o(t[e])&&this.removeNullItem(t[e],t,e);return 0===t.length},proccessObject:function(t){for(var e in t)null===t[e]||void 0===t[e]?delete t[e]:"object"===o(t[e])&&this.isEmptyObj(t[e])&&delete t[e]},removeNullItem:function(t,e,i){var n={}.toString.call(t);"[object Array]"===n?this.processArray(t):"[object Object]"===n&&this.proccessObject(t)}},beforeCreate:function(){for(var t=this.$parent;t&&(null==t._provided||null==t._provided.services);)t=t.$parent;null!=t&&null!=t._provided.services||delete this.$options.inject.$services}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}return i(t,[{key:"createCommand",value:function(t){switch(this.commandType){case"Draw":var e=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:t,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:e,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE});case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}},{key:"setGeometry",value:function(t,e){this.geometry=e;var i=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}},{key:"update",value:function(t){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(t.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&t.commandList.push(this.clearCommand),t.commandList.push(this.commandToExecute))}},{key:"isDestroyed",value:function(){return!1}},{key:"destroy",value:function(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}]),t}();e.default=n,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(67),i(68),i(73),i(77),i(78),i(79),i(80),i(81),i(82),i(83),i(84),i(85),i(86),i(87),i(88),i(89),i(90),i(91),i(92),i(93),i(94),i(95),i(96),i(97),i(98),i(99),i(100),i(101),i(102),i(103),i(104),i(105),i(106),i(107),i(109),i(110),i(111),i(112),i(113),i(114),i(115),i(116),i(117),i(118),i(120),i(121),i(123)],void 0===(o="function"==typeof(n=function(t,e,i,n,r,o,a,s,c,u,l,h,f,d,p,m,y,g,v,b,_,x,w,E,C,O,S,I,T,P,R,L,M,N,j,D,A,F,k,G,B,z,U,V,Y,X,W,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CesiumWindMap=t.CesiumHeatMap=t.MeasureHeight=t.MeasureArea=t.MeasureDistance=t.Label=t.LabelCollection=t.Polyline=t.PointPrimitive=t.PolylineCollection=t.PointCollection=t.Cesium3DTileset=t.Model=t.RectangleGeometry=t.GeometryInstance=t.GroundPrimitive=t.Primitive=t.WallGraphics=t.RectangleGraphics=t.PolylineVolumeGraphics=t.PolylineGraphics=t.PolygonGraphics=t.PointGraphics=t.PlaneGraphics=t.PathGraphics=t.ModelGraphics=t.LabelGraphics=t.EllipsoidGraphics=t.EllipseGraphics=t.CylinderGraphics=t.CorridorGraphics=t.BoxGraphics=t.BillboardGraphics=t.Entity=t.CesiumTerrainProvider=t.SuperMapImageryProvider=t.WebMapTileServiceImageryProvider=t.WebMapServiceImageryProvider=t.UrlTemplateImageryProvider=t.SingleTileImageryProvider=t.OpenStreetMapImageryProvider=t.MapboxImageryProvider=t.BingMapsImageryProvider=t.ArcGisMapServerImageryProvider=t.ImageryLayer=t.CesiumViewer=void 0;var H=Ut(i),$=Ut(n),K=Ut(r),Z=Ut(o),J=Ut(a),Q=Ut(s),tt=Ut(c),et=Ut(u),nt=Ut(l),it=Ut(h),ot=Ut(f),st=Ut(d),at=Ut(p),ut=Ut(m),ct=Ut(y),lt=Ut(g),ht=Ut(v),pt=Ut(b),ft=Ut(_),gt=Ut(x),mt=Ut(w),yt=Ut(E),vt=Ut(C),_t=Ut(O),bt=Ut(S),xt=Ut(I),wt=Ut(T),Et=Ut(P),Ct=Ut(R),Ot=Ut(L),St=Ut(M),It=Ut(N),Tt=Ut(j),Pt=Ut(D),Rt=Ut(A),Lt=Ut(F),Mt=Ut(k),Nt=Ut(G),jt=Ut(B),Dt=Ut(z),At=Ut(U),Ft=Ut(V),kt=Ut(Y),Gt=Ut(X),Bt=Ut(W),zt=Ut(q);function Ut(t){return t&&t.__esModule?t:{default:t}}t.default={install:function(t,e){var i=e?e.cesiumPath:"https://unpkg.com/cesium/Build/Cesium/Cesium.js",n=e?e.accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiMGRjM2QxYi04ODM2LTQzMDEtOGJmOS1mNDlkY2Q2NjE4MjciLCJpZCI6MjU5LCJpYXQiOjE1MjU5NjYyMDd9.xW9loNLo68KE3ReAHd-Lp73M8qJKhI9vA0wYL-qJX_I";t.prototype._Cesium=function(){return{cesiumPath:i,accessToken:n}},t.component("cesium-viewer",H.default),t.component($.default.name,$.default),t.component(K.default.name,K.default),t.component(Z.default.name,Z.default),t.component(J.default.name,J.default),t.component(Q.default.name,Q.default),t.component(tt.default.name,tt.default),t.component(et.default.name,et.default),t.component(nt.default.name,nt.default),t.component(it.default.name,it.default),t.component(ot.default.name,ot.default),t.component(st.default.name,st.default),t.component(at.default.name,at.default),t.component(ut.default.name,ut.default),t.component(ct.default.name,ct.default),t.component(lt.default.name,lt.default),t.component(ht.default.name,ht.default),t.component(pt.default.name,pt.default),t.component(ft.default.name,ft.default),t.component(gt.default.name,gt.default),t.component(mt.default.name,mt.default),t.component(yt.default.name,yt.default),t.component(vt.default.name,vt.default),t.component(_t.default.name,_t.default),t.component(bt.default.name,bt.default),t.component(xt.default.name,xt.default),t.component(wt.default.name,wt.default),t.component(Et.default.name,Et.default),t.component(Ct.default.name,Ct.default),t.component(Ot.default.name,Ot.default),t.component(Dt.default.name,Dt.default),t.component(Rt.default.name,Rt.default),t.component(Nt.default.name,Nt.default),t.component(Lt.default.name,Lt.default),t.component(jt.default.name,jt.default),t.component(Pt.default.name,Pt.default),t.component(Mt.default.name,Mt.default),t.component("model-primitive",At.default),t.component(St.default.name,St.default),t.component(It.default.name,It.default),t.component(Tt.default.name,Tt.default),t.component("measure-distance",Ft.default),t.component("measure-area",kt.default),t.component("measure-height",Gt.default),t.component(Bt.default.name,Bt.default),t.component(zt.default.name,zt.default)},version:e.version},t.CesiumViewer=H.default,t.ImageryLayer=$.default,t.ArcGisMapServerImageryProvider=K.default,t.BingMapsImageryProvider=Z.default,t.MapboxImageryProvider=J.default,t.OpenStreetMapImageryProvider=Q.default,t.SingleTileImageryProvider=tt.default,t.UrlTemplateImageryProvider=et.default,t.WebMapServiceImageryProvider=nt.default,t.WebMapTileServiceImageryProvider=it.default,t.SuperMapImageryProvider=ot.default,t.CesiumTerrainProvider=st.default,t.Entity=at.default,t.BillboardGraphics=ut.default,t.BoxGraphics=ct.default,t.CorridorGraphics=lt.default,t.CylinderGraphics=ht.default,t.EllipseGraphics=pt.default,t.EllipsoidGraphics=ft.default,t.LabelGraphics=gt.default,t.ModelGraphics=mt.default,t.PathGraphics=yt.default,t.PlaneGraphics=vt.default,t.PointGraphics=_t.default,t.PolygonGraphics=bt.default,t.PolylineGraphics=xt.default,t.PolylineVolumeGraphics=wt.default,t.RectangleGraphics=Et.default,t.WallGraphics=Ct.default,t.Primitive=Ot.default,t.GroundPrimitive=St.default,t.GeometryInstance=It.default,t.RectangleGeometry=Tt.default,t.Model=At.default,t.Cesium3DTileset=Dt.default,t.PointCollection=Pt.default,t.PolylineCollection=Rt.default,t.PointPrimitive=Mt.default,t.Polyline=Nt.default,t.LabelCollection=Lt.default,t.Label=jt.default,t.MeasureDistance=Ft.default,t.MeasureArea=kt.default,t.MeasureHeight=Gt.default,t.CesiumHeatMap=Bt.default,t.CesiumWindMap=zt.default})?n.apply(e,r):n)||(t.exports=o)},function(t){t.exports={name:"vue-cesium",version:"0.0.20",description:"Cesium components for Vue 2.x that can help you load Cesium built package or other third-party packages which are built on Cesium.",main:"index.js",scripts:{"build:docs":"cross-env NODE_ENV=production webpack --config ./build/webpack.docs.config.js --mode production",build:"cross-env NODE_ENV=production webpack --config ./build/webpack.prod.config.js --mode production",dev:"cross-env NODE_ENV=development webpack-dev-server --content-base docs --config ./build/webpack.docs.config.js --hot --inline --mode development",deploy:"npm run build && npm run build:docs"},keywords:["Vue","Cesium","SuperMap","WebGL"],author:"zouyaoji <370681295@qq.com> (https://github.com/zouyaoji)",license:"MIT",repository:{type:"git",url:"git+https://github.com/zouyaoji/vue-cesium.git"},bugs:{url:"https://github.com/zouyaoji/vue-cesium/issues"},homepage:"https://zouyaoji.top/vue-cesium",_npmVersion:"5.6.0",_nodeVersion:"8.9.6",_npmUser:{name:"zouyaoji",email:"370681295@qq.com"},maintainers:["zouyaoji <370681295@qq.com>"],devDependencies:{"babel-core":"^6.26.3","babel-eslint":"^10.0.1","babel-loader":"^7.1.5","babel-plugin-add-module-exports":"^1.0.0","babel-plugin-component":"^1.1.1","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-plugin-transform-es2015-modules-umd":"^6.24.1","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^1.0.0","css-loader":"^1.0.1","debounce-promise":"^3.1.0",eslint:"^5.9.0","eslint-config-standard":"^12.0.0","eslint-loader":"^2.1.1","eslint-plugin-html":"^4.0.6","eslint-plugin-import":"^2.14.0","eslint-plugin-node":"^8.0.0","eslint-plugin-promise":"^4.0.1","eslint-plugin-standard":"^4.0.0","html-webpack-plugin":"^3.2.0","inline-manifest-webpack-plugin":"^4.0.2","material-design-icons":"^3.0.1","merge-descriptors":"^1.0.1",prismjs:"^1.15.0",pug:"^2.0.3",rxjs:"^6.3.3","style-loader":"^0.23.1",stylus:"^0.54.5","stylus-loader":"^3.0.2","url-loader":"^1.1.2",vue:"^2.5.17","vue-loader":"^14.2.3","vue-markdown-loader":"^2.4.1","vue-material":"^0.8.1","vue-router":"^3.0.1","vue-slider-component":"^3.0.30","vue-template-compiler":"^2.5.17",webpack:"^4.26.0","webpack-cli":"^3.1.2","webpack-dev-server":"^3.1.10"},peerDependencies:{vue:"^2.1.8"},dependencies:{"babel-preset-stage-3":"^6.24.1","copy-webpack-plugin":"^5.0.2","cross-env":"^5.2.0","heatmap.js":"^2.0.5","markdown-it":"^8.4.2",netcdfjs:"^0.7.0"}}},function(t,e,i){"use strict";i.r(e);var n=i(8),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(58),s=i(0),c=Object(s.a)(r.a,a.a,a.b,!1,null,null,null);e.default=c.exports},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";t.exports=function(t,e,i){if(!t)throw new TypeError("argument dest is required");if(!e)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(e).forEach(function(r){if(i||!n.call(t,r)){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o)}}),t};var n=Object.prototype.hasOwnProperty},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a=r>=0?arguments[r]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return(n?"/":"")+(e=i(o(e.split("/"),function(t){return!!t}),!n).join("/"))||"."},e.normalize=function(t){var n=e.isAbsolute(t),r="/"===a(t,-1);return(t=i(o(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),a=Math.min(r.length,o.length),s=a,c=0;c<a;c++)if(r[c]!==o[c]){s=c;break}var u=[];for(c=s;c<r.length;c++)u.push("..");return(u=u.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=r(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return r(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(72))},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";i.r(e);var n=i(9),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){var n,r,o;r=[e,i(64)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i)&&n.__esModule?n:{default:n},o=function t(e){return e.abstract||e.$el===e.$children[0].$el?t(e.$parent):e},a={load:function(){var t=o(this.$parent),e=this.Cesium=t.Cesium,i=this.viewer=t.viewer;this.originInstance=this.createCesiumObject(),this.mount(),this.$emit("ready",{Cesium:e,viewer:i,cesiumObject:this.cesiumObject})},createCesiumObject:function(){throw new Error("Not implemented method")},mount:function(){throw new Error("Not implemented method")},reload:function(){var t=this;this&&this.Cesium&&this.$nextTick(function(){t.unload(),t.$nextTick(t.load)})},refresh:function(){throw new Error("Not implemented method")},getServices:function(){return r.default.methods.getServices.call(this)}};e.default={VM_PROP:"vm",mixins:[r.default],props:{},methods:a,mounted:function(){var t=o(this.$parent),e=t.viewer,i=this.load;e?i():t.$on("ready",i)},created:function(){var t=this;Object.defineProperties(this,{cesiumObject:{enumerable:!0,get:function(){return t.originInstance}}})},destroyed:function(){this.unload()}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(76)],void 0===(o="function"==typeof(n=function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={render:function(t){var e=this.$options.stubVNode||{};if(e.empty){var n=t();return"string"==typeof e.empty?n.text=e.empty:"function"==typeof e.empty&&(n.text=e.empty.call(this)),n}var r=void 0;r=!1===e.slots?void 0:(0,i.extractChildren)(this.$slots,e.slots);var o="function"==typeof e.attrs?e.attrs.call(this):e.attrs,a={attrs:o,style:{display:"none !important"}};return t(e.tag||"i",a,r)}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWatchers=function(t,e){return t.reduce(function(t,i){return t[i]=e(i),t},{})},t.extractChildren=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(t).reduce(function(i,n){return e.length&&!e.includes(n)||(i=i.concat(t[n])),i},[])}})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";i.r(e);var n=i(10),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(11),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(12),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(13),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(14),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(15),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(16),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(17),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(18),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(19),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(20),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(21),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(22),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(23),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(24),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(25),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(26),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(27),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(28),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(29),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(30),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(31),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(32),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(33),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(34),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(35),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(36),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(37),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(38),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(39),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(40),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){var n,r,o;r=[e,i(2),i(3)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s={mount:function(){var t=this.geometry,e=this.geometryContainer;e&&e.setGeometry(t)},unload:function(){var t=this.geometryContainer;t&&t.setGeometry(void 0)},getServices:function(){var t=this;return(0,o.default)(r.default.methods.getServices.call(this),{get primitive(){return t.primitive}})}};e.default={mixins:[r.default],props:{},computed:{},watch:{},methods:s,stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;Object.defineProperties(this,{geometry:{enumerable:!0,get:function(){return t.cesiumObject}},geometryContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.geometryContainer}}})}},t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";i.r(e);var n=i(41),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(42),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(43),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(44),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(45),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(46),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(47),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(48),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(49),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(59),s=i(0),c=Object(s.a)(r.a,a.a,a.b,!1,null,null,null);e.default=c.exports},function(t,e,i){"use strict";i.r(e);var n=i(50),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(60),s=i(0),c=Object(s.a)(r.a,a.a,a.b,!1,null,null,null);e.default=c.exports},function(t,e,i){var n,r,o;r=[t],void 0===(o="function"==typeof(n=function(t){"use strict";var e={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function i(t){var e,r=0;switch(t.type){case"Polygon":return n(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=n(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)r+=i(t.geometries[e]);return r}}function n(t){var e=0;if(t&&t.length>0){e+=Math.abs(r(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(r(t[i]))}return e}function r(t){var i,n,r,a,s,c,u=0,l=t.length;if(l>2){for(var h=0;h<l;h++)h===l-2?(a=l-2,s=l-1,c=0):h===l-1?(a=l-1,s=0,c=1):(a=h,s=h+1,c=h+2),i=t[a],n=t[s],r=t[c],u+=(o(r[0])-o(i[0]))*Math.sin(o(n[1]));u=u*e.RADIUS*e.RADIUS/2}return u}function o(t){return t*Math.PI/180}t.exports=function(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=i(t.features[e].geometry));return n}return"Feature"===t.type?i(t.geometry):i(t)}})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){"use strict";i.r(e);var n=i(51),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(61),s=i(0),c=Object(s.a)(r.a,a.a,a.b,!1,null,null,null);e.default=c.exports},function(t,e,i){"use strict";i.r(e);var n=i(52),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(62),s=i(0),c=Object(s.a)(r.a,a.a,a.b,!1,null,null,null);e.default=c.exports},function(t,e,i){var n,r,o;o=function(){var t,e={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function(){var t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},i=e.defaultRadius;return t.prototype={_organiseData:function(t,e){var n=t[this._xField],r=t[this._yField],o=this._radi,a=this._data,s=this._max,c=this._min,u=t[this._valueField]||1,l=t.radius||this._cfgRadius||i;a[n]||(a[n]=[],o[n]=[]),a[n][r]?a[n][r]+=u:(a[n][r]=u,o[n][r]=l);var h=a[n][r];return h>s?(e?this.setDataMax(h):this._max=h,!1):h<c?(e?this.setDataMin(h):this._min=h,!1):{x:n,y:r,value:u,radius:l,min:c,max:s}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var n in e)for(var r in e[n])t.push({x:n,y:r,radius:i[n][r],value:e[n][r]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&(0===this._data.length&&(this._min=this._max=i.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]}))}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var n=0;n<i;n++)this._organiseData(e[n],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t}(),n=function(){var t=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),n=i.getContext("2d");i.width=256,i.height=1;var r=n.createLinearGradient(0,0,256,1);for(var o in e)r.addColorStop(o,e[o]);return n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},e=function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),r=t,o=t;if(i.width=i.height=2*t,1==e)n.beginPath(),n.arc(r,o,t,0,2*Math.PI,!1),n.fillStyle="rgba(0,0,0,1)",n.fill();else{var a=n.createRadialGradient(r,o,t*e,r,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=a,n.fillRect(0,0,2*t,2*t)}return i};function i(e){var i=e.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=e.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=e.width||+o.width.replace(/px/,""),this._height=r.height=n.height=e.height||+o.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",i.style.position="relative",i.appendChild(r),this._palette=t(e),this._templates={},this._setStyles(e)}return i.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(function(t){for(var e=[],i=t.min,n=t.max,r=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],c=Object.keys(t[s]),u=c.length;u--;){var l=c[u],h=t[s][l],f=r[s][l];e.push({x:s,y:l,value:h,radius:f})}return{min:i,max:n,data:e}}(t)),this._colorize())},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var i=this._min=t.min,n=this._max=t.max,r=(t=t.data||[]).length,o=1-this._blur;r--;){var a,s=t[r],c=s.x,u=s.y,l=s.radius,h=Math.min(s.value,n),f=c-l,d=u-l,p=this.shadowCtx;this._templates[l]?a=this._templates[l]:this._templates[l]=a=e(l,o);var m=(h-i)/(n-i);p.globalAlpha=m<.01?.01:m,p.drawImage(a,f,d),f<this._renderBoundaries[0]&&(this._renderBoundaries[0]=f),d<this._renderBoundaries[1]&&(this._renderBoundaries[1]=d),f+2*l>this._renderBoundaries[2]&&(this._renderBoundaries[2]=f+2*l),d+2*l>this._renderBoundaries[3]&&(this._renderBoundaries[3]=d+2*l)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,n=this._renderBoundaries[3]-e,r=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,c=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>r&&(i=r-t),e+n>o&&(n=o-e);for(var l=this.shadowCtx.getImageData(t,e,i,n),h=l.data,f=h.length,d=this._palette,p=3;p<f;p+=4){var m,y=h[p],g=4*y;g&&(m=a>0?a:y<s?y<c?c:y:s,h[p-3]=d[g],h[p-2]=d[g+1],h[p-1]=d[g+2],h[p]=u?d[g+3]:m)}l.data=h,this.ctx.putImageData(l,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],i=this._max,n=this._min;return Math.abs(i-n)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},i}(),r=(t=!1,"canvas2d"===e.defaultRenderer&&(t=n),t),o={merge:function(){for(var t={},e=arguments.length,i=0;i<e;i++){var n=arguments[i];for(var r in n)t[r]=n[r]}return t}},a=function(){var t=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var n=this.cStore;n[t]||(n[t]=[]),n[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var n=i[t].length,r=0;r<n;r++)(0,i[t][r])(e)}},t}(),n=function(t){var e=t._renderer,i=t._coordinator,n=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),n.setCoordinator(i)};function a(){var a=this._config=o.merge(e,arguments[0]||{});if(this._coordinator=new t,a.plugin){var s=a.plugin;if(!e.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var c=e.plugins[s];this._renderer=new c.renderer(a),this._store=new c.store(a)}else this._renderer=new r(a),this._store=new i(a);n(this)}return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=o.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},a}();return{create:function(t){return new a(t)},register:function(t,i){e.plugins[t]=i}}},t.exports?t.exports=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e,i){"use strict";i.r(e);var n=i(53),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var a=i(0),s=Object(a.a)(r.a,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){var n,r,o;r=[e,i(125),i(57)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=e,this.scene=this.viewer.scene,this.camera=this.viewer.camera,this.data=i,this.viewerParameters={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0,lonDataRange:new Cesium.Cartesian2,latDataRange:new Cesium.Cartesian2},this.globeBoundingSphere=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),this.updateViewerParameters(),this.particleSystem=new r.default(this.scene.context,i,n,this.viewerParameters),this.addPrimitives(),this.setupEventListeners(),this.imageryLayers=this.viewer.imageryLayers}return s(t,[{key:"addPrimitives",value:function(){this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.getWind),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updateSpeed),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updatePosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingPosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingSpeed),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.segments),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.trails),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.screen)}},{key:"removePrimitives",value:function(){this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.screen),this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.trails),this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.segments),this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.postProcessingSpeed),this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.postProcessingPosition),this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.updatePosition),this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.updateSpeed),this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.getWind)}},{key:"updateViewerParameters",value:function(){var t=this.camera.computeViewRectangle(this.scene.globe.ellipsoid),e=o.default.viewRectangleToLonLatRange(t);this.viewerParameters.lonRange.x=e.lon.min,this.viewerParameters.lonRange.y=e.lon.max,this.viewerParameters.latRange.x=e.lat.min,this.viewerParameters.latRange.y=e.lat.max,this.viewerParameters.lonDataRange.x=this.data.lon.min,this.viewerParameters.lonDataRange.y=this.data.lon.max,this.viewerParameters.latDataRange.x=this.data.lat.min,this.viewerParameters.latDataRange.y=this.data.lat.max;var i=this.camera.getPixelSize(this.globeBoundingSphere,this.scene.drawingBufferWidth,this.scene.drawingBufferHeight);i>0&&(this.viewerParameters.pixelSize=i)}},{key:"moveStartListener",value:function(){this.scene.primitives.show=!1}},{key:"moveEndListener",value:function(){this.updateViewerParameters(),this.particleSystem.applyViewerParameters(this.viewerParameters),this.scene.primitives.show=!0}},{key:"preRenderListener",value:function(){this.resized&&(this.particleSystem.canvasResize(this.scene.context),this.resized=!1,this.addPrimitives(),this.scene.primitives.show=!0)}},{key:"setupEventListeners",value:function(){var t=this;this.camera.moveStart.addEventListener(this.moveStartListener,this),this.camera.moveEnd.addEventListener(this.moveEndListener,this),this.resized=!1,window.addEventListener("resize",function(){t.resized=!0,t.scene.primitives.show=!1,t.scene.primitives.removeAll()}),this.scene.preRender.addEventListener(this.preRenderListener,this)}},{key:"destroy",value:function(){this.removePrimitives(),this.camera.moveStart.removeEventListener(this.moveStartListener,this),this.camera.moveEnd.removeEventListener(this.moveEndListener,this),this.scene.preRender.removeEventListener(this.preRenderListener,this)}}]),t}();e.default=c,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(126),i(132)],void 0===(o="function"==typeof(n=function(e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e,this.data=i,this.particleSystemOptions=n,this.viewerParameters=a,this.particlesComputing=new r.default(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new o.default(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}return s(t,[{key:"canvasResize",value:function(t){var e=this;this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(function(t){e.particlesComputing.windTextures[t].destroy()}),this.particlesRendering.textures.colorTable.destroy(),Object.keys(this.particlesRendering.framebuffers).forEach(function(t){e.particlesRendering.framebuffers[t].destroy()}),this.context=t,this.particlesComputing=new r.default(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new o.default(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}},{key:"clearFramebuffers",value:function(){var t=this,e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(function(i){e.framebuffer=t.particlesRendering.framebuffers[i],e.execute(t.context)})}},{key:"refreshParticles",value:function(t){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),t){var e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;var i=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=i}}},{key:"applyParticleSystemOptions",value:function(t){var e=this,i=!1;this.particleSystemOptions.maxParticles!==t.maxParticles&&(i=!0),Object.keys(t).forEach(function(i){e.particleSystemOptions[i]=t[i]}),this.refreshParticles(i)}},{key:"applyViewerParameters",value:function(t){var e=this;Object.keys(t).forEach(function(i){e.viewerParameters[i]=t[i]}),this.refreshParticles(!1)}}]),t}();e.default=c,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(57),i(65),i(127),i(128),i(129),i(130),i(131)],void 0===(o="function"==typeof(n=function(e,i,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=y(i),l=y(n),h=y(r),f=y(o),d=y(a),p=y(s),m=y(c);function y(t){return t&&t.__esModule?t:{default:t}}var g=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),v=function(){function t(e,i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=i,this.createWindTextures(e,i),this.createParticlesTextures(e,n,r),this.createComputingPrimitives(i,n,r)}return g(t,[{key:"createWindTextures",value:function(t,e){var i={context:t,width:e.dimensions.lon,height:e.dimensions.lat*e.dimensions.lev,pixelFormat:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:u.default.createTexture(i,e.U.array),V:u.default.createTexture(i,e.V.array)}}},{key:"randomizeParticles",value:function(t,e){for(var i=new Float32Array(4*t),n=0;n<t;n++)i[4*n]=Cesium.Math.randomBetween(e.lonRange.x,e.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(e.latRange.x,e.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}},{key:"createParticlesTextures",value:function(t,e,i){var n={context:t,width:e.particlesTextureSize,height:e.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},r=this.randomizeParticles(e.maxParticles,i);this.particlesTextures={particlesWind:u.default.createTexture(n),currentParticlesPosition:u.default.createTexture(n,r),nextParticlesPosition:u.default.createTexture(n,r),currentParticlesSpeed:u.default.createTexture(n),nextParticlesSpeed:u.default.createTexture(n),postProcessingPosition:u.default.createTexture(n,r),postProcessingSpeed:u.default.createTexture(n)}}},{key:"destroyParticlesTextures",value:function(){var t=this;Object.keys(this.particlesTextures).forEach(function(e){t.particlesTextures[e].destroy()})}},{key:"createComputingPrimitives",value:function(t,e,i){var n=new Cesium.Cartesian3(t.dimensions.lon,t.dimensions.lat,t.dimensions.lev),r=new Cesium.Cartesian3(t.lon.min,t.lat.min,t.lev.min),o=new Cesium.Cartesian3(t.lon.max,t.lat.max,t.lev.max),a=new Cesium.Cartesian3((o.x-r.x)/(n.x-1),(o.y-r.y)/(n.y-1),n.z>1?(o.z-r.z)/(n.z-1):1),s=new Cesium.Cartesian2(t.U.min,t.U.max),c=new Cesium.Cartesian2(t.V.min,t.V.max),u=this;this.primitives={getWind:new l.default({commandType:"Compute",uniformMap:{U:function(){return u.windTextures.U},V:function(){return u.windTextures.V},currentParticlesPosition:function(){return u.particlesTextures.currentParticlesPosition},dimension:function(){return n},minimum:function(){return r},maximum:function(){return o},interval:function(){return a}},fragmentShaderSource:new Cesium.ShaderSource({sources:[h.default]}),outputTexture:this.particlesTextures.particlesWind,preExecute:function(){u.primitives.getWind.commandToExecute.outputTexture=u.particlesTextures.particlesWind}}),updateSpeed:new l.default({commandType:"Compute",uniformMap:{currentParticlesSpeed:function(){return u.particlesTextures.currentParticlesSpeed},particlesWind:function(){return u.particlesTextures.particlesWind},uSpeedRange:function(){return s},vSpeedRange:function(){return c},pixelSize:function(){return i.pixelSize},speedFactor:function(){return e.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[f.default]}),outputTexture:this.particlesTextures.nextParticlesSpeed,preExecute:function(){var t;t=u.particlesTextures.currentParticlesSpeed,u.particlesTextures.currentParticlesSpeed=u.particlesTextures.postProcessingSpeed,u.particlesTextures.postProcessingSpeed=t,u.primitives.updateSpeed.commandToExecute.outputTexture=u.particlesTextures.nextParticlesSpeed}}),updatePosition:new l.default({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return u.particlesTextures.currentParticlesPosition},currentParticlesSpeed:function(){return u.particlesTextures.currentParticlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[d.default]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){var t;t=u.particlesTextures.currentParticlesPosition,u.particlesTextures.currentParticlesPosition=u.particlesTextures.postProcessingPosition,u.particlesTextures.postProcessingPosition=t,u.primitives.updatePosition.commandToExecute.outputTexture=u.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new l.default({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return u.particlesTextures.nextParticlesPosition},nextParticlesSpeed:function(){return u.particlesTextures.nextParticlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},lonDataRange:function(){return i.lonDataRange},latDataRange:function(){return i.latDataRange},randomCoef:function(){var t=Math.random();return t},dropRate:function(){return e.dropRate},dropRateBump:function(){return e.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[p.default]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){u.primitives.postProcessingPosition.commandToExecute.outputTexture=u.particlesTextures.postProcessingPosition}}),postProcessingSpeed:new l.default({commandType:"Compute",uniformMap:{postProcessingPosition:function(){return u.particlesTextures.postProcessingPosition},nextParticlesSpeed:function(){return u.particlesTextures.nextParticlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[m.default]}),outputTexture:this.particlesTextures.postProcessingSpeed,preExecute:function(){u.primitives.postProcessingSpeed.commandToExecute.outputTexture=u.particlesTextures.postProcessingSpeed}})}}}]),t}();e.default=v,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind \nuniform sampler2D V; // northward wind\n\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\nvarying vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n    // ensure the range of longitude and latitude\n    lonLatLev.x = mod(lonLatLev.x, 360.0);\n    lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n    vec3 index3D = vec3(0.0);\n    index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n    index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n    index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n    // the st texture coordinate corresponding to (col, row) index\n    // example\n    // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n    // the content of texture will be\n    // t 1.0\n    //    |  3 4 5\n    //    |\n    //    |  0 1 2\n    //   0.0------1.0 s\n\n    vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n    vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n    return normalizedIndex2D;\n}\n\nfloat getWind(sampler2D windTexture, vec3 lonLatLev) {\n    vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n    float result = texture2D(windTexture, normalizedIndex2D).r;\n    return result;\n}\n\nconst mat4 kernelMatrix = mat4(\n    0.0, -1.0, 2.0, -1.0, // first column\n    2.0, 0.0, -5.0, 3.0, // second column\n    0.0, 1.0, 4.0, -3.0, // third column\n    0.0, 0.0, -1.0, 1.0 // fourth column\n);\nfloat oneDimensionInterpolation(float t, float p0, float p1, float p2, float p3) {\n    vec4 tVec4 = vec4(1.0, t, t * t, t * t * t);\n    tVec4 = tVec4 / 2.0;\n    vec4 pVec4 = vec4(p0, p1, p2, p3);\n    return dot((tVec4 * kernelMatrix), pVec4);\n}\n\nfloat calculateB(sampler2D windTexture, float t, float lon, float lat, float lev) {\n    float lon0 = floor(lon) - 1.0 * interval.x;\n    float lon1 = floor(lon);\n    float lon2 = floor(lon) + 1.0 * interval.x;\n    float lon3 = floor(lon) + 2.0 * interval.x;\n\n    float p0 = getWind(windTexture, vec3(lon0, lat, lev));\n    float p1 = getWind(windTexture, vec3(lon1, lat, lev));\n    float p2 = getWind(windTexture, vec3(lon2, lat, lev));\n    float p3 = getWind(windTexture, vec3(lon3, lat, lev));\n\n    return oneDimensionInterpolation(t, p0, p1, p2, p3);\n}\n\nfloat interpolateOneTexture(sampler2D windTexture, vec3 lonLatLev) {\n    float lon = lonLatLev.x;\n    float lat = lonLatLev.y;\n    float lev = lonLatLev.z;\n\n    float lat0 = floor(lat) - 1.0 * interval.y;\n    float lat1 = floor(lat);\n    float lat2 = floor(lat) + 1.0 * interval.y;\n    float lat3 = floor(lat) + 2.0 * interval.y;\n\n    vec2 coef = lonLatLev.xy - floor(lonLatLev.xy);\n    float b0 = calculateB(windTexture, coef.x, lon, lat0, lev);\n    float b1 = calculateB(windTexture, coef.x, lon, lat1, lev);\n    float b2 = calculateB(windTexture, coef.x, lon, lat2, lev);\n    float b3 = calculateB(windTexture, coef.x, lon, lat3, lev);\n\n    return oneDimensionInterpolation(coef.y, b0, b1, b2, b3);\n}\n\nvec3 bicubic(vec3 lonLatLev) {\n    // https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\n    float u = interpolateOneTexture(U, lonLatLev);\n    float v = interpolateOneTexture(V, lonLatLev);\n    float w = 0.0;\n    return vec3(u, v, w);\n}\n\nconst float h = 1.0;\nvec3 rungeKutta4(vec3 lonLatLev) {\n    vec3 p1 = lonLatLev;\n    vec3 k1 = bicubic(p1);\n    \n    vec3 p2 = p1;\n    p2.xy = p2.xy + 0.5 * h * k1.xy;\n    vec3 k2 = bicubic(p2);\n    \n    vec3 p3 = p1;\n    p3.xy = p3.xy + 0.5 * h * k2.xy;\n    vec3 k3 = bicubic(p3);\n    \n    vec3 p4 = p1;\n    p4.xy = p4.xy + h * k3.xy;\n    vec3 k4 = bicubic(p4);\n\n    vec3 rk4 = (k1 + 2.0 * k2 + 2.0 * k3 + k4) / 6.0;\n    return rk4;\n}\n\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n    vec3 windVector = rungeKutta4(lonLatLev);\n    gl_FragColor = vec4(windVector, 0.0);\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\nuniform sampler2D particlesWind;\n\n// use to calculate the relative speed\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nvarying vec2 v_textureCoordinates;\n\nvec4 calcRelativeSpeed(vec3 speed) {\n    vec3 percent = vec3(0.0);\n    percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n    percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n    float normalization = length(percent);\n\n    float minRelativeSpeed = -speedFactor * pixelSize;\n    float maxRelativeSpeed = speedFactor * pixelSize;\n\n    vec3 relativeSpeed = vec3(0.0);\n    relativeSpeed.x = mix(minRelativeSpeed, maxRelativeSpeed, percent.x);\n    relativeSpeed.y = mix(minRelativeSpeed, maxRelativeSpeed, percent.y);\n\n    return vec4(relativeSpeed, normalization);\n}\n\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 currentSpeed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\n    vec3 windVector = texture2D(particlesWind, v_textureCoordinates).rgb;\n    \n    vec4 nextSpeed = calcRelativeSpeed(windVector);\n    gl_FragColor = nextSpeed;\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\n\nvarying vec2 v_textureCoordinates;\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n    // unit conversion: meters -> longitude latitude degrees\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n    // Calculate the length of a degree of latitude and longitude in meters\n    float latitude = radians(lonLatLev.y);\n\n    float term1 = 111132.92;\n    float term2 = 559.82 * cos(2.0 * latitude);\n    float term3 = 1.175 * cos(4.0 * latitude);\n    float term4 = 0.0023 * cos(6.0 * latitude);\n    float latLength = term1 - term2 + term3 - term4;\n\n    float term5 = 111412.84 * cos(latitude);\n    float term6 = 93.5 * cos(3.0 * latitude);\n    float term7 = 0.118 * cos(5.0 * latitude);\n    float longLength = term5 - term6 + term7;\n\n    return vec2(longLength, latLength);\n}\n\nvoid updatePosition(vec3 lonLatLev, vec3 speed) {\n    vec2 lonlatLengthgth = lengthOfLonLat(lonLatLev);\n    float u = speed.x / lonlatLengthgth.x;\n    float v = speed.y / lonlatLengthgth.y;\n    float w = 0.0;\n    vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n    vec3 nextParticle = lonLatLev + windVectorInLonLatLev;\n\n    gl_FragColor = vec4(nextParticle, 0.0);\n}\n\nvoid main() {\n    // texture coordinate must be normalized\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n    vec3 speed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\n\n    updatePosition(lonLatLev, speed);\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D nextParticlesSpeed; // (u, v, w, normalization)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\nuniform vec2 lonDataRange;\nuniform vec2 latDataRange;\n\nuniform float randomCoef; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nvarying vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n    vec2 randomSeed = randomCoef * seed;\n    float temp = dot(randomConstants.xy, randomSeed);\n    temp = fract(sin(temp) * (randomConstants.z + temp));\n    return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n    // ensure the longitude is in [0, 360]\n    float randomLon = mod(rand(seed, lonRange), 360.0);\n    float randomLat = rand(-seed, latRange);\n\n    return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n    return particle.y < -90.0 || particle.y > 90.0 || particle.y < latDataRange.x || particle.y > latDataRange.y || particle.x < lonDataRange.x || particle.x > lonDataRange.y;\n}\n\nvoid main() {\n    vec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\n    vec4 nextSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\n    float particleDropRate = dropRate + dropRateBump * nextSpeed.a;\n\n    vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n    vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n    vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n    float randomNumber = rand(seed2, normalRange);\n\n    if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n        gl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n    } else {\n        gl_FragColor = vec4(nextParticle, 0.0);\n    }\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D postProcessingPosition;\nuniform sampler2D nextParticlesSpeed;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() {\n    vec4 randomParticle = texture2D(postProcessingPosition, v_textureCoordinates);\n    vec4 particleSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\n    \n    if (randomParticle.a > 0.0) {\n        gl_FragColor = vec4(0.0);\n    } else {\n        gl_FragColor = particleSpeed;\n    }\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e,i(57),i(65),i(133),i(134),i(135),i(136),i(137)],void 0===(o="function"==typeof(n=function(e,i,n,r,o,a,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=y(i),l=y(n),h=y(r),f=y(o),d=y(a),p=y(s),m=y(c);function y(t){return t&&t.__esModule?t:{default:t}}var g=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),v=function(){function t(e,i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createRenderingTextures(e,i),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,n,r,o)}return g(t,[{key:"createRenderingTextures",value:function(t,e){var i={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT},r={context:t,width:e.colorTable.colorNum,height:1,pixelFormat:Cesium.PixelFormat.RGB,pixelDatatype:Cesium.PixelDatatype.FLOAT,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium.TextureMagnificationFilter.LINEAR})};this.textures={segmentsColor:u.default.createTexture(i),segmentsDepth:u.default.createTexture(n),currentTrailsColor:u.default.createTexture(i),currentTrailsDepth:u.default.createTexture(n),nextTrailsColor:u.default.createTexture(i),nextTrailsDepth:u.default.createTexture(n),colorTable:u.default.createTexture(r,e.colorTable.array)}}},{key:"createRenderingFramebuffers",value:function(t){this.framebuffers={segments:u.default.createFramebuffer(t,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:u.default.createFramebuffer(t,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:u.default.createFramebuffer(t,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}},{key:"createSegmentsGeometry",value:function(t){for(var e=[],i=0;i<t.particlesTextureSize;i++)for(var n=0;n<t.particlesTextureSize;n++)for(var r=0;r<4;r++)e.push(i/t.particlesTextureSize),e.push(n/t.particlesTextureSize);e=new Float32Array(e);for(var o=[],a=[-1,1],s=[-1,1],c=0;c<t.maxParticles;c++)for(var u=0;u<2;u++)for(var l=0;l<2;l++)o.push(a[u]),o.push(s[l]),o.push(0);o=new Float32Array(o);for(var h=6*t.maxParticles,f=new Uint32Array(h),d=0,p=0,m=0;d<t.maxParticles;d++)f[p++]=m+0,f[p++]=m+1,f[p++]=m+2,f[p++]=m+2,f[p++]=m+1,f[p++]=m+3,m+=4;var y=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:e}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:o})}),indices:f});return y}},{key:"createRenderingPrimitives",value:function(t,e,i,n){var r=this;this.primitives={segments:new l.default({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(e),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},postProcessingSpeed:function(){return n.particlesTextures.postProcessingSpeed},colorTable:function(){return r.textures.colorTable},aspect:function(){return t.drawingBufferWidth/t.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return e.lineWidth},particleHeight:function(){return e.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[h.default]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[f.default]}),rawRenderState:u.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new l.default({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:u.default.getFullscreenQuad(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return r.textures.segmentsColor},segmentsDepthTexture:function(){return r.textures.segmentsDepth},currentTrailsColor:function(){return r.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return e.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[p.default]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[d.default]}),rawRenderState:u.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){var t;t=r.framebuffers.currentTrails,r.framebuffers.currentTrails=r.framebuffers.nextTrails,r.framebuffers.nextTrails=t,r.primitives.trails.commandToExecute.framebuffer=r.framebuffers.nextTrails,r.primitives.trails.clearCommand.framebuffer=r.framebuffers.nextTrails}}),screen:new l.default({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:u.default.getFullscreenQuad(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return r.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[p.default]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[m.default]}),rawRenderState:u.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}]),t}();e.default=v,t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nattribute vec2 st;\n// it is not normal itself, but used to control normal\nattribute vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\nuniform sampler2D postProcessingSpeed;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nvarying float speedNormalization;\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n    // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n    // WGS 84 geometric constants \n    float a = 6378137.0; // Semi-major axis \n    float b = 6356752.3142; // Semi-minor axis \n    float e2 = 6.69437999014e-3; // First eccentricity squared\n\n    float latitude = radians(lonLatLev.y);\n    float longitude = radians(lonLatLev.x);\n\n    float cosLat = cos(latitude);\n    float sinLat = sin(latitude);\n    float cosLon = cos(longitude);\n    float sinLon = sin(longitude);\n\n    float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n    float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n    vec3 cartesian = vec3(0.0);\n    cartesian.x = (N_Phi + h) * cosLat * cosLon;\n    cartesian.y = (N_Phi + h) * cosLat * sinLon;\n    cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n    return cartesian;\n}\n\nvec4 calcProjectedCoord(vec3 lonLatLev) {\n    // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n    // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n    lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n    vec3 particlePosition = convertCoordinate(lonLatLev);\n    vec4 projectedCoord = czm_modelViewProjection * vec4(particlePosition, 1.0);\n    return projectedCoord;\n}\n\nvec4 calcOffset(vec4 currentProjectedCoord, vec4 nextProjectedCoord, float offsetSign) {\n    vec2 aspectVec2 = vec2(aspect, 1.0);\n    vec2 currentXY = (currentProjectedCoord.xy / currentProjectedCoord.w) * aspectVec2;\n    vec2 nextXY = (nextProjectedCoord.xy / nextProjectedCoord.w) * aspectVec2;\n\n    float offsetLength = lineWidth / 2.0;\n    vec2 direction = normalize(nextXY - currentXY);\n    vec2 normalVector = vec2(-direction.y, direction.x);\n    normalVector.x = normalVector.x / aspect;\n    normalVector = offsetLength * normalVector;\n\n    vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n    return offset;\n}\n\nvoid main() {\n    vec2 particleIndex = st;\n    \n    vec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\n    vec4 nextPosition = texture2D(postProcessingPosition, particleIndex);\n    \n    vec4 currentProjectedCoord = vec4(0.0);\n    vec4 nextProjectedCoord = vec4(0.0);\n    if (nextPosition.w > 0.0) {\n      currentProjectedCoord = calcProjectedCoord(currentPosition);\n      nextProjectedCoord = calcProjectedCoord(currentPosition);\n    } else {\n        currentProjectedCoord = calcProjectedCoord(currentPosition);\n      nextProjectedCoord = calcProjectedCoord(nextPosition.xyz);\n    }\n\n    float pointToUse = normal.x; // -1 is currentProjectedCoord and +1 is nextProjectedCoord\n    float offsetSign = normal.y;\n    \n    vec4 offset = pixelSize * calcOffset(currentProjectedCoord, nextProjectedCoord, offsetSign);\n    if (pointToUse < 0.0) {\n        gl_Position = currentProjectedCoord + offset;\n    } else {\n        gl_Position = nextProjectedCoord + offset;\n    }\n  \n    speedNormalization = texture2D(postProcessingSpeed, particleIndex).a;\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D colorTable;\n\nvarying float speedNormalization;\n\nvoid main() {\n    gl_FragColor = texture2D(colorTable, vec2(speedNormalization, 0.0));\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\n    vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\n\n    trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n    float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n    float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n    gl_FragColor = vec4(0.0);\n    if (pointsDepth < globeDepth) {\n      gl_FragColor = gl_FragColor + pointsColor;\n    }\n    if (trailsDepth < globeDepth) {\n      gl_FragColor = gl_FragColor + trailsColor;\n    }\n    gl_FragDepthEXT = min(pointsDepth, trailsDepth);\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nattribute vec3 position;\nattribute vec2 st;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    textureCoordinate = st;\n    gl_Position = vec4(position, 1.0);\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)},function(t,e,i){var n,r,o;r=[e],void 0===(o="function"==typeof(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n    float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n    if (trailsDepth < globeDepth) {\n        gl_FragColor = trailsColor;\n    } else {\n        gl_FragColor = vec4(0.0);\n    }\n}\n",t.exports=e.default})?n.apply(e,r):n)||(t.exports=o)}])},function(t,e,n){"use strict";n.r(e);var r=n(50),o=n(0),c=n(2);function l(t,e,n,r){var script=document.createElement("script"),o="olc_"+Object(c.c)(e);function l(){delete window[o],script.parentNode.removeChild(script)}script.async=!0,script.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+o;var h=setTimeout(function(){l(),n&&n()},1e4);window[o]=function(data){clearTimeout(h),l(),e(data)},document.getElementsByTagName("head")[0].appendChild(script)}var h=n(6),f=n(29),d=n(57),m=n(30),y=n(41),v=function(t){function e(e){var n=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Object(h.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:f.a.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=n,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,l("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,c=this.getProjection(),l=Object(y.c)(c),d=this.hidpi_?2:1,v=e.imageWidth==e.imageHeight?e.imageWidth/d:[e.imageWidth/d,e.imageHeight/d],_=Object(y.b)({extent:l,minZoom:e.zoomMin,maxZoom:n,tileSize:v});this.tileGrid=_;var x=this.culture_,w=this.hidpi_;if(this.tileUrlFunction=Object(r.b)(e.imageUrlSubdomains.map(function(t){var n=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",x);return function(t,e,o){if(t){Object(m.a)(t[0],t[1],-t[2]-1,n);var c=r;return w&&(c+="&dpi=d1&device=mobile"),c.replace("{quadkey}",Object(m.f)(n))}}})),e.imageryProviders){var E=Object(h.getTransformFromProjections)(Object(h.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var n=[],r=t.viewState,c=this.getTileGrid().getTileCoordForCoordAndResolution(r.center,r.resolution)[0];return e.imageryProviders.map(function(e){for(var r=!1,l=e.coverageAreas,i=0,h=l.length;i<h;++i){var f=l[i];if(c>=f.zoomMin&&c<=f.zoomMax){var d=f.bbox,m=[d[1],d[0],d[3],d[2]],y=Object(o.a)(m,E);if(Object(o.F)(y,t.extent)){r=!0;break}}}r&&n.push(e.attribution)}),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),n}.bind(this))}this.setState(f.a.READY)}else this.setState(f.a.ERROR)},e}(d.a),_=n(8),x=n(108),w=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){Object(_.a)(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var n=new XMLHttpRequest;n.addEventListener("load",this.handleInitResponse_.bind(this,t)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r;try{r=JSON.parse(n.responseText)}catch(t){return void this.setState(f.a.ERROR)}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState(f.a.READY)}else this.setState(f.a.ERROR)},e.prototype.handleInitError_=function(t){this.setState(f.a.ERROR)},e.prototype.applyTemplate_=function(data){var t="https://"+data.cdn_url.https+"/"+this.account_+"/api/v1/map/"+data.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)},e}(x.a),E=n(256),C=n(52),O=n(110),S=n(12),I=n(1),T=n(4),P=n(76),R=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions}),this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,this.hidpi_=void 0===n.hidpi||n.hidpi,this.url_=n.url,this.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:C.b,this.params_=n.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==n.ratio?n.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),n=this.hidpi_?n:1;var image=this.image_;if(image&&this.renderedRevision_==this.getRevision()&&image.getResolution()==e&&image.getPixelRatio()==n&&Object(o.g)(image.getExtent(),t))return image;var c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(_.a)(c,this.params_);var l=((t=t.slice())[0]+t[2])/2,h=(t[1]+t[3])/2;if(1!=this.ratio_){var f=this.ratio_*Object(o.E)(t)/2,d=this.ratio_*Object(o.A)(t)/2;t[0]=l-f,t[1]=h-d,t[2]=l+f,t[3]=h+d}var m=e/n,y=Math.ceil(Object(o.E)(t)/m),v=Math.ceil(Object(o.A)(t)/m);t[0]=l-m*y/2,t[2]=l+m*y/2,t[1]=h-m*v/2,t[3]=h+m*v/2,this.imageSize_[0]=y,this.imageSize_[1]=v;var x=this.getRequestUrl_(t,this.imageSize_,n,r,c);return this.image_=new O.a(t,e,n,x,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(I.a)(this.image_,T.a.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,n,r,o){var c=r.getCode().split(":").pop();o.SIZE=e[0]+","+e[1],o.BBOX=t.join(","),o.BBOXSR=c,o.IMAGESR=c,o.DPI=Math.round(90*n);var l=this.url_,h=l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h==l&&Object(S.a)(!1,50),Object(P.a)(h,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(_.a)(this.params_,t),this.image_=null,this.changed()},e}(C.a),L=n(152),M=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state}),this.canvasFunction_=n.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==n.ratio?n.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e);var canvas=this.canvas_;if(canvas&&this.renderedRevision_==this.getRevision()&&canvas.getResolution()==e&&canvas.getPixelRatio()==n&&Object(o.g)(canvas.getExtent(),t))return canvas;t=t.slice(),Object(o.J)(t,this.ratio_);var c=[Object(o.E)(t)/e*n,Object(o.A)(t)/e*n],l=this.canvasFunction_.call(this,t,e,n,c,r);return l&&(canvas=new L.a(t,e,n,l)),this.canvas_=canvas,this.renderedRevision_=this.getRevision(),canvas},e}(C.a);var N=function(t){function e(e){t.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:C.b,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,n,r){e=this.findNearestResolution(e),n=this.hidpi_?n:1;var image=this.image_;if(image&&this.renderedRevision_==this.getRevision()&&image.getResolution()==e&&image.getPixelRatio()==n&&Object(o.g)(image.getExtent(),t))return image;1!=this.ratio_&&(t=t.slice(),Object(o.J)(t,this.ratio_));var c=[Object(o.E)(t)/e*n,Object(o.A)(t)/e*n];if(void 0!==this.url_){var l=this.getUrl(this.url_,this.params_,t,c,r);image=new O.a(t,e,n,l,this.crossOrigin_,this.imageLoadFunction_),Object(I.a)(image,T.a.CHANGE,this.handleImageChange,this)}else image=null;return this.image_=image,this.renderedRevision_=this.getRevision(),image},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){Object(_.a)(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,n,r,c){var l=function(t,e,n,r){var c=Object(o.E)(t),l=Object(o.A)(t),h=e[0],f=e[1],d=.0254/r;return f*c>h*l?c*n/(h*d):l*n/(f*d)}(n,r,this.metersPerUnit_,this.displayDpi_),h=Object(o.x)(n),f={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:l,SETVIEWCENTERX:h[0],SETVIEWCENTERY:h[1]};return Object(_.a)(f,e),Object(P.a)(t,f)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(C.a),j=n(257),D=n(258),A=n(143),F=n(216),k=n(13),G=n(26),B=n(319),z=n(39),U=n(174),V=n(161),Y=n(170),X=n(125),W=n(14),H="beforeoperations",$="afteroperations",K={PIXEL:"pixel",IMAGE:"image"},Z=function(t){function e(e,n,data){t.call(this,e),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=data}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(G.a),J=function(t){function e(e){t.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==e.operationType?e.operationType:K.PIXEL,this.threads_=void 0!==e.threads?e.threads:1,this.renderers_=function(t){for(var e=t.length,n=new Array(e),i=0;i<e;++i)n[i]=et(t[i]);return n}(e.sources);for(var n=0,r=this.renderers_.length;n<r;++n)Object(I.a)(this.renderers_[n],T.a.CHANGE,this.changed,this);this.tileQueue_=new F.a(function(){return 1},this.changed.bind(this));for(var o=this.renderers_.map(function(t){return t.getLayer().getLayerState()}),l={},i=0,h=o.length;i<h;++i)l[Object(c.c)(o[i].layer)]=o[i];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(W.c)(),extent:null,focus:null,index:0,layerStates:l,layerStatesArray:o,pixelRatio:1,pixelToCoordinateTransform:Object(W.c)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==e.operation&&this.setOperation(e.operation,e.lib)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setOperation=function(t,e){this.worker_=new B.Processor({operation:t,imageOps:this.operationType_===K.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,n){var r=Object(_.a)({},this.frameState_);r.viewState=Object(_.a)({},r.viewState);var c=Object(o.x)(t);r.extent=t.slice(),r.focus=c,r.size[0]=Math.round(Object(o.E)(t)/e),r.size[1]=Math.round(Object(o.A)(t)/e),r.time=Date.now(),r.animate=!1;var l=r.viewState;return l.center=c,l.projection=n,l.resolution=e,r},e.prototype.allSourcesReady_=function(){for(var t=!0,i=0,e=this.renderers_.length;i<e;++i)if(this.renderers_[i].getLayer().getSource().getState()!==f.a.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,n,r){if(!this.allSourcesReady_())return null;var c=this.updateFrameState_(t,e,r);if(this.requestedFrameState_=c,this.renderedImageCanvas_){var l=this.renderedImageCanvas_.getResolution(),h=this.renderedImageCanvas_.getExtent();e===l&&Object(o.p)(t,h)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),c.tileQueue.loadMoreTiles(16,16),c.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,n=new Array(e),i=0;i<e;++i){var r=tt(this.renderers_[i],t,t.layerStatesArray[i]);if(!r)return;n[i]=r}var data={};this.dispatchEvent(new Z(H,t,data)),this.worker_.process(n,data,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,output,data){if(!e&&output){var n=t.extent,r=t.viewState.resolution;if(r===this.requestedFrameState_.viewState.resolution&&Object(o.p)(n,this.requestedFrameState_.extent)){var c;if(this.renderedImageCanvas_)c=this.renderedImageCanvas_.getImage().getContext("2d");else{var l=Math.round(Object(o.E)(n)/r),h=Math.round(Object(o.A)(n)/r);c=Object(k.a)(l,h),this.renderedImageCanvas_=new L.a(n,r,1,c.canvas)}c.putImageData(output,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Z($,t,data))}}},e.prototype.getImageInternal=function(){return null},e}(C.a),Q=null;function tt(t,e,n){if(!t.prepareFrame(e,n))return null;var r=e.size[0],o=e.size[1];if(Q){var canvas=Q.canvas;canvas.width!==r||canvas.height!==o?Q=Object(k.a)(r,o):Q.clearRect(0,0,r,o)}else Q=Object(k.a)(r,o);return t.composeFrame(e,n,Q),Q.getImageData(0,0,r,o)}function et(t){var e=t,n=t,r=t,o=null;return"function"==typeof e.getTile?o=function(source){var t=new V.a({source:source});return new X.a(t)}(e):"function"==typeof n.getImage?o=function(source){var t=new U.a({source:source});return new Y.a(t)}(n):r.getType()===z.a.TILE?o=new X.a(r):r.getType()!=z.a.IMAGE&&r.getType()!=z.a.VECTOR||(o=new Y.a(r)),o}var nt=J,it=n(107),ot=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',A.a],st={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},at={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},ut=function(t){function e(e){var i=e.layer.indexOf("-"),n=-1==i?e.layer:e.layer.slice(0,i),r=at[n],o=st[e.layer],c=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;t.call(this,{attributions:ot,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:r.maxZoom,minZoom:null!=e.minZoom?e.minZoom:r.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:c,wrapX:e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(x.a),ct=n(99),lt=n(9),ht=n(31);function pt(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){var o=r.getTileCoordExtent(t,this.tmpExtent_),c=Object(ht.d)(r.getTileSize(t[0]),this.tmpSize);1!=e&&(c=Object(ht.c)(c,e,this.tmpSize));var l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(_.a)(l,this.params_),this.getRequestUrl_(t,c,o,e,n,l)}}var ft=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:pt,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition}),this.params_=n.params||{},this.tmpExtent_=Object(o.j)(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeyForParams_=function(){var i=0,t=[];for(var e in this.params_)t[i++]=e+"-"+this.params_[e];return t.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,n,r,o,c){var l=this.urls;if(l){var h,f=o.getCode().split(":").pop();if(c.SIZE=e[0]+","+e[1],c.BBOX=n.join(","),c.BBOXSR=f,c.IMAGESR=f,c.DPI=Math.round(c.DPI?c.DPI*r:90*r),1==l.length)h=l[0];else h=l[Object(lt.d)(Object(m.e)(t),l.length)];var d=h.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(P.a)(d,c)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){Object(_.a)(this.params_,t),this.setKey(this.getKeyForParams_())},e}(d.a),gt=n(80),mt=n(5),yt=function(t){function e(e,n,text){t.call(this,e,mt.a.LOADED),this.tileSize_=n,this.text_=text,this.canvas_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Object(k.a)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(gt.a),vt=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,n){var r=Object(m.d)(t,e,n);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var o=Object(ht.d)(this.tileGrid.getTileSize(t)),c=[t,e,n],l=this.getTileCoordForTileUrlFunction(c),text=l?this.getTileCoordForTileUrlFunction(l).toString():"",h=new yt(c,o,text);return this.tileCache.set(r,h),h},e}(ct.b),_t=function(t){function e(e){if(t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Object(h.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:f.a.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.tileJSON_=null,e.url)if(e.jsonp)l(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(S.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,n=Object(h.get)("EPSG:4326"),c=this.getProjection();if(void 0!==t.bounds){var l=Object(h.getTransformFromProjections)(n,c);e=Object(o.a)(t.bounds,l)}var d=t.minzoom||0,m=t.maxzoom||22,v=Object(y.b)({extent:Object(y.c)(c),maxZoom:m,minZoom:d});if(this.tileGrid=v,this.tileUrlFunction=Object(r.a)(t.tiles,v),void 0!==t.attribution&&!this.getAttributions()){var _=void 0!==e?e:n.getExtent();this.setAttributions(function(e){return Object(o.F)(_,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(f.a.READY)},e.prototype.handleTileJSONError=function(){this.setState(f.a.ERROR)},e}(d.a),bt=n(259),xt=n(147),wt=function(t){function e(e,n,r,o,c,l){t.call(this,e,n),this.src_=r,this.extent_=o,this.preemptive_=c,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),n=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-n)*this.grid_.length)];if("string"!=typeof r)return null;var code=r.charCodeAt(Math.floor(e*r.length));code>=93&&code--,code>=35&&code--;var data=null;if((code-=32)in this.keys_){var o=this.keys_[code];data=this.data_&&o in this.data_?this.data_[o]:o}return data},e.prototype.forDataAtCoordinate=function(t,e,n,r){this.state==mt.a.IDLE&&!0===r?(Object(I.b)(this,T.a.CHANGE,function(r){e.call(n,this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e.call(n,this.getData(t))}.bind(this),0):e.call(n,this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=mt.a.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=mt.a.EMPTY,this.changed()},e.prototype.loadInternal_=function(){if(this.state==mt.a.IDLE)if(this.state=mt.a.LOADING,this.jsonp_)l(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(n)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(gt.a),Et=function(t){function e(e){if(t.call(this,{projection:Object(h.get)("EPSG:3857"),state:f.a.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=r.d,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)l(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(S.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,n,r){if(this.tileGrid){var o=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,n,null,r)}else!0===r?setTimeout(function(){n(null)},0):n(null)},e.prototype.handleTileJSONError=function(){this.setState(f.a.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,n=Object(h.get)("EPSG:4326"),c=this.getProjection();if(void 0!==t.bounds){var l=Object(h.getTransformFromProjections)(n,c);e=Object(o.a)(t.bounds,l)}var d=t.minzoom||0,m=t.maxzoom||22,v=Object(y.b)({extent:Object(y.c)(c),maxZoom:m,minZoom:d});this.tileGrid=v,this.template_=t.template;var _=t.grids;if(_){if(this.tileUrlFunction_=Object(r.a)(_,v),void 0!==t.attribution){var x=void 0!==e?e:n.getExtent();this.setAttributions(function(e){return Object(o.F)(x,e.extent)?[t.attribution]:null})}this.setState(f.a.READY)}else this.setState(f.a.ERROR)},e.prototype.getTile=function(t,e,n,r,o){var c=Object(m.d)(t,e,n);if(this.tileCache.containsKey(c))return this.tileCache.get(c);var l=[t,e,n],h=this.getTileCoordForTileUrlFunction(l,o),f=this.tileUrlFunction_(h,r,o),d=new wt(l,void 0!==f?mt.a.IDLE:mt.a.EMPTY,void 0!==f?f:"",this.tileGrid.getTileCoordExtent(l),this.preemptive_,this.jsonp_);return this.tileCache.set(c,d),d},e.prototype.useTile=function(t,e,n){var r=Object(m.d)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(ct.b),Ct=n(75),Ot=n(215),St=n(19),It=function(t){function e(n,r,c,l,h,f,d,m,y,v,_,x,w,E,C){if(t.call(this,n,r,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=v,this.tileKeys=[],this.extent=null,this.sourceRevision_=c,this.wrappedTileCoord=f,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],f){var O=this.extent=y.getTileCoordExtent(f),S=y.getResolution(C),P=m.getZForResolution(S),R=C!=n[0],L=0;if(m.forEachTileCoord(O,P,function(t){var e=Object(o.B)(O,m.getTileCoordExtent(t)),n=m.getExtent();if(n&&(e=Object(o.B)(e,n,e)),Object(o.E)(e)/S>=.5&&Object(o.A)(e)/S>=.5){++L;var r=t.toString(),c=v[r];if(!c&&!R){var f=d(t,_,x);c=v[r]=new w(t,null==f?mt.a.EMPTY:mt.a.IDLE,null==f?"":f,l,h),this.sourceTileListenerKeys_.push(Object(I.a)(c,T.a.CHANGE,E))}!c||R&&c.getState()!=mt.a.LOADED||(c.consumers++,this.tileKeys.push(r))}}.bind(this)),R&&L==this.tileKeys.length&&this.finishLoading_(),C<=n[0]&&this.state!=mt.a.LOADED)for(;C>y.getMinZoom();){var M=new e(n,r,c,l,h,f,d,m,y,v,_,x,w,St.c,--C);if(M.state==mt.a.LOADED){this.interimTile=M;break}}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state=mt.a.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var i=0,e=this.tileKeys.length;i<e;++i){var n=this.tileKeys[i],r=this.getTile(n);r.consumers--,0==r.consumers&&(delete this.sourceTiles_[n],r.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(I.e),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(I.e),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=Object(c.c)(t);return e in this.context_||(this.context_[e]=Object(k.a)()),this.context_[e]},e.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},e.prototype.getReplayState=function(t){var e=Object(c.c)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},e.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},e.prototype.getTile=function(t){return this.sourceTiles_[t]},e.prototype.load=function(){var t=0,e={};this.state==mt.a.IDLE&&this.setState(mt.a.LOADING),this.state==mt.a.LOADING&&this.tileKeys.forEach(function(n){var r=this.getTile(n);if(r.state==mt.a.IDLE&&(r.setLoader(this.loader_),r.load()),r.state==mt.a.LOADING){var o=Object(I.a)(r,T.a.CHANGE,function(n){var o=r.getState();if(o==mt.a.LOADED||o==mt.a.ERROR){var l=Object(c.c)(r);o==mt.a.ERROR?e[l]=!0:(--t,delete e[l]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(o),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},e.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;i>=0;--i){var n=this.getTile(this.tileKeys[i]).getState();n!=mt.a.LOADED&&--t,n==mt.a.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(I.e),this.loadListenerKeys_.length=0,this.setState(mt.a.LOADED)):this.setState(e==this.tileKeys.length?mt.a.EMPTY:mt.a.ERROR)},e}(gt.a);function Tt(t,e){var n=Object(Ot.a)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(n)}var Pt=[0,0,4096,4096],Rt=function(t){function e(e,n,r,o,c,l){t.call(this,e,n,l),this.consumers=0,this.extent_=null,this.format_=o,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=c,this.url_=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=mt.a.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getExtent=function(){return this.extent_||Pt},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getReplayGroup=function(t,e){return this.replayGroups_[Object(c.c)(t)+","+e]},e.prototype.load=function(){this.state==mt.a.IDLE&&(this.setState(mt.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},e.prototype.onLoad=function(t,e,n){this.setProjection(e),this.setFeatures(t),this.setExtent(n)},e.prototype.onError=function(){this.setState(mt.a.ERROR)},e.prototype.setExtent=function(t){this.extent_=t},e.prototype.setFeatures=function(t){this.features_=t,this.setState(mt.a.LOADED)},e.prototype.setProjection=function(t){this.projection_=t},e.prototype.setReplayGroup=function(t,e,n){this.replayGroups_[Object(c.c)(t)+","+e]=n},e.prototype.setLoader=function(t){this.loader_=t},e}(gt.a),Lt=function(t){function e(e){var n=e.projection||"EPSG:3857",r=e.extent||Object(y.c)(n),o=e.tileGrid||Object(y.b)({extent:r,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Tt,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:Rt,this.tileGrids_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,n,r,o){var c=Object(m.d)(t,e,n);if(this.tileCache.containsKey(c))return this.tileCache.get(c);var l=[t,e,n],h=this.getTileCoordForTileUrlFunction(l,o),f=new It(l,null!==h?mt.a.IDLE:mt.a.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,h,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(o),this.sourceTiles_,r,o,this.tileClass,this.handleTileChange.bind(this),l[0]);return this.tileCache.set(c,f),f},e.prototype.getTileGridForProjection=function(t){var code=t.getCode(),e=this.tileGrids_[code];if(!e){var n=this.tileGrid;e=this.tileGrids_[code]=Object(y.a)(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0)}return e},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),o=Object(ht.d)(r.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]},e}(xt.a),Mt=(n(11),{KVP:"KVP",REST:"REST"}),Nt=n(122);Nt.a;var jt=function(t){function e(e){var n=void 0!==e.requestEncoding?e.requestEncoding:Mt.KVP,o=e.tileGrid,c=e.urls;void 0===c&&void 0!==e.url&&(c=Object(r.c)(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:r.d,urls:c,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=n,this.setKey(this.getKeyForDimensions_()),c&&c.length>0&&(this.tileUrlFunction=Object(r.b)(c.map(Dt.bind(this))))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Object(r.b)(t.map(Dt.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var i=0,t=[];for(var e in this.dimensions_)t[i++]=e+"-"+this.dimensions_[e];return t.join("/")},e.prototype.updateDimensions=function(t){Object(_.a)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(d.a);function Dt(template){var t=this.requestEncoding_,e={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==Mt.KVP&&Object(_.a)(e,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),template=t==Mt.KVP?Object(P.a)(template,e):template.replace(/\{(\w+?)\}/g,function(t,p){return p.toLowerCase()in e?e[p.toLowerCase()]:t});var n=this.tileGrid,r=this.dimensions_;return function(e,o,c){if(e){var l={TileMatrix:n.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};Object(_.a)(l,r);var h=template;return h=t==Mt.KVP?Object(P.a)(h,l):h.replace(/\{(\w+?)\}/g,function(t,p){return l[p]})}}}var At=n(100),Ft=n(211),kt={DEFAULT:"default",TRUNCATED:"truncated"},Gt=function(t){function e(e,n,r,o,c,l,h){t.call(this,n,r,o,c,l,h),this.zoomifyImage_=null,this.tileSize_=Object(ht.d)(e.getTileSize(n[0]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var image=t.prototype.getImage.call(this);if(this.state==mt.a.LOADED){var e=this.tileSize_;if(image.width==e[0]&&image.height==e[1])return this.zoomifyImage_=image,image;var n=Object(k.a)(e[0],e[1]);return n.drawImage(image,0,0),this.zoomifyImage_=n.canvas,n.canvas}return image},e}(Ft.a),Bt=function(t){function e(e){var n=e||{},c=n.size,l=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:kt.DEFAULT,h=c[0],f=c[1],d=n.extent||[0,-c[1],c[0],0],m=[],y=n.tileSize||At.b,v=y;switch(l){case kt.DEFAULT:for(;h>v||f>v;)m.push([Math.ceil(h/v),Math.ceil(f/v)]),v+=v;break;case kt.TRUNCATED:for(var _=h,x=f;_>v||x>v;)m.push([Math.ceil(_/v),Math.ceil(x/v)]),_>>=1,x>>=1;break;default:Object(S.a)(!1,53)}m.push([1,1]),m.reverse();for(var w=[1],E=[0],i=1,C=m.length;i<C;i++)w.push(1<<i),E.push(m[i-1][0]*m[i-1][1]+E[i-1]);w.reverse();var O=new Nt.a({tileSize:y,extent:d,origin:Object(o.C)(d),resolutions:w}),I=n.url;I&&-1==I.indexOf("{TileGroup}")&&-1==I.indexOf("{tileIndex}")&&(I+="{TileGroup}/{z}-{x}-{y}.jpg");var T=Object(r.c)(I);var P=Object(r.b)(T.map(function(template){return function(t,e,n){if(t){var r=t[0],o=t[1],c=-t[2]-1,l=o+c*m[r][0],h=O.getTileSize(r),f=Array.isArray(h)?h[0]:h,d={z:r,x:o,y:c,tileIndex:l,TileGroup:"TileGroup"+((l+E[r])/f|0)};return template.replace(/\{(\w+?)\}/g,function(t,p){return d[p]})}}})),R=Gt.bind(null,O);t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:R,tileGrid:O,tileUrlFunction:P,transition:n.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d.a);n.d(e,"BingMaps",function(){return v}),n.d(e,"CartoDB",function(){return w}),n.d(e,"Cluster",function(){return E.a}),n.d(e,"Image",function(){return C.a}),n.d(e,"ImageArcGISRest",function(){return R}),n.d(e,"ImageCanvas",function(){return M}),n.d(e,"ImageMapGuide",function(){return N}),n.d(e,"ImageStatic",function(){return j.a}),n.d(e,"ImageWMS",function(){return D.a}),n.d(e,"OSM",function(){return A.b}),n.d(e,"Raster",function(){return nt}),n.d(e,"Source",function(){return it.a}),n.d(e,"Stamen",function(){return ut}),n.d(e,"Tile",function(){return ct.b}),n.d(e,"TileArcGISRest",function(){return ft}),n.d(e,"TileDebug",function(){return vt}),n.d(e,"TileImage",function(){return d.a}),n.d(e,"TileJSON",function(){return _t}),n.d(e,"TileWMS",function(){return bt.a}),n.d(e,"UrlTile",function(){return xt.a}),n.d(e,"UTFGrid",function(){return Et}),n.d(e,"Vector",function(){return Ct.a}),n.d(e,"VectorTile",function(){return Lt}),n.d(e,"WMTS",function(){return jt}),n.d(e,"XYZ",function(){return x.a}),n.d(e,"Zoomify",function(){return Bt})},function(t,e,n){"use strict";n.r(e);var r,o=n(203),c=n(48),l=n(25),h=n(13),f=n(1),d=n(4),m=function(){if(!r){var body=document.body;body.webkitRequestFullscreen?r="webkitfullscreenchange":body.mozRequestFullScreen?r="mozfullscreenchange":body.msRequestFullscreen?r="MSFullscreenChange":body.requestFullscreen&&(r="fullscreenchange")}return r};function y(){var body=document.body;return!!(body.webkitRequestFullscreen||body.mozRequestFullScreen&&document.mozFullScreenEnabled||body.msRequestFullscreen&&document.msFullscreenEnabled||body.requestFullscreen&&document.fullscreenEnabled)}function v(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function _(element){element.requestFullscreen?element.requestFullscreen():element.msRequestFullscreen?element.msRequestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen&&element.webkitRequestFullscreen()}var x=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target}),this.cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var label=void 0!==n.label?n.label:"⤢";this.labelNode_="string"==typeof label?document.createTextNode(label):label;var r=void 0!==n.labelActive?n.labelActive:"×";this.labelActiveNode_="string"==typeof r?document.createTextNode(r):r,this.button_=document.createElement("button");var o=n.tipLabel?n.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,v()),this.button_.setAttribute("type","button"),this.button_.title=o,this.button_.appendChild(this.labelNode_),Object(f.a)(this.button_,d.a.CLICK,this.handleClick_,this);var c=this.cssClassName_+" "+l.e+" "+l.b+" "+(y()?"":l.f),element=this.element;element.className=c,element.appendChild(this.button_),this.keys_=void 0!==n.keys&&n.keys,this.source_=n.source}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(y()){var element,map=this.getMap();if(map)if(v())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else element=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:map.getTargetElement(),this.keys_?function(element){element.mozRequestFullScreenWithKeys?element.mozRequestFullScreenWithKeys():element.webkitRequestFullscreen?element.webkitRequestFullscreen():_(element)}(element):_(element)}},e.prototype.handleFullScreenChange_=function(){var map=this.getMap();v()?(this.setClassName_(this.button_,!0),Object(h.f)(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),Object(h.f)(this.labelNode_,this.labelActiveNode_)),map&&map.updateSize()},e.prototype.setClassName_=function(element,t){var e=this.cssClassName_+"-true",n=this.cssClassName_+"-false",r=t?e:n;element.classList.remove(e),element.classList.remove(n),element.classList.add(r)},e.prototype.setMap=function(map){t.prototype.setMap.call(this,map),map&&this.listenerKeys.push(Object(f.a)(document,m(),this.handleFullScreenChange_,this))},e}(c.a),w=n(20),E=n(6),C="projection";function O(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var S=function(t){function e(e){var n=e||{},element=document.createElement("div");element.className=void 0!==n.className?n.className:"ol-mouse-position",t.call(this,{element:element,render:n.render||O,target:n.target}),Object(f.a)(this,Object(w.b)(C),this.handleProjectionChanged_,this),n.coordinateFormat&&this.setCoordinateFormat(n.coordinateFormat),n.projection&&this.setProjection(n.projection),this.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=element.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(C)},e.prototype.handleMouseMove=function(t){var map=this.getMap();this.lastMouseMovePixel_=map.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(map){if(t.prototype.setMap.call(this,map),map){var e=map.getViewport();this.listenerKeys.push(Object(f.a)(e,d.a.MOUSEMOVE,this.handleMouseMove,this),Object(f.a)(e,d.a.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(f.a)(e,d.a.MOUSEOUT,this.handleMouseOut,this),Object(f.a)(e,d.a.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(C,Object(E.get)(t))},e.prototype.updateHTML_=function(t){var html=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var e=this.getProjection();this.transform_=e?Object(E.getTransformFromProjections)(this.mapProjection_,e):E.identityTransform}var n=this.getMap().getCoordinateFromPixel(t);if(n){this.transform_(n,n);var r=this.getCoordinateFormat();html=r?r(n):n.toString()}}this.renderedHTML_&&html===this.renderedHTML_||(this.element.innerHTML=html,this.renderedHTML_=html)},e}(c.a),I=n(37),T=n(254),P=n(94),R=n(55),L=n(82),M=n(260),N=n(64),j=n(43),D=n(18),A=n(0);function F(t){this.validateExtent_(),this.updateBox_()}var k=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||F,target:n.target}),this.collapsed_=void 0===n.collapsed||n.collapsed,this.collapsible_=void 0===n.collapsible||n.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",c=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof c?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=c):this.collapseLabel_=c;var label=void 0!==n.label?n.label:"»";"string"==typeof label?(this.label_=document.createElement("span"),this.label_.textContent=label):this.label_=label;var h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,button=document.createElement("button");button.setAttribute("type","button"),button.title=o,button.appendChild(h),Object(f.a)(button,d.a.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new T.a({controls:new I.a,interactions:new I.a,view:n.view});var m=this.ovmap_;n.layers&&n.layers.forEach(function(t){m.addLayer(t)}.bind(this));var y=document.createElement("div");y.className="ol-overviewmap-box",y.style.boxSizing="border-box",this.boxOverlay_=new M.a({position:[0,0],positioning:N.a.BOTTOM_LEFT,element:y}),this.ovmap_.addOverlay(this.boxOverlay_);var v=r+" "+l.e+" "+l.b+(this.collapsed_&&this.collapsible_?" "+l.a:"")+(this.collapsible_?"":" ol-uncollapsible"),element=this.element;element.className=v,element.appendChild(this.ovmapDiv_),element.appendChild(button);var _=this,x=this.boxOverlay_,w=this.boxOverlay_.getElement(),E=function(t){var e,n={clientX:(e=t).clientX-w.offsetWidth/2,clientY:e.clientY+w.offsetHeight/2},r=m.getEventCoordinate(n);x.setPosition(r)},C=function(t){var e=m.getEventCoordinate(t);_.getMap().getView().setCenter(e),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)};w.addEventListener("mousedown",function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(map){var e=this.getMap();if(map!==e){if(e){var n=e.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,map),map){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(f.a)(map,L.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(map.getLayerGroup());var view=map.getView();view&&(this.bindView_(view),view.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===R.a.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var n=this.getMap().getView();this.bindView_(n)}},e.prototype.bindView_=function(view){Object(f.a)(view,Object(w.b)(j.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(view){Object(f.c)(view,Object(w.b)(j.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var map=this.getMap(),t=this.ovmap_;if(map.isRendered()&&t.isRendered()){var e=map.getSize(),n=map.getView().calculateExtent(e),r=t.getSize(),o=t.getView().calculateExtent(r),c=t.getPixelFromCoordinate(Object(A.C)(n)),l=t.getPixelFromCoordinate(Object(A.w)(n)),h=Math.abs(c[0]-l[0]),f=Math.abs(c[1]-l[1]),d=r[0],m=r[1];h<.1*d||f<.1*m||h>.75*d||f>.75*m?this.resetExtent_():Object(A.g)(o,n)||this.recenter_()}},e.prototype.resetExtent_=function(){var map=this.getMap(),t=this.ovmap_,e=map.getSize(),n=map.getView().calculateExtent(e),r=t.getView(),o=Math.log(7.5)/Math.LN2,c=1/(.1*Math.pow(2,o/2));Object(A.J)(n,c),r.fit(n)},e.prototype.recenter_=function(){var map=this.getMap(),t=this.ovmap_,view=map.getView();t.getView().setCenter(view.getCenter())},e.prototype.updateBox_=function(){var map=this.getMap(),t=this.ovmap_;if(map.isRendered()&&t.isRendered()){var e=map.getSize(),view=map.getView(),n=t.getView(),r=view.getRotation(),o=this.boxOverlay_,c=this.boxOverlay_.getElement(),l=view.calculateExtent(e),h=n.getResolution(),f=Object(A.v)(l),d=Object(A.D)(l),m=this.calculateCoordinateRotate_(r,f);o.setPosition(m),c&&(c.style.width=Math.abs((f[0]-d[0])/h)+"px",c.style.height=Math.abs((d[1]-f[1])/h)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var n,r=this.getMap().getView().getCenter();return r&&(n=[e[0]-r[0],e[1]-r[1]],Object(D.f)(n,t),Object(D.a)(n,r)),n},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(l.a),this.collapsed_?Object(h.f)(this.collapseLabel_,this.label_):Object(h.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Object(f.b)(t,P.a.POSTRENDER,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(c.a),G=n(202),B=n(12),z=n(35),U="units",V={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},Y=[1,2,5];function X(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var W=function(t){function e(e){var n=e||{},r=void 0!==n.className?n.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:n.render||X,target:n.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+l.e,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==n.minWidth?n.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",Object(f.a)(this,Object(w.b)(U),this.handleUnitsChanged_,this),this.setUnits(n.units||V.METRIC)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getUnits=function(){return this.get(U)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(U,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,n=t.projection,r=this.getUnits(),o=r==V.DEGREES?z.b.DEGREES:z.b.METERS,c=Object(E.getPointResolution)(n,t.resolution,e,o);n.getUnits()!=z.b.DEGREES&&n.getMetersPerUnit()&&o==z.b.METERS&&(c*=n.getMetersPerUnit());var l=this.minWidth_*c,h="";if(r==V.DEGREES){var f=E.METERS_PER_UNIT[z.b.DEGREES];n.getUnits()==z.b.DEGREES?l*=f:c/=f,l<f/60?(h="″",c*=3600):l<f?(h="′",c*=60):h="°"}else r==V.IMPERIAL?l<.9144?(h="in",c/=.0254):l<1609.344?(h="ft",c/=.3048):(h="mi",c/=1609.344):r==V.NAUTICAL?(c/=1852,h="nm"):r==V.METRIC?l<.001?(h="μm",c*=1e6):l<1?(h="mm",c*=1e3):l<1e3?h="m":(h="km",c/=1e3):r==V.US?l<.9144?(h="in",c*=39.37):l<1609.344?(h="ft",c/=.30480061):(h="mi",c/=1609.3472):Object(B.a)(!1,33);for(var d,m,i=3*Math.floor(Math.log(this.minWidth_*c)/Math.log(10));;){if(d=Y[(i%3+3)%3]*Math.pow(10,Math.floor(i/3)),m=Math.round(d/c),isNaN(m))return this.element.style.display="none",void(this.renderedVisible_=!1);if(m>=this.minWidth_)break;++i}var html=d+" "+h;this.renderedHTML_!=html&&(this.innerElement_.innerHTML=html,this.renderedHTML_=html),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(c.a),H=n(201),$=n(22),K=n(36),Z=n(26),J=n(9),Q=n(54),tt=n(172),et={VERTICAL:0,HORIZONTAL:1};function nt(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}var it=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||nt}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=et.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==n.duration?n.duration:200;var r=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=r+"-thumb "+l.e;var c=this.element;c.className=r+" "+l.e+" "+l.b,c.appendChild(o),this.dragger_=new tt.a(c),Object(f.a)(this.dragger_,Q.a.POINTERDOWN,this.handleDraggerStart_,this),Object(f.a)(this.dragger_,Q.a.POINTERMOVE,this.handleDraggerDrag_,this),Object(f.a)(this.dragger_,Q.a.POINTERUP,this.handleDraggerEnd_,this),Object(f.a)(c,d.a.CLICK,this.handleContainerClick_,this),Object(f.a)(o,d.a.CLICK,Z.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(map){t.prototype.setMap.call(this,map),map&&map.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,n=t.offsetHeight,r=t.firstElementChild,o=getComputedStyle(r),c=r.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=r.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);this.thumbSize_=[c,l],e>n?(this.direction_=et.HORIZONTAL,this.widthLimit_=e-c):(this.direction_=et.VERTICAL,this.heightLimit_=n-l),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var view=this.getMap().getView(),e=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(e);view.animate({resolution:view.constrainResolution(n),duration:this.duration_,easing:K.b})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild&&(this.getMap().getView().setHint($.a.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0,0===this.dragListenerKeys_.length)){var e=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(Object(f.a)(document,d.a.MOUSEMOVE,e,this),Object(f.a)(document,Q.a.POINTERMOVE,e,this),Object(f.a)(document,d.a.MOUSEUP,n,this),Object(f.a)(document,Q.a.POINTERUP,n,this))}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var element=this.element.firstElementChild,e=t.clientX-this.previousX_+parseFloat(element.style.left),n=t.clientY-this.previousY_+parseFloat(element.style.top),r=this.getRelativePosition_(e,n);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},e.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var view=this.getMap().getView();view.setHint($.a.INTERACTING,-1),view.animate({resolution:view.constrainResolution(this.currentResolution_),duration:this.duration_,easing:K.b}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0,this.dragListenerKeys_.forEach(f.e),this.dragListenerKeys_.length=0}},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),n=this.element.firstElementChild;this.direction_==et.HORIZONTAL?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var n;return n=this.direction_===et.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,Object(J.a)(n,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e}(c.a),ot=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target}),this.extent=n.extent?n.extent:null;var r=void 0!==n.className?n.className:"ol-zoom-extent",label=void 0!==n.label?n.label:"E",o=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",button=document.createElement("button");button.setAttribute("type","button"),button.title=o,button.appendChild("string"==typeof label?document.createTextNode(label):label),Object(f.a)(button,d.a.CLICK,this.handleClick_,this);var c=r+" "+l.e+" "+l.b,element=this.element;element.className=c,element.appendChild(button)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var view=this.getMap().getView(),t=this.extent?this.extent:view.getProjection().getExtent();view.fit(t)},e}(c.a),st=n(200);n.d(e,"Attribution",function(){return o.a}),n.d(e,"Control",function(){return c.a}),n.d(e,"FullScreen",function(){return x}),n.d(e,"MousePosition",function(){return S}),n.d(e,"OverviewMap",function(){return k}),n.d(e,"Rotate",function(){return G.a}),n.d(e,"ScaleLine",function(){return W}),n.d(e,"Zoom",function(){return H.a}),n.d(e,"ZoomSlider",function(){return it}),n.d(e,"ZoomToExtent",function(){return ot}),n.d(e,"defaults",function(){return st.a})},,function(t,e,n){"use strict";n.r(e);var r=n(13),o=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Object(r.a)(t,t),this.canvas_=this.context_.canvas};o.prototype.get=function(t){return this.entries_[t]||null},o.prototype.add=function(t,e,n,r,o){for(var i=0,c=this.emptyBlocks_.length;i<c;++i){var l=this.emptyBlocks_[i];if(l.width>=e+this.space_&&l.height>=n+this.space_){var h={offsetX:l.x+this.space_,offsetY:l.y+this.space_,image:this.canvas_};return this.entries_[t]=h,r.call(o,this.context_,l.x+this.space_,l.y+this.space_),this.split_(i,l,e+this.space_,n+this.space_),h}}return null},o.prototype.split_=function(t,e,n,r){var o,c;e.width-n>e.height-r?(o={x:e.x+n,y:e.y,width:e.width-n,height:e.height},c={x:e.x,y:e.y+r,width:n,height:e.height-r},this.updateBlocks_(t,o,c)):(o={x:e.x+n,y:e.y,width:e.width-n,height:r},c={x:e.x,y:e.y+r,width:e.width,height:e.height-r},this.updateBlocks_(t,o,c))},o.prototype.updateBlocks_=function(t,e,n){var r=[t,1];e.width>0&&e.height>0&&r.push(e),n.width>0&&n.height>0&&r.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};var c=o,l=n(165),h=n(19),f=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==l.a?l.a:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new c(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new c(this.currentHitSize_,this.space_)]};f.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var n=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,n)},f.prototype.getInfo_=function(t,e){for(var i=0,n=t.length;i<n;++i){var r=t[i].get(e);if(r)return r}return null},f.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},f.prototype.add=function(t,e,n,r,o,c){if(e+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;var l=this.add_(!1,t,e,n,r,c);if(!l)return null;var f=void 0!==o?o:h.c,d=this.add_(!0,t,e,n,f,c);return this.mergeInfos_(l,d)},f.prototype.add_=function(t,e,n,r,o,l){var h,f,i,d,m=t?this.hitAtlases_:this.atlases_;for(i=0,d=m.length;i<d;++i){if(f=(h=m[i]).add(e,n,r,o,l))return f;if(!f&&i===d-1){var y=void 0;t?(y=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=y):(y=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=y),h=new c(y,this.space_),m.push(h),++d}}return null};var d=f,m=n(163),y=n(111),v=n(191),_=n(204),x=n(144),w=n(199),E=n(127),C=n(60),O=n(224),S=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new y.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:O.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};S.prototype.clone=function(){return new S({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},S.prototype.getOverflow=function(){return this.overflow_},S.prototype.getFont=function(){return this.font_},S.prototype.getMaxAngle=function(){return this.maxAngle_},S.prototype.getPlacement=function(){return this.placement_},S.prototype.getOffsetX=function(){return this.offsetX_},S.prototype.getOffsetY=function(){return this.offsetY_},S.prototype.getFill=function(){return this.fill_},S.prototype.getRotateWithView=function(){return this.rotateWithView_},S.prototype.getRotation=function(){return this.rotation_},S.prototype.getScale=function(){return this.scale_},S.prototype.getStroke=function(){return this.stroke_},S.prototype.getText=function(){return this.text_},S.prototype.getTextAlign=function(){return this.textAlign_},S.prototype.getTextBaseline=function(){return this.textBaseline_},S.prototype.getBackgroundFill=function(){return this.backgroundFill_},S.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},S.prototype.getPadding=function(){return this.padding_},S.prototype.setOverflow=function(t){this.overflow_=t},S.prototype.setFont=function(t){this.font_=t},S.prototype.setMaxAngle=function(t){this.maxAngle_=t},S.prototype.setOffsetX=function(t){this.offsetX_=t},S.prototype.setOffsetY=function(t){this.offsetY_=t},S.prototype.setPlacement=function(t){this.placement_=t},S.prototype.setFill=function(t){this.fill_=t},S.prototype.setRotation=function(t){this.rotation_=t},S.prototype.setScale=function(t){this.scale_=t},S.prototype.setStroke=function(t){this.stroke_=t},S.prototype.setText=function(text){this.text_=text},S.prototype.setTextAlign=function(t){this.textAlign_=t},S.prototype.setTextBaseline=function(t){this.textBaseline_=t},S.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},S.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},S.prototype.setPadding=function(t){this.padding_=t};var I=S;n.d(e,"Atlas",function(){return c}),n.d(e,"AtlasManager",function(){return d}),n.d(e,"Circle",function(){return m.a}),n.d(e,"Fill",function(){return y.a}),n.d(e,"Icon",function(){return v.a}),n.d(e,"IconImage",function(){return _.a}),n.d(e,"Image",function(){return x.a}),n.d(e,"RegularShape",function(){return w.a}),n.d(e,"Stroke",function(){return E.a}),n.d(e,"Style",function(){return C.c}),n.d(e,"Text",function(){return I})},function(t,e,n){"use strict";var r=n(12),o=n(63),c=n(8),l=n(2),h=n(6),f=function(){this.dataProjection=null,this.defaultFeatureProjection=null};f.prototype.getReadOptions=function(source,t){var e;return t&&(e={dataProjection:t.dataProjection?t.dataProjection:this.readProjection(source),featureProjection:t.featureProjection}),this.adaptOptions(e)},f.prototype.adaptOptions=function(t){return Object(c.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},f.prototype.getLastExtent=function(){return null},f.prototype.getType=function(){return Object(l.b)()},f.prototype.readFeature=function(source,t){return Object(l.b)()},f.prototype.readFeatures=function(source,t){return Object(l.b)()},f.prototype.readGeometry=function(source,t){return Object(l.b)()},f.prototype.readProjection=function(source){return Object(l.b)()},f.prototype.writeFeature=function(t,e){return Object(l.b)()},f.prototype.writeFeatures=function(t,e){return Object(l.b)()},f.prototype.writeGeometry=function(t,e){return Object(l.b)()};var d=f;function m(t,e,n){var r,o=n?Object(h.get)(n.featureProjection):null,c=n?Object(h.get)(n.dataProjection):null;if(r=o&&c&&!Object(h.equivalent)(o,c)?Array.isArray(t)?Object(h.transformExtent)(t,c,o):(e?t.clone():t).transform(e?o:c,e?c:o):t,e&&n&&void 0!==n.decimals&&!Array.isArray(r)){var l=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform(function(t){for(var i=0,e=t.length;i<e;++i)t[i]=Math.round(t[i]*l)/l;return t})}return r}var y=n(114);function v(source){if("string"==typeof source){var object=JSON.parse(source);return object||null}return null!==source?source:null}var _=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return y.a.JSON},e.prototype.readFeature=function(source,t){return this.readFeatureFromObject(v(source),this.getReadOptions(source,t))},e.prototype.readFeatures=function(source,t){return this.readFeaturesFromObject(v(source),this.getReadOptions(source,t))},e.prototype.readFeatureFromObject=function(object,t){return Object(l.b)()},e.prototype.readFeaturesFromObject=function(object,t){return Object(l.b)()},e.prototype.readGeometry=function(source,t){return this.readGeometryFromObject(v(source),this.getReadOptions(source,t))},e.prototype.readGeometryFromObject=function(object,t){return Object(l.b)()},e.prototype.readProjection=function(source){return this.readProjectionFromObject(v(source))},e.prototype.readProjectionFromObject=function(object){return Object(l.b)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(l.b)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(l.b)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(l.b)()},e}(d),x=n(1),w=n(4),E=n(0),C=n(141),O=n(3);function S(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var I=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var i=0,t=this.geometries_.length;i<t;++i)Object(x.c)(this.geometries_[i],w.a.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var i=0,t=this.geometries_.length;i<t;++i)Object(x.a)(this.geometries_[i],w.a.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<Object(E.e)(this.getExtent(),t,e))return r;for(var o=this.geometries_,i=0,c=o.length;i<c;++i)r=o[i].closestPointXY(t,e,n,r);return r},e.prototype.containsXY=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(E.l)(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)Object(E.q)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return S(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(c.b)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(n))return this.simplifiedGeometryCache[n];for(var r=[],o=this.geometries_,l=!1,i=0,h=o.length;i<h;++i){var f=o[i],d=f.getSimplifiedGeometry(t);r.push(d),d!==f&&(l=!0)}if(l){var m=new e(null);return m.setGeometriesArray(r),this.simplifiedGeometryCache[n]=m,m}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return O.a.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,n){var r=n;r||(r=Object(E.x)(this.getExtent()));for(var o=this.geometries_,i=0,c=o.length;i<c;++i)o[i].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(S(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(C.a),T=n(88),P=n(142),R=n(106),L=n(146),M=n(47),N=n(38),j=function(t){function e(e){var n=e||{};t.call(this),this.dataProjection=Object(h.get)(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(this.defaultFeatureProjection=Object(h.get)(n.featureProjection)),this.geometryName_=n.geometryName,this.extractGeometryName_=n.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(object,t){var e=null,n=D((e="Feature"===object.type?object:{type:"Feature",geometry:object,properties:null}).geometry,t),r=new o.a;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in e!==void 0&&r.setGeometryName(e.geometry_name),r.setGeometry(n),"id"in e&&r.setId(e.id),e.properties&&r.setProperties(e.properties),r},e.prototype.readFeaturesFromObject=function(object,t){var e=null;if("FeatureCollection"===object.type){e=[];for(var n=object.features,i=0,r=n.length;i<r;++i)e.push(this.readFeatureFromObject(n[i],t))}else e=[this.readFeatureFromObject(object,t)];return e},e.prototype.readGeometryFromObject=function(object,t){return D(object,t)},e.prototype.readProjectionFromObject=function(object){var t,e=object.crs;return e?"name"==e.type?t=Object(h.get)(e.properties.name):Object(r.a)(!1,36):t=this.dataProjection,t},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var object={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(object.id=n);var r=t.getGeometry();r&&(object.geometry=A(r,e));var o=t.getProperties();return delete o[t.getGeometryName()],Object(c.d)(o)||(object.properties=o),object},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},e.prototype.writeGeometryObject=function(t,e){return A(t,this.adaptOptions(e))},e}(_);function D(object,t){if(!object)return null;var e;switch(object.type){case O.a.POINT:e=function(object){return new M.a(object.coordinates)}(object);break;case O.a.LINE_STRING:e=function(object){return new T.a(object.coordinates)}(object);break;case O.a.POLYGON:e=function(object){return new N.b(object.coordinates)}(object);break;case O.a.MULTI_POINT:e=function(object){return new R.a(object.coordinates)}(object);break;case O.a.MULTI_LINE_STRING:e=function(object){return new P.a(object.coordinates)}(object);break;case O.a.MULTI_POLYGON:e=function(object){return new L.a(object.coordinates)}(object);break;case O.a.GEOMETRY_COLLECTION:e=function(object,t){var e=object.geometries.map(function(e){return D(e,t)});return new I(e)}(object);break;default:throw new Error("Unsupported GeoJSON type: "+object.type)}return m(e,!1,t)}function A(t,e){var n,r=(t=m(t,!0,e)).getType();switch(r){case O.a.POINT:n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case O.a.LINE_STRING:n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case O.a.POLYGON:n=function(t,e){var n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case O.a.MULTI_POINT:n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case O.a.MULTI_LINE_STRING:n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case O.a.MULTI_POLYGON:n=function(t,e){var n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case O.a.GEOMETRY_COLLECTION:n=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var n=Object(c.a)({},e);return delete n.featureProjection,A(t,n)})}}(t,e);break;case O.a.CIRCLE:n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}e.a=j},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,c){e=e||"&",n=n||"=";var l={};if("string"!=typeof t||0===t.length)return l;var h=/\+/g;t=t.split(e);var f=1e3;c&&"number"==typeof c.maxKeys&&(f=c.maxKeys);var d=t.length;f>0&&d>f&&(d=f);for(var i=0;i<d;++i){var m,y,v,_,x=t[i].replace(h,"%20"),w=x.indexOf(n);w>=0?(m=x.substr(0,w),y=x.substr(w+1)):(m=x,y=""),v=decodeURIComponent(m),_=decodeURIComponent(y),r(l,v)?o(l[v])?l[v].push(_):l[v]=[l[v],_]:l[v]=_}return l};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,l){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?map(c(t),function(c){var l=encodeURIComponent(r(c))+n;return o(t[c])?map(t[c],function(t){return l+encodeURIComponent(r(t))}).join(e):l+encodeURIComponent(r(t[c]))}).join(e):l?encodeURIComponent(r(l))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function map(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var c=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";t.exports=function(t,e){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)||e?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r;(function(){"use strict";var n={load:function(input,t){var e="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",n=new RegExp(".*((\r|\n)+)"),r=new RegExp("^\\s*([^"+e+"]+)[ \t\r]*:[ \t\r]*(.*(?:\n|\r|$))"),o=new RegExp("^\\s*:[ \t\r]*(endskip|ignore|skip|end).*?(\n|\r|$)","i"),c=new RegExp("^\\s*\\*[ \t\r]*(.*(?:\n|\r|$))"),l=new RegExp("^\\s*(\\[|\\{)[ \t\r]*([+.]*)[ \t\r]*([^"+e+"]*)[ \t\r]*(?:\\]|\\}).*?(\n|\r|$)"),data={},h=data,f=[],d=void 0,m=null,y=null,v="",_=!1;for(!0!==(t=t||{}).comments&&(t.comments=!1);input;){var x;o.exec(input)?O((x=o.exec(input))[1].toLowerCase()):_||!r.exec(input)||d&&"simple"===d.arrayType?!_&&c.exec(input)&&d&&d.array&&"complex"!==d.arrayType&&"freeform"!==d.arrayType&&d.flags.indexOf("+")<0?(C=(x=c.exec(input))[1],R(),d.arrayType=d.arrayType||"simple",d.array.push(""),y=d.array,v=C,L(d.array,{replace:!0})):!_&&l.exec(input)?S((x=l.exec(input))[1],x[2],x[3]):n.exec(input)?I((x=n.exec(input))[0]):(I(input),input=""):(w=(x=r.exec(input))[1],E=x[2]||"",R(),T(w),d&&d.flags.indexOf("+")>-1&&(w="value"),y=w,v=E,L(w,{replace:!0})),x&&(input=input.substring(x[0].length))}var w,E;var C;function O(t){if(_&&"endskip"!==t&&"ignore"!==t)return R();switch(t){case"end":return void(y&&L(y,{replace:!1}));case"ignore":input="";break;case"skip":_=!0;break;case"endskip":_=!1}R()}function S(t,e,n){if(R(),""==n){var r=f.pop();h=(r?r.scope:data)||data,d=f[f.length-1]}else if("["===t||"{"===t){var o=!1,c=data;if(e.indexOf(".")>-1?(T(n),o=!0,d&&(c=h)):(h=data,f=[]),d&&d.flags.indexOf("+")>-1)var l=n;else{for(var m=n.split("."),i=0;i<m.length-1;i++)c=c[m[i]]=c[m[i]]||{};l=m[m.length-1]}d&&d.flags.indexOf("+")>-1&&e.indexOf(".")>-1&&("["===t?l="value":"{"===t&&(h=h.value={}));var y={array:null,arrayType:null,arrayFirstKey:null,flags:e,scope:h};"["==t?(y.array=c[l]=[],e.indexOf("+")>-1&&(y.arrayType="freeform"),o?f.push(y):f=[y],d=f[f.length-1]):"{"==t&&(o?f.push(y):(h=c[l]="object"==typeof c[l]?c[l]:{},f=[y]),d=f[f.length-1])}}function I(text){d&&d.flags.indexOf("+")>-1&&text.match(/[^\n\r\s]/)?d.array.push({type:"text",value:text.replace(/(^\s*)|(\s*$)/g,"")}):v+=input.substring(0,text.length)}function T(t){if(d&&d.array){if(d.arrayType=d.arrayType||"complex","simple"===d.arrayType)return;null!==d.arrayFirstKey&&d.arrayFirstKey!==t||d.array.push(h={}),d.flags.indexOf("+")>-1?h.type=t:d.arrayFirstKey=d.arrayFirstKey||t}}function P(e,n){return t.comments&&(e=(e=e.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/gm,"")).replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),"append"==n&&(e=e.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),e}function R(){var t=v+"";return v="",y=null,t}function L(t,e){e=e||{};var n=y,r=R();if(e.replace?(r=P(r,"replace").replace(new RegExp("^\\s*"),""),v=new RegExp("\\s*$").exec(r)[0],y=n):r=P(r,"append"),"object"==typeof t)e.replace&&(t[t.length-1]=""),t[t.length-1]+=r.replace(new RegExp("\\s*$"),"");else{var o=t.split(".");m=h;for(var i=0;i<o.length-1;i++)"string"==typeof m[o[i]]&&(m[o[i]]={}),m=m[o[i]]=m[o[i]]||{};e.replace&&(m[o[o.length-1]]=""),m[o[o.length-1]]+=r.replace(new RegExp("\\s*$"),"")}}return R(),data}};t.exports&&(e=t.exports=n),e.archieml=n,void 0===(r=function(){return n}.apply(e,[]))||(t.exports=r)}).call(this)},,,,,,function(t,e,n){t.exports=function(){"use strict";function t(t,i,e){var n=t[i];t[i]=t[e],t[e]=n}function e(a,b){return a<b?-1:a>b?1:0}return function(n,r,o,c,l){!function e(n,r,o,c,l){for(;c>o;){if(c-o>600){var h=c-o+1,f=r-o+1,d=Math.log(h),s=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*s*(h-s)/h)*(f-h/2<0?-1:1),y=Math.max(o,Math.floor(r-f*s/h+m)),v=Math.min(c,Math.floor(r+(h-f)*s/h+m));e(n,r,y,v,l)}var _=n[r],i=o,x=c;for(t(n,o,r),l(n[c],_)>0&&t(n,o,c);i<x;){for(t(n,i,x),i++,x--;l(n[i],_)<0;)i++;for(;l(n[x],_)>0;)x--}0===l(n[o],_)?t(n,o,x):t(n,++x,c),x<=r&&(o=x+1),r<=x&&(c=x-1)}}(n,r,o||0,c||n.length-1,l||e)}}()},function(t,e,n){var r=n(550).newImageData;function o(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function n(data,t,n){return e?new ImageData(data,t,n):{data:data,width:t,height:n}}return function(data){var output,b,e=data.buffers,meta=data.meta,r=data.imageOps,o=data.width,c=data.height,l=e.length,h=e[0].byteLength;if(r){var f=new Array(l);for(b=0;b<l;++b)f[b]=n(new Uint8ClampedArray(e[b]),o,c);output=t(f,meta).data}else{output=new Uint8ClampedArray(h);var d=new Array(l),m=new Array(l);for(b=0;b<l;++b)d[b]=new Uint8ClampedArray(e[b]),m[b]=[0,0,0,0];for(var i=0;i<h;i+=4){for(var y=0;y<l;++y){var v=d[y];m[y][0]=v[i],m[y][1]=v[i+1],m[y][2]=v[i+2],m[y][3]=v[i+3]}var _=t(m,meta);output[i]=_[0],output[i+1]=_[1],output[i+2]=_[2],output[i+3]=_[3]}}return output.buffer}}function c(t,e){var n=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+o.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(n,{type:"text/javascript"}),source=URL.createObjectURL(r),c=new Worker(source);return c.addEventListener("message",e),c}function l(t){var e;this._imageOps=!!t.imageOps;var n=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var i=0;i<e;++i)n[i]=c(t,this._onWorkerMessage.bind(this,i));else n[0]=function(t,e){var n=o(t.operation);return{postMessage:function(data){setTimeout(function(){e({data:{buffer:n(data),meta:data.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}l.prototype.process=function(t,meta,e){this._enqueue({inputs:t,meta:meta,callback:e}),this._dispatch()},l.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},l.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},l.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,n=t.inputs[0].height,r=t.inputs.map(function(input){return input.data.buffer}),o=this._workers.length;if(this._running=o,1===o)this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:n},r);else for(var c=t.inputs[0].data.length,l=4*Math.ceil(c/4/o),i=0;i<o;++i){for(var h=i*l,f=[],d=0,m=r.length;d<m;++d)f.push(r[i].slice(h,h+l));this._workers[i].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:e,height:n},f)}}},l.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},l.prototype._resolveJob=function(){var data,meta,t=this._job,e=this._workers.length;if(1===e)data=new Uint8ClampedArray(this._dataLookup[0].buffer),meta=this._dataLookup[0].meta;else{var n=t.inputs[0].data.length;data=new Uint8ClampedArray(n),meta=new Array(n);for(var o=4*Math.ceil(n/4/e),i=0;i<e;++i){var c=this._dataLookup[i].buffer,l=i*o;data.set(new Uint8ClampedArray(c),l),meta[i]=this._dataLookup[i].meta}}this._job=null,this._dataLookup={},t.callback(null,r(data,t.inputs[0].width,t.inputs[0].height),meta),this._dispatch()},t.exports=l},function(t,e){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}var r=document.createElement("canvas").getContext("2d");e.newImageData=function(data,t,e){if(n)return new ImageData(data,t,e);var o=r.createImageData(t,e);return o.data.set(data),o}},function(t,e,n){"use strict";function r(t,e){return void 0===e?e=>r(t,e):t+e}function o(t,a=[]){return(...p)=>(e=>e.length>=t.length?t(...e):o(t,e))([...a,...p])}n.r(e),n.d(e,"F",function(){return A}),n.d(e,"T",function(){return Ut}),n.d(e,"add",function(){return r}),n.d(e,"adjust",function(){return c}),n.d(e,"all",function(){return l}),n.d(e,"allPass",function(){return f}),n.d(e,"always",function(){return d}),n.d(e,"any",function(){return h}),n.d(e,"anyPass",function(){return m}),n.d(e,"append",function(){return y}),n.d(e,"assoc",function(){return v}),n.d(e,"both",function(){return _}),n.d(e,"complement",function(){return x}),n.d(e,"compose",function(){return w}),n.d(e,"concat",function(){return E}),n.d(e,"contains",function(){return S}),n.d(e,"curry",function(){return o}),n.d(e,"dec",function(){return I}),n.d(e,"defaultTo",function(){return P}),n.d(e,"dissoc",function(){return R}),n.d(e,"divide",function(){return L}),n.d(e,"drop",function(){return M}),n.d(e,"dropLast",function(){return N}),n.d(e,"either",function(){return j}),n.d(e,"endsWith",function(){return D}),n.d(e,"equals",function(){return O}),n.d(e,"filter",function(){return filter}),n.d(e,"find",function(){return F}),n.d(e,"findIndex",function(){return k}),n.d(e,"flatten",function(){return G}),n.d(e,"flip",function(){return B}),n.d(e,"forEach",function(){return z}),n.d(e,"groupBy",function(){return U}),n.d(e,"has",function(){return V}),n.d(e,"head",function(){return head}),n.d(e,"identity",function(){return Y}),n.d(e,"ifElse",function(){return X}),n.d(e,"inc",function(){return W}),n.d(e,"includes",function(){return H}),n.d(e,"indexBy",function(){return $}),n.d(e,"indexOf",function(){return K}),n.d(e,"init",function(){return J}),n.d(e,"is",function(){return Q}),n.d(e,"isNil",function(){return tt}),n.d(e,"join",function(){return et}),n.d(e,"keys",function(){return nt}),n.d(e,"last",function(){return it}),n.d(e,"lastIndexOf",function(){return ot}),n.d(e,"length",function(){return st}),n.d(e,"map",function(){return map}),n.d(e,"match",function(){return at}),n.d(e,"max",function(){return ct}),n.d(e,"maxBy",function(){return lt}),n.d(e,"merge",function(){return ut}),n.d(e,"min",function(){return ht}),n.d(e,"minBy",function(){return pt}),n.d(e,"modulo",function(){return ft}),n.d(e,"multiply",function(){return gt}),n.d(e,"none",function(){return mt}),n.d(e,"not",function(){return yt}),n.d(e,"nth",function(){return vt}),n.d(e,"omit",function(){return _t}),n.d(e,"partial",function(){return bt}),n.d(e,"partialCurry",function(){return xt}),n.d(e,"path",function(){return path}),n.d(e,"pathOr",function(){return wt}),n.d(e,"pick",function(){return Et}),n.d(e,"pickAll",function(){return Ct}),n.d(e,"pipe",function(){return Ot}),n.d(e,"pluck",function(){return St}),n.d(e,"prepend",function(){return It}),n.d(e,"prop",function(){return Tt}),n.d(e,"propEq",function(){return Pt}),n.d(e,"range",function(){return Rt}),n.d(e,"reduce",function(){return Lt}),n.d(e,"reject",function(){return Mt}),n.d(e,"repeat",function(){return Nt}),n.d(e,"replace",function(){return jt}),n.d(e,"reverse",function(){return Dt}),n.d(e,"sort",function(){return At}),n.d(e,"sortBy",function(){return Ft}),n.d(e,"split",function(){return kt}),n.d(e,"splitEvery",function(){return Gt}),n.d(e,"startsWith",function(){return Bt}),n.d(e,"subtract",function(){return zt}),n.d(e,"tail",function(){return qt}),n.d(e,"take",function(){return Vt}),n.d(e,"takeLast",function(){return Yt}),n.d(e,"tap",function(){return Xt}),n.d(e,"test",function(){return Wt}),n.d(e,"times",function(){return Ht}),n.d(e,"toLower",function(){return $t}),n.d(e,"toString",function(){return Kt}),n.d(e,"toUpper",function(){return Zt}),n.d(e,"trim",function(){return Jt}),n.d(e,"type",function(){return C}),n.d(e,"uniq",function(){return Qt}),n.d(e,"uniqWith",function(){return te}),n.d(e,"update",function(){return ee}),n.d(e,"values",function(){return ne}),n.d(e,"without",function(){return ie}),n.d(e,"zip",function(){return re}),n.d(e,"zipObj",function(){return oe});const c=o(function(t,e,n){return n.concat().map((r,o)=>o===e?t(n[e]):r)});function filter(t,e){if(1===arguments.length)return e=>filter(t,e);if(void 0===e)return[];if(!Array.isArray(e))return function(t,e){const n={};for(const r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}(t,e);let n=-1,r=0;const o=e.length,c=[];for(;++n<o;){const o=e[n];t(o,n)&&(c[r++]=o)}return c}function l(t,e){return 1===arguments.length?e=>l(t,e):filter(t,e).length===e.length}function h(t,e){if(1===arguments.length)return e=>h(t,e);let n=0;for(;n<e.length;){if(t(e[n],n))return!0;n++}return!1}function f(t,e){return 1===arguments.length?e=>f(t,e):!h(t=>!t(e),t)}function d(t){return()=>t}function m(t,e){return 1===arguments.length?e=>m(t,e):h(t=>t(e))(t)}function y(t,e){if(1===arguments.length)return e=>y(t,e);if("string"==typeof e)return`${e}${t}`;const n=e.concat();return n.push(t),n}const v=o(function(t,e,n){return Object.assign({},n,{[t]:e})});function _(t,e){return 1===arguments.length?e=>_(t,e):input=>t(input)&&e(input)}function x(t){return input=>!t(input)}function w(...t){return(...e)=>{const n=t.slice();if(n.length>0){let t=n.pop()(...e);for(;n.length>0;)t=n.pop()(t);return t}}}function E(t,e){return 1===arguments.length?e=>E(t,e):"string"==typeof t?`${t}${e}`:[...t,...e]}function C(a){const t=typeof a;if(null===a)return"Null";if(void 0===a)return"Undefined";if("boolean"===t)return"Boolean";if("number"===t)return Number.isNaN(a)?"NaN":"Number";if("string"===t)return"String";if(Array.isArray(a))return"Array";if(a instanceof RegExp)return"RegExp";const e=a.toString();return e.startsWith("async")?"Async":"[object Promise]"===e?"Promise":e.includes("function")||e.includes("=>")?"Function":"Object"}function O(a,b){if(1===arguments.length)return t=>O(a,t);if(a===b)return!0;const t=C(a);if(t!==C(b))return!1;if("Array"===t){const t=Array.from(a),e=Array.from(b);if(t.toString()!==e.toString())return!1;let n=!0;return t.forEach((t,r)=>{n&&(t===e[r]||O(t,e[r])||(n=!1))}),n}if("Object"===t){const t=Object.keys(a);if(t.length!==Object.keys(b).length)return!1;let e=!0;return t.forEach(t=>{if(e){const n=a[t],r=b[t];n===r||O(n,r)||(e=!1)}}),e}return!1}function S(t,e){if(1===arguments.length)return e=>S(t,e);let n=-1,r=!1;for(;++n<e.length&&!r;)O(e[n],t)&&(r=!0);return r}const I=t=>t-1;function T(t){return null==t||!0===Number.isNaN(t)}function P(t,...e){if(1===arguments.length)return e=>P(t,e);if(2===arguments.length)return T(e[0])?t:e[0];const n=e.length-1;let r,o=n+1,c=!1;for(;!c;){const t=e[n-o+1];0===o?c=!0:T(t)?o-=1:(r=t,c=!0)}return void 0===r?t:r}function R(t,e){if(1===arguments.length)return e=>R(t,e);if(null==e)return{};const n={};for(const p in e)n[p]=e[p];return delete n[t],n}function L(t,e){return 1===arguments.length?e=>L(t,e):t/e}function M(t,e){return 1===arguments.length?e=>M(t,e):e.slice(t)}function N(t,e){return 1===arguments.length?e=>N(t,e):e.slice(0,-t)}function j(t,e){return 1===arguments.length?e=>j(t,e):input=>t(input)||e(input)}function D(t,e){return 1===arguments.length?e=>D(t,e):e.endsWith(t)}function A(){return!1}function F(t,e){return 1===arguments.length?e=>F(t,e):e.find(t)}function k(t,e){if(1===arguments.length)return e=>k(t,e);const n=e.length;let r=-1;for(;++r<n;)if(t(e[r],r))return r;return-1}function G(t,e){e=void 0===e?[]:e;for(let i=0;i<t.length;i++)Array.isArray(t[i])?G(t[i],e):e.push(t[i]);return e}function B(t){return function(t){return(...input)=>1===input.length?e=>t(e,input[0]):2===input.length?t(input[1],input[0]):void 0}(t)}function map(t,e){if(1===arguments.length)return e=>map(t,e);if(void 0===e)return[];if(!Array.isArray(e))return function(t,e){const n={};for(const r in e)n[r]=t(e[r],r,e);return n}(t,e);let n=-1;const r=e.length,o=Array(r);for(;++n<r;)o[n]=t(e[n],n);return o}function z(t,e){return 1===arguments.length?e=>z(t,e):(map(t,e),e)}function U(t,e){if(1===arguments.length)return e=>U(t,e);const n={};for(let i=0;i<e.length;i++){const r=e[i],o=t(r);n[o]||(n[o]=[]),n[o].push(r)}return n}function V(t,e){return 1===arguments.length?e=>V(t,e):void 0!==e[t]}function head(a){return"string"==typeof a?a[0]||"":a[0]}function Y(t){return t}function X(t,e,n){return void 0===e?(e,n)=>X(t,e,n):void 0===n?n=>X(t,e,n):input=>{return!0===("boolean"==typeof t?t:t(input))?e(input):n(input)}}const W=t=>t+1;function H(t,input){if(1===arguments.length)return e=>H(t,e);return!(!Array.isArray(input)&&"string"!=typeof input)&&input.includes(t)}function $(t,e){if(1===arguments.length)return e=>$(t,e);const n={};for(let i=0;i<e.length;i++){const r=e[i];n[t(r)]=r}return n}function K(t,e){if(1===arguments.length)return e=>K(t,e);let n=-1;const r=e.length;for(;++n<r;)if(e[n]===t)return n;return-1}function Z(t,e,n){let r=-1,o=t.length;(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;const c=Array(o);for(;++r<o;)c[r]=t[r+e];return c}function J(a){return"string"==typeof a?a.slice(0,-1):a.length?Z(a,0,-1):[]}function Q(t,e){return 1===arguments.length?e=>Q(t,e):null!=e&&e.constructor===t||e instanceof t}function tt(t){return null==t}function et(t,e){return 1===arguments.length?e=>et(t,e):e.join(t)}function nt(t){return Object.keys(t)}function it(a){return"string"==typeof a?a[a.length-1]||"":a[a.length-1]}function ot(t,e){if(1===arguments.length)return e=>ot(t,e);let n=-1;return e.map((e,r)=>{O(e,t)&&(n=r)}),n}function st(t){return t.length}function at(t,e){if(1===arguments.length)return e=>at(t,e);const n=e.match(t);return null===n?[]:n}function ut(t,e){return 1===arguments.length?e=>ut(t,e):Object.assign({},t||{},e||{})}function ct(t,e){return 1===arguments.length?e=>ct(t,e):e>t?e:t}function lt(t,e,n){return 2===arguments.length?n=>lt(t,e,n):1===arguments.length?(e,n)=>lt(t,e,n):t(n)>t(e)?n:e}function ht(t,e){return 1===arguments.length?e=>ht(t,e):e<t?e:t}function pt(t,e,n){return 2===arguments.length?n=>pt(t,e,n):1===arguments.length?(e,n)=>pt(t,e,n):t(n)<t(e)?n:e}function ft(t,e){return 1===arguments.length?e=>ft(t,e):t%e}function gt(t,e){return 1===arguments.length?e=>gt(t,e):t*e}function mt(t,e){return 1===arguments.length?e=>mt(t,e):0===e.filter(t).length}function yt(t){return!t}function vt(t,e){if(1===arguments.length)return e=>vt(t,e);const n=t<0?e.length+t:t;return"[object String]"===Object.prototype.toString.call(e)?e.charAt(n):e[n]}function _t(t,e){if(1===arguments.length)return e=>_t(t,e);if(null==e)return;const n="string"==typeof t?t.split(","):t,r={};for(const t in e)n.includes(t)||(r[t]=e[t]);return r}function bt(t,...e){const n=t.length;return(...r)=>e.length+r.length>=n?t(...e,...r):bt(t,...e,...r)}function xt(t,e={}){return n=>"Async"===C(t)||"Promise"===C(t)?new Promise((r,o)=>{t(ut(n,e)).then(r).catch(o)}):t(ut(n,e))}function path(t,e){if(1===arguments.length)return e=>path(t,e);if(null==e)return;let n=e,r=0;const o="string"==typeof t?t.split("."):t;for(;r<o.length;){if(null==n)return;n=n[o[r]],r++}return n}const wt=o(function(t,e,n){return P(t,path(e,n))});function Et(t,e){if(1===arguments.length)return e=>Et(t,e);if(null==e)return;const n="string"==typeof t?t.split(","):t,r={};let o=0;for(;o<n.length;)n[o]in e&&(r[n[o]]=e[n[o]]),o++;return r}function Ct(t,e){if(1===arguments.length)return e=>Ct(t,e);if(null==e)return;const n="string"==typeof t?t.split(","):t,r={};let o=0;for(;o<n.length;)n[o]in e?r[n[o]]=e[n[o]]:r[n[o]]=void 0,o++;return r}function Ot(...t){return w(...t.reverse())}function St(t,e){if(1===arguments.length)return e=>St(t,e);const n=[];return map(e=>{void 0!==e[t]&&n.push(e[t])},e),n}function It(t,e){if(1===arguments.length)return e=>It(t,e);if("string"==typeof e)return`${t}${e}`;const n=e.concat();return n.unshift(t),n}function Tt(t,e){return 1===arguments.length?e=>Tt(t,e):e[t]}function Pt(t,e,n){return void 0===e?(e,n)=>Pt(t,e,n):void 0===n?n=>Pt(t,e,n):n[t]===e}function Rt(t,e){if(1===arguments.length)return e=>Rt(t,e);const n=[];for(let i=t;i<e;i++)n.push(i);return n}function Lt(t,e,n){return void 0===e?(e,n)=>Lt(t,e,n):void 0===n?n=>Lt(t,e,n):n.reduce(t,e)}function Mt(t,e){return 1===arguments.length?e=>Mt(t,e):filter((e,i)=>!t(e,i),e)}function Nt(t,e){if(1===arguments.length)return e=>Nt(t,e);return Array(e).fill(t)}function jt(t,e,n){return void 0===e?(e,n)=>jt(t,e,n):void 0===n?n=>jt(t,e,n):n.replace(t,e)}function Dt(t){return t.concat().reverse()}function At(t,e){if(1===arguments.length)return e=>At(t,e);return e.concat().sort(t)}function Ft(t,e){if(1===arguments.length)return e=>Ft(t,e);return e.concat().sort((a,b)=>{const e=t(a),n=t(b);return e<n?-1:e>n?1:0})}function kt(t,e){return 1===arguments.length?e=>kt(t,e):e.split(t)}function Gt(t,e){if(1===arguments.length)return e=>Gt(t,e);const n=t>1?t:1,r=[];let o=0;for(;o<e.length;)r.push(e.slice(o,o+=n));return r}function Bt(t,e){return 1===arguments.length?e=>Bt(t,e):e.startsWith(t)}function zt(t,e){return 1===arguments.length?e=>zt(t,e):t-e}function Ut(){return!0}function qt(t){return M(1,t)}function Vt(t,e){return 1===arguments.length?e=>Vt(t,e):"string"==typeof e?e.slice(0,t):Z(e,0,t)}function Yt(t,e){if(1===arguments.length)return e=>Yt(t,e);const n=e.length;let r=t>n?n:t;return"string"==typeof e?e.slice(n-r):Z(e,r=n-r,n)}function Xt(t,e){return 1===arguments.length?e=>Xt(t,e):(t(e),e)}function Wt(t,e){return 1===arguments.length?e=>Wt(t,e):-1!==e.search(t)}function Ht(t,e){return 1===arguments.length?e=>Ht(t,e):map(t,Rt(0,e))}function $t(t){return t.toLowerCase()}function Kt(t){return t.toString()}function Zt(t){return t.toUpperCase()}function Jt(t){return t.trim()}function Qt(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e];S(r,n)||n.push(r)}return n}function te(t,e){if(1===arguments.length)return e=>te(t,e);let n=-1;const r=e.length,o=[];for(;++n<r;){const r=e[n];h(e=>t(r,e),o)||o.push(r)}return o}function ee(t,e,n){if(void 0===e)return(e,n)=>ee(t,e,n);if(void 0===n)return n=>ee(t,e,n);return n.concat().fill(e,t,t+1)}function ne(t){const e=[];for(const n in t)e.push(t[n]);return e}function ie(t,e){return Lt((e,n)=>S(n,t)?e:e.concat(n),[],e)}function re(t,e){if(1===arguments.length)return e=>re(t,e);for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=[t[i],e[i]];return n}function oe(t,e){return 1===arguments.length?e=>oe(t,e):t.reduce((t,n,i)=>(t[n]=e[i],t),{})}},function(t,e,n){var r=n(139),o={lazyExtend:function(){return n(140).apply(this,arguments)},randomIterator:function(){return r.randomIterator.apply(r,arguments)},random:function(){return r.random.apply(r,arguments)},events:n(105)};o.Graph={version:n(553),graph:n(243),serializer:function(){return{loadFromJSON:n(554),storeToJSON:n(555)}},centrality:n(556),operations:n(560),geom:function(){return{intersect:n(287),intersectRect:n(561)}},webgl:n(190),webglInputEvents:n(288),generator:function(){return n(562)},Input:{domInputManager:n(244),webglInputManager:n(293)},Utils:{dragndrop:n(245),findElementPosition:n(292),timer:n(294),getDimension:n(295),events:n(563)},Layout:{forceDirected:n(296),constant:n(575)},View:{Texture:n(299),webglAtlas:n(300),webglImageNodeProgram:n(576),webglLinkProgram:n(301),webglNodeProgram:n(302),webglLine:n(303),webglSquare:n(304),webglImage:n(577),webglGraphics:n(578),_webglUtil:{parseColor:n(247)},svgGraphics:n(305),renderer:n(583),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:n(298),svg:n(248),BrowserInfo:n(291)},t.exports=o},function(t,e){t.exports="0.8.1"},function(t,e,n){t.exports=function(t,e,n){var c;e=e||o,n=n||o,c="string"==typeof t?JSON.parse(t):t;var i,l=r();if(void 0===c.links||void 0===c.nodes)throw new Error("Cannot load graph without links and nodes");for(i=0;i<c.nodes.length;++i){var h=e(c.nodes[i]);if(!h.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");l.addNode(h.id,h.data)}for(i=0;i<c.links.length;++i){var link=n(c.links[i]);if(!link.hasOwnProperty("fromId")||!link.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");l.addLink(link.fromId,link.toId,link.data)}return l};var r=n(243);function o(t){return t}},function(t,e){t.exports=function(t,e,n){var r={nodes:[],links:[]},o=e||function(t){var e={id:t.id};void 0!==t.data&&(e.data=t.data);return e},c=n||function(link){var t={fromId:link.fromId,toId:link.toId};void 0!==link.data&&(t.data=link.data);return t};return t.forEachNode(function(t){r.nodes.push(o(t))}),t.forEachLink(function(link){r.links.push(c(link))}),JSON.stringify(r)}},function(t,e,n){var r=n(557);function o(g){return l(r.betweenness(g))}function c(g,t){return l(r.degree(g,t))}function l(t){return Object.keys(t).sort(function(e,n){return t[n]-t[e]}).map(function(e){return{key:e,value:t[e]}})}t.exports=function(){return{betweennessCentrality:o,degreeCentrality:c}}},function(t,e,n){t.exports.degree=n(558),t.exports.betweenness=n(559)},function(t,e){function n(t,e){for(var n=0,i=0;i<t.length;i+=1)n+=t[i].toId===e?1:0;return n}function r(t,e){for(var n=0,i=0;i<t.length;i+=1)n+=t[i].fromId===e?1:0;return n}function o(t){return t.length}t.exports=function(t,e){var c,l=Object.create(null);if("both"===(e=(e||"both").toLowerCase())||"inout"===e)c=o;else if("in"===e)c=n;else{if("out"!==e)throw new Error("Expected centrality degree kind is: in, out or both");c=r}return t.forEachNode(function(e){var n=t.getLinks(e.id);l[e.id]=c(n,e.id)}),l}},function(t,e){t.exports=function(t,e){var n,r=[],o=[],c=Object.create(null),l=Object.create(null),h=Object.create(null),f=Object.create(null),d=Object.create(null);t.forEachNode(function(t){d[t.id]=0}),t.forEachNode(function(y){(function(source){for(t.forEachNode(function(t){var e=t.id;c[e]=[],l[e]=-1,h[e]=0}),l[source]=0,h[source]=1,r.push(source);r.length;){var n=r.shift();Object.create(null),o.push(n),t.forEachLinkedNode(n,f,e)}function f(t){var e;e=t.id,-1===l[e]&&(l[e]=l[n]+1,r.push(e)),l[e]===l[n]+1&&(h[e]+=h[n],c[e].push(n))}})(n=y.id),function(){for(t.forEachNode(m);o.length;){for(var e=o.pop(),r=(1+f[e])/h[e],l=c[e],y=0;y<l.length;++y){var v=l[y];f[v]+=h[v]*r}e!==n&&(d[e]+=f[e])}}()}),e||Object.keys(d).forEach(function(t){d[t]/=2});return d;function m(t){f[t.id]=0}}},function(t,e){t.exports=function(){return{density:function(t,e){var n=t.getNodesCount();return 0===n?NaN:e?t.getLinksCount()/(n*(n-1)):2*t.getLinksCount()/(n*(n-1))}}}},function(t,e,n){var r=n(287);t.exports=function(t,e,n,o,c,l,h,f){return r(t,e,t,o,c,l,h,f)||r(t,o,n,o,c,l,h,f)||r(n,o,n,e,c,l,h,f)||r(n,e,t,e,c,l,h,f)}},function(t,e,n){t.exports={ladder:o,complete:function(t){if(!t||t<1)throw new Error("At least two nodes are expected for complete graph");var i,e,g=r();for(i=0;i<t;++i)for(e=i+1;e<t;++e)i!==e&&g.addLink(i,e);return g},completeBipartite:function(t,e){if(!t||!e||t<0||e<0)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var i,n,g=r();for(i=0;i<t;++i)for(n=t;n<t+e;++n)g.addLink(i,n);return g},balancedBinTree:function(t){if(t<0)throw new Error("Invalid number of nodes in balanced tree");var e,g=r(),n=Math.pow(2,t);0===t&&g.addNode(1);for(e=1;e<n;++e){var o=e,c=2*o,l=2*o+1;g.addLink(o,c),g.addLink(o,l)}return g},path:function(t){if(!t||t<0)throw new Error("Invalid number of nodes");var i,g=r();for(g.addNode(0),i=1;i<t;++i)g.addLink(i-1,i);return g},circularLadder:function(t){if(!t||t<0)throw new Error("Invalid number of nodes");var g=o(t);return g.addLink(0,t-1),g.addLink(t,2*t-1),g},grid:function(t,e){if(t<1||e<1)throw new Error("Invalid number of nodes in grid graph");var i,n,g=r();if(1===t&&1===e)return g.addNode(0),g;for(i=0;i<t;++i)for(n=0;n<e;++n){var o=i+n*t;i>0&&g.addLink(o,i-1+n*t),n>0&&g.addLink(o,i+(n-1)*t)}return g},grid3:function(t,e,n){if(t<1||e<1||n<1)throw new Error("Invalid number of nodes in grid3 graph");var i,o,c,g=r();if(1===t&&1===e&&1===n)return g.addNode(0),g;for(c=0;c<n;++c)for(i=0;i<t;++i)for(o=0;o<e;++o){var l=c*t*e,h=i+o*t+l;i>0&&g.addLink(h,i-1+o*t+l),o>0&&g.addLink(h,i+(o-1)*t+l),c>0&&g.addLink(h,i+o*t+(c-1)*t*e)}return g},noLinks:function(t){if(t<0)throw new Error("Number of nodes shoul be >= 0");var i,g=r();for(i=0;i<t;++i)g.addNode(i);return g},wattsStrogatz:function(t,e,p,o){if(e>=t)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var i,c,l=n(139).random(o||42),g=r();for(i=0;i<t;++i)g.addNode(i);for(var h=Math.floor(e/2+1),f=1;f<h;++f)for(i=0;i<t;++i)c=(f+i)%t,g.addLink(i,c);for(f=1;f<h;++f)for(i=0;i<t;++i)if(l.nextDouble()<p){var d=i;c=(f+i)%t;var m=l.next(t),y=m===d||g.hasLink(d,m);if(y&&g.getLinks(d).length===t-1)continue;for(;y;)m=l.next(t),y=m===d||g.hasLink(d,m);var link=g.hasLink(d,c);g.removeLink(link),g.addLink(d,m)}return g}};var r=n(243);function o(t){if(!t||t<0)throw new Error("Invalid number of nodes");var i,g=r();for(i=0;i<t-1;++i)g.addLink(i,i+1),g.addLink(t+i,t+i+1),g.addLink(i,t+i);return g.addLink(t-1,2*t-1),g}},function(t,e,n){var r=n(105);t.exports=function(g){if(console.log("This method is deprecated. Please use Viva.events() instead"),!g)return g;if(void 0!==g.on||void 0!==g.off||void 0!==g.fire)return{extend:function(){return g},on:g.on,stop:g.off};return{extend:function(){var t=r(g);return t.addEventListener=t.on,t},on:g.on,stop:g.off}}},function(t,e){t.exports=function(t,e,n,r,o){this.from=t,this.to=e,this.length=n,this.coeff=r,this.weight="number"==typeof o?o:1}},function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function o(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}t.exports=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=n(139).random(1984),c=n(566),l=n(567),h=n(568),f=t.gravity,d=[],m=new l,y=t.theta,v=[],_=0,x=w();return{insertBodies:function(t){var i,e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE,c=t.length;i=c;for(;i--;){var l=t[i].pos.x,h=t[i].pos.y;l<e&&(e=l),l>r&&(r=l),h<n&&(n=h),h>o&&(o=h)}var f=r-e,d=o-n;f>d?o=n+f:r=e+d;_=0,(x=w()).left=e,x.right=r,x.top=n,x.bottom=o,(i=c-1)>=0&&(x.body=t[i]);for(;i--;)E(t[i])},getRoot:function(){return x},updateBodyForce:function(t){var n,r,o,c,l=d,h=0,m=0,v=1,_=0,w=1;l[0]=x;for(;v;){var E=l[_],body=E.body;v-=1,_+=1;var C=body!==t;body&&C?(r=body.pos.x-t.pos.x,o=body.pos.y-t.pos.y,0===(c=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,c=Math.sqrt(r*r+o*o)),n=f*body.mass*t.mass/(c*c*c),h+=n*r,m+=n*o):C&&(r=E.massX/E.mass-t.pos.x,o=E.massY/E.mass-t.pos.y,0===(c=Math.sqrt(r*r+o*o))&&(r=(e.nextDouble()-.5)/50,o=(e.nextDouble()-.5)/50,c=Math.sqrt(r*r+o*o)),(E.right-E.left)/c<y?(n=f*E.mass*t.mass/(c*c*c),h+=n*r,m+=n*o):(E.quad0&&(l[w]=E.quad0,v+=1,w+=1),E.quad1&&(l[w]=E.quad1,v+=1,w+=1),E.quad2&&(l[w]=E.quad2,v+=1,w+=1),E.quad3&&(l[w]=E.quad3,v+=1,w+=1)))}t.force.x+=h,t.force.y+=m},options:function(t){return t?("number"==typeof t.gravity&&(f=t.gravity),"number"==typeof t.theta&&(y=t.theta),this):{gravity:f,theta:y}}};function w(){var t=v[_];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new c,v[_]=t),++_,t}function E(t){for(m.reset(),m.push(x,t);!m.isEmpty();){var n=m.pop(),c=n.node,body=n.body;if(c.body){var l=c.body;if(c.body=null,h(l.pos,body.pos)){var f=3;do{var d=e.nextDouble(),y=(c.right-c.left)*d,v=(c.bottom-c.top)*d;l.pos.x=c.left+y,l.pos.y=c.top+v,f-=1}while(f>0&&h(l.pos,body.pos));if(0===f&&h(l.pos,body.pos))return}m.push(c,l),m.push(c,body)}else{var _=body.pos.x,E=body.pos.y;c.mass=c.mass+body.mass,c.massX=c.massX+body.mass*_,c.massY=c.massY+body.mass*E;var C=0,O=c.left,S=(c.right+O)/2,I=c.top,T=(c.bottom+I)/2;_>S&&(C+=1,O=S,S=c.right),E>T&&(C+=2,I=T,T=c.bottom);var P=r(c,C);P?m.push(P,body):((P=w()).left=O,P.top=I,P.right=S,P.bottom=T,P.body=body,o(c,C,P))}}}}},function(t,e){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(t,e){function n(){this.stack=[],this.popIdx=0}function r(t,body){this.node=t,this.body=body}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,body){var e=this.stack[this.popIdx];e?(e.node=t,e.body=body):this.stack[this.popIdx]=new r(t,body),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},function(t,e){t.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8}},function(t,e,n){t.exports=function(t,e){var r=n(139).random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:function(){var i=t.length;if(0===i)return;var e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,c=Number.MIN_VALUE;for(;i--;){var body=t[i];body.isPinned?(body.pos.x=body.prevPos.x,body.pos.y=body.prevPos.y):(body.prevPos.x=body.pos.x,body.prevPos.y=body.pos.y),body.pos.x<e&&(e=body.pos.x),body.pos.x>r&&(r=body.pos.x),body.pos.y<n&&(n=body.pos.y),body.pos.y>c&&(c=body.pos.y)}o.x1=e,o.x2=r,o.y1=n,o.y2=c},reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(t){var n=o,c=0,l=0;if(t.length){for(var i=0;i<t.length;++i)c+=t[i].pos.x,l+=t[i].pos.y;c/=t.length,l/=t.length}else c=(n.x1+n.x2)/2,l=(n.y1+n.y2)/2;var h=e.springLength;return{x:c+r.next(h)-h/2,y:l+r.next(h)-h/2}}}}},function(t,e,n){t.exports=function(t){var e=n(140),r={update:function(body){body.force.x-=t.dragCoeff*body.velocity.x,body.force.y-=t.dragCoeff*body.velocity.y}};return n(246)(t=e(t,{dragCoeff:.02}),r,["dragCoeff"]),r}},function(t,e,n){t.exports=function(t){var e=n(140),r=n(139).random(42),o={update:function(e){var n=e.from,o=e.to,c=e.length<0?t.springLength:e.length,l=o.pos.x-n.pos.x,h=o.pos.y-n.pos.y,f=Math.sqrt(l*l+h*h);0===f&&(l=(r.nextDouble()-.5)/50,h=(r.nextDouble()-.5)/50,f=Math.sqrt(l*l+h*h));var d=f-c,m=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*d/f*e.weight;n.force.x+=m*l,n.force.y+=m*h,o.force.x-=m*l,o.force.y-=m*h}};return n(246)(t=e(t,{springCoeff:2e-4,springLength:80}),o,["springCoeff","springLength"]),o}},function(t,e){t.exports=function(t,e){var i,n=0,r=0,o=0,c=0,l=t.length;if(0===l)return 0;for(i=0;i<l;++i){var body=t[i],h=e/body.mass;body.velocity.x+=h*body.force.x,body.velocity.y+=h*body.force.y;var f=body.velocity.x,d=body.velocity.y,m=Math.sqrt(f*f+d*d);m>1&&(body.velocity.x=f/m,body.velocity.y=d/m),n=e*body.velocity.x,o=e*body.velocity.y,body.pos.x+=n,body.pos.y+=o,r+=Math.abs(n),c+=Math.abs(o)}return(r*r+c*c)/l}},function(t,e,n){var r=n(574);t.exports=function(t){return new r.Body(t)}},function(t,e){function n(t,e){this.pos=new r(t,e),this.prevPos=new r(t,e),this.force=new r,this.velocity=new r,this.mass=1}function r(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function o(t,e,n){this.pos=new c(t,e,n),this.prevPos=new c(t,e,n),this.force=new c,this.velocity=new c,this.mass=1}function c(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}t.exports={Body:n,Vector2d:r,Body3d:o,Vector3d:c},n.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},r.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},c.prototype.reset=function(){this.x=this.y=this.z=0}},function(t,e,n){t.exports=function(t,e){e=r(e,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var n=o(e.seed),l=new c(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),h={},f=function(t){return{x:n.next(e.maxX),y:n.next(e.maxY)}},d="function"==typeof Object.create?Object.create(null):{},m=function(t){d[t.id]=f(t),function(t,e){t.x<e.x1&&(e.x1=t.x);t.x>e.x2&&(e.x2=t.x);t.y<e.y1&&(e.y1=t.y);t.y>e.y2&&(e.y2=t.y)}(d[t.id],l)},y=function(){0!==t.getNodesCount()&&(l.x1=Number.MAX_VALUE,l.y1=Number.MAX_VALUE,l.x2=Number.MIN_VALUE,l.y2=Number.MIN_VALUE,t.forEachNode(m))},v=function(link){h[link.id]=link},_=function(t){for(var i=0;i<t.length;++i){var e=t[i];e.node&&("add"===e.changeType?m(e.node):delete d[e.node.id]),e.link&&("add"===e.changeType?v(e.link):delete h[e.link.id])}};return t.forEachNode(m),t.forEachLink(v),t.on("changed",_),{run:function(t){this.step()},step:function(){return y(),!0},getGraphRect:function(){return l},dispose:function(){t.off("change",_)},isNodePinned:function(t){return!0},pinNode:function(t,e){},getNodePosition:x,getLinkPosition:function(t){var link=h[t];return{from:x(link.fromId),to:x(link.toId)}},setNodePosition:function(t,e,n){var r=d[t];r&&(r.x=e,r.y=n)},placeNode:function(t){return"function"==typeof t?(f=t,y(),this):f(t)}};function x(t){return d[t]}};var r=n(140),o=n(139).random,c=n(298)},function(t,e,n){var r=n(300),o=n(190);t.exports=function(){var t,e,n,c,l,h,f,d,m,y,v=18,_=["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n"),x=["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n"),w=1024,E=0,C=new Float32Array(64);return{load:function(f){n=f,l=o(f),t=new r(w),e=l.createProgram(x,_),n.useProgram(e),h=l.getLocations(e,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),n.uniform1f(h.tilesPerTexture,w),n.enableVertexAttribArray(h.vertexPos),n.enableVertexAttribArray(h.customAttributes),c=n.createBuffer()},position:function(t,e){var n=t.id*v;C[n]=e.x-t.size,C[n+1]=e.y-t.size,C[n+2]=4*t._offset,C[n+3]=e.x+t.size,C[n+4]=e.y-t.size,C[n+5]=4*t._offset+1,C[n+6]=e.x-t.size,C[n+7]=e.y+t.size,C[n+8]=4*t._offset+2,C[n+9]=e.x-t.size,C[n+10]=e.y+t.size,C[n+11]=4*t._offset+2,C[n+12]=e.x+t.size,C[n+13]=e.y-t.size,C[n+14]=4*t._offset+1,C[n+15]=e.x+t.size,C[n+16]=e.y+t.size,C[n+17]=4*t._offset+3},createNode:function(e){C=l.extendArray(C,E,v),E+=1;var n=t.getCoordinates(e.src);n?e._offset=n.offset:(e._offset=0,t.load(e.src,function(t){e._offset=t.offset}))},removeNode:function(e){E>0&&(E-=1);e.id<E&&E>0&&(e.src&&t.remove(e.src),l.copyArrayPart(C,e.id*v,E*v,v))},replaceProperties:function(t,e){e._offset=t._offset},updateTransform:function(t){y=!0,m=t},updateSize:function(t,e){f=t,d=e,y=!0},render:function(){n.useProgram(e),n.bindBuffer(n.ARRAY_BUFFER,c),n.bufferData(n.ARRAY_BUFFER,C,n.DYNAMIC_DRAW),y&&(y=!1,n.uniformMatrix4fv(h.transform,!1,m),n.uniform2f(h.screenSize,f,d));n.vertexAttribPointer(h.vertexPos,2,n.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),n.vertexAttribPointer(h.customAttributes,1,n.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),function(){if(t.isDirty){var i,e=t.getTextures();for(i=0;i<e.length;++i)!e[i].isDirty&&e[i].nativeObject||O(e[i],i);t.clearDirty()}}(),n.drawArrays(n.TRIANGLES,0,6*E)}};function O(t,e){t.nativeObject&&n.deleteTexture(t.nativeObject);var r=n.createTexture();n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.canvas),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.generateMipmap(n.TEXTURE_2D),n.uniform1i(h["sampler"+e],e),t.nativeObject=r}}},function(t,e){t.exports=function(t,e){return{_texture:0,_offset:0,size:"number"==typeof t?t:32,src:e}}},function(t,e,n){t.exports=function(t){t=d(t,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var e,n,m,y,v,_,x,w,E=0,C=0,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],S=[],I=[],T={},P={},R=o(),L=c(),M=function(t){return l()},N=function(link){return h(3014898687)},j=function(){R.updateTransform(O),L.updateTransform(O)},D=function(){O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},A=function(){e&&n&&(y=n.width=Math.max(e.offsetWidth,1),v=n.height=Math.max(e.offsetHeight,1),m&&m.viewport(0,0,y,v),R&&R.updateSize(y/2,v/2),L&&L.updateSize(y/2,v/2))};n=window.document.createElement("canvas");var F={getLinkUI:function(t){return P[t]},getNodeUI:function(t){return T[t]},node:function(t){if("function"==typeof t)return M=t,this},link:function(t){if("function"==typeof t)return N=t,this},placeNode:function(t){return _=t,this},placeLink:function(t){return x=t,this},inputManager:r,beginRender:function(){},endRender:function(){C>0&&R.render(),E>0&&L.render()},bringLinkToFront:function(t){var e,n,r=R.getFrontLinkId();R.bringToFront(t),r>t.id&&(e=t.id,n=I[r],I[r]=I[e],I[r].id=r,I[e]=n,I[e].id=e)},graphCenterChanged:function(t,e){O[12]=2*t/y-1,O[13]=1-2*e/v,j()},addLink:function(link,t){var e=C++,n=N(link);return n.id=e,n.pos=t,R.createLink(n),I[e]=n,P[link.id]=n,n},addNode:function(t,e){var n=E++,r=M(t);return r.id=n,r.position=e,r.node=t,L.createNode(r),S[n]=r,T[t.id]=r,r},translateRel:function(t,e){O[12]+=2*O[0]*t/y/O[0],O[13]-=2*O[5]*e/v/O[5],j()},scale:function(t,e){var n=2*e.x/y-1,r=1-2*e.y/v;return n-=O[12],r-=O[13],O[12]+=n*(1-t),O[13]+=r*(1-t),O[0]*=t,O[5]*=t,j(),this.fire("rescaled"),O[0]},resetScale:function(){return D(),m&&(A(),j()),this},updateSize:A,init:function(r){var o={};if(t.preserveDrawingBuffer&&(o.preserveDrawingBuffer=!0),e=r,A(),D(),e.appendChild(n),!(m=n.getContext("experimental-webgl",o))){var c="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(c),c}if(t.enableBlending&&(m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA),m.enable(m.BLEND)),t.clearColor){var l=t.clearColorValue;m.clearColor(l.r,l.g,l.b,l.a),this.beginRender=function(){m.clear(m.COLOR_BUFFER_BIT)}}R.load(m),R.updateSize(y/2,v/2),L.load(m),L.updateSize(y/2,v/2),j(),"function"==typeof w&&w(n)},release:function(t){n&&t&&t.removeChild(n)},isSupported:function(){var t=window.document.createElement("canvas"),e=t&&t.getContext&&t.getContext("experimental-webgl");return e},releaseLink:function(link){C>0&&(C-=1);var t=P[link.id];delete P[link.id],R.removeLink(t);var e=t.id;if(e<C){if(0===C||C===e)return;var n=I[C];I[e]=n,n.id=e}},releaseNode:function(t){E>0&&(E-=1);var e=T[t.id];delete T[t.id],L.removeNode(e);var n=e.id;if(n<E){if(0===E||E===n)return;var r=S[E];S[n]=r,r.id=n,L.replaceProperties(e,r)}},renderNodes:function(){for(var t={x:0,y:0},i=0;i<E;++i){var e=S[i];t.x=e.position.x,t.y=e.position.y,_&&_(e,t),L.position(e,t)}},renderLinks:function(){if(!this.omitLinksRendering)for(var t={x:0,y:0},e={x:0,y:0},i=0;i<C;++i){var n=I[i],r=n.pos.from;e.x=r.x,e.y=-r.y,r=n.pos.to,t.x=r.x,t.y=-r.y,x&&x(n,e,t),R.position(n,e,t)}},getGraphicsRoot:function(t){return"function"==typeof t&&(n?t(n):w=t),n},setNodeProgram:function(t){if(!m&&t)L=t;else if(t)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(t){if(!m&&t)R=t;else if(t)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(p){return p.x=2*p.x/y-1,p.y=1-2*p.y/v,p.x=(p.x-O[12])/O[0],p.y=(p.y-O[13])/O[5],p.x=p.x*(y/2),p.y=p.y*(-v/2),p},transformGraphToClientCoordinates:function(p){return p.x=p.x/(y/2),p.y=p.y/(-v/2),p.x=p.x*O[0]+O[12],p.y=p.y*O[5]+O[13],p.x=(p.x+1)*y/2,p.y=(1-p.y)*v/2,p},getNodeAtClientPos:function(t,e){if("function"!=typeof e)return null;this.transformClientToGraphCoordinates(t);for(var i=0;i<E;++i)if(e(S[i],t.x,t.y))return S[i].node;return null}};return f(F),F};var r=n(293),o=n(301),c=n(302),l=n(304),h=n(303),f=n(105),d=n(140)},function(t,e,n){var r=n(580),svg=n(248);t.exports=function(t){try{return t=function(text){if(!text)return;var t=text.match(/^<\w+/);if(t){var e=t[0].length;return text.substr(0,e)+' xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" '+text.substr(e)}throw new Error("Cannot parse input text: invalid xml?")}(t),svg(r.parseFromString(t,"text/xml").documentElement)}catch(t){throw t}}},function(t,e){function n(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}t.exports=function(){if("undefined"==typeof DOMParser)return{parseFromString:n};return new DOMParser}()},function(t,e){t.exports=function(t){var e=Object.create(null);return function t(e,o){var c=e.nodeType,l=1===c||3===c;if(l){var i;if(e.hasChildNodes()){var h=e.childNodes;for(i=0;i<h.length;++i)t(h[i],o)}if(3===c&&function(element,t){var e=element.nodeValue;if(e){var r=e.match(n);if(r){var o=r[1],c=(o.indexOf("."),t[o]);c?c.push(l):c=t[o]=[l]}}function l(t){element.nodeValue=t[o]}}(e,o),e.attributes){var f=e.attributes;for(i=0;i<f.length;++i)r(f[i],e,o)}}}(t,e),{link:function(t){function n(e){e(t)}Object.keys(e).forEach(function(t){e[t].forEach(n)})}}};var n=/{{(.+?)}}/;function r(t,element,e){var r=t.value;if(r){var o=r.match(n);if(o){var c=t.localName,l=o[1];if(!(l.indexOf(".")<0))throw new Error("simplesvg currently does not support nested bindings");var h=e[l];h?h.push(f):h=e[l]=[f]}}function f(t){element.setAttributeNS(null,c,t[l])}}},function(t,e){r.removeEventListener=function(t,e,r,f){return(n=n||(document.addEventListener?{add:o,rm:c}:{add:l,rm:h})).rm(t,e,r,f)},r.addEventListener=r,t.exports=r;var n=null;function r(t,e,r,f){return(n=n||(document.addEventListener?{add:o,rm:c}:{add:l,rm:h})).add(t,e,r,f)}function o(t,e,n,r){t.addEventListener(e,n,r)}function c(t,e,n,r){t.removeEventListener(e,n,r)}function l(t,e,n,r){if(r)throw new Error("cannot useCapture in oldIE");t.attachEvent("on"+e,n)}function h(t,e,n,r){t.detachEvent("on"+e,n)}},function(t,e,n){t.exports=function(t,e){var n,y,v,_=30,x=(e=e||{}).layout,w=e.graphics,E=e.container,C=void 0===e.interactive||e.interactive,O=!1,S=!0,I=!1,T=!1,P=!1,R={offsetX:0,offsetY:0,scale:1},L=r({});return{run:function(r){return O||(!function(){E=E||window.document.body,x=x||o(t,{springLength:80,springCoeff:2e-4}),w=w||c(t,{container:E}),e.hasOwnProperty("renderLinks")||(e.renderLinks=!0);e.prerender=e.prerender||0,n=(w.inputManager||h)(t,w)}(),function(){if("number"==typeof e.prerender&&e.prerender>0)for(var i=0;i<e.prerender;i+=1)x.step()}(),w.init(E),t.forEachNode(F),e.renderLinks&&t.forEachLink(G),A(),function(){l.on("resize",W),H(),M("drag")&&(v=m(E)).onDrag(function(t,e){w.translateRel(e.x,e.y),N(),L.fire("drag",e)});M("scroll")&&(v||(v=m(E)),v.onScroll(function(t,e,n){K(e<0,n)}));t.forEachNode(z),$(),t.on("changed",X)}(),O=!0),function(t){if(y)return;y=f(void 0!==t?function(){if((t-=1)<0){return!1}return j()}:j,_)}(r),this},reset:function(){w.resetScale(),A(),R.scale=1},pause:function(){P=!0,y.stop()},resume:function(){P=!1,y.restart()},rerender:function(){return N(),this},zoomOut:function(){return K(!0)},zoomIn:function(){return K(!1)},getTransform:function(){return R},moveTo:function(t,e){w.graphCenterChanged(R.offsetX-t*R.scale,R.offsetY-e*R.scale),N()},getGraphics:function(){return w},dispose:function(){O=!1,$(),H(),l.off("resize",W),L.off(),y.stop(),t.forEachLink(function(link){e.renderLinks&&B(link)}),t.forEachNode(function(t){U(t),k(t)}),x.dispose(),w.release(E)},on:function(t,e){return L.on(t,e),this},off:function(t,e){return L.off(t,e),this}};function M(t){return"string"==typeof C?C.indexOf(t)>=0:"boolean"!=typeof C||C}function N(){w.beginRender(),e.renderLinks&&w.renderLinks(),w.renderNodes(),w.endRender()}function j(){return I=x.step()&&!T,N(),!I}function D(){P||(I=!1,y.restart())}function A(){var t=x.getGraphRect(),e=d(E),n=(t.x2+t.x1)/2,r=(t.y2+t.y1)/2;R.offsetX=e.width/2-(n*R.scale-n),R.offsetY=e.height/2-(r*R.scale-r),w.graphCenterChanged(R.offsetX,R.offsetY),S=!1}function F(t){var e=x.getNodePosition(t.id);w.addNode(t,e)}function k(t){w.releaseNode(t)}function G(link){var t=x.getLinkPosition(link.id);w.addLink(link,t)}function B(link){w.releaseLink(link)}function z(t){if(M("node")){var e=!1;n.bindDragNDrop(t,{onStart:function(){e=x.isNodePinned(t),x.pinNode(t,!0),T=!0,D()},onDrag:function(e,n){var r=x.getNodePosition(t.id);x.setNodePosition(t.id,r.x+n.x/R.scale,r.y+n.y/R.scale),T=!0,N()},onStop:function(){x.pinNode(t,e),T=!1}})}}function U(t){n.bindDragNDrop(t,null)}function V(e){var n=e.node;"add"===e.changeType?(F(n),z(n),S&&A()):"remove"===e.changeType?(U(n),k(n),0===t.getNodesCount()&&(S=!0)):"update"===e.changeType&&(U(n),k(n),F(n),z(n))}function Y(t){var link=t.link;if("add"===t.changeType)e.renderLinks&&G(link);else if("remove"===t.changeType)e.renderLinks&&B(link);else if("update"===t.changeType)throw"Update type is not implemented. TODO: Implement me!"}function X(t){var i,e;for(i=0;i<t.length;i+=1)(e=t[i]).node?V(e):e.link&&Y(e);D()}function W(){A(),j()}function H(){v&&(v.release(),v=null)}function $(){t.off("changed",X)}function K(t,e){if(!e){var n=d(E);e={x:n.width/2,y:n.height/2}}var r=Math.pow(1.4,t?-.2:.2);return R.scale=w.scale(r,e),N(),L.fire("scale",R.scale),R.scale}};var r=n(105),o=n(296),c=n(305),l=n(584),h=n(244),f=n(294),d=n(295),m=n(245)},function(t,e,n){var r=n(290);function o(t,e){window.addEventListener(t,e)}function c(t,e){window.removeEventListener(t,e)}t.exports=function(){if("undefined"==typeof window)return r;return{on:o,off:c}}()},,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()}}]]);